{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\app-toB\\file\\file.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\app-toB\\file\\file.vue","mtime":1652172213783},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICB1cGxvYWRGaWxlLA0KICBjaGVja09zc1NldCwNCiAgZ2V0VXNlckZpbGVMaXN0RGF0YSwNCiAgY29weVVzZXJGaWxlLA0KICBtb3ZlRmlsZSwNCiAgcmVuYW1lVXNlckZpbGUsDQogIHRyYXNoRmlsZSwNCiAgY29sbGVjdEZpbGUsDQp9IGZyb20gIkAvYXBpL2luZGV4IjsNCmltcG9ydCBmaWxlQ2F0ZWdvcnkgZnJvbSAiQC92aWV3cy9hcHAtdG9CL2ZpbGUvZmlsZUNhdGVnb3J5IjsNCmltcG9ydCB0cmFzaCBmcm9tICIuL3RyYXNoLnZ1ZSI7DQppbXBvcnQgRFBsYXllciBmcm9tICJkcGxheWVyIjsNCmltcG9ydCAidmlld2VyanMvZGlzdC92aWV3ZXIuY3NzIjsNCmltcG9ydCBWaWV3ZXIgZnJvbSAidmlld2VyanMiOw0KaW1wb3J0IHsgc2hvcnRjdXRzIH0gZnJvbSAiQC9saWJzL3Nob3J0Y3V0cyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJmaWxlIiwNCiAgY29tcG9uZW50czogew0KICAgIGZpbGVDYXRlZ29yeSwNCiAgICB0cmFzaCwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2hvd1RyYXNoOiBmYWxzZSwNCiAgICAgIHVwbG9hZERhdGE6IHt9LA0KICAgICAgY3VyckNhdGU6ICIiLA0KICAgICAgZXhwYW5kOiB0cnVlLA0KICAgICAgc3BhbjogMTgsDQogICAgICBleHBhbmRJY29uOiAiaW9zLWFycm93LWJhY2siLA0KICAgICAgZHA6IG51bGwsDQogICAgICB1cGxvYWRGaWxlVXJsOiB1cGxvYWRGaWxlLA0KICAgICAgb3BlblNlYXJjaDogdHJ1ZSwNCiAgICAgIG9wZW5UaXA6IHRydWUsDQogICAgICBhY2Nlc3NUb2tlbjoge30sIC8vIOS4iuS8oHRva2Vu6Ym05p2DDQogICAgICBsb2FkaW5nOiBmYWxzZSwgLy8g6KGo5Y2V5Yqg6L2954q25oCBDQogICAgICBmaWxlVHlwZTogImFsbCIsDQogICAgICBzaG93VHlwZTogImxpc3QiLA0KICAgICAgbW9kYWxWaXNpYmxlOiBmYWxzZSwgLy8g5re75Yqg5oiW57yW6L6R5pi+56S6DQogICAgICBtb3ZlVmlzaWJsZTogZmFsc2UsDQogICAgICB1cGxvYWRWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHZpZGVvVmlzaWJsZTogZmFsc2UsDQogICAgICBwaWNWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHBpY1RpdGxlOiAiIiwNCiAgICAgIHZpZGVvVGl0bGU6ICIiLA0KICAgICAgbW9kYWxUaXRsZTogIiIsIC8vIOa3u+WKoOaIlue8lui+keagh+mimA0KICAgICAgbW92ZUNhdGVnb3J5SWQ6ICIiLA0KICAgICAgbW92ZUZpbGVJZHM6IFtdLA0KICAgICAgc2VhcmNoRm9ybTogew0KICAgICAgICAvLyDmkJzntKLmoYblr7nlupRkYXRh5a+56LGhDQogICAgICAgIHRpdGxlOiAiIiwNCiAgICAgICAgdHlwZTogIiIsDQogICAgICAgIHBhZ2VOdW1iZXI6IDEsIC8vIOW9k+WJjemhteaVsA0KICAgICAgICBwYWdlU2l6ZTogNSwgLy8g6aG16Z2i5aSn5bCPDQogICAgICAgIHNvcnQ6ICJjcmVhdGVUaW1lIiwgLy8g6buY6K6k5o6S5bqP5a2X5q61DQogICAgICAgIG9yZGVyOiAiZGVzYyIsIC8vIOm7mOiupOaOkuW6j+aWueW8jw0KICAgICAgICBzdGFydERhdGU6ICIiLCAvLyDotbflp4vml7bpl7QNCiAgICAgICAgZW5kRGF0ZTogIiIsIC8vIOe7iOatouaXtumXtA0KICAgICAgICBjYXRlZ29yeUlkOiAiMCIsDQogICAgICAgIGlzQ29sbGVjdDogbnVsbCwNCiAgICAgIH0sDQogICAgICBzZWxlY3REYXRlOiBudWxsLCAvLyDpgInmi6nml6XmnJ/nu5Hlrpptb2RhbA0KICAgICAgb3B0aW9uczogew0KICAgICAgICBzaG9ydGN1dHM6IHNob3J0Y3V0cywNCiAgICAgIH0sDQogICAgICBmb3JtOiB7DQogICAgICAgIHRpdGxlOiAiIiwNCiAgICAgICAgZmtleTogIiIsDQogICAgICB9LA0KICAgICAgZmlsZToge30sDQogICAgICAvLyDooajljZXpqozor4Hop4TliJkNCiAgICAgIGZvcm1WYWxpZGF0ZTogew0KICAgICAgICB0aXRsZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfV0sDQogICAgICAgIGZrZXk6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH1dLA0KICAgICAgfSwNCiAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLCAvLyDmt7vliqDmiJbnvJbovpHmj5DkuqTnirbmgIENCiAgICAgIHNlbGVjdExpc3Q6IFtdLCAvLyDlpJrpgInmlbDmja4NCiAgICAgIHRvdGFsU2l6ZTogIiIsIC8vIOaWh+S7tuWkp+Wwj+e7n+iuoQ0KICAgICAgY29sdW1uczogWw0KICAgICAgICAvLyDooajlpLQNCiAgICAgICAgew0KICAgICAgICAgIHR5cGU6ICJzZWxlY3Rpb24iLA0KICAgICAgICAgIHdpZHRoOiA2MCwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0eXBlOiAiaW5kZXgiLA0KICAgICAgICAgIHdpZHRoOiA2MCwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIuaWh+S7tuWQjSIsDQogICAgICAgICAga2V5OiAidGl0bGUiLA0KICAgICAgICAgIG1pbldpZHRoOiAxNTAsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7DQogICAgICAgICAgICBpZiAocGFyYW1zLnJvdy5pc0NvbGxlY3QpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFsNCiAgICAgICAgICAgICAgICBoKCJzcGFuIiwgcGFyYW1zLnJvdy50aXRsZSksDQogICAgICAgICAgICAgICAgaCgiSWNvbiIsIHsNCiAgICAgICAgICAgICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICI1cHgiLA0KICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJtZC1zdGFyIiwNCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICIjZmZjNjBhIiwNCiAgICAgICAgICAgICAgICAgICAgc2l6ZTogIjE4IiwNCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgIF0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGgoInNwYW4iLCBwYXJhbXMucm93LnRpdGxlKTsNCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLnvKnnlaXlm74o54K55Ye76aKE6KeIKSIsDQogICAgICAgICAga2V5OiAidXJsIiwNCiAgICAgICAgICB3aWR0aDogMTUwLA0KICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICByZW5kZXI6IChoLCBwYXJhbXMpID0+IHsNCiAgICAgICAgICAgIGlmIChwYXJhbXMucm93LnR5cGUuaW5jbHVkZXMoImltYWdlIikgPiAwKSB7DQogICAgICAgICAgICAgIHJldHVybiBoKCJpbWciLCB7DQogICAgICAgICAgICAgICAgYXR0cnM6IHsNCiAgICAgICAgICAgICAgICAgIHNyYzogcGFyYW1zLnJvdy51cmwsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBzdHlsZTogew0KICAgICAgICAgICAgICAgICAgY3Vyc29yOiAiem9vbS1pbiIsDQogICAgICAgICAgICAgICAgICB3aWR0aDogIjgwcHgiLA0KICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAiNjBweCIsDQogICAgICAgICAgICAgICAgICBtYXJnaW46ICIxMHB4IDAiLA0KICAgICAgICAgICAgICAgICAgIm9iamVjdC1maXQiOiAiY29udGFpbiIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBvbjogew0KICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UGljKHBhcmFtcy5yb3cpOw0KICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLnJvdy50eXBlLmluY2x1ZGVzKCJ2aWRlbyIpID4gMCkgew0KICAgICAgICAgICAgICByZXR1cm4gaCgNCiAgICAgICAgICAgICAgICAidmlkZW8iLA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogInBvaW50ZXIiLA0KICAgICAgICAgICAgICAgICAgICB3aWR0aDogIjgwcHgiLA0KICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICI2MHB4IiwNCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAiMTBweCAwIiwNCiAgICAgICAgICAgICAgICAgICAgIm9iamVjdC1maXQiOiAiY29udGFpbiIsDQogICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgb246IHsNCiAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dWaWRlbyhwYXJhbXMucm93KTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgICBoKCJzb3VyY2UiLCB7DQogICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgc3JjOiBwYXJhbXMucm93LnVybCArICIjdD0xIiwNCiAgICAgICAgICAgICAgICAgICAgICBwcmVsb2FkOiAibWV0YWRhdGEiLA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMucm93LnR5cGUuaW5jbHVkZXMoIndvcmQiKSA+IDApIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGgoImltZyIsIHsNCiAgICAgICAgICAgICAgICBhdHRyczogew0KICAgICAgICAgICAgICAgICAgc3JjOiByZXF1aXJlKCJAL2Fzc2V0cy9pY29uL3dvcmQucG5nIiksDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBzdHlsZTogew0KICAgICAgICAgICAgICAgICAgY3Vyc29yOiAiem9vbS1pbiIsDQogICAgICAgICAgICAgICAgICB3aWR0aDogIjgwcHgiLA0KICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAiNjBweCIsDQogICAgICAgICAgICAgICAgICBtYXJnaW46ICIxMHB4IDAiLA0KICAgICAgICAgICAgICAgICAgIm9iamVjdC1maXQiOiAiY29udGFpbiIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBvbjogew0KICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93T2ZmaWNlKHBhcmFtcy5yb3cpOw0KICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgIHBhcmFtcy5yb3cuZmtleS5pbmNsdWRlcygiLnhsc3giKSA+IDAgfHwNCiAgICAgICAgICAgICAgcGFyYW1zLnJvdy5ma2V5LmluY2x1ZGVzKCIueGxzIikgPiAwIHx8DQogICAgICAgICAgICAgIHBhcmFtcy5yb3cudHlwZS5pbmNsdWRlcygic2hlZXQiKSA+IDANCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICByZXR1cm4gaCgiaW1nIiwgew0KICAgICAgICAgICAgICAgIGF0dHJzOiB7DQogICAgICAgICAgICAgICAgICBzcmM6IHJlcXVpcmUoIkAvYXNzZXRzL2ljb24veGxzLnBuZyIpLA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgc3R5bGU6IHsNCiAgICAgICAgICAgICAgICAgIGN1cnNvcjogInpvb20taW4iLA0KICAgICAgICAgICAgICAgICAgd2lkdGg6ICI4MHB4IiwNCiAgICAgICAgICAgICAgICAgIGhlaWdodDogIjYwcHgiLA0KICAgICAgICAgICAgICAgICAgbWFyZ2luOiAiMTBweCAwIiwNCiAgICAgICAgICAgICAgICAgICJvYmplY3QtZml0IjogImNvbnRhaW4iLA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgb246IHsNCiAgICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd09mZmljZShwYXJhbXMucm93KTsNCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5yb3cudHlwZS5pbmNsdWRlcygicHJlc2VudGF0aW9uIikgPiAwKSB7DQogICAgICAgICAgICAgIHJldHVybiBoKCJpbWciLCB7DQogICAgICAgICAgICAgICAgYXR0cnM6IHsNCiAgICAgICAgICAgICAgICAgIHNyYzogcmVxdWlyZSgiQC9hc3NldHMvaWNvbi9wcHQucG5nIiksDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBzdHlsZTogew0KICAgICAgICAgICAgICAgICAgY3Vyc29yOiAiem9vbS1pbiIsDQogICAgICAgICAgICAgICAgICB3aWR0aDogIjgwcHgiLA0KICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAiNjBweCIsDQogICAgICAgICAgICAgICAgICBtYXJnaW46ICIxMHB4IDAiLA0KICAgICAgICAgICAgICAgICAgIm9iamVjdC1maXQiOiAiY29udGFpbiIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBvbjogew0KICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93T2ZmaWNlKHBhcmFtcy5yb3cpOw0KICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLnJvdy50eXBlLmluY2x1ZGVzKCJwZGYiKSA+IDApIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGgoImltZyIsIHsNCiAgICAgICAgICAgICAgICBhdHRyczogew0KICAgICAgICAgICAgICAgICAgc3JjOiByZXF1aXJlKCJAL2Fzc2V0cy9pY29uL3BkZi5wbmciKSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgICAgICAgICBjdXJzb3I6ICJ6b29tLWluIiwNCiAgICAgICAgICAgICAgICAgIHdpZHRoOiAiNjBweCIsDQogICAgICAgICAgICAgICAgICBtYXJnaW46ICIxMHB4IDAiLA0KICAgICAgICAgICAgICAgICAgIm9iamVjdC1maXQiOiAiY29udGFpbiIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBvbjogew0KICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RmlsZShwYXJhbXMucm93KTsNCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5yb3cudHlwZS5pbmNsdWRlcygiYXVkaW8iKSA+IDApIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGgoImltZyIsIHsNCiAgICAgICAgICAgICAgICBhdHRyczogew0KICAgICAgICAgICAgICAgICAgc3JjOiByZXF1aXJlKCJAL2Fzc2V0cy9pY29uL21wMy5wbmciKSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgICAgICAgICBjdXJzb3I6ICJ6b29tLWluIiwNCiAgICAgICAgICAgICAgICAgIHdpZHRoOiAiNjBweCIsDQogICAgICAgICAgICAgICAgICBtYXJnaW46ICIxMHB4IDAiLA0KICAgICAgICAgICAgICAgICAgIm9iamVjdC1maXQiOiAiY29udGFpbiIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBvbjogew0KICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93VmlkZW8ocGFyYW1zLnJvdyk7DQogICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgcGFyYW1zLnJvdy50eXBlLmluY2x1ZGVzKCJ6aXAiKSA+IDAgfHwNCiAgICAgICAgICAgICAgcGFyYW1zLnJvdy50eXBlLmluY2x1ZGVzKCJyYXIiKSA+IDAgfHwNCiAgICAgICAgICAgICAgcGFyYW1zLnJvdy50eXBlLmluY2x1ZGVzKCI3eiIpID4gMA0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgIHJldHVybiBoKCJpbWciLCB7DQogICAgICAgICAgICAgICAgYXR0cnM6IHsNCiAgICAgICAgICAgICAgICAgIHNyYzogcmVxdWlyZSgiQC9hc3NldHMvaWNvbi96aXAucG5nIiksDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBzdHlsZTogew0KICAgICAgICAgICAgICAgICAgd2lkdGg6ICI2MHB4IiwNCiAgICAgICAgICAgICAgICAgIG1hcmdpbjogIjEwcHggMCIsDQogICAgICAgICAgICAgICAgICAib2JqZWN0LWZpdCI6ICJjb250YWluIiwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIG9uOiB7DQogICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuaaguS4jeaUr+aMgemihOiniCIpOw0KICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgIHBhcmFtcy5yb3cudHlwZS5pbmNsdWRlcygidGV4dCIpID4gMCB8fA0KICAgICAgICAgICAgICBwYXJhbXMucm93LnR5cGUuaW5jbHVkZXMoIm9jdGV0IikgPiAwDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGgoImltZyIsIHsNCiAgICAgICAgICAgICAgICBhdHRyczogew0KICAgICAgICAgICAgICAgICAgc3JjOiByZXF1aXJlKCJAL2Fzc2V0cy9pY29uL2ZpbGUucG5nIiksDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBzdHlsZTogew0KICAgICAgICAgICAgICAgICAgY3Vyc29yOiAiem9vbS1pbiIsDQogICAgICAgICAgICAgICAgICB3aWR0aDogIjU1cHgiLA0KICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAiNjBweCIsDQogICAgICAgICAgICAgICAgICBtYXJnaW46ICIxMHB4IDAiLA0KICAgICAgICAgICAgICAgICAgIm9iamVjdC1maXQiOiAiY29udGFpbiIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBvbjogew0KICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RmlsZShwYXJhbXMucm93KTsNCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICByZXR1cm4gaCgiaW1nIiwgew0KICAgICAgICAgICAgICAgIGF0dHJzOiB7DQogICAgICAgICAgICAgICAgICBzcmM6IHJlcXVpcmUoIkAvYXNzZXRzL2ljb24vZmlsZS5wbmciKSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgICAgICAgICB3aWR0aDogIjU1cHgiLA0KICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAiNjBweCIsDQogICAgICAgICAgICAgICAgICBtYXJnaW46ICIxMHB4IDAiLA0KICAgICAgICAgICAgICAgICAgIm9iamVjdC1maXQiOiAiY29udGFpbiIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBvbjogew0KICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLmmoLkuI3mlK/mjIHpooTop4giKTsNCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5paH5Lu257G75Z6LIiwNCiAgICAgICAgICBrZXk6ICJ0eXBlIiwNCiAgICAgICAgICB3aWR0aDogMTIwLA0KICAgICAgICAgIHNvcnRhYmxlOiB0cnVlLA0KICAgICAgICAgIHRvb2x0aXA6IHRydWUsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIuaWh+S7tuWkp+WwjyIsDQogICAgICAgICAga2V5OiAic2l6ZSIsDQogICAgICAgICAgd2lkdGg6IDEyMCwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7DQogICAgICAgICAgICBsZXQgbSA9IHRoaXMudXRpbC5nZXRGaWxlU2l6ZShwYXJhbXMucm93LnNpemUpOw0KICAgICAgICAgICAgcmV0dXJuIGgoInNwYW4iLCBtKTsNCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLliJvlu7rml7bpl7QiLA0KICAgICAgICAgIGtleTogImNyZWF0ZVRpbWUiLA0KICAgICAgICAgIHdpZHRoOiAxODAsDQogICAgICAgICAgc29ydGFibGU6IHRydWUsDQogICAgICAgICAgc29ydFR5cGU6ICJkZXNjIiwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5pON5L2cIiwNCiAgICAgICAgICBrZXk6ICJhY3Rpb24iLA0KICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICBmaXhlZDogInJpZ2h0IiwNCiAgICAgICAgICB3aWR0aDogMTcwLA0KICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFsNCiAgICAgICAgICAgICAgaCgNCiAgICAgICAgICAgICAgICAiYSIsDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgb246IHsNCiAgICAgICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvd25sb2FkKHBhcmFtcy5yb3cpOw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICLkuIvovb0iDQogICAgICAgICAgICAgICksDQogICAgICAgICAgICAgIGgoIkRpdmlkZXIiLCB7DQogICAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJ2ZXJ0aWNhbCIsDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgIGgoDQogICAgICAgICAgICAgICAgIkRyb3Bkb3duIiwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICBwcm9wczogeyB0cmFuc2ZlcjogdHJ1ZSB9LA0KICAgICAgICAgICAgICAgICAgb246IHsNCiAgICAgICAgICAgICAgICAgICAgIm9uLWNsaWNrIjogKHYpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURyb3BEb3duKHBhcmFtcy5yb3csIHYpOw0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgICAgIGgoImEiLCBbDQogICAgICAgICAgICAgICAgICAgICLmm7TlpJrmk43kvZwiLA0KICAgICAgICAgICAgICAgICAgICBoKCJJY29uIiwgew0KICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiaW9zLWFycm93LWRvd24iLA0KICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgICAgICAgXSksDQogICAgICAgICAgICAgICAgICBoKCJEcm9wZG93bk1lbnUiLCB7IHNsb3Q6ICJsaXN0IiB9LCBbDQogICAgICAgICAgICAgICAgICAgIGgoIkRyb3Bkb3duSXRlbSIsIHsgcHJvcHM6IHsgbmFtZTogInNoYXJlIiB9IH0sICLliIbkuqsiKSwNCiAgICAgICAgICAgICAgICAgICAgaCgNCiAgICAgICAgICAgICAgICAgICAgICAiRHJvcGRvd25JdGVtIiwNCiAgICAgICAgICAgICAgICAgICAgICB7IHByb3BzOiB7IG5hbWU6ICJjb2xsZWN0IiB9IH0sDQogICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnJvdy5pc0NvbGxlY3QgPyAi5Y+W5raI5pS26JePIiA6ICLmlLbol48iDQogICAgICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgICAgIGgoIkRyb3Bkb3duSXRlbSIsIHsgcHJvcHM6IHsgbmFtZTogInJlbmFtZSIgfSB9LCAi6YeN5ZG95ZCNIiksDQogICAgICAgICAgICAgICAgICAgIGgoIkRyb3Bkb3duSXRlbSIsIHsgcHJvcHM6IHsgbmFtZTogIm1vdmUiIH0gfSwgIuenu+WKqCIpLA0KICAgICAgICAgICAgICAgICAgICBoKCJEcm9wZG93bkl0ZW0iLCB7IHByb3BzOiB7IG5hbWU6ICJjb3B5IiB9IH0sICLlpI3liLYiKSwNCiAgICAgICAgICAgICAgICAgICAgaCgiRHJvcGRvd25JdGVtIiwgeyBwcm9wczogeyBuYW1lOiAicmVtb3ZlIiB9IH0sICLliKDpmaQiKSwNCiAgICAgICAgICAgICAgICAgIF0pLA0KICAgICAgICAgICAgICAgIF0NCiAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIF0pOw0KICAgICAgICAgIH0sDQogICAgICAgIH0sDQogICAgICBdLA0KICAgICAgZGF0YTogW10sIC8vIOihqOWNleaVsOaNrg0KICAgICAgdG90YWw6IDAsIC8vIOihqOWNleaVsOaNruaAu+aVsA0KICAgICAgcGFnZVNpemVPcHRzOiBbNSwgMTAsIDIwXSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlRHJvcGRvd24obmFtZSkgew0KICAgICAgaWYgKG5hbWUgPT0gIm1vdmVBbGwiKSB7DQogICAgICAgIHRoaXMubW92ZUFsbCgpOw0KICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJyZW1vdmVBbGwiKSB7DQogICAgICAgIHRoaXMucmVtb3ZlQWxsKCk7DQogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gInRpdGxlIikgew0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0uc29ydCA9ICJ0aXRsZSI7DQogICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAic2l6ZSIpIHsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnNvcnQgPSAic2l6ZSI7DQogICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAidHlwZSIpIHsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnNvcnQgPSAidHlwZSI7DQogICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAidGltZSIpIHsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnNvcnQgPSAiY3JlYXRlVGltZSI7DQogICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGluaXQoKSB7DQogICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gew0KICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5nZXRTdG9yZSgiYWNjZXNzVG9rZW4iKSwNCiAgICAgIH07DQogICAgICBjaGVja09zc1NldCgpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAoIXJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy4kTW9kYWwuY29uZmlybSh7DQogICAgICAgICAgICB0aXRsZTogIuezu+e7n+i/mOacqumFjee9rk9TUyIsDQogICAgICAgICAgICBjb250ZW50OiAi566h55CG5ZGY6L+Y5pyq6YWN572u56ys5LiJ5pa5T1NT5pyN5Yqh77yM5piv5ZCm546w5Zyo56uL5Y2z5Y676YWN572uPyIsDQogICAgICAgICAgICBvbk9rOiAoKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICAgICAgICBuYW1lOiAic2V0dGluZyIsDQogICAgICAgICAgICAgICAgcXVlcnk6IHsgbmFtZTogIm9zcyIgfSwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIHNlbGVjdENhdGVnb3J5KHYpIHsNCiAgICAgIGlmICh2LmlkID09ICItMSIpIHsNCiAgICAgICAgLy8g5pS26JeP5aS5DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5jYXRlZ29yeUlkID0gIiI7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5pc0NvbGxlY3QgPSB0cnVlOw0KICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0uaXNDb2xsZWN0ID0gbnVsbDsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLmNhdGVnb3J5SWQgPSB2LmlkOw0KICAgICAgICB0aGlzLnVwbG9hZERhdGEgPSB7DQogICAgICAgICAgY2F0ZWdvcnlJZDogdi5pZCwNCiAgICAgICAgfTsNCiAgICAgICAgdGhpcy5jdXJyQ2F0ZSA9IHYudGl0bGU7DQogICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNoYW5nZUV4cGFuZCgpIHsNCiAgICAgIHRoaXMuZXhwYW5kID0gIXRoaXMuZXhwYW5kOw0KICAgICAgaWYgKHRoaXMuZXhwYW5kKSB7DQogICAgICAgIHRoaXMuZXhwYW5kSWNvbiA9ICJpb3MtYXJyb3ctYmFjayI7DQogICAgICAgIHRoaXMuc3BhbiA9IDE4Ow0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5leHBhbmRJY29uID0gImlvcy1hcnJvdy1mb3J3YXJkIjsNCiAgICAgICAgdGhpcy5zcGFuID0gMjM7DQogICAgICB9DQogICAgfSwNCiAgICBzaG93UGljKHYpIHsNCiAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpOw0KICAgICAgaW1hZ2Uuc3JjID0gdi51cmw7DQogICAgICBsZXQgdmlld2VyID0gbmV3IFZpZXdlcihpbWFnZSwgew0KICAgICAgICBoaWRkZW46IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICB2aWV3ZXIuZGVzdHJveSgpOw0KICAgICAgICB9LA0KICAgICAgfSk7DQogICAgICB2aWV3ZXIuc2hvdygpOw0KICAgIH0sDQogICAgc2hvd1ZpZGVvKHYpIHsNCiAgICAgIHRoaXMuZHAgPSBuZXcgRFBsYXllcih7DQogICAgICAgIGNvbnRhaW5lcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRwbGF5ZXIiKSwNCiAgICAgICAgc2NyZWVuc2hvdDogdHJ1ZSwNCiAgICAgICAgdmlkZW86IHsNCiAgICAgICAgICB1cmw6IHYudXJsLA0KICAgICAgICB9LA0KICAgICAgfSk7DQogICAgICB0aGlzLmZpbGUgPSB2Ow0KICAgICAgdGhpcy5maWxlLm1zaXplID0gdGhpcy51dGlsLmdldEZpbGVTaXplKHYuc2l6ZSk7DQogICAgICB0aGlzLnZpZGVvVGl0bGUgPSB2LnRpdGxlICsgIigiICsgdi5ma2V5ICsgIikiOw0KICAgICAgdGhpcy52aWRlb1Zpc2libGUgPSB0cnVlOw0KICAgIH0sDQogICAgY2xvc2VWaWRlbygpIHsNCiAgICAgIGlmICh0aGlzLmRwKSB7DQogICAgICAgIHRoaXMuZHAuZGVzdHJveSgpOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2hhbmdlUGFnZSh2KSB7DQogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bWJlciA9IHY7DQogICAgICB0aGlzLmdldERhdGFMaXN0KCk7DQogICAgICB0aGlzLmNsZWFyU2VsZWN0QWxsKCk7DQogICAgfSwNCiAgICBjaGFuZ2VQYWdlU2l6ZSh2KSB7DQogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZVNpemUgPSB2Ow0KICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOw0KICAgIH0sDQogICAgY2hhbmdlU29ydChlKSB7DQogICAgICB0aGlzLnNlYXJjaEZvcm0uc29ydCA9IGUua2V5Ow0KICAgICAgdGhpcy5zZWFyY2hGb3JtLm9yZGVyID0gZS5vcmRlcjsNCiAgICAgIGlmIChlLm9yZGVyID09ICJub3JtYWwiKSB7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5vcmRlciA9ICIiOw0KICAgICAgfQ0KICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOw0KICAgIH0sDQogICAgc2VsZWN0RGF0ZVJhbmdlKHYpIHsNCiAgICAgIGlmICh2KSB7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5zdGFydERhdGUgPSB2WzBdOw0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0uZW5kRGF0ZSA9IHZbMV07DQogICAgICB9DQogICAgfSwNCiAgICBjaGFuZ2VTaG93VHlwZSgpIHsNCiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlTnVtYmVyID0gMTsNCiAgICAgIGlmICh0aGlzLnNob3dUeXBlID09ICJsaXN0Iikgew0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZVNpemUgPSA1Ow0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VTaXplID0gMTI7DQogICAgICB9DQogICAgICB0aGlzLmdldERhdGFMaXN0KCk7DQogICAgfSwNCiAgICBnZXREYXRhTGlzdCgpIHsNCiAgICAgIGlmICh0aGlzLnNob3dUeXBlID09ICJsaXN0Iikgew0KICAgICAgICB0aGlzLnBhZ2VTaXplT3B0cyA9IFs1LCAxMCwgMjBdOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5wYWdlU2l6ZU9wdHMgPSBbMTIsIDI0XTsNCiAgICAgIH0NCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBnZXRVc2VyRmlsZUxpc3REYXRhKHRoaXMuc2VhcmNoRm9ybSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLmRhdGEgPSByZXMucmVzdWx0LmNvbnRlbnQ7DQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5yZXN1bHQudG90YWxFbGVtZW50czsNCiAgICAgICAgICBpZiAodGhpcy5kYXRhLmxlbmd0aCA9PSAwICYmIHRoaXMuc2VhcmNoRm9ybS5wYWdlTnVtYmVyID4gMSkgew0KICAgICAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VOdW1iZXIgLT0gMTsNCiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlU2VhcmNoKCkgew0KICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VOdW1iZXIgPSAxOw0KICAgICAgaWYgKHRoaXMuc2hvd1R5cGUgPT0gImxpc3QiKSB7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IDU7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZVNpemUgPSAxMjsNCiAgICAgIH0NCiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICB9LA0KICAgIGNoYW5nZUZpbGVUeXBlKCkgew0KICAgICAgbGV0IG5hbWUgPSB0aGlzLmZpbGVUeXBlOw0KICAgICAgaWYgKG5hbWUgPT0gImFsbCIpIHsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAiIjsNCiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAicGljIikgew0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0udHlwZSA9ICJpbWFnZSI7DQogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gInZpZGVvIikgew0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0udHlwZSA9ICJ2aWRlbyI7DQogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gIndvcmQiKSB7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS50eXBlID0gIndvcmQiOw0KICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJleGNlbCIpIHsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAic2hlZXQiOw0KICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJwcHQiKSB7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS50eXBlID0gInByZXNlbnRhdGlvbiI7DQogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gInBkZiIpIHsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAicGRmIjsNCiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAiYXVkaW8iKSB7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS50eXBlID0gImF1ZGlvIjsNCiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAidGV4dCIpIHsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAidGV4dCI7DQogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gInppcCIpIHsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAiemlwIjsNCiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAicmFyIikgew0KICAgICAgICB0aGlzLnNlYXJjaEZvcm0udHlwZSA9ICJyYXIiOw0KICAgICAgfQ0KICAgICAgdGhpcy5oYW5kbGVTZWFyY2goKTsNCiAgICB9LA0KICAgIGhhbmRsZVJlc2V0KCkgew0KICAgICAgdGhpcy4kcmVmcy5zZWFyY2hGb3JtLnJlc2V0RmllbGRzKCk7DQogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bWJlciA9IDE7DQogICAgICBpZiAodGhpcy5zaG93VHlwZSA9PSAibGlzdCIpIHsNCiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VTaXplID0gNTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IDEyOw0KICAgICAgfQ0KICAgICAgdGhpcy5zZWxlY3REYXRlID0gbnVsbDsNCiAgICAgIHRoaXMuc2VhcmNoRm9ybS5zdGFydERhdGUgPSAiIjsNCiAgICAgIHRoaXMuc2VhcmNoRm9ybS5lbmREYXRlID0gIiI7DQogICAgICAvLyDph43mlrDliqDovb3mlbDmja4NCiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICB9LA0KICAgIGJlZm9yZVVwbG9hZCgpIHsNCiAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQogICAgaGFuZGxlTWF4U2l6ZShmaWxlKSB7DQogICAgICB0aGlzLiROb3RpY2Uud2FybmluZyh7DQogICAgICAgIHRpdGxlOiAi5paH5Lu25aSn5bCP6L+H5aSnIiwNCiAgICAgICAgZGVzYzogIuaJgOmAieaWh+S7tuKAmCAiICsgZmlsZS5uYW1lICsgIiDigJnlpKflsI/ov4flpKcsIOS4jeW+l+i2hei/hyA1TS4iLA0KICAgICAgfSk7DQogICAgfSwNCiAgICBoYW5kbGVTdWNjZXNzKHJlcywgZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuS4iuS8oOaWh+S7tiAiICsgZmlsZS5uYW1lICsgIiDmiJDlip8iKTsNCiAgICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZmlsZS5wZXJjZW50YWdlID0gMDsNCiAgICAgICAgZmlsZS5zdGF0dXMgPSAiZmFpbCI7DQogICAgICAgIGZpbGUubmFtZSArPSAi77yI5LiK5Lyg5aSx6LSl77yJIjsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSk7DQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVFcnJvcihlcnJvciwgZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyb3IudG9TdHJpbmcoKSk7DQogICAgfSwNCiAgICBjbGVhckZpbGVzKCkgew0KICAgICAgdGhpcy4kcmVmcy51cC5jbGVhckZpbGVzKCk7DQogICAgfSwNCiAgICBoYW5kbGVDYW5jZWwoKSB7DQogICAgICB0aGlzLm1vZGFsVmlzaWJsZSA9IGZhbHNlOw0KICAgIH0sDQogICAgZG93bmxvYWQodikgew0KICAgICAgd2luZG93Lm9wZW4oDQogICAgICAgIHYudXJsICsNCiAgICAgICAgICAiP2F0dG5hbWU9JnJlc3BvbnNlLWNvbnRlbnQtdHlwZT1hcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0mZmlsZW5hbWU9IiArDQogICAgICAgICAgdi50aXRsZQ0KICAgICAgKTsNCiAgICB9LA0KICAgIHNob3dPZmZpY2Uodikgew0KICAgICAgd2luZG93Lm9wZW4oImh0dHBzOi8vdmlldy5vZmZpY2VhcHBzLmxpdmUuY29tL29wL3ZpZXcuYXNweD9zcmM9IiArIHYudXJsKTsNCiAgICB9LA0KICAgIHNob3dGaWxlKHYpIHsNCiAgICAgIHdpbmRvdy5vcGVuKHYudXJsICsgIj9wcmV2aWV3PXRydWUiKTsNCiAgICB9LA0KICAgIHByZXZpZXdGaWxlKHYpIHsNCiAgICAgIGlmICh2LnR5cGUuaW5kZXhPZigiYXVkaW8iKSA+PSAwKSB7DQogICAgICAgIHRoaXMuc2hvd1ZpZGVvKHYpOw0KICAgICAgfSBlbHNlIGlmICh2LnR5cGUuaW5kZXhPZigib2ZmaWNlIikgPj0gMCB8fCB2LnR5cGUuaW5kZXhPZigid29yZCIpID49IDApIHsNCiAgICAgICAgdGhpcy5zaG93T2ZmaWNlKHYpOw0KICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgdi50eXBlLmluZGV4T2YoInBkZiIpID49IDAgfHwNCiAgICAgICAgdi50eXBlLmluZGV4T2YoInRleHQiKSA+PSAwIHx8DQogICAgICAgIHYudHlwZS5pbmRleE9mKCJvY3RldCIpID49IDANCiAgICAgICkgew0KICAgICAgICB0aGlzLnNob3dGaWxlKHYpOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2hhbmdlRHJvcERvd24ocm93LCB2KSB7DQogICAgICBpZiAodiA9PSAicmVuYW1lIikgew0KICAgICAgICB0aGlzLnJlbmFtZShyb3cpOw0KICAgICAgfSBlbHNlIGlmICh2ID09ICJjb3B5Iikgew0KICAgICAgICB0aGlzLmNvcHkocm93KTsNCiAgICAgIH0gZWxzZSBpZiAodiA9PSAicmVtb3ZlIikgew0KICAgICAgICB0aGlzLnJlbW92ZShyb3cpOw0KICAgICAgfSBlbHNlIGlmICh2ID09ICJtb3ZlIikgew0KICAgICAgICB0aGlzLm1vdmUocm93KTsNCiAgICAgIH0gZWxzZSBpZiAodiA9PSAic2hhcmUiKSB7DQogICAgICAgIHRoaXMuc2hhcmUocm93KTsNCiAgICAgIH0gZWxzZSBpZiAodiA9PSAiY29sbGVjdCIpIHsNCiAgICAgICAgdGhpcy5jb2xsZWN0KHJvdyk7DQogICAgICB9DQogICAgfSwNCiAgICBzaGFyZSh2KSB7DQogICAgICB0aGlzLiRjb3B5VGV4dCh2LnVybCkudGhlbigoZSkgPT4gew0KICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuWkjeWItumTvuaOpeaIkOWKnyIpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBzZWxlY3RNb3ZlQ2F0ZWdvcnkodikgew0KICAgICAgdGhpcy5tb3ZlQ2F0ZWdvcnlJZCA9IHYuaWQ7DQogICAgfSwNCiAgICBtb3ZlQWxsKCkgew0KICAgICAgaWYgKHRoaXMuc2VsZWN0TGlzdC5sZW5ndGggPD0gMCkgew0KICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuaCqOi/mOacqumAieaLqeimgeenu+WKqOeahOaWh+S7tiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBsZXQgaWRzID0gIiI7DQogICAgICB0aGlzLnNlbGVjdExpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkgew0KICAgICAgICBpZHMgKz0gZS5pZCArICIsIjsNCiAgICAgIH0pOw0KICAgICAgaWRzID0gaWRzLnN1YnN0cmluZygwLCBpZHMubGVuZ3RoIC0gMSk7DQogICAgICB0aGlzLm1vdmVGaWxlSWRzID0gaWRzOw0KICAgICAgdGhpcy5tb3ZlVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICBtb3ZlKHYpIHsNCiAgICAgIHRoaXMubW92ZUZpbGVJZHMgPSBbdi5pZF07DQogICAgICB0aGlzLm1vdmVWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIGhhbmRsZVN1Ym1pdE1vdmUoKSB7DQogICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSB0cnVlOw0KICAgICAgbW92ZUZpbGUoeyBpZHM6IHRoaXMubW92ZUZpbGVJZHMsIGNhdGVnb3J5SWQ6IHRoaXMubW92ZUNhdGVnb3J5SWQgfSkudGhlbigNCiAgICAgICAgKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsNCiAgICAgICAgICAgIHRoaXMubW92ZVZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3RBbGwoKTsNCiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICk7DQogICAgfSwNCiAgICBjb3B5KHYpIHsNCiAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oew0KICAgICAgICB0aXRsZTogIuehruiupOWkjeWItiIsDQogICAgICAgIGNvbnRlbnQ6ICLmgqjnoa7orqTopoHlpI3liLbmlofku7YgIiArIHYudGl0bGUgKyAiID8iLA0KICAgICAgICBsb2FkaW5nOiB0cnVlLA0KICAgICAgICBvbk9rOiAoKSA9PiB7DQogICAgICAgICAgY29weVVzZXJGaWxlKHsgaWQ6IHYuaWQsIGtleTogdi5ma2V5IH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgdGhpcy4kTW9kYWwucmVtb3ZlKCk7DQogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLlpI3liLbmlofku7bmiJDlip/vvIzmlrDmlofku7blkI3kuLog5Ymv5pysXyIgKyB2LnRpdGxlKTsNCiAgICAgICAgICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgfSk7DQogICAgfSwNCiAgICBjb2xsZWN0KHYpIHsNCiAgICAgIGNvbGxlY3RGaWxlKHsgaWQ6IHYuaWQgfSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMuJE1vZGFsLnJlbW92ZSgpOw0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3Modi5pc0NvbGxlY3QgPyAi5Y+W5raI5pS26JeP5oiQ5YqfIiA6ICLmlLbol4/miJDlip8iKTsNCiAgICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgcmVtb3ZlQWxsKCkgew0KICAgICAgaWYgKHRoaXMuc2VsZWN0TGlzdC5sZW5ndGggPD0gMCkgew0KICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuaCqOi/mOacqumAieaLqeimgeWIoOmZpOeahOaWh+S7tiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLiRNb2RhbC5jb25maXJtKHsNCiAgICAgICAgdGl0bGU6ICLnoa7orqTliKDpmaQiLA0KICAgICAgICBjb250ZW50Og0KICAgICAgICAgICLmgqjnoa7orqTopoHlsIbmiYDpgInnmoQgIiArDQogICAgICAgICAgdGhpcy5zZWxlY3RMaXN0Lmxlbmd0aCArDQogICAgICAgICAgIiDkuKrmlofku7bnp7vlhaXlm57mlLbnq5nvvIwgN+WkqeWGheWQjuiHquWKqOW9u+W6leWIoOmZpCIsDQogICAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICAgIG9uT2s6ICgpID0+IHsNCiAgICAgICAgICBsZXQgaWRzID0gIiI7DQogICAgICAgICAgdGhpcy5zZWxlY3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgICAgIGlkcyArPSBlLmlkICsgIiwiOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGlkcyA9IGlkcy5zdWJzdHJpbmcoMCwgaWRzLmxlbmd0aCAtIDEpOw0KICAgICAgICAgIHRyYXNoRmlsZSh7IGlkczogaWRzIH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgdGhpcy4kTW9kYWwucmVtb3ZlKCk7DQogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmibnph4/liKDpmaTmlofku7bmiJDlip8iKTsNCiAgICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdEFsbCgpOw0KICAgICAgICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICB9KTsNCiAgICB9LA0KICAgIHJlbW92ZSh2KSB7DQogICAgICB0aGlzLiRNb2RhbC5jb25maXJtKHsNCiAgICAgICAgdGl0bGU6ICLnoa7orqTliKDpmaQiLA0KICAgICAgICBjb250ZW50Og0KICAgICAgICAgICLmgqjnoa7orqTopoHlsIbmlofku7YgIiArIHYudGl0bGUgKyAiIOenu+WFpeWbnuaUtuerme+8jCA35aSp5YaF5ZCO6Ieq5Yqo5b275bqV5Yig6ZmkIiwNCiAgICAgICAgbG9hZGluZzogdHJ1ZSwNCiAgICAgICAgb25PazogKCkgPT4gew0KICAgICAgICAgIHRyYXNoRmlsZSh7IGlkczogdi5pZCB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIHRoaXMuJE1vZGFsLnJlbW92ZSgpOw0KICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3RBbGwoKTsNCiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmlofku7YgIiArIHYudGl0bGUgKyAiIOaIkOWKnyIpOw0KICAgICAgICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZVN1Ym1pdCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICBsZXQgcGFyYW1zID0gew0KICAgICAgICAgICAgaWQ6IHRoaXMuZm9ybS5pZCwNCiAgICAgICAgICAgIG5ld0tleTogdGhpcy5mb3JtLmZrZXksDQogICAgICAgICAgICBuZXdUaXRsZTogdGhpcy5mb3JtLnRpdGxlLA0KICAgICAgICAgIH07DQogICAgICAgICAgcmVuYW1lVXNlckZpbGUocGFyYW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7DQogICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsNCiAgICAgICAgICAgICAgdGhpcy5tb2RhbFZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICByZW5hbWUodikgew0KICAgICAgdGhpcy5tb2RhbFRpdGxlID0gIue8lui+keaWh+S7tuWQjSI7DQogICAgICAvLyDovazmjaJudWxs5Li6IiINCiAgICAgIGZvciAobGV0IGF0dHIgaW4gdikgew0KICAgICAgICBpZiAodlthdHRyXSA9PSBudWxsKSB7DQogICAgICAgICAgdlthdHRyXSA9ICIiOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBsZXQgc3RyID0gSlNPTi5zdHJpbmdpZnkodik7DQogICAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2Uoc3RyKTsNCiAgICAgIHRoaXMuZm9ybSA9IGRhdGE7DQogICAgICB0aGlzLm1vZGFsVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICBjbGVhclNlbGVjdEFsbCgpIHsNCiAgICAgIHRoaXMuJHJlZnMudGFibGUuc2VsZWN0QWxsKGZhbHNlKTsNCiAgICAgIHRoaXMudG90YWxTaXplID0gIiI7DQogICAgfSwNCiAgICBjaGFuZ2VTZWxlY3QoZSkgew0KICAgICAgdGhpcy5zZWxlY3RMaXN0ID0gZTsNCiAgICAgIGxldCBzaXplID0gMDsNCiAgICAgIGUuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICBzaXplICs9IGl0ZW0uc2l6ZSAqIDEuMDsNCiAgICAgIH0pOw0KICAgICAgdGhpcy50b3RhbFNpemUgPSB0aGlzLnV0aWwuZ2V0RmlsZVNpemUoc2l6ZSk7DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmluaXQoKTsNCiAgfSwNCn07DQo="},{"version":3,"sources":["file.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"file.vue","sourceRoot":"src/views/app-toB/file","sourcesContent":["<style lang=\"less\">\r\n@import \"@/styles/tree&table-common.less\";\r\n@import \"@/styles/table-common.less\";\r\n@import \"./file.less\";\r\n</style>\r\n<template>\r\n  <div class=\"search\">\r\n    <trash v-if=\"showTrash\" @close=\"showTrash = false\" />\r\n    <Card v-show=\"!showTrash\">\r\n      <Row type=\"flex\" justify=\"space-between\">\r\n        <Col v-show=\"expand\" span=\"5\">\r\n          <fileCategory @on-select=\"selectCategory\" />\r\n        </Col>\r\n        <div class=\"expand\">\r\n          <Icon\r\n            :type=\"expandIcon\"\r\n            size=\"16\"\r\n            class=\"icon\"\r\n            @click=\"changeExpand\"\r\n          />\r\n        </div>\r\n        <Col :span=\"span\">\r\n          <Row v-show=\"openSearch\" @keydown.enter.native=\"handleSearch\">\r\n            <Form ref=\"searchForm\" :model=\"searchForm\" inline :label-width=\"70\">\r\n              <FormItem label=\"文件名\" prop=\"title\">\r\n                <Input\r\n                  type=\"text\"\r\n                  v-model=\"searchForm.title\"\r\n                  placeholder=\"请输入文件名\"\r\n                  clearable\r\n                  style=\"width: 200px\"\r\n                />\r\n              </FormItem>\r\n              <FormItem label=\"创建时间\">\r\n                <DatePicker\r\n                  :options=\"options\"\r\n                  v-model=\"selectDate\"\r\n                  type=\"daterange\"\r\n                  format=\"yyyy-MM-dd\"\r\n                  clearable\r\n                  @on-change=\"selectDateRange\"\r\n                  placeholder=\"选择起始时间\"\r\n                  style=\"width: 200px\"\r\n                ></DatePicker>\r\n              </FormItem>\r\n              <FormItem style=\"margin-left: -35px\" class=\"br\">\r\n                <Button @click=\"handleSearch\" type=\"primary\" icon=\"ios-search\"\r\n                  >搜索</Button\r\n                >\r\n                <Button @click=\"handleReset\">重置</Button>\r\n              </FormItem>\r\n            </Form>\r\n          </Row>\r\n          <Row class=\"operation\" align=\"middle\" justify=\"space-between\">\r\n            <div class=\"br\">\r\n              <Button\r\n                :disabled=\"!searchForm.categoryId\"\r\n                @click=\"uploadVisible = true\"\r\n                type=\"primary\"\r\n                icon=\"md-cloud-upload\"\r\n                >上传文件</Button\r\n              >\r\n              <Dropdown @on-click=\"handleDropdown\">\r\n                <Button>\r\n                  更多操作\r\n                  <Icon type=\"md-arrow-dropdown\" />\r\n                </Button>\r\n                <DropdownMenu slot=\"list\">\r\n                  <DropdownItem v-show=\"showType == 'list'\" name=\"moveAll\"\r\n                    >移动</DropdownItem\r\n                  >\r\n                  <DropdownItem v-show=\"showType == 'list'\" name=\"removeAll\"\r\n                    >批量删除</DropdownItem\r\n                  >\r\n                  <DropdownItem v-show=\"showType == 'thumb'\" name=\"title\"\r\n                    >原名称排序</DropdownItem\r\n                  >\r\n                  <DropdownItem v-show=\"showType == 'thumb'\" name=\"size\"\r\n                    >文件大小排序</DropdownItem\r\n                  >\r\n                  <DropdownItem v-show=\"showType == 'thumb'\" name=\"type\"\r\n                    >文件类型排序</DropdownItem\r\n                  >\r\n                  <DropdownItem v-show=\"showType == 'thumb'\" name=\"time\"\r\n                    >创建时间排序</DropdownItem\r\n                  >\r\n                </DropdownMenu>\r\n              </Dropdown>\r\n              <Button @click=\"showTrash = true\" type=\"dashed\" icon=\"md-trash\"\r\n                >回收站</Button\r\n              >\r\n            </div>\r\n\r\n            <div class=\"icons\">\r\n              <Tooltip content=\"刷新\" placement=\"top\" transfer>\r\n                <Icon\r\n                  type=\"md-refresh\"\r\n                  size=\"18\"\r\n                  class=\"item\"\r\n                  @click=\"getDataList\"\r\n                />\r\n              </Tooltip>\r\n              <Tooltip\r\n                :content=\"openSearch ? '关闭搜索' : '开启搜索'\"\r\n                placement=\"top\"\r\n                transfer\r\n              >\r\n                <Icon\r\n                  type=\"ios-search\"\r\n                  size=\"18\"\r\n                  class=\"item tip\"\r\n                  @click=\"openSearch = !openSearch\"\r\n                />\r\n              </Tooltip>\r\n              <Tooltip\r\n                :content=\"openTip ? '关闭提示' : '开启提示'\"\r\n                placement=\"top\"\r\n                transfer\r\n              >\r\n                <Icon\r\n                  type=\"md-bulb\"\r\n                  size=\"18\"\r\n                  class=\"item tip\"\r\n                  @click=\"openTip = !openTip\"\r\n                />\r\n              </Tooltip>\r\n              <Select\r\n                v-model=\"fileType\"\r\n                style=\"width: 150px; margin: 0 25px 0 15px\"\r\n                @on-change=\"changeFileType\"\r\n              >\r\n                <Option value=\"all\">所有文件</Option>\r\n                <Option value=\"word\">Word</Option>\r\n                <Option value=\"excel\">Excel</Option>\r\n                <Option value=\"pdf\">PDF</Option>\r\n                <Option value=\"pic\">图片</Option>\r\n                <Option value=\"video\">视频</Option>\r\n                <Option value=\"audio\">音频</Option>\r\n                <Option value=\"text\">文本</Option>\r\n                <Option value=\"ppt\">PPT</Option>\r\n                <Option value=\"zip\">ZIP</Option>\r\n                <Option value=\"rar\">RAR</Option>\r\n              </Select>\r\n              <RadioGroup\r\n                v-model=\"showType\"\r\n                type=\"button\"\r\n                @on-change=\"changeShowType\"\r\n              >\r\n                <Radio title=\"列表\" label=\"list\">\r\n                  <Icon type=\"md-list\"></Icon>\r\n                </Radio>\r\n                <Radio title=\"缩略图\" label=\"thumb\">\r\n                  <Icon type=\"ios-apps\"></Icon>\r\n                </Radio>\r\n              </RadioGroup>\r\n            </div>\r\n          </Row>\r\n\r\n          <div v-show=\"showType == 'list'\">\r\n            <Alert show-icon v-show=\"openTip\">\r\n              已选择\r\n              <span class=\"select-count\">{{ selectList.length }}</span> 项\r\n              <a class=\"select-clear\" @click=\"clearSelectAll\">清空</a>\r\n              <span v-if=\"selectList.length > 0\" style=\"margin-left: 15px\"\r\n                >共计 {{ totalSize }} 存储量</span\r\n              >\r\n            </Alert>\r\n            <Table\r\n              :loading=\"loading\"\r\n              border\r\n              :columns=\"columns\"\r\n              :data=\"data\"\r\n              ref=\"table\"\r\n              sortable=\"custom\"\r\n              @on-sort-change=\"changeSort\"\r\n              @on-selection-change=\"changeSelect\"\r\n            ></Table>\r\n          </div>\r\n          <Row type=\"flex\" :gutter=\"30\" v-show=\"showType == 'thumb'\">\r\n            <Col :lg=\"6\" :md=\"12\" :xs=\"12\" v-for=\"(item, i) in data\" :key=\"i\">\r\n              <Card class=\"oss-card\">\r\n                <div class=\"content\">\r\n                  <div class=\"collect-icon\" v-if=\"item.isCollect\">\r\n                    <Icon type=\"md-star\" color=\"#ffc60a\" size=\"18\"/>\r\n                  </div>\r\n                  <img\r\n                    @click=\"showPic(item)\"\r\n                    v-if=\"item.type.indexOf('image') >= 0\"\r\n                    class=\"img\"\r\n                    :src=\"item.url\"\r\n                  />\r\n                  <div\r\n                    v-else-if=\"item.type.indexOf('video') >= 0\"\r\n                    class=\"video\"\r\n                    @click=\"showVideo(item)\"\r\n                  >\r\n                    <video class=\"cover\">\r\n                      <source :src=\"item.url + '#t=1'\" preload=\"metadata\" />\r\n                    </video>\r\n                    <img class=\"play\" src=\"@/assets/icon/play.png\" />\r\n                  </div>\r\n                  <div v-else class=\"other\" @click=\"previewFile(item)\">\r\n                    <div class=\"name\">{{ item.title }}</div>\r\n                    <div class=\"key\">{{ item.fkey }}</div>\r\n                    <div class=\"info\">\r\n                      文件类型：{{ util.ellipsis(item.type, 30) }} 文件大小：{{\r\n                        util.getFileSize(item.size)\r\n                      }}\r\n                      创建时间：{{ item.createTime }}\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"actions\">\r\n                    <div class=\"btn\">\r\n                      <Tooltip content=\"下载\" placement=\"top\">\r\n                        <Icon\r\n                          @click=\"download(item)\"\r\n                          type=\"md-download\"\r\n                          size=\"16\"\r\n                        />\r\n                      </Tooltip>\r\n                    </div>\r\n                    <div class=\"btn\">\r\n                      <Tooltip content=\"分享\" placement=\"top\">\r\n                        <Icon @click=\"share(item)\" type=\"md-share\" size=\"16\" />\r\n                      </Tooltip>\r\n                    </div>\r\n                    <div class=\"btn\">\r\n                      <Tooltip content=\"重命名\" placement=\"top\">\r\n                        <Icon\r\n                          @click=\"rename(item)\"\r\n                          type=\"md-create\"\r\n                          size=\"16\"\r\n                        />\r\n                      </Tooltip>\r\n                    </div>\r\n                    <div class=\"btn-no\">\r\n                      <Dropdown @on-click=\"changeDropDown(item, $event)\">\r\n                        <Icon type=\"ios-more\" size=\"24\" />\r\n                        <DropdownMenu slot=\"list\">\r\n                          <DropdownItem name=\"collect\">{{\r\n                            item.isCollect ? \"取消收藏\" : \"收藏\"\r\n                          }}</DropdownItem>\r\n                          <DropdownItem name=\"copy\">复制</DropdownItem>\r\n                          <DropdownItem name=\"remove\">删除</DropdownItem>\r\n                        </DropdownMenu>\r\n                      </Dropdown>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"end\" class=\"page\">\r\n            <Page\r\n              :current=\"searchForm.pageNumber\"\r\n              :total=\"total\"\r\n              :page-size=\"searchForm.pageSize\"\r\n              @on-change=\"changePage\"\r\n              @on-page-size-change=\"changePageSize\"\r\n              :page-size-opts=\"pageSizeOpts\"\r\n              size=\"small\"\r\n              show-total\r\n              show-elevator\r\n              show-sizer\r\n            ></Page>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n\r\n    <Drawer\r\n      :title=\"`上传文件至：${currCate}`\"\r\n      closable\r\n      v-model=\"uploadVisible\"\r\n      width=\"500\"\r\n    >\r\n      <Upload\r\n        :action=\"uploadFileUrl\"\r\n        :headers=\"accessToken\"\r\n        :data=\"uploadData\"\r\n        :on-success=\"handleSuccess\"\r\n        :on-error=\"handleError\"\r\n        :max-size=\"5120\"\r\n        :on-exceeded-size=\"handleMaxSize\"\r\n        :before-upload=\"beforeUpload\"\r\n        multiple\r\n        type=\"drag\"\r\n        ref=\"up\"\r\n      >\r\n        <div style=\"padding: 20px 0\">\r\n          <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\r\n          <p>点击这里或将文件拖拽到这里上传</p>\r\n        </div>\r\n      </Upload>\r\n      <div class=\"drawer-footer\">\r\n        <Button @click=\"clearFiles\">清空上传列表</Button>\r\n      </div>\r\n    </Drawer>\r\n\r\n    <Modal\r\n      :title=\"modalTitle\"\r\n      v-model=\"modalVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"500\"\r\n    >\r\n      <Form ref=\"form\" :model=\"form\" inline :rules=\"formValidate\">\r\n        <FormItem label=\"文件名\" prop=\"title\" style=\"width: 100%\">\r\n          <Input v-model=\"form.title\" />\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"handleCancel\">取消</Button>\r\n        <Button type=\"primary\" :loading=\"submitLoading\" @click=\"handleSubmit\"\r\n          >提交</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal\r\n      title=\"移动至\"\r\n      v-model=\"moveVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"500\"\r\n    >\r\n      <fileCategory\r\n        showOnly\r\n        @on-select=\"selectMoveCategory\"\r\n        class=\"fileMoveModal\"\r\n      />\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"moveVisible = false\">取消</Button>\r\n        <Button\r\n          type=\"primary\"\r\n          :loading=\"submitLoading\"\r\n          @click=\"handleSubmitMove\"\r\n          >移动至此</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal\r\n      v-model=\"videoVisible\"\r\n      :title=\"videoTitle\"\r\n      :width=\"800\"\r\n      @on-cancel=\"closeVideo\"\r\n      draggable\r\n    >\r\n      <div id=\"dplayer\" style=\"height: 500px\"></div>\r\n      <div slot=\"footer\">\r\n        <span\r\n          >文件类型：{{ util.ellipsis(file.type, 30) }} 文件大小：{{\r\n            file.msize\r\n          }}\r\n          创建时间：{{ file.createTime }}</span\r\n        >\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  uploadFile,\r\n  checkOssSet,\r\n  getUserFileListData,\r\n  copyUserFile,\r\n  moveFile,\r\n  renameUserFile,\r\n  trashFile,\r\n  collectFile,\r\n} from \"@/api/index\";\r\nimport fileCategory from \"@/views/app-toB/file/fileCategory\";\r\nimport trash from \"./trash.vue\";\r\nimport DPlayer from \"dplayer\";\r\nimport \"viewerjs/dist/viewer.css\";\r\nimport Viewer from \"viewerjs\";\r\nimport { shortcuts } from \"@/libs/shortcuts\";\r\nexport default {\r\n  name: \"file\",\r\n  components: {\r\n    fileCategory,\r\n    trash,\r\n  },\r\n  data() {\r\n    return {\r\n      showTrash: false,\r\n      uploadData: {},\r\n      currCate: \"\",\r\n      expand: true,\r\n      span: 18,\r\n      expandIcon: \"ios-arrow-back\",\r\n      dp: null,\r\n      uploadFileUrl: uploadFile,\r\n      openSearch: true,\r\n      openTip: true,\r\n      accessToken: {}, // 上传token鉴权\r\n      loading: false, // 表单加载状态\r\n      fileType: \"all\",\r\n      showType: \"list\",\r\n      modalVisible: false, // 添加或编辑显示\r\n      moveVisible: false,\r\n      uploadVisible: false,\r\n      videoVisible: false,\r\n      picVisible: false,\r\n      picTitle: \"\",\r\n      videoTitle: \"\",\r\n      modalTitle: \"\", // 添加或编辑标题\r\n      moveCategoryId: \"\",\r\n      moveFileIds: [],\r\n      searchForm: {\r\n        // 搜索框对应data对象\r\n        title: \"\",\r\n        type: \"\",\r\n        pageNumber: 1, // 当前页数\r\n        pageSize: 5, // 页面大小\r\n        sort: \"createTime\", // 默认排序字段\r\n        order: \"desc\", // 默认排序方式\r\n        startDate: \"\", // 起始时间\r\n        endDate: \"\", // 终止时间\r\n        categoryId: \"0\",\r\n        isCollect: null,\r\n      },\r\n      selectDate: null, // 选择日期绑定modal\r\n      options: {\r\n        shortcuts: shortcuts,\r\n      },\r\n      form: {\r\n        title: \"\",\r\n        fkey: \"\",\r\n      },\r\n      file: {},\r\n      // 表单验证规则\r\n      formValidate: {\r\n        title: [{ required: true, message: \"不能为空\", trigger: \"blur\" }],\r\n        fkey: [{ required: true, message: \"不能为空\", trigger: \"blur\" }],\r\n      },\r\n      submitLoading: false, // 添加或编辑提交状态\r\n      selectList: [], // 多选数据\r\n      totalSize: \"\", // 文件大小统计\r\n      columns: [\r\n        // 表头\r\n        {\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"文件名\",\r\n          key: \"title\",\r\n          minWidth: 150,\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            if (params.row.isCollect) {\r\n              return h(\"div\", [\r\n                h(\"span\", params.row.title),\r\n                h(\"Icon\", {\r\n                  style: {\r\n                    marginLeft: \"5px\",\r\n                  },\r\n                  props: {\r\n                    type: \"md-star\",\r\n                    color: \"#ffc60a\",\r\n                    size: \"18\",\r\n                  },\r\n                }),\r\n              ]);\r\n            }\r\n            return h(\"span\", params.row.title);\r\n          },\r\n        },\r\n        {\r\n          title: \"缩略图(点击预览)\",\r\n          key: \"url\",\r\n          width: 150,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            if (params.row.type.includes(\"image\") > 0) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: params.row.url,\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"80px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showPic(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (params.row.type.includes(\"video\") > 0) {\r\n              return h(\r\n                \"video\",\r\n                {\r\n                  style: {\r\n                    cursor: \"pointer\",\r\n                    width: \"80px\",\r\n                    height: \"60px\",\r\n                    margin: \"10px 0\",\r\n                    \"object-fit\": \"contain\",\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.showVideo(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                [\r\n                  h(\"source\", {\r\n                    attrs: {\r\n                      src: params.row.url + \"#t=1\",\r\n                      preload: \"metadata\",\r\n                    },\r\n                  }),\r\n                ]\r\n              );\r\n            } else if (params.row.type.includes(\"word\") > 0) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/word.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"80px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showOffice(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (\r\n              params.row.fkey.includes(\".xlsx\") > 0 ||\r\n              params.row.fkey.includes(\".xls\") > 0 ||\r\n              params.row.type.includes(\"sheet\") > 0\r\n            ) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/xls.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"80px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showOffice(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (params.row.type.includes(\"presentation\") > 0) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/ppt.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"80px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showOffice(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (params.row.type.includes(\"pdf\") > 0) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/pdf.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showFile(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (params.row.type.includes(\"audio\") > 0) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/mp3.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showVideo(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (\r\n              params.row.type.includes(\"zip\") > 0 ||\r\n              params.row.type.includes(\"rar\") > 0 ||\r\n              params.row.type.includes(\"7z\") > 0\r\n            ) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/zip.png\"),\r\n                },\r\n                style: {\r\n                  width: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.$Message.warning(\"暂不支持预览\");\r\n                  },\r\n                },\r\n              });\r\n            } else if (\r\n              params.row.type.includes(\"text\") > 0 ||\r\n              params.row.type.includes(\"octet\") > 0\r\n            ) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/file.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"55px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showFile(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/file.png\"),\r\n                },\r\n                style: {\r\n                  width: \"55px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.$Message.warning(\"暂不支持预览\");\r\n                  },\r\n                },\r\n              });\r\n            }\r\n          },\r\n        },\r\n        {\r\n          title: \"文件类型\",\r\n          key: \"type\",\r\n          width: 120,\r\n          sortable: true,\r\n          tooltip: true,\r\n        },\r\n        {\r\n          title: \"文件大小\",\r\n          key: \"size\",\r\n          width: 120,\r\n          align: \"center\",\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            let m = this.util.getFileSize(params.row.size);\r\n            return h(\"span\", m);\r\n          },\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          key: \"createTime\",\r\n          width: 180,\r\n          sortable: true,\r\n          sortType: \"desc\",\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"action\",\r\n          align: \"center\",\r\n          fixed: \"right\",\r\n          width: 170,\r\n          render: (h, params) => {\r\n            return h(\"div\", [\r\n              h(\r\n                \"a\",\r\n                {\r\n                  on: {\r\n                    click: () => {\r\n                      this.download(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"下载\"\r\n              ),\r\n              h(\"Divider\", {\r\n                props: {\r\n                  type: \"vertical\",\r\n                },\r\n              }),\r\n              h(\r\n                \"Dropdown\",\r\n                {\r\n                  props: { transfer: true },\r\n                  on: {\r\n                    \"on-click\": (v) => {\r\n                      this.changeDropDown(params.row, v);\r\n                    },\r\n                  },\r\n                },\r\n                [\r\n                  h(\"a\", [\r\n                    \"更多操作\",\r\n                    h(\"Icon\", {\r\n                      props: {\r\n                        type: \"ios-arrow-down\",\r\n                      },\r\n                    }),\r\n                  ]),\r\n                  h(\"DropdownMenu\", { slot: \"list\" }, [\r\n                    h(\"DropdownItem\", { props: { name: \"share\" } }, \"分享\"),\r\n                    h(\r\n                      \"DropdownItem\",\r\n                      { props: { name: \"collect\" } },\r\n                      params.row.isCollect ? \"取消收藏\" : \"收藏\"\r\n                    ),\r\n                    h(\"DropdownItem\", { props: { name: \"rename\" } }, \"重命名\"),\r\n                    h(\"DropdownItem\", { props: { name: \"move\" } }, \"移动\"),\r\n                    h(\"DropdownItem\", { props: { name: \"copy\" } }, \"复制\"),\r\n                    h(\"DropdownItem\", { props: { name: \"remove\" } }, \"删除\"),\r\n                  ]),\r\n                ]\r\n              ),\r\n            ]);\r\n          },\r\n        },\r\n      ],\r\n      data: [], // 表单数据\r\n      total: 0, // 表单数据总数\r\n      pageSizeOpts: [5, 10, 20],\r\n    };\r\n  },\r\n  methods: {\r\n    handleDropdown(name) {\r\n      if (name == \"moveAll\") {\r\n        this.moveAll();\r\n      } else if (name == \"removeAll\") {\r\n        this.removeAll();\r\n      } else if (name == \"title\") {\r\n        this.searchForm.sort = \"title\";\r\n        this.getDataList();\r\n      } else if (name == \"size\") {\r\n        this.searchForm.sort = \"size\";\r\n        this.getDataList();\r\n      } else if (name == \"type\") {\r\n        this.searchForm.sort = \"type\";\r\n        this.getDataList();\r\n      } else if (name == \"time\") {\r\n        this.searchForm.sort = \"createTime\";\r\n        this.getDataList();\r\n      }\r\n    },\r\n    init() {\r\n      this.accessToken = {\r\n        accessToken: this.getStore(\"accessToken\"),\r\n      };\r\n      checkOssSet().then((res) => {\r\n        if (!res.success) {\r\n          this.$Modal.confirm({\r\n            title: \"系统还未配置OSS\",\r\n            content: \"管理员还未配置第三方OSS服务，是否现在立即去配置?\",\r\n            onOk: () => {\r\n              this.$router.push({\r\n                name: \"setting\",\r\n                query: { name: \"oss\" },\r\n              });\r\n            },\r\n          });\r\n        }\r\n      });\r\n    },\r\n    selectCategory(v) {\r\n      if (v.id == \"-1\") {\r\n        // 收藏夹\r\n        this.searchForm.categoryId = \"\";\r\n        this.searchForm.isCollect = true;\r\n        this.getDataList();\r\n      } else {\r\n        this.searchForm.isCollect = null;\r\n        this.searchForm.categoryId = v.id;\r\n        this.uploadData = {\r\n          categoryId: v.id,\r\n        };\r\n        this.currCate = v.title;\r\n        this.getDataList();\r\n      }\r\n    },\r\n    changeExpand() {\r\n      this.expand = !this.expand;\r\n      if (this.expand) {\r\n        this.expandIcon = \"ios-arrow-back\";\r\n        this.span = 18;\r\n      } else {\r\n        this.expandIcon = \"ios-arrow-forward\";\r\n        this.span = 23;\r\n      }\r\n    },\r\n    showPic(v) {\r\n      let image = new Image();\r\n      image.src = v.url;\r\n      let viewer = new Viewer(image, {\r\n        hidden: function () {\r\n          viewer.destroy();\r\n        },\r\n      });\r\n      viewer.show();\r\n    },\r\n    showVideo(v) {\r\n      this.dp = new DPlayer({\r\n        container: document.getElementById(\"dplayer\"),\r\n        screenshot: true,\r\n        video: {\r\n          url: v.url,\r\n        },\r\n      });\r\n      this.file = v;\r\n      this.file.msize = this.util.getFileSize(v.size);\r\n      this.videoTitle = v.title + \"(\" + v.fkey + \")\";\r\n      this.videoVisible = true;\r\n    },\r\n    closeVideo() {\r\n      if (this.dp) {\r\n        this.dp.destroy();\r\n      }\r\n    },\r\n    changePage(v) {\r\n      this.searchForm.pageNumber = v;\r\n      this.getDataList();\r\n      this.clearSelectAll();\r\n    },\r\n    changePageSize(v) {\r\n      this.searchForm.pageSize = v;\r\n      this.getDataList();\r\n    },\r\n    changeSort(e) {\r\n      this.searchForm.sort = e.key;\r\n      this.searchForm.order = e.order;\r\n      if (e.order == \"normal\") {\r\n        this.searchForm.order = \"\";\r\n      }\r\n      this.getDataList();\r\n    },\r\n    selectDateRange(v) {\r\n      if (v) {\r\n        this.searchForm.startDate = v[0];\r\n        this.searchForm.endDate = v[1];\r\n      }\r\n    },\r\n    changeShowType() {\r\n      this.searchForm.pageNumber = 1;\r\n      if (this.showType == \"list\") {\r\n        this.searchForm.pageSize = 5;\r\n      } else {\r\n        this.searchForm.pageSize = 12;\r\n      }\r\n      this.getDataList();\r\n    },\r\n    getDataList() {\r\n      if (this.showType == \"list\") {\r\n        this.pageSizeOpts = [5, 10, 20];\r\n      } else {\r\n        this.pageSizeOpts = [12, 24];\r\n      }\r\n      this.loading = true;\r\n      getUserFileListData(this.searchForm).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.data = res.result.content;\r\n          this.total = res.result.totalElements;\r\n          if (this.data.length == 0 && this.searchForm.pageNumber > 1) {\r\n            this.searchForm.pageNumber -= 1;\r\n            this.getDataList();\r\n          }\r\n        }\r\n      });\r\n    },\r\n    handleSearch() {\r\n      this.searchForm.pageNumber = 1;\r\n      if (this.showType == \"list\") {\r\n        this.searchForm.pageSize = 5;\r\n      } else {\r\n        this.searchForm.pageSize = 12;\r\n      }\r\n      this.getDataList();\r\n    },\r\n    changeFileType() {\r\n      let name = this.fileType;\r\n      if (name == \"all\") {\r\n        this.searchForm.type = \"\";\r\n      } else if (name == \"pic\") {\r\n        this.searchForm.type = \"image\";\r\n      } else if (name == \"video\") {\r\n        this.searchForm.type = \"video\";\r\n      } else if (name == \"word\") {\r\n        this.searchForm.type = \"word\";\r\n      } else if (name == \"excel\") {\r\n        this.searchForm.type = \"sheet\";\r\n      } else if (name == \"ppt\") {\r\n        this.searchForm.type = \"presentation\";\r\n      } else if (name == \"pdf\") {\r\n        this.searchForm.type = \"pdf\";\r\n      } else if (name == \"audio\") {\r\n        this.searchForm.type = \"audio\";\r\n      } else if (name == \"text\") {\r\n        this.searchForm.type = \"text\";\r\n      } else if (name == \"zip\") {\r\n        this.searchForm.type = \"zip\";\r\n      } else if (name == \"rar\") {\r\n        this.searchForm.type = \"rar\";\r\n      }\r\n      this.handleSearch();\r\n    },\r\n    handleReset() {\r\n      this.$refs.searchForm.resetFields();\r\n      this.searchForm.pageNumber = 1;\r\n      if (this.showType == \"list\") {\r\n        this.searchForm.pageSize = 5;\r\n      } else {\r\n        this.searchForm.pageSize = 12;\r\n      }\r\n      this.selectDate = null;\r\n      this.searchForm.startDate = \"\";\r\n      this.searchForm.endDate = \"\";\r\n      // 重新加载数据\r\n      this.getDataList();\r\n    },\r\n    beforeUpload() {\r\n      return true;\r\n    },\r\n    handleMaxSize(file) {\r\n      this.$Notice.warning({\r\n        title: \"文件大小过大\",\r\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\",\r\n      });\r\n    },\r\n    handleSuccess(res, file, fileList) {\r\n      if (res.success) {\r\n        this.$Message.success(\"上传文件 \" + file.name + \" 成功\");\r\n        this.getDataList();\r\n      } else {\r\n        file.percentage = 0;\r\n        file.status = \"fail\";\r\n        file.name += \"（上传失败）\";\r\n        this.$Message.error(res.message);\r\n      }\r\n    },\r\n    handleError(error, file, fileList) {\r\n      this.$Message.error(error.toString());\r\n    },\r\n    clearFiles() {\r\n      this.$refs.up.clearFiles();\r\n    },\r\n    handleCancel() {\r\n      this.modalVisible = false;\r\n    },\r\n    download(v) {\r\n      window.open(\r\n        v.url +\r\n          \"?attname=&response-content-type=application/octet-stream&filename=\" +\r\n          v.title\r\n      );\r\n    },\r\n    showOffice(v) {\r\n      window.open(\"https://view.officeapps.live.com/op/view.aspx?src=\" + v.url);\r\n    },\r\n    showFile(v) {\r\n      window.open(v.url + \"?preview=true\");\r\n    },\r\n    previewFile(v) {\r\n      if (v.type.indexOf(\"audio\") >= 0) {\r\n        this.showVideo(v);\r\n      } else if (v.type.indexOf(\"office\") >= 0 || v.type.indexOf(\"word\") >= 0) {\r\n        this.showOffice(v);\r\n      } else if (\r\n        v.type.indexOf(\"pdf\") >= 0 ||\r\n        v.type.indexOf(\"text\") >= 0 ||\r\n        v.type.indexOf(\"octet\") >= 0\r\n      ) {\r\n        this.showFile(v);\r\n      }\r\n    },\r\n    changeDropDown(row, v) {\r\n      if (v == \"rename\") {\r\n        this.rename(row);\r\n      } else if (v == \"copy\") {\r\n        this.copy(row);\r\n      } else if (v == \"remove\") {\r\n        this.remove(row);\r\n      } else if (v == \"move\") {\r\n        this.move(row);\r\n      } else if (v == \"share\") {\r\n        this.share(row);\r\n      } else if (v == \"collect\") {\r\n        this.collect(row);\r\n      }\r\n    },\r\n    share(v) {\r\n      this.$copyText(v.url).then((e) => {\r\n        this.$Message.success(\"复制链接成功\");\r\n      });\r\n    },\r\n    selectMoveCategory(v) {\r\n      this.moveCategoryId = v.id;\r\n    },\r\n    moveAll() {\r\n      if (this.selectList.length <= 0) {\r\n        this.$Message.warning(\"您还未选择要移动的文件\");\r\n        return;\r\n      }\r\n      let ids = \"\";\r\n      this.selectList.forEach(function (e) {\r\n        ids += e.id + \",\";\r\n      });\r\n      ids = ids.substring(0, ids.length - 1);\r\n      this.moveFileIds = ids;\r\n      this.moveVisible = true;\r\n    },\r\n    move(v) {\r\n      this.moveFileIds = [v.id];\r\n      this.moveVisible = true;\r\n    },\r\n    handleSubmitMove() {\r\n      this.submitLoading = true;\r\n      moveFile({ ids: this.moveFileIds, categoryId: this.moveCategoryId }).then(\r\n        (res) => {\r\n          this.submitLoading = false;\r\n          if (res.success) {\r\n            this.$Message.success(\"操作成功\");\r\n            this.moveVisible = false;\r\n            this.clearSelectAll();\r\n            this.getDataList();\r\n          }\r\n        }\r\n      );\r\n    },\r\n    copy(v) {\r\n      this.$Modal.confirm({\r\n        title: \"确认复制\",\r\n        content: \"您确认要复制文件 \" + v.title + \" ?\",\r\n        loading: true,\r\n        onOk: () => {\r\n          copyUserFile({ id: v.id, key: v.fkey }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"复制文件成功，新文件名为 副本_\" + v.title);\r\n              this.getDataList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    collect(v) {\r\n      collectFile({ id: v.id }).then((res) => {\r\n        this.$Modal.remove();\r\n        if (res.success) {\r\n          this.$Message.success(v.isCollect ? \"取消收藏成功\" : \"收藏成功\");\r\n          this.getDataList();\r\n        }\r\n      });\r\n    },\r\n    removeAll() {\r\n      if (this.selectList.length <= 0) {\r\n        this.$Message.warning(\"您还未选择要删除的文件\");\r\n        return;\r\n      }\r\n      this.$Modal.confirm({\r\n        title: \"确认删除\",\r\n        content:\r\n          \"您确认要将所选的 \" +\r\n          this.selectList.length +\r\n          \" 个文件移入回收站， 7天内后自动彻底删除\",\r\n        loading: true,\r\n        onOk: () => {\r\n          let ids = \"\";\r\n          this.selectList.forEach(function (e) {\r\n            ids += e.id + \",\";\r\n          });\r\n          ids = ids.substring(0, ids.length - 1);\r\n          trashFile({ ids: ids }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"批量删除文件成功\");\r\n              this.clearSelectAll();\r\n              this.getDataList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    remove(v) {\r\n      this.$Modal.confirm({\r\n        title: \"确认删除\",\r\n        content:\r\n          \"您确认要将文件 \" + v.title + \" 移入回收站， 7天内后自动彻底删除\",\r\n        loading: true,\r\n        onOk: () => {\r\n          trashFile({ ids: v.id }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.clearSelectAll();\r\n              this.$Message.success(\"删除文件 \" + v.title + \" 成功\");\r\n              this.getDataList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    handleSubmit() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          this.submitLoading = true;\r\n          let params = {\r\n            id: this.form.id,\r\n            newKey: this.form.fkey,\r\n            newTitle: this.form.title,\r\n          };\r\n          renameUserFile(params).then((res) => {\r\n            this.submitLoading = false;\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.getDataList();\r\n              this.modalVisible = false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    rename(v) {\r\n      this.modalTitle = \"编辑文件名\";\r\n      // 转换null为\"\"\r\n      for (let attr in v) {\r\n        if (v[attr] == null) {\r\n          v[attr] = \"\";\r\n        }\r\n      }\r\n      let str = JSON.stringify(v);\r\n      let data = JSON.parse(str);\r\n      this.form = data;\r\n      this.modalVisible = true;\r\n    },\r\n    clearSelectAll() {\r\n      this.$refs.table.selectAll(false);\r\n      this.totalSize = \"\";\r\n    },\r\n    changeSelect(e) {\r\n      this.selectList = e;\r\n      let size = 0;\r\n      e.forEach((item) => {\r\n        size += item.size * 1.0;\r\n      });\r\n      this.totalSize = this.util.getFileSize(size);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>"]}]}