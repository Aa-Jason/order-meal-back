{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\message\\message.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\message\\message.vue","mtime":1651629755176},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ29va2llcyBmcm9tICJqcy1jb29raWUiOw0KaW1wb3J0IHsNCiAgZ2V0TWVzc2FnZVNlbmREYXRhLA0KICBlZGl0TWVzc2FnZVNlbmQsDQogIGRlbGV0ZU1lc3NhZ2VTZW5kLA0KICBhbGxNZXNzYWdlU2VuZCwNCn0gZnJvbSAiQC9hcGkvaW5kZXgiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAibWVzc2FnZV9pbmRleCIsDQogIGRhdGEoKSB7DQogICAgY29uc3QgbWFya0FzcmVhZEJ0biA9IChoLCBwYXJhbXMpID0+IHsNCiAgICAgIHJldHVybiBoKA0KICAgICAgICAiQnV0dG9uIiwNCiAgICAgICAgew0KICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICBpY29uOiAibWQtZXllLW9mZiIsDQogICAgICAgICAgICBzaXplOiAic21hbGwiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgb246IHsNCiAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7DQogICAgICAgICAgICAgIC8vIOagh+iusOW3suivuw0KICAgICAgICAgICAgICBsZXQgdiA9IHBhcmFtcy5yb3c7DQogICAgICAgICAgICAgIC8vIOi9rOaNom51bGzkuLoiIg0KICAgICAgICAgICAgICBmb3IgKGxldCBhdHRyIGluIHYpIHsNCiAgICAgICAgICAgICAgICBpZiAodlthdHRyXSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICB2W2F0dHJdID0gIiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGxldCBzdHIgPSBKU09OLnN0cmluZ2lmeSh2KTsNCiAgICAgICAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKHN0cik7DQogICAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gMTsNCiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICAgICAgZWRpdE1lc3NhZ2VTZW5kKGRhdGEpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsNCiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q291bnQoKTsNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICAi5qCH5Li65bey6K+7Ig0KICAgICAgKTsNCiAgICB9Ow0KICAgIGNvbnN0IGRlbGV0ZVJlYWxCdG4gPSAoaCwgcGFyYW1zKSA9PiB7DQogICAgICByZXR1cm4gaCgNCiAgICAgICAgIkJ1dHRvbiIsDQogICAgICAgIHsNCiAgICAgICAgICBwcm9wczogew0KICAgICAgICAgICAgaWNvbjogIm1kLXRyYXNoIiwNCiAgICAgICAgICAgIHNpemU6ICJzbWFsbCIsDQogICAgICAgICAgfSwNCiAgICAgICAgICBvbjogew0KICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsNCiAgICAgICAgICAgICAgLy8g5b275bqV5Yig6ZmkDQogICAgICAgICAgICAgIGxldCB2ID0gcGFyYW1zLnJvdzsNCiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICAgICAgZGVsZXRlTWVzc2FnZVNlbmQoeyBpZHM6IHYuaWQgfSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOw0KICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDb3VudCgpOw0KICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTWVzc2FnZSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgIH0sDQogICAgICAgICLliKDpmaQiDQogICAgICApOw0KICAgIH07DQogICAgcmV0dXJuIHsNCiAgICAgIGhlaWdodDogIjUwMHB4IiwNCiAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICBwYXJhbXM6IHsNCiAgICAgICAgdXNlcklkOiBKU09OLnBhcnNlKENvb2tpZXMuZ2V0KCJ1c2VySW5mbyIpKS5pZCwNCiAgICAgICAgc3RhdHVzOiAwLA0KICAgICAgICBwYWdlTnVtYmVyOiAxLCAvLyDlvZPliY3pobXmlbANCiAgICAgICAgcGFnZVNpemU6IDEwLCAvLyDpobXpnaLlpKflsI8NCiAgICAgICAgc29ydDogImNyZWF0ZVRpbWUiLCAvLyDpu5jorqTmjpLluo/lrZfmrrUNCiAgICAgICAgb3JkZXI6ICJkZXNjIiwgLy8g6buY6K6k5o6S5bqP5pa55byPDQogICAgICB9LA0KICAgICAgdG90YWw6IDAsDQogICAgICBtZXNMaXN0OiBbXSwNCiAgICAgIGN1cnJlbnRNZXNUeXBlOiAidW5yZWFkIiwNCiAgICAgIHNob3dNZXNMaXN0OiB0cnVlLA0KICAgICAgdW5yZWFkQ291bnQ6IDAsDQogICAgICBoYXNyZWFkQ291bnQ6IDAsDQogICAgICBtZXM6IHsNCiAgICAgICAgdGl0bGU6ICIiLA0KICAgICAgICB0aW1lOiAiIiwNCiAgICAgICAgY29udGVudDogIiIsDQogICAgICB9LA0KICAgICAgY29sdW1uczogWw0KICAgICAgICB7DQogICAgICAgICAgdHlwZTogImluZGV4IiwNCiAgICAgICAgICB3aWR0aDogNjAsDQogICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICIgIiwNCiAgICAgICAgICBrZXk6ICJ0aXRsZSIsDQogICAgICAgICAgYWxpZ246ICJsZWZ0IiwNCiAgICAgICAgICBlbGxpcHNpczogdHJ1ZSwNCiAgICAgICAgICByZW5kZXI6IChoLCBwYXJhbXMpID0+IHsNCiAgICAgICAgICAgIHJldHVybiBoKCJzcGFuIiwgWw0KICAgICAgICAgICAgICBoKA0KICAgICAgICAgICAgICAgICJhIiwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICBzdHlsZTogew0KICAgICAgICAgICAgICAgICAgICBtYXJnaW46ICIwIDMwcHggMCAwIiwNCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICBvbjogew0KICAgICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29udGVudChwYXJhbXMucm93KTsNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAi44CQIiArIHBhcmFtcy5yb3cudHlwZSArICLjgJEgIiArIHBhcmFtcy5yb3cudGl0bGUNCiAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIF0pOw0KICAgICAgICAgIH0sDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIiAiLA0KICAgICAgICAgIGtleTogInRpbWUiLA0KICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICB3aWR0aDogMTkwLA0KICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gew0KICAgICAgICAgICAgcmV0dXJuIGgoInNwYW4iLCBbDQogICAgICAgICAgICAgIGgoIkljb24iLCB7DQogICAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJtZC10aW1lIiwNCiAgICAgICAgICAgICAgICAgIHNpemU6IDE2LA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgc3R5bGU6IHsNCiAgICAgICAgICAgICAgICAgIG1hcmdpbjogIjAgNXB4IDNweCAwIiwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICB9KSwNCiAgICAgICAgICAgICAgaCgic3BhbiIsIHBhcmFtcy5yb3cuY3JlYXRlVGltZSksDQogICAgICAgICAgICBdKTsNCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICIgIiwNCiAgICAgICAgICBrZXk6ICJhc3JlYWQiLA0KICAgICAgICAgIGFsaWduOiAiY2VudGVyIiwNCiAgICAgICAgICB3aWR0aDogMjEwLA0KICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gew0KICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudE1lc1R5cGUgPT0gInVucmVhZCIpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFttYXJrQXNyZWFkQnRuKGgsIHBhcmFtcyldKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50TWVzVHlwZSA9PSAiaGFzcmVhZCIpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFtkZWxldGVSZWFsQnRuKGgsIHBhcmFtcyldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgXSwNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY2hhbmdlUGFnZSh2KSB7DQogICAgICB0aGlzLnBhcmFtcy5wYWdlTnVtYmVyID0gdjsNCiAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsNCiAgICB9LA0KICAgIGNoYW5nZVBhZ2VTaXplKHYpIHsNCiAgICAgIHRoaXMucGFyYW1zLnBhZ2VTaXplID0gdjsNCiAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsNCiAgICB9LA0KICAgIHJlZnJlc2hNZXNzYWdlKCkgew0KICAgICAgbGV0IHN0YXR1cyA9IDA7DQogICAgICBsZXQgdHlwZSA9IHRoaXMuY3VycmVudE1lc1R5cGU7DQogICAgICBpZiAodHlwZSA9PSAidW5yZWFkIikgew0KICAgICAgICBzdGF0dXMgPSAwOw0KICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJoYXNyZWFkIikgew0KICAgICAgICBzdGF0dXMgPSAxOw0KICAgICAgfQ0KICAgICAgdGhpcy5wYXJhbXMuc3RhdHVzID0gc3RhdHVzOw0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGdldE1lc3NhZ2VTZW5kRGF0YSh0aGlzLnBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLm1lc0xpc3QgPSByZXMucmVzdWx0LmNvbnRlbnQ7DQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5yZXN1bHQudG90YWxFbGVtZW50czsNCiAgICAgICAgICBpZiAodHlwZSA9PSAidW5yZWFkIikgew0KICAgICAgICAgICAgdGhpcy51bnJlYWRDb3VudCA9IHRoaXMudG90YWw7DQogICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJoYXNyZWFkIikgew0KICAgICAgICAgICAgdGhpcy5oYXNyZWFkQ291bnQgPSB0aGlzLnRvdGFsOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBpbml0TWVzc2FnZSgpIHsNCiAgICAgIC8vIOaYr+WQpui3s+i9rOafpeeci+a2iOaBr+ivpuaDhQ0KICAgICAgbGV0IHEgPSB0aGlzLiRyb3V0ZS5xdWVyeTsNCiAgICAgIGlmIChxLmNvbnRlbnQpIHsNCiAgICAgICAgdGhpcy5nZXRDb250ZW50KHEuY29udGVudCk7DQogICAgICB9DQogICAgICB0aGlzLmdldENvdW50KHRydWUpOw0KICAgIH0sDQogICAgLy8g6I635Y+W5raI5oGv6K6h5pWwDQogICAgZ2V0Q291bnQoaW5pdCkgew0KICAgICAgdGhpcy5nZXRVbnJlYWRDb3VudChpbml0KTsNCiAgICAgIHRoaXMuZ2V0UmVhZENvdW50KCk7DQogICAgfSwNCiAgICAvLyDmnKror7vmtojmga/orqHmlbANCiAgICBnZXRVbnJlYWRDb3VudChpbml0KSB7DQogICAgICB0aGlzLnBhcmFtcy5zdGF0dXMgPSAwOw0KICAgICAgZ2V0TWVzc2FnZVNlbmREYXRhKHRoaXMucGFyYW1zKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgaWYgKGluaXQpIHsNCiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5tZXNMaXN0ID0gcmVzLnJlc3VsdC5jb250ZW50Ow0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLnVucmVhZENvdW50ID0gcmVzLnJlc3VsdC50b3RhbEVsZW1lbnRzOw0KICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0TWVzc2FnZUNvdW50IiwgdGhpcy51bnJlYWRDb3VudCk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8g5bey6K+75raI5oGv6K6h5pWwDQogICAgZ2V0UmVhZENvdW50KCkgew0KICAgICAgdGhpcy5wYXJhbXMuc3RhdHVzID0gMTsNCiAgICAgIGdldE1lc3NhZ2VTZW5kRGF0YSh0aGlzLnBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuaGFzcmVhZENvdW50ID0gcmVzLnJlc3VsdC50b3RhbEVsZW1lbnRzOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGRlbGV0ZU1lc3NhZ2UoaWQpIHsNCiAgICAgIGRlbGV0ZU1lc3NhZ2VTZW5kKHsgaWRzOiBpZCB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBzZXRDdXJyZW50TWVzVHlwZSh0eXBlKSB7DQogICAgICBpZiAodGhpcy5jdXJyZW50TWVzVHlwZSAhPSB0eXBlKSB7DQogICAgICAgIHRoaXMuc2hvd01lc0xpc3QgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgdGhpcy5jdXJyZW50TWVzVHlwZSA9IHR5cGU7DQogICAgICB0aGlzLnBhcmFtcy5wYWdlTnVtYmVyID0gMTsNCiAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsNCiAgICB9LA0KICAgIGdldENvbnRlbnQodikgew0KICAgICAgdGhpcy5zaG93TWVzTGlzdCA9IGZhbHNlOw0KICAgICAgdGhpcy5tZXMudGl0bGUgPSB2LnRpdGxlOw0KICAgICAgdGhpcy5tZXMudGltZSA9IHYuY3JlYXRlVGltZTsNCiAgICAgIHRoaXMubWVzLmNvbnRlbnQgPSB2LmNvbnRlbnQ7DQogICAgICBpZiAodi5zdGF0dXMgPT0gMCkgew0KICAgICAgICAvLyDmoIforrDlt7Lor7sg6L2s5o2ibnVsbOS4uiIiDQogICAgICAgIGZvciAobGV0IGF0dHIgaW4gdikgew0KICAgICAgICAgIGlmICh2W2F0dHJdID09IG51bGwpIHsNCiAgICAgICAgICAgIHZbYXR0cl0gPSAiIjsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgbGV0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOw0KICAgICAgICBsZXQgZGF0YSA9IEpTT04ucGFyc2Uoc3RyKTsNCiAgICAgICAgZGF0YS5zdGF0dXMgPSAxOw0KICAgICAgICBlZGl0TWVzc2FnZVNlbmQoZGF0YSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgICB0aGlzLmdldENvdW50KCk7DQogICAgICAgICAgICB0aGlzLnJlZnJlc2hNZXNzYWdlKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHJlYWRBbGwoKSB7DQogICAgICBhbGxNZXNzYWdlU2VuZCgwKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy5nZXRDb3VudCgpOw0KICAgICAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBkZWxldGVBbGwoKSB7DQogICAgICBhbGxNZXNzYWdlU2VuZCgxKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy5nZXRDb3VudCgpOw0KICAgICAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBiYWNrTGlzdCgpIHsNCiAgICAgIHRoaXMuc2hvd01lc0xpc3QgPSB0cnVlOw0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBuYW1lOiAibWVzc2FnZV9pbmRleCIsDQogICAgICB9KTsNCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIC8vIOiuoeeul+mrmOW6pg0KICAgIGxldCBoZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0Ow0KICAgIHRoaXMuaGVpZ2h0ID0gTnVtYmVyKGhlaWdodCAtIDEyMCkgKyAicHgiOw0KICAgIHRoaXMuaW5pdE1lc3NhZ2UoKTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAvLyDnm5HlkKzot6/nlLHlj5jljJbpgJrov4dpZOiOt+WPluaVsOaNrg0KICAgICRyb3V0ZSh0bywgZnJvbSkgew0KICAgICAgaWYgKHRvLm5hbWUgPT0gIm1lc3NhZ2VfaW5kZXgiKSB7DQogICAgICAgIGxldCBxID0gdGhpcy4kcm91dGUucXVlcnk7DQogICAgICAgIGlmIChxLmNvbnRlbnQpIHsNCiAgICAgICAgICB0aGlzLmluaXRNZXNzYWdlKCk7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["message.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"message.vue","sourceRoot":"src/views/message","sourcesContent":["<style lang=\"less\">\r\n@import \"./message.less\";\r\n</style>\r\n\r\n<template>\r\n  <div class=\"own-space-message-content\" :style=\"{ height: height }\">\r\n    <div class=\"message-main-content\">\r\n      <div class=\"message-mainlist-content\">\r\n        <div>\r\n          <Button\r\n            @click=\"setCurrentMesType('unread')\"\r\n            size=\"large\"\r\n            long\r\n            type=\"text\"\r\n          >\r\n            <div class=\"mes-wrap\">\r\n              <transition name=\"mes-current-type-btn\">\r\n                <Icon\r\n                  v-show=\"currentMesType == 'unread'\"\r\n                  type=\"md-checkmark\"\r\n                ></Icon>\r\n              </transition>\r\n              <span class=\"mes-type-btn-text\">未读消息</span>\r\n              <Badge\r\n                class=\"message-count-badge-outer\"\r\n                class-name=\"message-count-badge-red\"\r\n                :count=\"unreadCount\"\r\n              ></Badge>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n        <div>\r\n          <Button\r\n            @click=\"setCurrentMesType('hasread')\"\r\n            size=\"large\"\r\n            long\r\n            type=\"text\"\r\n          >\r\n            <div class=\"mes-wrap\">\r\n              <transition name=\"mes-current-type-btn\">\r\n                <Icon\r\n                  v-show=\"currentMesType == 'hasread'\"\r\n                  type=\"md-checkmark\"\r\n                ></Icon>\r\n              </transition>\r\n              <span class=\"mes-type-btn-text\">已读消息</span>\r\n              <Badge\r\n                class=\"message-count-badge-outer\"\r\n                class-name=\"message-count-badge\"\r\n                :count=\"hasreadCount\"\r\n              ></Badge>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div class=\"message-content-content\">\r\n        <transition name=\"view-message\">\r\n          <div v-if=\"showMesList\" class=\"message-title-list-content\">\r\n            <Table\r\n              ref=\"messageList\"\r\n              :loading=\"loading\"\r\n              :columns=\"columns\"\r\n              :data=\"mesList\"\r\n            ></Table>\r\n            <div class=\"message-page\">\r\n              <Poptip\r\n                confirm\r\n                transfer\r\n                title=\"确定标记所有消息为已读？\"\r\n                @on-ok=\"readAll\"\r\n                v-if=\"currentMesType == 'unread'\"\r\n              >\r\n                <Button icon=\"md-notifications-off\" :disabled=\"unreadCount <= 0\"\r\n                  >全部标记已读</Button\r\n                >\r\n              </Poptip>\r\n              <Poptip\r\n                confirm\r\n                transfer\r\n                title=\"确定彻底删除所有已读消息？\"\r\n                @on-ok=\"deleteAll\"\r\n                v-if=\"currentMesType == 'hasread'\"\r\n              >\r\n                <Button icon=\"md-trash\" :disabled=\"hasreadCount <= 0\"\r\n                  >全部彻底删除</Button\r\n                >\r\n              </Poptip>\r\n              <Page\r\n                :current=\"params.pageNumber\"\r\n                :total=\"total\"\r\n                :page-size=\"params.pageSize\"\r\n                @on-change=\"changePage\"\r\n                @on-page-size-change=\"changePageSize\"\r\n                :page-size-opts=\"[5, 10]\"\r\n                size=\"small\"\r\n                show-total\r\n                show-elevator\r\n                show-sizer\r\n                class=\"page-fix\"\r\n              ></Page>\r\n            </div>\r\n          </div>\r\n        </transition>\r\n        <transition name=\"back-message-list\">\r\n          <div v-if=\"!showMesList\" class=\"message-view-content-content\">\r\n            <div class=\"message-content-top-bar\">\r\n              <span class=\"mes-back-btn-content\">\r\n                <Button type=\"text\" @click=\"backList\">\r\n                  <Icon type=\"ios-arrow-back\"></Icon>&nbsp;&nbsp;返回\r\n                </Button>\r\n              </span>\r\n              <h3 class=\"mes-title\">{{ mes.title }}</h3>\r\n            </div>\r\n            <p class=\"mes-time-content\">\r\n              <Icon type=\"android-time\"></Icon>\r\n              &nbsp;&nbsp;{{ mes.time }}\r\n            </p>\r\n            <div class=\"message-content-body\">\r\n              <p class=\"message-content\" v-html=\"mes.content\">\r\n                {{ mes.content }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cookies from \"js-cookie\";\r\nimport {\r\n  getMessageSendData,\r\n  editMessageSend,\r\n  deleteMessageSend,\r\n  allMessageSend,\r\n} from \"@/api/index\";\r\nexport default {\r\n  name: \"message_index\",\r\n  data() {\r\n    const markAsreadBtn = (h, params) => {\r\n      return h(\r\n        \"Button\",\r\n        {\r\n          props: {\r\n            icon: \"md-eye-off\",\r\n            size: \"small\",\r\n          },\r\n          on: {\r\n            click: () => {\r\n              // 标记已读\r\n              let v = params.row;\r\n              // 转换null为\"\"\r\n              for (let attr in v) {\r\n                if (v[attr] == null) {\r\n                  v[attr] = \"\";\r\n                }\r\n              }\r\n              let str = JSON.stringify(v);\r\n              let data = JSON.parse(str);\r\n              data.status = 1;\r\n              this.loading = true;\r\n              editMessageSend(data).then((res) => {\r\n                this.loading = false;\r\n                if (res.success) {\r\n                  this.$Message.success(\"操作成功\");\r\n                  this.getCount();\r\n                  this.refreshMessage();\r\n                }\r\n              });\r\n            },\r\n          },\r\n        },\r\n        \"标为已读\"\r\n      );\r\n    };\r\n    const deleteRealBtn = (h, params) => {\r\n      return h(\r\n        \"Button\",\r\n        {\r\n          props: {\r\n            icon: \"md-trash\",\r\n            size: \"small\",\r\n          },\r\n          on: {\r\n            click: () => {\r\n              // 彻底删除\r\n              let v = params.row;\r\n              this.loading = true;\r\n              deleteMessageSend({ ids: v.id }).then((res) => {\r\n                this.loading = false;\r\n                if (res.success) {\r\n                  this.$Message.success(\"操作成功\");\r\n                  this.getCount();\r\n                  this.refreshMessage();\r\n                }\r\n              });\r\n            },\r\n          },\r\n        },\r\n        \"删除\"\r\n      );\r\n    };\r\n    return {\r\n      height: \"500px\",\r\n      loading: true,\r\n      params: {\r\n        userId: JSON.parse(Cookies.get(\"userInfo\")).id,\r\n        status: 0,\r\n        pageNumber: 1, // 当前页数\r\n        pageSize: 10, // 页面大小\r\n        sort: \"createTime\", // 默认排序字段\r\n        order: \"desc\", // 默认排序方式\r\n      },\r\n      total: 0,\r\n      mesList: [],\r\n      currentMesType: \"unread\",\r\n      showMesList: true,\r\n      unreadCount: 0,\r\n      hasreadCount: 0,\r\n      mes: {\r\n        title: \"\",\r\n        time: \"\",\r\n        content: \"\",\r\n      },\r\n      columns: [\r\n        {\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \" \",\r\n          key: \"title\",\r\n          align: \"left\",\r\n          ellipsis: true,\r\n          render: (h, params) => {\r\n            return h(\"span\", [\r\n              h(\r\n                \"a\",\r\n                {\r\n                  style: {\r\n                    margin: \"0 30px 0 0\",\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.getContent(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"【\" + params.row.type + \"】 \" + params.row.title\r\n              ),\r\n            ]);\r\n          },\r\n        },\r\n        {\r\n          title: \" \",\r\n          key: \"time\",\r\n          align: \"center\",\r\n          width: 190,\r\n          render: (h, params) => {\r\n            return h(\"span\", [\r\n              h(\"Icon\", {\r\n                props: {\r\n                  type: \"md-time\",\r\n                  size: 16,\r\n                },\r\n                style: {\r\n                  margin: \"0 5px 3px 0\",\r\n                },\r\n              }),\r\n              h(\"span\", params.row.createTime),\r\n            ]);\r\n          },\r\n        },\r\n        {\r\n          title: \" \",\r\n          key: \"asread\",\r\n          align: \"center\",\r\n          width: 210,\r\n          render: (h, params) => {\r\n            if (this.currentMesType == \"unread\") {\r\n              return h(\"div\", [markAsreadBtn(h, params)]);\r\n            } else if (this.currentMesType == \"hasread\") {\r\n              return h(\"div\", [deleteRealBtn(h, params)]);\r\n            }\r\n          },\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    changePage(v) {\r\n      this.params.pageNumber = v;\r\n      this.refreshMessage();\r\n    },\r\n    changePageSize(v) {\r\n      this.params.pageSize = v;\r\n      this.refreshMessage();\r\n    },\r\n    refreshMessage() {\r\n      let status = 0;\r\n      let type = this.currentMesType;\r\n      if (type == \"unread\") {\r\n        status = 0;\r\n      } else if (type == \"hasread\") {\r\n        status = 1;\r\n      }\r\n      this.params.status = status;\r\n      this.loading = true;\r\n      getMessageSendData(this.params).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.mesList = res.result.content;\r\n          this.total = res.result.totalElements;\r\n          if (type == \"unread\") {\r\n            this.unreadCount = this.total;\r\n          } else if (type == \"hasread\") {\r\n            this.hasreadCount = this.total;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    initMessage() {\r\n      // 是否跳转查看消息详情\r\n      let q = this.$route.query;\r\n      if (q.content) {\r\n        this.getContent(q.content);\r\n      }\r\n      this.getCount(true);\r\n    },\r\n    // 获取消息计数\r\n    getCount(init) {\r\n      this.getUnreadCount(init);\r\n      this.getReadCount();\r\n    },\r\n    // 未读消息计数\r\n    getUnreadCount(init) {\r\n      this.params.status = 0;\r\n      getMessageSendData(this.params).then((res) => {\r\n        if (res.success) {\r\n          if (init) {\r\n            this.loading = false;\r\n            this.mesList = res.result.content;\r\n          }\r\n          this.unreadCount = res.result.totalElements;\r\n          this.$store.commit(\"setMessageCount\", this.unreadCount);\r\n        }\r\n      });\r\n    },\r\n    // 已读消息计数\r\n    getReadCount() {\r\n      this.params.status = 1;\r\n      getMessageSendData(this.params).then((res) => {\r\n        if (res.success) {\r\n          this.hasreadCount = res.result.totalElements;\r\n        }\r\n      });\r\n    },\r\n    deleteMessage(id) {\r\n      deleteMessageSend({ ids: id }).then((res) => {\r\n        if (res.success) {\r\n          this.$Message.success(\"删除成功\");\r\n        }\r\n      });\r\n    },\r\n    setCurrentMesType(type) {\r\n      if (this.currentMesType != type) {\r\n        this.showMesList = true;\r\n      }\r\n      this.currentMesType = type;\r\n      this.params.pageNumber = 1;\r\n      this.refreshMessage();\r\n    },\r\n    getContent(v) {\r\n      this.showMesList = false;\r\n      this.mes.title = v.title;\r\n      this.mes.time = v.createTime;\r\n      this.mes.content = v.content;\r\n      if (v.status == 0) {\r\n        // 标记已读 转换null为\"\"\r\n        for (let attr in v) {\r\n          if (v[attr] == null) {\r\n            v[attr] = \"\";\r\n          }\r\n        }\r\n        let str = JSON.stringify(v);\r\n        let data = JSON.parse(str);\r\n        data.status = 1;\r\n        editMessageSend(data).then((res) => {\r\n          if (res.success) {\r\n            this.getCount();\r\n            this.refreshMessage();\r\n          }\r\n        });\r\n      }\r\n    },\r\n    readAll() {\r\n      allMessageSend(0).then((res) => {\r\n        if (res.success) {\r\n          this.getCount();\r\n          this.refreshMessage();\r\n        }\r\n      });\r\n    },\r\n    deleteAll() {\r\n      allMessageSend(1).then((res) => {\r\n        if (res.success) {\r\n          this.getCount();\r\n          this.refreshMessage();\r\n        }\r\n      });\r\n    },\r\n    backList() {\r\n      this.showMesList = true;\r\n      this.$router.push({\r\n        name: \"message_index\",\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    // 计算高度\r\n    let height = document.documentElement.clientHeight;\r\n    this.height = Number(height - 120) + \"px\";\r\n    this.initMessage();\r\n  },\r\n  watch: {\r\n    // 监听路由变化通过id获取数据\r\n    $route(to, from) {\r\n      if (to.name == \"message_index\") {\r\n        let q = this.$route.query;\r\n        if (q.content) {\r\n          this.initMessage();\r\n          return;\r\n        }\r\n        this.refreshMessage();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n"]}]}