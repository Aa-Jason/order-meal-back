{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\mapLocate.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\mapLocate.vue","mtime":1651629755194},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbWFwYm94Z2wgZnJvbSAibWFwYm94LWdsIjsNCmltcG9ydCBNYXBib3hHZW9jb2RlciBmcm9tICJAbWFwYm94L21hcGJveC1nbC1nZW9jb2RlciI7DQppbXBvcnQgJ0BtYXBib3gvbWFwYm94LWdsLWdlb2NvZGVyL2Rpc3QvbWFwYm94LWdsLWdlb2NvZGVyLmNzcyc7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJtYXBMb2NhdGUiLA0KICBwcm9wczogew0KICAgIGlkOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAibWFwIiwNCiAgICB9LA0KICAgIHZhbHVlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAiIiwNCiAgICB9LA0KICAgIHNob3dJbnB1dDogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUsDQogICAgfSwNCiAgICBwcmV2aWV3OiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UsDQogICAgfSwNCiAgICB0ZXh0OiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAi5Zyw5Zu+6YCJ54K5IiwNCiAgICB9LA0KICAgIHdpZHRoOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0OiA5MDAsDQogICAgfSwNCiAgICBwaXRjaDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdDogMCwNCiAgICB9LA0KICAgIGRlY2ltYWw6IHsNCiAgICAgIHR5cGU6IE51bWJlciwNCiAgICAgIGRlZmF1bHQ6IDYsDQogICAgfSwNCiAgICBkcmFnZ2FibGU6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlLA0KICAgIH0sDQogICAgc2l6ZTogU3RyaW5nLA0KICAgIHR5cGU6IFN0cmluZywNCiAgICBzaGFwZTogU3RyaW5nLA0KICAgIGdob3N0OiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UsDQogICAgfSwNCiAgICBkaXNhYmxlZDogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlLA0KICAgIH0sDQogICAgY2xlYXJhYmxlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogdHJ1ZSwNCiAgICB9LA0KICAgIHBsYWNlaG9sZGVyOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAi6L6T5YWl5Z2Q5qCH5oiW6YCJ5oup5Zyw54K5IiwNCiAgICB9LA0KICAgIG1heGxlbmd0aDogTnVtYmVyLA0KICAgIHJlYWRvbmx5OiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UsDQogICAgfSwNCiAgICBpY29uOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAibWQtbG9jYXRlIiwNCiAgICB9LA0KICAgIHN0eWxlczogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogIm1hcGJveDovL3N0eWxlcy9tYXBib3gvc3RyZWV0cy12MTEiLA0KICAgIH0sDQogICAgY2VudGVyOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIFsxMTYuMzUsIDM5Ljg1XTsNCiAgICAgIH0sDQogICAgfSwNCiAgICB6b29tOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgICBkZWZhdWx0OiA5LA0KICAgIH0sDQogICAgY29tcGFjdDogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUsDQogICAgfSwNCiAgICBjdXN0b21BdHRyaWJ1dGlvbjogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogIiIsDQogICAgfSwNCiAgICBzZWFyY2hhYmxlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogdHJ1ZSwNCiAgICB9LA0KICAgIGNoYW5nZVN0eWxlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogdHJ1ZSwNCiAgICB9LA0KICAgIG5hdmlnYXRpb246IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlLA0KICAgIH0sDQogICAgbG9jYXRlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogdHJ1ZSwNCiAgICB9LA0KICAgIGZ1bGxzY3JlZW46IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZSwNCiAgICB9LA0KICAgIGJ1aWxkaW5nM0Q6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlLA0KICAgIH0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGRhdGE6IHRoaXMudmFsdWUsDQogICAgICBtYXBib3g6IG51bGwsDQogICAgICBjdXJyZW50VmFsdWU6ICIiLA0KICAgICAgc2hvd01vZGFsOiBmYWxzZSwNCiAgICAgIGZ1bGw6IGZhbHNlLA0KICAgICAgbW9kYWxIZWlnaHQ6ICI1MDBweCIsDQogICAgICBtYXJrZXI6IG51bGwsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGluaXQoKSB7DQogICAgICBpZiAoIWNvbmZpZy5tYXBib3hUb2tlbikgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBtYXBib3hnbC5hY2Nlc3NUb2tlbiA9IGNvbmZpZy5tYXBib3hUb2tlbjsNCiAgICAgIHRoaXMubWFwYm94ID0gbmV3IG1hcGJveGdsLk1hcCh7DQogICAgICAgIGNvbnRhaW5lcjogdGhpcy5pZCwNCiAgICAgICAgc3R5bGU6IHRoaXMuc3R5bGVzLA0KICAgICAgICBjZW50ZXI6IHRoaXMuY2VudGVyLA0KICAgICAgICB6b29tOiB0aGlzLnpvb20sDQogICAgICAgIHBpdGNoOiB0aGlzLnBpdGNoLA0KICAgICAgICBhdHRyaWJ1dGlvbkNvbnRyb2w6IGZhbHNlLA0KICAgICAgfSk7DQogICAgICAvLyDlsZ7mgKcNCiAgICAgIHRoaXMubWFwYm94LmFkZENvbnRyb2woDQogICAgICAgIG5ldyBtYXBib3hnbC5BdHRyaWJ1dGlvbkNvbnRyb2woew0KICAgICAgICAgIGNvbXBhY3Q6IHRoaXMuY29tcGFjdCwNCiAgICAgICAgICBjdXN0b21BdHRyaWJ1dGlvbjogdGhpcy5jdXN0b21BdHRyaWJ1dGlvbiwNCiAgICAgICAgfSkNCiAgICAgICk7DQogICAgICAvLyDmkJzntKINCiAgICAgIGlmICh0aGlzLnNlYXJjaGFibGUpIHsNCiAgICAgICAgdGhpcy5tYXBib3guYWRkQ29udHJvbCgNCiAgICAgICAgICBuZXcgTWFwYm94R2VvY29kZXIoew0KICAgICAgICAgICAgYWNjZXNzVG9rZW46IG1hcGJveGdsLmFjY2Vzc1Rva2VuLA0KICAgICAgICAgICAgbWFwYm94Z2w6IG1hcGJveGdsLA0KICAgICAgICAgIH0pDQogICAgICAgICk7DQogICAgICB9DQogICAgICAvLyDlnLDlm77moLflvI/liIfmjaINCiAgICAgIGNsYXNzIENoYW5nZVN0eWxlQ29udHJvbCB7DQogICAgICAgIGdldERlZmF1bHRQb3NpdGlvbigpIHsNCiAgICAgICAgICBjb25zdCBkZWZhdWx0UG9zaXRpb24gPSAidG9wLXJpZ2h0IjsNCiAgICAgICAgICByZXR1cm4gZGVmYXVsdFBvc2l0aW9uOw0KICAgICAgICB9DQogICAgICAgIG9uQWRkKG1hcCkgew0KICAgICAgICAgIHRoaXMubWFwID0gbWFwOw0KICAgICAgICAgIHRoaXMuY29udHJvbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgIHRoaXMuY29udHJvbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJtYXBib3hnbC1jdHJsIik7DQogICAgICAgICAgdGhpcy5jb250cm9sQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoIm1hcGJveGdsLWN0cmwtZ3JvdXAiKTsNCiAgICAgICAgICB0aGlzLm1hcFN0eWxlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgICAgdGhpcy5zdHlsZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOw0KICAgICAgICAgIHRoaXMuc3R5bGVCdXR0b24udHlwZSA9ICJidXR0b24iOw0KICAgICAgICAgIHRoaXMubWFwU3R5bGVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgibWFwYm94Z2wtc3R5bGUtbGlzdCIpOw0KICAgICAgICAgIGNvbnN0IGRlZmF1bHRTdHlsZSA9ICLooZfpgZPlnLDlm74iOw0KICAgICAgICAgIGNvbnN0IHN0eWxlcyA9IFsNCiAgICAgICAgICAgIHsgdGl0bGU6ICLooZfpgZPlnLDlm74iLCB1cmk6ICJtYXBib3g6Ly9zdHlsZXMvbWFwYm94L3N0cmVldHMtdjExIiB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICB0aXRsZTogIuWNq+aYn+ihl+mBkyIsDQogICAgICAgICAgICAgIHVyaTogIm1hcGJveDovL3N0eWxlcy9tYXBib3gvc2F0ZWxsaXRlLXN0cmVldHMtdjExIiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7IHRpdGxlOiAi5pqX6buR6aOO5qC8IiwgdXJpOiAibWFwYm94Oi8vc3R5bGVzL21hcGJveC9kYXJrLXYxMCIgfSwNCiAgICAgICAgICAgIHsgdGl0bGU6ICLmmI7kuq7po47moLwiLCB1cmk6ICJtYXBib3g6Ly9zdHlsZXMvbWFwYm94L2xpZ2h0LXYxMCIgfSwNCiAgICAgICAgICAgIHsgdGl0bGU6ICLmiLflpJblnLDlm74iLCB1cmk6ICJtYXBib3g6Ly9zdHlsZXMvbWFwYm94L291dGRvb3JzLXYxMSIgfSwNCiAgICAgICAgICAgIHsgdGl0bGU6ICLljavmmJ/lnLDlm74iLCB1cmk6ICJtYXBib3g6Ly9zdHlsZXMvbWFwYm94L3NhdGVsbGl0ZS12OSIgfSwNCiAgICAgICAgICBdOw0KICAgICAgICAgIGZvciAoY29uc3Qgc3R5bGUgb2Ygc3R5bGVzKSB7DQogICAgICAgICAgICBjb25zdCBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsNCiAgICAgICAgICAgIHN0eWxlRWxlbWVudC50eXBlID0gImJ1dHRvbiI7DQogICAgICAgICAgICBzdHlsZUVsZW1lbnQuaW5uZXJUZXh0ID0gc3R5bGUudGl0bGU7DQogICAgICAgICAgICBzdHlsZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgNCiAgICAgICAgICAgICAgc3R5bGUudGl0bGUucmVwbGFjZSgvW15hLXowLTktXS9naSwgIl8iKQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIHN0eWxlRWxlbWVudC5kYXRhc2V0LnVyaSA9IEpTT04uc3RyaW5naWZ5KHN0eWxlLnVyaSk7DQogICAgICAgICAgICBzdHlsZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgICAgY29uc3Qgc3JjRWxlbWVudCA9IGV2ZW50LnNyY0VsZW1lbnQ7DQogICAgICAgICAgICAgIGlmIChzcmNFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygiYWN0aXZlIikpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdGhpcy5tYXAuc2V0U3R5bGUoSlNPTi5wYXJzZShzcmNFbGVtZW50LmRhdGFzZXQudXJpKSk7DQogICAgICAgICAgICAgIHRoaXMubWFwLm9uKCJkYXRhIiwgKGUpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoZS5pc1NvdXJjZUxvYWRlZCkgew0KICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWxMaXN0ID0gdGhpcy5tYXANCiAgICAgICAgICAgICAgICAgICAgLmdldFN0eWxlKCkNCiAgICAgICAgICAgICAgICAgICAgLmxheWVycy5maWx0ZXIoKGxheWVyKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC8tbGFiZWwvLnRlc3QobGF5ZXIuaWQpOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGxhYmVsTGF5ZXIgb2YgbGFiZWxMaXN0KSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLnNldExheW91dFByb3BlcnR5KGxhYmVsTGF5ZXIuaWQsICJ0ZXh0LWZpZWxkIiwgWw0KICAgICAgICAgICAgICAgICAgICAgICJjb2FsZXNjZSIsDQogICAgICAgICAgICAgICAgICAgICAgWyJnZXQiLCAibmFtZV96aC1IYW5zIl0sDQogICAgICAgICAgICAgICAgICAgICAgWyJnZXQiLCAibmFtZSJdLA0KICAgICAgICAgICAgICAgICAgICBdKTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB0aGlzLm1hcFN0eWxlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICAgIHRoaXMuc3R5bGVCdXR0b24uc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICAgIGNvbnN0IGVsbXMgPQ0KICAgICAgICAgICAgICAgIHRoaXMubWFwU3R5bGVDb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiYWN0aXZlIik7DQogICAgICAgICAgICAgIHdoaWxlIChlbG1zWzBdKSB7DQogICAgICAgICAgICAgICAgZWxtc1swXS5jbGFzc0xpc3QucmVtb3ZlKCJhY3RpdmUiKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBzcmNFbGVtZW50LmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAoc3R5bGUudGl0bGUgPT09IGRlZmF1bHRTdHlsZSkgew0KICAgICAgICAgICAgICBzdHlsZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLm1hcFN0eWxlQ29udGFpbmVyLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuc3R5bGVCdXR0b24uY2xhc3NMaXN0LmFkZCgibWFwYm94Z2wtY3RybC1pY29uIik7DQogICAgICAgICAgdGhpcy5zdHlsZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCJtYXBib3hnbC1zdHlsZS1zd2l0Y2hlciIpOw0KICAgICAgICAgIHRoaXMuc3R5bGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7DQogICAgICAgICAgICB0aGlzLnN0eWxlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICB0aGlzLm1hcFN0eWxlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5vbkRvY3VtZW50Q2xpY2spOw0KICAgICAgICAgIHRoaXMuY29udHJvbENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlQnV0dG9uKTsNCiAgICAgICAgICB0aGlzLmNvbnRyb2xDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5tYXBTdHlsZUNvbnRhaW5lcik7DQogICAgICAgICAgcmV0dXJuIHRoaXMuY29udHJvbENvbnRhaW5lcjsNCiAgICAgICAgfQ0KICAgICAgICBvblJlbW92ZSgpIHsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICAhdGhpcy5jb250cm9sQ29udGFpbmVyIHx8DQogICAgICAgICAgICAhdGhpcy5jb250cm9sQ29udGFpbmVyLnBhcmVudE5vZGUgfHwNCiAgICAgICAgICAgICF0aGlzLm1hcCB8fA0KICAgICAgICAgICAgIXRoaXMuc3R5bGVCdXR0b24NCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5zdHlsZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsIHRoaXMub25Eb2N1bWVudENsaWNrKTsNCiAgICAgICAgICB0aGlzLmNvbnRyb2xDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmNvbnRyb2xDb250YWluZXIpOw0KICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5vbkRvY3VtZW50Q2xpY2spOw0KICAgICAgICAgIHRoaXMubWFwID0gdW5kZWZpbmVkOw0KICAgICAgICB9DQogICAgICAgIG9uRG9jdW1lbnRDbGljayhldmVudCkgew0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIHRoaXMuY29udHJvbENvbnRhaW5lciAmJg0KICAgICAgICAgICAgIXRoaXMuY29udHJvbENvbnRhaW5lci5jb250YWlucyhldmVudC50YXJnZXQpICYmDQogICAgICAgICAgICB0aGlzLm1hcFN0eWxlQ29udGFpbmVyICYmDQogICAgICAgICAgICB0aGlzLnN0eWxlQnV0dG9uDQogICAgICAgICAgKSB7DQogICAgICAgICAgICB0aGlzLm1hcFN0eWxlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICB0aGlzLnN0eWxlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuY2hhbmdlU3R5bGUpIHsNCiAgICAgICAgdGhpcy5tYXBib3guYWRkQ29udHJvbChuZXcgQ2hhbmdlU3R5bGVDb250cm9sKCkpOw0KICAgICAgfQ0KICAgICAgLy8g5a+86Iiq5o6n5Lu2DQogICAgICBpZiAodGhpcy5uYXZpZ2F0aW9uKSB7DQogICAgICAgIHRoaXMubWFwYm94LmFkZENvbnRyb2wobmV3IG1hcGJveGdsLk5hdmlnYXRpb25Db250cm9sKCkpOw0KICAgICAgfQ0KICAgICAgLy8g5a6a5L2NDQogICAgICBpZiAodGhpcy5sb2NhdGUpIHsNCiAgICAgICAgdGhpcy5tYXBib3guYWRkQ29udHJvbCgNCiAgICAgICAgICBuZXcgbWFwYm94Z2wuR2VvbG9jYXRlQ29udHJvbCh7DQogICAgICAgICAgICBwb3NpdGlvbk9wdGlvbnM6IHsNCiAgICAgICAgICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHRyYWNrVXNlckxvY2F0aW9uOiB0cnVlLA0KICAgICAgICAgIH0pDQogICAgICAgICk7DQogICAgICB9DQogICAgICAvLyDlhajlsY8NCiAgICAgIGlmICh0aGlzLmZ1bGxzY3JlZW4pIHsNCiAgICAgICAgdGhpcy5tYXBib3guYWRkQ29udHJvbCgNCiAgICAgICAgICBuZXcgbWFwYm94Z2wuRnVsbHNjcmVlbkNvbnRyb2woew0KICAgICAgICAgICAgY29udGFpbmVyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5IiksDQogICAgICAgICAgfSkNCiAgICAgICAgKTsNCiAgICAgIH0NCiAgICAgIHRoaXMubWFwYm94Lm9uKCJsb2FkIiwgKCkgPT4gew0KICAgICAgICAvLyDkuK3mlocNCiAgICAgICAgY29uc3QgbGFiZWxMaXN0ID0gdGhpcy5tYXBib3guZ2V0U3R5bGUoKS5sYXllcnMuZmlsdGVyKChsYXllcikgPT4gew0KICAgICAgICAgIHJldHVybiAvLWxhYmVsLy50ZXN0KGxheWVyLmlkKTsNCiAgICAgICAgfSk7DQogICAgICAgIGZvciAobGV0IGxhYmVsTGF5ZXIgb2YgbGFiZWxMaXN0KSB7DQogICAgICAgICAgdGhpcy5tYXBib3guc2V0TGF5b3V0UHJvcGVydHkobGFiZWxMYXllci5pZCwgInRleHQtZmllbGQiLCBbDQogICAgICAgICAgICAiY29hbGVzY2UiLA0KICAgICAgICAgICAgWyJnZXQiLCAibmFtZV96aC1IYW5zIl0sDQogICAgICAgICAgICBbImdldCIsICJuYW1lIl0sDQogICAgICAgICAgXSk7DQogICAgICAgIH0NCiAgICAgICAgLy8gM0Tlu7rnrZENCiAgICAgICAgaWYgKHRoaXMuYnVpbGRpbmczRCkgew0KICAgICAgICAgIHRoaXMubWFwYm94LmFkZExheWVyKHsNCiAgICAgICAgICAgIGlkOiAiM2QtYnVpbGRpbmdzIiwNCiAgICAgICAgICAgIHNvdXJjZTogImNvbXBvc2l0ZSIsDQogICAgICAgICAgICAic291cmNlLWxheWVyIjogImJ1aWxkaW5nIiwNCiAgICAgICAgICAgIGZpbHRlcjogWyI9PSIsICJleHRydWRlIiwgInRydWUiXSwNCiAgICAgICAgICAgIHR5cGU6ICJmaWxsLWV4dHJ1c2lvbiIsDQogICAgICAgICAgICBtaW56b29tOiAxNSwNCiAgICAgICAgICAgIHBhaW50OiB7DQogICAgICAgICAgICAgICJmaWxsLWV4dHJ1c2lvbi1jb2xvciI6ICIjYWFhIiwNCiAgICAgICAgICAgICAgImZpbGwtZXh0cnVzaW9uLWhlaWdodCI6IFsNCiAgICAgICAgICAgICAgICAiaW50ZXJwb2xhdGUiLA0KICAgICAgICAgICAgICAgIFsibGluZWFyIl0sDQogICAgICAgICAgICAgICAgWyJ6b29tIl0sDQogICAgICAgICAgICAgICAgMTUsDQogICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAxNS4wNSwNCiAgICAgICAgICAgICAgICBbImdldCIsICJoZWlnaHQiXSwNCiAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgImZpbGwtZXh0cnVzaW9uLWJhc2UiOiBbDQogICAgICAgICAgICAgICAgImludGVycG9sYXRlIiwNCiAgICAgICAgICAgICAgICBbImxpbmVhciJdLA0KICAgICAgICAgICAgICAgIFsiem9vbSJdLA0KICAgICAgICAgICAgICAgIDE1LA0KICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgMTUuMDUsDQogICAgICAgICAgICAgICAgWyJnZXQiLCAibWluX2hlaWdodCJdLA0KICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAiZmlsbC1leHRydXNpb24tb3BhY2l0eSI6IDAuNiwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSk7DQogICAgICAgICAgLy8g5pi+56S654K5DQogICAgICAgICAgdGhpcy5mbHlUbygpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIC8vIOWNleeCueagh+iusA0KICAgICAgdGhpcy5tYXBib3gub24oImNsaWNrIiwgKGUpID0+IHsNCiAgICAgICAgaWYgKHRoaXMucHJldmlldykgew0KICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5tYXJrZXIpIHsNCiAgICAgICAgICB0aGlzLm1hcmtlci5yZW1vdmUoKTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLm1hcmtlciA9IG5ldyBtYXBib3hnbC5NYXJrZXIoew0KICAgICAgICAgIG9mZnNldDogWzAsIC0yNV0sDQogICAgICAgICAgZHJhZ2dhYmxlOiB0aGlzLmRyYWdnYWJsZSwNCiAgICAgICAgfSkNCiAgICAgICAgICAuc2V0TG5nTGF0KFtlLmxuZ0xhdC5sbmcsIGUubG5nTGF0LmxhdF0pDQogICAgICAgICAgLmFkZFRvKHRoaXMubWFwYm94KTsNCiAgICAgICAgaWYgKHRoaXMuZGVjaW1hbCA8IDApIHsNCiAgICAgICAgICB0aGlzLmRlY2ltYWwgPSAwOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLmRlY2ltYWwgPiAxNCkgew0KICAgICAgICAgIHRoaXMuZGVjaW1hbCA9IDE0Ow0KICAgICAgICB9DQogICAgICAgIGxldCBsbmcgPSBlLmxuZ0xhdC5sbmcudG9GaXhlZCh0aGlzLmRlY2ltYWwpOw0KICAgICAgICBsZXQgbGF0ID0gZS5sbmdMYXQubGF0LnRvRml4ZWQodGhpcy5kZWNpbWFsKTsNCiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBsbmcgKyAiLCAiICsgbGF0Ow0KICAgICAgICB0aGlzLiRlbWl0KCJvbi1jbGljayIsIHRoaXMuY3VycmVudFZhbHVlKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZmx5VG8oKSB7DQogICAgICBpZiAodGhpcy5kYXRhKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgbGV0IGxuZ0xhdCA9IHRoaXMuZGF0YS5zcGxpdCgiLCIpOw0KICAgICAgICAgIGxldCBsbmcgPSBsbmdMYXRbMF0udHJpbSgpOw0KICAgICAgICAgIGxldCBsYXQgPSBsbmdMYXRbMV0udHJpbSgpOw0KICAgICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdGhpcy5kYXRhOw0KICAgICAgICAgIGlmICh0aGlzLm1hcmtlcikgew0KICAgICAgICAgICAgdGhpcy5tYXJrZXIucmVtb3ZlKCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMubWFya2VyID0gbmV3IG1hcGJveGdsLk1hcmtlcih7DQogICAgICAgICAgICBvZmZzZXQ6IFswLCAtMjVdLA0KICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLA0KICAgICAgICAgIH0pDQogICAgICAgICAgICAuc2V0TG5nTGF0KFtsbmcsIGxhdF0pDQogICAgICAgICAgICAuYWRkVG8odGhpcy5tYXBib3gpOw0KICAgICAgICAgIHRoaXMubWFwYm94LmZseVRvKHsNCiAgICAgICAgICAgIGNlbnRlcjogW2xuZywgbGF0XSwNCiAgICAgICAgICAgIGVzc2VudGlhbDogdHJ1ZSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi5oKo6L6T5YWl55qE5Z2Q5qCH5LiN5ZCI5rOVIik7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gIiI7DQogICAgICAgIGlmICh0aGlzLm1hcmtlcikgew0KICAgICAgICAgIHRoaXMubWFya2VyLnJlbW92ZSgpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMubWFwYm94LmZseVRvKHsNCiAgICAgICAgICBjZW50ZXI6IHRoaXMuY2VudGVyLA0KICAgICAgICAgIHpvb206IDksDQogICAgICAgICAgZXNzZW50aWFsOiB0cnVlLA0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZUNoYW5nZSh2KSB7DQogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMuZGF0YSk7DQogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmRhdGEpOw0KICAgIH0sDQogICAgc2V0RGF0YSh2YWx1ZSkgew0KICAgICAgaWYgKCF0aGlzLm1hcGJveCkgew0KICAgICAgICB0aGlzLmluaXQoKTsNCiAgICAgIH0NCiAgICAgIGlmICh2YWx1ZSAhPSB0aGlzLmRhdGEpIHsNCiAgICAgICAgdGhpcy5kYXRhID0gdmFsdWU7DQogICAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5kYXRhKTsNCiAgICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5kYXRhKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZUZ1bGwoKSB7DQogICAgICB0aGlzLmZ1bGwgPSAhdGhpcy5mdWxsOw0KICAgICAgaWYgKHRoaXMuZnVsbCkgew0KICAgICAgICB0aGlzLm1vZGFsSGVpZ2h0ID0gIjEwMCUiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5tb2RhbEhlaWdodCA9ICI1MDBweCI7DQogICAgICB9DQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgdGhpcy5tYXBib3gucmVzaXplKCk7DQogICAgICB9LCAxMCk7DQogICAgfSwNCiAgICBoYW5kbGVTaG93KCkgew0KICAgICAgaWYgKCFjb25maWcubWFwYm94VG9rZW4pIHsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLor7flhYjphY3nva5NYXBib3jlnLDlm77nmoRhY2Nlc3NUb2tlbiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLnNob3dNb2RhbCA9IHRydWU7DQogICAgfSwNCiAgICBjaGFuZ2VNb2RhbCh2KSB7DQogICAgICBpZiAodikgew0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLm1hcGJveC5yZXNpemUoKTsNCiAgICAgICAgICB0aGlzLmZseVRvKCk7DQogICAgICAgIH0sIDEwKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRlbFN1Ym1pdCgpIHsNCiAgICAgIGlmICghdGhpcy5jdXJyZW50VmFsdWUpIHsNCiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLor7flnKjlnLDlm77kuK3ngrnlh7vpvKDmoIfpgInmi6nkuIDkuKrlnLDngrkiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy5kYXRhID0gdGhpcy5jdXJyZW50VmFsdWU7DQogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMuZGF0YSk7DQogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmRhdGEpOw0KICAgICAgdGhpcy5zaG93TW9kYWwgPSBmYWxzZTsNCiAgICB9LA0KICB9LA0KICBiZWZvcmVEZXN0cm95KCkgew0KICAgIC8vIOiwg+eUqOmUgOavgSBBUEkg5a+55b2T5YmN57yW6L6R5Zmo5a6e5L6L6L+b6KGM6ZSA5q+BDQogICAgaWYgKHRoaXMubWFwYm94ICE9IG51bGwpIHsNCiAgICAgIHRoaXMubWFwYm94LnJlbW92ZSgpOw0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICB2YWx1ZSh2YWwpIHsNCiAgICAgIHRoaXMuc2V0RGF0YSh2YWwpOw0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0KCk7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["mapLocate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mapLocate.vue","sourceRoot":"src/views/my-components/xboot","sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"display: flex\">\r\n      <Input\r\n        v-model=\"data\"\r\n        @on-change=\"handleChange\"\r\n        :placeholder=\"placeholder\"\r\n        :size=\"size\"\r\n        :disabled=\"disabled\"\r\n        :readonly=\"readonly\"\r\n        :maxlength=\"maxlength\"\r\n        :clearable=\"clearable\"\r\n        v-if=\"showInput\"\r\n        style=\"margin-right: 10px\"\r\n      />\r\n      <Button\r\n        :size=\"size\"\r\n        :type=\"type\"\r\n        :shape=\"shape\"\r\n        :ghost=\"ghost\"\r\n        :disabled=\"disabled\"\r\n        :icon=\"icon\"\r\n        @click=\"handleShow\"\r\n        >{{ text }}</Button\r\n      >\r\n    </div>\r\n    <Modal\r\n      v-model=\"showModal\"\r\n      :mask-closable=\"false\"\r\n      :width=\"width\"\r\n      :fullscreen=\"full\"\r\n      @on-visible-change=\"changeModal\"\r\n      class=\"map-modal\"\r\n    >\r\n      <div slot=\"header\">\r\n        <div class=\"ivu-modal-header-inner\">{{ text }}</div>\r\n        <a @click=\"handleFull\" class=\"modal-fullscreen\">\r\n          <Icon\r\n            v-show=\"!full\"\r\n            type=\"ios-expand\"\r\n            class=\"model-fullscreen-icon\"\r\n          />\r\n          <Icon\r\n            v-show=\"full\"\r\n            type=\"ios-contract\"\r\n            class=\"model-fullscreen-icon\"\r\n          />\r\n        </a>\r\n        <a @click=\"showModal = false\" class=\"ivu-modal-close\">\r\n          <Icon type=\"ios-close\" class=\"ivu-icon-ios-close\" />\r\n        </a>\r\n      </div>\r\n      <div :id=\"id\" :style=\"{ width: '100%', height: modalHeight }\"></div>\r\n      <div slot=\"footer\">\r\n        <Row align=\"middle\" justify=\"space-between\">\r\n          <Alert show-icon style=\"margin-bottom: 0\" v-show=\"currentValue\"\r\n            >当前坐标：{{ currentValue }}</Alert\r\n          >\r\n          <div v-show=\"!currentValue\"></div>\r\n          <div>\r\n            <Button type=\"text\" @click=\"showModal = false\" v-if=\"!preview\"\r\n              >取消</Button\r\n            >\r\n            <Button @click=\"showModal = false\" v-if=\"preview\">关闭</Button>\r\n            <Button type=\"primary\" @click=\"handelSubmit\" v-if=\"!preview\"\r\n              >确认提交</Button\r\n            >\r\n          </div>\r\n        </Row>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport MapboxGeocoder from \"@mapbox/mapbox-gl-geocoder\";\r\nimport '@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css';\r\nexport default {\r\n  name: \"mapLocate\",\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      default: \"map\",\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    showInput: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    preview: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    text: {\r\n      type: String,\r\n      default: \"地图选点\",\r\n    },\r\n    width: {\r\n      type: Number,\r\n      default: 900,\r\n    },\r\n    pitch: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    decimal: {\r\n      type: Number,\r\n      default: 6,\r\n    },\r\n    draggable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    size: String,\r\n    type: String,\r\n    shape: String,\r\n    ghost: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    clearable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: \"输入坐标或选择地点\",\r\n    },\r\n    maxlength: Number,\r\n    readonly: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    icon: {\r\n      type: String,\r\n      default: \"md-locate\",\r\n    },\r\n    styles: {\r\n      type: String,\r\n      default: \"mapbox://styles/mapbox/streets-v11\",\r\n    },\r\n    center: {\r\n      type: Array,\r\n      default: function () {\r\n        return [116.35, 39.85];\r\n      },\r\n    },\r\n    zoom: {\r\n      type: Number,\r\n      default: 9,\r\n    },\r\n    compact: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    customAttribution: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    searchable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    changeStyle: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    navigation: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    locate: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    fullscreen: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    building3D: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      data: this.value,\r\n      mapbox: null,\r\n      currentValue: \"\",\r\n      showModal: false,\r\n      full: false,\r\n      modalHeight: \"500px\",\r\n      marker: null,\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (!config.mapboxToken) {\r\n        return;\r\n      }\r\n      mapboxgl.accessToken = config.mapboxToken;\r\n      this.mapbox = new mapboxgl.Map({\r\n        container: this.id,\r\n        style: this.styles,\r\n        center: this.center,\r\n        zoom: this.zoom,\r\n        pitch: this.pitch,\r\n        attributionControl: false,\r\n      });\r\n      // 属性\r\n      this.mapbox.addControl(\r\n        new mapboxgl.AttributionControl({\r\n          compact: this.compact,\r\n          customAttribution: this.customAttribution,\r\n        })\r\n      );\r\n      // 搜索\r\n      if (this.searchable) {\r\n        this.mapbox.addControl(\r\n          new MapboxGeocoder({\r\n            accessToken: mapboxgl.accessToken,\r\n            mapboxgl: mapboxgl,\r\n          })\r\n        );\r\n      }\r\n      // 地图样式切换\r\n      class ChangeStyleControl {\r\n        getDefaultPosition() {\r\n          const defaultPosition = \"top-right\";\r\n          return defaultPosition;\r\n        }\r\n        onAdd(map) {\r\n          this.map = map;\r\n          this.controlContainer = document.createElement(\"div\");\r\n          this.controlContainer.classList.add(\"mapboxgl-ctrl\");\r\n          this.controlContainer.classList.add(\"mapboxgl-ctrl-group\");\r\n          this.mapStyleContainer = document.createElement(\"div\");\r\n          this.styleButton = document.createElement(\"button\");\r\n          this.styleButton.type = \"button\";\r\n          this.mapStyleContainer.classList.add(\"mapboxgl-style-list\");\r\n          const defaultStyle = \"街道地图\";\r\n          const styles = [\r\n            { title: \"街道地图\", uri: \"mapbox://styles/mapbox/streets-v11\" },\r\n            {\r\n              title: \"卫星街道\",\r\n              uri: \"mapbox://styles/mapbox/satellite-streets-v11\",\r\n            },\r\n            { title: \"暗黑风格\", uri: \"mapbox://styles/mapbox/dark-v10\" },\r\n            { title: \"明亮风格\", uri: \"mapbox://styles/mapbox/light-v10\" },\r\n            { title: \"户外地图\", uri: \"mapbox://styles/mapbox/outdoors-v11\" },\r\n            { title: \"卫星地图\", uri: \"mapbox://styles/mapbox/satellite-v9\" },\r\n          ];\r\n          for (const style of styles) {\r\n            const styleElement = document.createElement(\"button\");\r\n            styleElement.type = \"button\";\r\n            styleElement.innerText = style.title;\r\n            styleElement.classList.add(\r\n              style.title.replace(/[^a-z0-9-]/gi, \"_\")\r\n            );\r\n            styleElement.dataset.uri = JSON.stringify(style.uri);\r\n            styleElement.addEventListener(\"click\", (event) => {\r\n              const srcElement = event.srcElement;\r\n              if (srcElement.classList.contains(\"active\")) {\r\n                return;\r\n              }\r\n              this.map.setStyle(JSON.parse(srcElement.dataset.uri));\r\n              this.map.on(\"data\", (e) => {\r\n                if (e.isSourceLoaded) {\r\n                  const labelList = this.map\r\n                    .getStyle()\r\n                    .layers.filter((layer) => {\r\n                      return /-label/.test(layer.id);\r\n                    });\r\n                  for (let labelLayer of labelList) {\r\n                    this.map.setLayoutProperty(labelLayer.id, \"text-field\", [\r\n                      \"coalesce\",\r\n                      [\"get\", \"name_zh-Hans\"],\r\n                      [\"get\", \"name\"],\r\n                    ]);\r\n                  }\r\n                }\r\n              });\r\n              this.mapStyleContainer.style.display = \"none\";\r\n              this.styleButton.style.display = \"block\";\r\n              const elms =\r\n                this.mapStyleContainer.getElementsByClassName(\"active\");\r\n              while (elms[0]) {\r\n                elms[0].classList.remove(\"active\");\r\n              }\r\n              srcElement.classList.add(\"active\");\r\n            });\r\n            if (style.title === defaultStyle) {\r\n              styleElement.classList.add(\"active\");\r\n            }\r\n            this.mapStyleContainer.appendChild(styleElement);\r\n          }\r\n          this.styleButton.classList.add(\"mapboxgl-ctrl-icon\");\r\n          this.styleButton.classList.add(\"mapboxgl-style-switcher\");\r\n          this.styleButton.addEventListener(\"click\", () => {\r\n            this.styleButton.style.display = \"none\";\r\n            this.mapStyleContainer.style.display = \"block\";\r\n          });\r\n          document.addEventListener(\"click\", this.onDocumentClick);\r\n          this.controlContainer.appendChild(this.styleButton);\r\n          this.controlContainer.appendChild(this.mapStyleContainer);\r\n          return this.controlContainer;\r\n        }\r\n        onRemove() {\r\n          if (\r\n            !this.controlContainer ||\r\n            !this.controlContainer.parentNode ||\r\n            !this.map ||\r\n            !this.styleButton\r\n          ) {\r\n            return;\r\n          }\r\n          this.styleButton.removeEventListener(\"click\", this.onDocumentClick);\r\n          this.controlContainer.parentNode.removeChild(this.controlContainer);\r\n          document.removeEventListener(\"click\", this.onDocumentClick);\r\n          this.map = undefined;\r\n        }\r\n        onDocumentClick(event) {\r\n          if (\r\n            this.controlContainer &&\r\n            !this.controlContainer.contains(event.target) &&\r\n            this.mapStyleContainer &&\r\n            this.styleButton\r\n          ) {\r\n            this.mapStyleContainer.style.display = \"none\";\r\n            this.styleButton.style.display = \"block\";\r\n          }\r\n        }\r\n      }\r\n      if (this.changeStyle) {\r\n        this.mapbox.addControl(new ChangeStyleControl());\r\n      }\r\n      // 导航控件\r\n      if (this.navigation) {\r\n        this.mapbox.addControl(new mapboxgl.NavigationControl());\r\n      }\r\n      // 定位\r\n      if (this.locate) {\r\n        this.mapbox.addControl(\r\n          new mapboxgl.GeolocateControl({\r\n            positionOptions: {\r\n              enableHighAccuracy: true,\r\n            },\r\n            trackUserLocation: true,\r\n          })\r\n        );\r\n      }\r\n      // 全屏\r\n      if (this.fullscreen) {\r\n        this.mapbox.addControl(\r\n          new mapboxgl.FullscreenControl({\r\n            container: document.querySelector(\"body\"),\r\n          })\r\n        );\r\n      }\r\n      this.mapbox.on(\"load\", () => {\r\n        // 中文\r\n        const labelList = this.mapbox.getStyle().layers.filter((layer) => {\r\n          return /-label/.test(layer.id);\r\n        });\r\n        for (let labelLayer of labelList) {\r\n          this.mapbox.setLayoutProperty(labelLayer.id, \"text-field\", [\r\n            \"coalesce\",\r\n            [\"get\", \"name_zh-Hans\"],\r\n            [\"get\", \"name\"],\r\n          ]);\r\n        }\r\n        // 3D建筑\r\n        if (this.building3D) {\r\n          this.mapbox.addLayer({\r\n            id: \"3d-buildings\",\r\n            source: \"composite\",\r\n            \"source-layer\": \"building\",\r\n            filter: [\"==\", \"extrude\", \"true\"],\r\n            type: \"fill-extrusion\",\r\n            minzoom: 15,\r\n            paint: {\r\n              \"fill-extrusion-color\": \"#aaa\",\r\n              \"fill-extrusion-height\": [\r\n                \"interpolate\",\r\n                [\"linear\"],\r\n                [\"zoom\"],\r\n                15,\r\n                0,\r\n                15.05,\r\n                [\"get\", \"height\"],\r\n              ],\r\n              \"fill-extrusion-base\": [\r\n                \"interpolate\",\r\n                [\"linear\"],\r\n                [\"zoom\"],\r\n                15,\r\n                0,\r\n                15.05,\r\n                [\"get\", \"min_height\"],\r\n              ],\r\n              \"fill-extrusion-opacity\": 0.6,\r\n            },\r\n          });\r\n          // 显示点\r\n          this.flyTo();\r\n        }\r\n      });\r\n      // 单点标记\r\n      this.mapbox.on(\"click\", (e) => {\r\n        if (this.preview) {\r\n          return;\r\n        }\r\n        if (this.marker) {\r\n          this.marker.remove();\r\n        }\r\n        this.marker = new mapboxgl.Marker({\r\n          offset: [0, -25],\r\n          draggable: this.draggable,\r\n        })\r\n          .setLngLat([e.lngLat.lng, e.lngLat.lat])\r\n          .addTo(this.mapbox);\r\n        if (this.decimal < 0) {\r\n          this.decimal = 0;\r\n        }\r\n        if (this.decimal > 14) {\r\n          this.decimal = 14;\r\n        }\r\n        let lng = e.lngLat.lng.toFixed(this.decimal);\r\n        let lat = e.lngLat.lat.toFixed(this.decimal);\r\n        this.currentValue = lng + \", \" + lat;\r\n        this.$emit(\"on-click\", this.currentValue);\r\n      });\r\n    },\r\n    flyTo() {\r\n      if (this.data) {\r\n        try {\r\n          let lngLat = this.data.split(\",\");\r\n          let lng = lngLat[0].trim();\r\n          let lat = lngLat[1].trim();\r\n          this.currentValue = this.data;\r\n          if (this.marker) {\r\n            this.marker.remove();\r\n          }\r\n          this.marker = new mapboxgl.Marker({\r\n            offset: [0, -25],\r\n            draggable: true,\r\n          })\r\n            .setLngLat([lng, lat])\r\n            .addTo(this.mapbox);\r\n          this.mapbox.flyTo({\r\n            center: [lng, lat],\r\n            essential: true,\r\n          });\r\n        } catch (error) {\r\n          console.log(error);\r\n          this.$Message.error(\"您输入的坐标不合法\");\r\n        }\r\n      } else {\r\n        this.currentValue = \"\";\r\n        if (this.marker) {\r\n          this.marker.remove();\r\n        }\r\n        this.mapbox.flyTo({\r\n          center: this.center,\r\n          zoom: 9,\r\n          essential: true,\r\n        });\r\n      }\r\n    },\r\n    handleChange(v) {\r\n      this.$emit(\"input\", this.data);\r\n      this.$emit(\"on-change\", this.data);\r\n    },\r\n    setData(value) {\r\n      if (!this.mapbox) {\r\n        this.init();\r\n      }\r\n      if (value != this.data) {\r\n        this.data = value;\r\n        this.$emit(\"input\", this.data);\r\n        this.$emit(\"on-change\", this.data);\r\n      }\r\n    },\r\n    handleFull() {\r\n      this.full = !this.full;\r\n      if (this.full) {\r\n        this.modalHeight = \"100%\";\r\n      } else {\r\n        this.modalHeight = \"500px\";\r\n      }\r\n      setTimeout(() => {\r\n        this.mapbox.resize();\r\n      }, 10);\r\n    },\r\n    handleShow() {\r\n      if (!config.mapboxToken) {\r\n        this.$Message.warning(\"请先配置Mapbox地图的accessToken\");\r\n        return;\r\n      }\r\n      this.showModal = true;\r\n    },\r\n    changeModal(v) {\r\n      if (v) {\r\n        setTimeout(() => {\r\n          this.mapbox.resize();\r\n          this.flyTo();\r\n        }, 10);\r\n      }\r\n    },\r\n    handelSubmit() {\r\n      if (!this.currentValue) {\r\n        this.$Message.warning(\"请在地图中点击鼠标选择一个地点\");\r\n        return;\r\n      }\r\n      this.data = this.currentValue;\r\n      this.$emit(\"input\", this.data);\r\n      this.$emit(\"on-change\", this.data);\r\n      this.showModal = false;\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    // 调用销毁 API 对当前编辑器实例进行销毁\r\n    if (this.mapbox != null) {\r\n      this.mapbox.remove();\r\n    }\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.setData(val);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.mapboxgl-style-list {\r\n  display: none;\r\n}\r\n\r\n.mapboxgl-ctrl-group .mapboxgl-style-list button {\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  display: block;\r\n  font-size: 14px;\r\n  padding: 8px 8px 6px;\r\n  text-align: right;\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n\r\n.mapboxgl-style-list button.active {\r\n  font-weight: bold;\r\n}\r\n\r\n.mapboxgl-style-list button:hover {\r\n  background-color: rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.mapboxgl-style-list button + button {\r\n  border-top: 1px solid #ddd;\r\n}\r\n\r\n.mapboxgl-style-switcher {\r\n  background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTQuODQ5cHgiIGhlaWdodD0iNTQuODQ5cHgiIHZpZXdCb3g9IjAgMCA1NC44NDkgNTQuODQ5IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1NC44NDkgNTQuODQ5OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGc+PGc+PGc+PHBhdGggZD0iTTU0LjQ5NywzOS42MTRsLTEwLjM2My00LjQ5bC0xNC45MTcsNS45NjhjLTAuNTM3LDAuMjE0LTEuMTY1LDAuMzE5LTEuNzkzLDAuMzE5Yy0wLjYyNywwLTEuMjU0LTAuMTA0LTEuNzktMC4zMThsLTE0LjkyMS01Ljk2OEwwLjM1MSwzOS42MTRjLTAuNDcyLDAuMjAzLTAuNDY3LDAuNTI0LDAuMDEsMC43MTZMMjYuNTYsNTAuODFjMC40NzcsMC4xOTEsMS4yNTEsMC4xOTEsMS43MjksMEw1NC40ODgsNDAuMzNDNTQuOTY0LDQwLjEzOSw1NC45NjksMzkuODE3LDU0LjQ5NywzOS42MTR6Ii8+PHBhdGggZD0iTTU0LjQ5NywyNy41MTJsLTEwLjM2NC00LjQ5MWwtMTQuOTE2LDUuOTY2Yy0wLjUzNiwwLjIxNS0xLjE2NSwwLjMyMS0xLjc5MiwwLjMyMWMtMC42MjgsMC0xLjI1Ni0wLjEwNi0xLjc5My0wLjMyMWwtMTQuOTE4LTUuOTY2TDAuMzUxLDI3LjUxMmMtMC40NzIsMC4yMDMtMC40NjcsMC41MjMsMC4wMSwwLjcxNkwyNi41NiwzOC43MDZjMC40NzcsMC4xOSwxLjI1MSwwLjE5LDEuNzI5LDBsMjYuMTk5LTEwLjQ3OUM1NC45NjQsMjguMDM2LDU0Ljk2OSwyNy43MTYsNTQuNDk3LDI3LjUxMnoiLz48cGF0aCBkPSJNMC4zNjEsMTYuMTI1bDEzLjY2Miw1LjQ2NWwxMi41MzcsNS4wMTVjMC40NzcsMC4xOTEsMS4yNTEsMC4xOTEsMS43MjksMGwxMi41NDEtNS4wMTZsMTMuNjU4LTUuNDYzYzAuNDc3LTAuMTkxLDAuNDgtMC41MTEsMC4wMS0wLjcxNkwyOC4yNzcsNC4wNDhjLTAuNDcxLTAuMjA0LTEuMjM2LTAuMjA0LTEuNzA4LDBMMC4zNTEsMTUuNDFDLTAuMTIxLDE1LjYxNC0wLjExNiwxNS45MzUsMC4zNjEsMTYuMTI1eiIvPjwvZz48L2c+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg==);\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: 70%;\r\n}\r\n.map-modal {\r\n  .ivu-modal-body {\r\n    padding: 0px;\r\n  }\r\n}\r\n</style>"]}]}