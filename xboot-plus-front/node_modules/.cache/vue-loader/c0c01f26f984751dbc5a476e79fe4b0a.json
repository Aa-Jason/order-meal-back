{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\app-toC\\member\\invite.vue?vue&type=style&index=0&id=054343a1&lang=less&scoped=true&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\app-toC\\member\\invite.vue","mtime":1651629755148},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1651770028580},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1651770027142},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\postcss-loader\\src\\index.js","mtime":1651770027415},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":1651770042155},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoucGFnZSB7DQogIG1hcmdpbi10b3A6IDJ2aDsNCn0NCg=="},{"version":3,"sources":["invite.vue"],"names":[],"mappings":";AACA;AACA;AACA","file":"invite.vue","sourceRoot":"src/views/app-toC/member","sourcesContent":["<style lang=\"less\" scoped>\r\n.page {\r\n  margin-top: 2vh;\r\n}\r\n</style>\r\n<template>\r\n  <div>\r\n    <Drawer\r\n      :title=\"`${queryUser} 邀请新用户记录`\"\r\n      v-model=\"visible\"\r\n      width=\"800\"\r\n      draggable\r\n      class=\"search\"\r\n    >\r\n      <Row>\r\n        <Form ref=\"searchForm\" :model=\"searchForm\" inline :label-width=\"60\">\r\n          <FormItem label=\"用户名\" prop=\"username\">\r\n            <Input\r\n              type=\"text\"\r\n              v-model=\"searchForm.username\"\r\n              placeholder=\"请输入用户名/UID\"\r\n              clearable\r\n              style=\"width: 200px\"\r\n            />\r\n          </FormItem>\r\n          <FormItem label=\"手机\" prop=\"mobile\">\r\n            <Input\r\n              type=\"text\"\r\n              v-model=\"searchForm.mobile\"\r\n              placeholder=\"请输入手机\"\r\n              clearable\r\n              style=\"width: 200px\"\r\n            />\r\n          </FormItem>\r\n          <FormItem style=\"margin-left: -35px\" class=\"br\">\r\n            <Button @click=\"getDataList\" type=\"primary\" icon=\"ios-search\"\r\n              >搜索</Button\r\n            >\r\n            <Button @click=\"handleReset\">重置</Button>\r\n          </FormItem>\r\n        </Form>\r\n      </Row>\r\n      <Table\r\n        :loading=\"loading\"\r\n        border\r\n        :columns=\"columns\"\r\n        :data=\"data\"\r\n        ref=\"table\"\r\n        sortable=\"custom\"\r\n      ></Table>\r\n      <Row type=\"flex\" justify=\"end\" class=\"page\">\r\n        <Page\r\n          :current=\"searchForm.pageNumber\"\r\n          :total=\"total\"\r\n          :page-size=\"searchForm.pageSize\"\r\n          @on-change=\"changePage\"\r\n          @on-page-size-change=\"changePageSize\"\r\n          :page-size-opts=\"[10, 20, 50]\"\r\n          size=\"small\"\r\n          show-total\r\n          show-elevator\r\n          show-sizer\r\n          transfer\r\n        ></Page>\r\n      </Row>\r\n    </Drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getMemberList } from \"@/api/app\";\r\nexport default {\r\n  name: \"invite\",\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    transferData: {\r\n      type: Object,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      queryUser: \"\",\r\n      visible: this.value,\r\n      loading: true, // 表单加载状态\r\n      searchForm: {\r\n        pageNumber: 1, // 当前页数\r\n        pageSize: 10, // 页面大小\r\n        sort: \"createTime\",\r\n        order: \"desc\",\r\n        type: \"\",\r\n        status: \"\",\r\n        vipStatus: \"\",\r\n        username: \"\",\r\n        nickname: \"\",\r\n        mobile: \"\",\r\n        inviteBy: \"\",\r\n      },\r\n      columns: [\r\n        // 表头\r\n        {\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"用户名/UID\",\r\n          key: \"username\",\r\n          minWidth: 185,\r\n          sortable: true,\r\n        },\r\n        {\r\n          title: \"昵称\",\r\n          key: \"nickname\",\r\n          sortable: true,\r\n          minWidth: 120,\r\n        },\r\n        {\r\n          title: \"头像\",\r\n          key: \"avatar\",\r\n          width: 80,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return h(\"Avatar\", {\r\n              props: {\r\n                src: params.row.avatar,\r\n              },\r\n            });\r\n          },\r\n        },\r\n        {\r\n          title: \"手机\",\r\n          key: \"mobile\",\r\n          sortable: true,\r\n          width: 125,\r\n        },\r\n        {\r\n          title: \"类型\",\r\n          key: \"type\",\r\n          align: \"center\",\r\n          width: 110,\r\n          render: (h, params) => {\r\n            let re = \"\",\r\n              color = \"\";\r\n            if (params.row.type == 1) {\r\n              re = \"VIP\";\r\n              color = \"red\";\r\n            } else if (params.row.type == 0) {\r\n              re = \"普通会员\";\r\n              color = \"blue\";\r\n            }\r\n            return h(\"div\", [\r\n              h(\r\n                \"Tag\",\r\n                {\r\n                  props: {\r\n                    color: color,\r\n                  },\r\n                },\r\n                re\r\n              ),\r\n            ]);\r\n          },\r\n          filters: [\r\n            {\r\n              label: \"普通会员\",\r\n              value: 0,\r\n            },\r\n            {\r\n              label: \"VIP\",\r\n              value: 1,\r\n            },\r\n          ],\r\n          filterMultiple: false,\r\n          filterRemote: (e) => {\r\n            let v = \"\";\r\n            if (e.length > 0) {\r\n              v = e[0];\r\n            }\r\n            this.searchForm.type = v;\r\n            this.getDataList();\r\n          },\r\n        },\r\n        {\r\n          title: \"注册时间\",\r\n          key: \"createTime\",\r\n          width: 170,\r\n          sortable: true,\r\n          sortType: \"desc\",\r\n        },\r\n        {\r\n          title: \"状态\",\r\n          key: \"status\",\r\n          align: \"center\",\r\n          width: 110,\r\n          render: (h, params) => {\r\n            if (params.row.status == 0) {\r\n              return h(\"div\", [\r\n                h(\"Badge\", {\r\n                  props: {\r\n                    status: \"success\",\r\n                    text: \"启用\",\r\n                  },\r\n                }),\r\n              ]);\r\n            } else if (params.row.status == -1) {\r\n              return h(\"div\", [\r\n                h(\"Badge\", {\r\n                  props: {\r\n                    status: \"error\",\r\n                    text: \"禁用\",\r\n                  },\r\n                }),\r\n              ]);\r\n            }\r\n          },\r\n          filters: [\r\n            {\r\n              label: \"启用\",\r\n              value: 0,\r\n            },\r\n            {\r\n              label: \"禁用\",\r\n              value: -1,\r\n            },\r\n          ],\r\n          filterMultiple: false,\r\n          filterRemote: (e) => {\r\n            let v = \"\";\r\n            if (e.length > 0) {\r\n              v = e[0];\r\n            }\r\n            this.searchForm.status = v;\r\n            this.getUserList();\r\n          },\r\n        },\r\n        {\r\n          title: \"注册平台\",\r\n          key: \"platform\",\r\n          align: \"center\",\r\n          width: 100,\r\n          render: (h, params) => {\r\n            let re = \"\",\r\n              platform = params.row.platform;\r\n            if (platform == 0) {\r\n              re = \"H5/PC\";\r\n            } else if (platform == 1) {\r\n              re = \"Android\";\r\n            } else if (platform == 2) {\r\n              re = \"IOS\";\r\n            } else if (platform == 3) {\r\n              re = \"微信小程序\";\r\n            } else if (platform == 4) {\r\n              re = \"支付宝小程序\";\r\n            } else if (platform == 5) {\r\n              re = \"QQ小程序\";\r\n            } else if (platform == 6) {\r\n              re = \"字节小程序\";\r\n            } else if (platform == 7) {\r\n              re = \"百度小程序\";\r\n            } else {\r\n              re = \"未知\";\r\n            }\r\n            return h(\"div\", re);\r\n          },\r\n        },\r\n      ],\r\n      data: [], // 表单数据\r\n      total: 0, // 表单数据总数\r\n    };\r\n  },\r\n  methods: {\r\n    init() {},\r\n    changePage(v) {\r\n      this.searchForm.pageNumber = v;\r\n      this.getDataList();\r\n      this.clearSelectAll();\r\n    },\r\n    changePageSize(v) {\r\n      this.searchForm.pageSize = v;\r\n      this.getDataList();\r\n    },\r\n    changeSort(e) {\r\n      this.searchForm.sort = e.key;\r\n      this.searchForm.order = e.order;\r\n      if (e.order == \"normal\") {\r\n        this.searchForm.order = \"\";\r\n      }\r\n    },\r\n    handleReset() {\r\n      this.$refs.searchForm.resetFields();\r\n      this.searchForm.inviteBy = this.transferData.id;\r\n      // 重新加载数据\r\n      this.getDataList();\r\n    },\r\n    getDataList() {\r\n      this.loading = true;\r\n      getMemberList(this.searchForm).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.data = res.result.content;\r\n          this.total = res.result.totalElements;\r\n        }\r\n      });\r\n    },\r\n    setCurrentValue(value) {\r\n      if (value === this.visible) {\r\n        return;\r\n      }\r\n      this.queryUser = this.transferData.nickname;\r\n      this.searchForm.inviteBy = this.transferData.username;\r\n      this.getDataList();\r\n      this.visible = value;\r\n    },\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.setCurrentValue(val);\r\n    },\r\n    visible(value) {\r\n      this.$emit(\"input\", value);\r\n    },\r\n  },\r\n  mounted() {},\r\n};\r\n</script>"]}]}