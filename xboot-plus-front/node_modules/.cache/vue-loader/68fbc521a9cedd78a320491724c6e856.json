{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\mapLocate.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\mapLocate.vue","mtime":1651629755194},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1651770028580},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1651770027142},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\postcss-loader\\src\\index.js","mtime":1651770027415},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":1651770042155},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoubWFwYm94Z2wtc3R5bGUtbGlzdCB7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi5tYXBib3hnbC1jdHJsLWdyb3VwIC5tYXBib3hnbC1zdHlsZS1saXN0IGJ1dHRvbiB7DQogIGJhY2tncm91bmQ6IG5vbmU7DQogIGJvcmRlcjogbm9uZTsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBkaXNwbGF5OiBibG9jazsNCiAgZm9udC1zaXplOiAxNHB4Ow0KICBwYWRkaW5nOiA4cHggOHB4IDZweDsNCiAgdGV4dC1hbGlnbjogcmlnaHQ7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IGF1dG87DQp9DQoNCi5tYXBib3hnbC1zdHlsZS1saXN0IGJ1dHRvbi5hY3RpdmUgew0KICBmb250LXdlaWdodDogYm9sZDsNCn0NCg0KLm1hcGJveGdsLXN0eWxlLWxpc3QgYnV0dG9uOmhvdmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjA1KTsNCn0NCg0KLm1hcGJveGdsLXN0eWxlLWxpc3QgYnV0dG9uICsgYnV0dG9uIHsNCiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNkZGQ7DQp9DQoNCi5tYXBib3hnbC1zdHlsZS1zd2l0Y2hlciB7DQogIGJhY2tncm91bmQtaW1hZ2U6IHVybChkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlhWE52TFRnNE5Ua3RNU0kvUGp3aFJFOURWRmxRUlNCemRtY2dVRlZDVEVsRElDSXRMeTlYTTBNdkwwUlVSQ0JUVmtjZ01TNHhMeTlGVGlJZ0ltaDBkSEE2THk5M2QzY3Vkek11YjNKbkwwZHlZWEJvYVdOekwxTldSeTh4TGpFdlJGUkVMM04yWnpFeExtUjBaQ0krUEhOMlp5QjJaWEp6YVc5dVBTSXhMakVpSUdsa1BTSkRZWEJoWHpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJaUIzYVdSMGFEMGlOVFF1T0RRNWNIZ2lJR2hsYVdkb2REMGlOVFF1T0RRNWNIZ2lJSFpwWlhkQ2IzZzlJakFnTUNBMU5DNDRORGtnTlRRdU9EUTVJaUJ6ZEhsc1pUMGlaVzVoWW14bExXSmhZMnRuY205MWJtUTZibVYzSURBZ01DQTFOQzQ0TkRrZ05UUXVPRFE1T3lJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStQR2MrUEdjK1BHYytQSEJoZEdnZ1pEMGlUVFUwTGpRNU55d3pPUzQyTVRSc0xURXdMak0yTXkwMExqUTViQzB4TkM0NU1UY3NOUzQ1TmpoakxUQXVOVE0zTERBdU1qRTBMVEV1TVRZMUxEQXVNekU1TFRFdU56a3pMREF1TXpFNVl5MHdMall5Tnl3d0xURXVNalUwTFRBdU1UQTBMVEV1TnprdE1DNHpNVGhzTFRFMExqa3lNUzAxTGprMk9Fd3dMak0xTVN3ek9TNDJNVFJqTFRBdU5EY3lMREF1TWpBekxUQXVORFkzTERBdU5USTBMREF1TURFc01DNDNNVFpNTWpZdU5UWXNOVEF1T0RGak1DNDBOemNzTUM0eE9URXNNUzR5TlRFc01DNHhPVEVzTVM0M01qa3NNRXcxTkM0ME9EZ3NOREF1TXpORE5UUXVPVFkwTERRd0xqRXpPU3cxTkM0NU5qa3NNemt1T0RFM0xEVTBMalE1Tnl3ek9TNDJNVFI2SWk4K1BIQmhkR2dnWkQwaVRUVTBMalE1Tnl3eU55NDFNVEpzTFRFd0xqTTJOQzAwTGpRNU1Xd3RNVFF1T1RFMkxEVXVPVFkyWXkwd0xqVXpOaXd3TGpJeE5TMHhMakUyTlN3d0xqTXlNUzB4TGpjNU1pd3dMak15TVdNdE1DNDJNamdzTUMweExqSTFOaTB3TGpFd05pMHhMamM1TXkwd0xqTXlNV3d0TVRRdU9URTRMVFV1T1RZMlREQXVNelV4TERJM0xqVXhNbU10TUM0ME56SXNNQzR5TURNdE1DNDBOamNzTUM0MU1qTXNNQzR3TVN3d0xqY3hOa3d5Tmk0MU5pd3pPQzQzTURaak1DNDBOemNzTUM0eE9Td3hMakkxTVN3d0xqRTVMREV1TnpJNUxEQnNNall1TVRrNUxURXdMalEzT1VNMU5DNDVOalFzTWpndU1ETTJMRFUwTGprMk9Td3lOeTQzTVRZc05UUXVORGszTERJM0xqVXhNbm9pTHo0OGNHRjBhQ0JrUFNKTk1DNHpOakVzTVRZdU1USTFiREV6TGpZMk1pdzFMalEyTld3eE1pNDFNemNzTlM0d01UVmpNQzQwTnpjc01DNHhPVEVzTVM0eU5URXNNQzR4T1RFc01TNDNNamtzTUd3eE1pNDFOREV0TlM0d01UWnNNVE11TmpVNExUVXVORFl6WXpBdU5EYzNMVEF1TVRreExEQXVORGd0TUM0MU1URXNNQzR3TVMwd0xqY3hOa3d5T0M0eU56Y3NOQzR3TkRoakxUQXVORGN4TFRBdU1qQTBMVEV1TWpNMkxUQXVNakEwTFRFdU56QTRMREJNTUM0ek5URXNNVFV1TkRGRExUQXVNVEl4TERFMUxqWXhOQzB3TGpFeE5pd3hOUzQ1TXpVc01DNHpOakVzTVRZdU1USTFlaUl2UGp3dlp6NDhMMmMrUEM5blBqeG5Qand2Wno0OFp6NDhMMmMrUEdjK1BDOW5QanhuUGp3dlp6NDhaejQ4TDJjK1BHYytQQzluUGp4blBqd3ZaejQ4Wno0OEwyYytQR2MrUEM5blBqeG5Qand2Wno0OFp6NDhMMmMrUEdjK1BDOW5QanhuUGp3dlp6NDhaejQ4TDJjK1BHYytQQzluUGp3dmMzWm5QZz09KTsNCiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOw0KICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0Ow0KICBiYWNrZ3JvdW5kLXNpemU6IDcwJTsNCn0NCi5tYXAtbW9kYWwgew0KICAuaXZ1LW1vZGFsLWJvZHkgew0KICAgIHBhZGRpbmc6IDBweDsNCiAgfQ0KfQ0K"},{"version":3,"sources":["mapLocate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgiBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mapLocate.vue","sourceRoot":"src/views/my-components/xboot","sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"display: flex\">\r\n      <Input\r\n        v-model=\"data\"\r\n        @on-change=\"handleChange\"\r\n        :placeholder=\"placeholder\"\r\n        :size=\"size\"\r\n        :disabled=\"disabled\"\r\n        :readonly=\"readonly\"\r\n        :maxlength=\"maxlength\"\r\n        :clearable=\"clearable\"\r\n        v-if=\"showInput\"\r\n        style=\"margin-right: 10px\"\r\n      />\r\n      <Button\r\n        :size=\"size\"\r\n        :type=\"type\"\r\n        :shape=\"shape\"\r\n        :ghost=\"ghost\"\r\n        :disabled=\"disabled\"\r\n        :icon=\"icon\"\r\n        @click=\"handleShow\"\r\n        >{{ text }}</Button\r\n      >\r\n    </div>\r\n    <Modal\r\n      v-model=\"showModal\"\r\n      :mask-closable=\"false\"\r\n      :width=\"width\"\r\n      :fullscreen=\"full\"\r\n      @on-visible-change=\"changeModal\"\r\n      class=\"map-modal\"\r\n    >\r\n      <div slot=\"header\">\r\n        <div class=\"ivu-modal-header-inner\">{{ text }}</div>\r\n        <a @click=\"handleFull\" class=\"modal-fullscreen\">\r\n          <Icon\r\n            v-show=\"!full\"\r\n            type=\"ios-expand\"\r\n            class=\"model-fullscreen-icon\"\r\n          />\r\n          <Icon\r\n            v-show=\"full\"\r\n            type=\"ios-contract\"\r\n            class=\"model-fullscreen-icon\"\r\n          />\r\n        </a>\r\n        <a @click=\"showModal = false\" class=\"ivu-modal-close\">\r\n          <Icon type=\"ios-close\" class=\"ivu-icon-ios-close\" />\r\n        </a>\r\n      </div>\r\n      <div :id=\"id\" :style=\"{ width: '100%', height: modalHeight }\"></div>\r\n      <div slot=\"footer\">\r\n        <Row align=\"middle\" justify=\"space-between\">\r\n          <Alert show-icon style=\"margin-bottom: 0\" v-show=\"currentValue\"\r\n            >当前坐标：{{ currentValue }}</Alert\r\n          >\r\n          <div v-show=\"!currentValue\"></div>\r\n          <div>\r\n            <Button type=\"text\" @click=\"showModal = false\" v-if=\"!preview\"\r\n              >取消</Button\r\n            >\r\n            <Button @click=\"showModal = false\" v-if=\"preview\">关闭</Button>\r\n            <Button type=\"primary\" @click=\"handelSubmit\" v-if=\"!preview\"\r\n              >确认提交</Button\r\n            >\r\n          </div>\r\n        </Row>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport MapboxGeocoder from \"@mapbox/mapbox-gl-geocoder\";\r\nimport '@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css';\r\nexport default {\r\n  name: \"mapLocate\",\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      default: \"map\",\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    showInput: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    preview: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    text: {\r\n      type: String,\r\n      default: \"地图选点\",\r\n    },\r\n    width: {\r\n      type: Number,\r\n      default: 900,\r\n    },\r\n    pitch: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    decimal: {\r\n      type: Number,\r\n      default: 6,\r\n    },\r\n    draggable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    size: String,\r\n    type: String,\r\n    shape: String,\r\n    ghost: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    clearable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: \"输入坐标或选择地点\",\r\n    },\r\n    maxlength: Number,\r\n    readonly: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    icon: {\r\n      type: String,\r\n      default: \"md-locate\",\r\n    },\r\n    styles: {\r\n      type: String,\r\n      default: \"mapbox://styles/mapbox/streets-v11\",\r\n    },\r\n    center: {\r\n      type: Array,\r\n      default: function () {\r\n        return [116.35, 39.85];\r\n      },\r\n    },\r\n    zoom: {\r\n      type: Number,\r\n      default: 9,\r\n    },\r\n    compact: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    customAttribution: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    searchable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    changeStyle: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    navigation: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    locate: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    fullscreen: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    building3D: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      data: this.value,\r\n      mapbox: null,\r\n      currentValue: \"\",\r\n      showModal: false,\r\n      full: false,\r\n      modalHeight: \"500px\",\r\n      marker: null,\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (!config.mapboxToken) {\r\n        return;\r\n      }\r\n      mapboxgl.accessToken = config.mapboxToken;\r\n      this.mapbox = new mapboxgl.Map({\r\n        container: this.id,\r\n        style: this.styles,\r\n        center: this.center,\r\n        zoom: this.zoom,\r\n        pitch: this.pitch,\r\n        attributionControl: false,\r\n      });\r\n      // 属性\r\n      this.mapbox.addControl(\r\n        new mapboxgl.AttributionControl({\r\n          compact: this.compact,\r\n          customAttribution: this.customAttribution,\r\n        })\r\n      );\r\n      // 搜索\r\n      if (this.searchable) {\r\n        this.mapbox.addControl(\r\n          new MapboxGeocoder({\r\n            accessToken: mapboxgl.accessToken,\r\n            mapboxgl: mapboxgl,\r\n          })\r\n        );\r\n      }\r\n      // 地图样式切换\r\n      class ChangeStyleControl {\r\n        getDefaultPosition() {\r\n          const defaultPosition = \"top-right\";\r\n          return defaultPosition;\r\n        }\r\n        onAdd(map) {\r\n          this.map = map;\r\n          this.controlContainer = document.createElement(\"div\");\r\n          this.controlContainer.classList.add(\"mapboxgl-ctrl\");\r\n          this.controlContainer.classList.add(\"mapboxgl-ctrl-group\");\r\n          this.mapStyleContainer = document.createElement(\"div\");\r\n          this.styleButton = document.createElement(\"button\");\r\n          this.styleButton.type = \"button\";\r\n          this.mapStyleContainer.classList.add(\"mapboxgl-style-list\");\r\n          const defaultStyle = \"街道地图\";\r\n          const styles = [\r\n            { title: \"街道地图\", uri: \"mapbox://styles/mapbox/streets-v11\" },\r\n            {\r\n              title: \"卫星街道\",\r\n              uri: \"mapbox://styles/mapbox/satellite-streets-v11\",\r\n            },\r\n            { title: \"暗黑风格\", uri: \"mapbox://styles/mapbox/dark-v10\" },\r\n            { title: \"明亮风格\", uri: \"mapbox://styles/mapbox/light-v10\" },\r\n            { title: \"户外地图\", uri: \"mapbox://styles/mapbox/outdoors-v11\" },\r\n            { title: \"卫星地图\", uri: \"mapbox://styles/mapbox/satellite-v9\" },\r\n          ];\r\n          for (const style of styles) {\r\n            const styleElement = document.createElement(\"button\");\r\n            styleElement.type = \"button\";\r\n            styleElement.innerText = style.title;\r\n            styleElement.classList.add(\r\n              style.title.replace(/[^a-z0-9-]/gi, \"_\")\r\n            );\r\n            styleElement.dataset.uri = JSON.stringify(style.uri);\r\n            styleElement.addEventListener(\"click\", (event) => {\r\n              const srcElement = event.srcElement;\r\n              if (srcElement.classList.contains(\"active\")) {\r\n                return;\r\n              }\r\n              this.map.setStyle(JSON.parse(srcElement.dataset.uri));\r\n              this.map.on(\"data\", (e) => {\r\n                if (e.isSourceLoaded) {\r\n                  const labelList = this.map\r\n                    .getStyle()\r\n                    .layers.filter((layer) => {\r\n                      return /-label/.test(layer.id);\r\n                    });\r\n                  for (let labelLayer of labelList) {\r\n                    this.map.setLayoutProperty(labelLayer.id, \"text-field\", [\r\n                      \"coalesce\",\r\n                      [\"get\", \"name_zh-Hans\"],\r\n                      [\"get\", \"name\"],\r\n                    ]);\r\n                  }\r\n                }\r\n              });\r\n              this.mapStyleContainer.style.display = \"none\";\r\n              this.styleButton.style.display = \"block\";\r\n              const elms =\r\n                this.mapStyleContainer.getElementsByClassName(\"active\");\r\n              while (elms[0]) {\r\n                elms[0].classList.remove(\"active\");\r\n              }\r\n              srcElement.classList.add(\"active\");\r\n            });\r\n            if (style.title === defaultStyle) {\r\n              styleElement.classList.add(\"active\");\r\n            }\r\n            this.mapStyleContainer.appendChild(styleElement);\r\n          }\r\n          this.styleButton.classList.add(\"mapboxgl-ctrl-icon\");\r\n          this.styleButton.classList.add(\"mapboxgl-style-switcher\");\r\n          this.styleButton.addEventListener(\"click\", () => {\r\n            this.styleButton.style.display = \"none\";\r\n            this.mapStyleContainer.style.display = \"block\";\r\n          });\r\n          document.addEventListener(\"click\", this.onDocumentClick);\r\n          this.controlContainer.appendChild(this.styleButton);\r\n          this.controlContainer.appendChild(this.mapStyleContainer);\r\n          return this.controlContainer;\r\n        }\r\n        onRemove() {\r\n          if (\r\n            !this.controlContainer ||\r\n            !this.controlContainer.parentNode ||\r\n            !this.map ||\r\n            !this.styleButton\r\n          ) {\r\n            return;\r\n          }\r\n          this.styleButton.removeEventListener(\"click\", this.onDocumentClick);\r\n          this.controlContainer.parentNode.removeChild(this.controlContainer);\r\n          document.removeEventListener(\"click\", this.onDocumentClick);\r\n          this.map = undefined;\r\n        }\r\n        onDocumentClick(event) {\r\n          if (\r\n            this.controlContainer &&\r\n            !this.controlContainer.contains(event.target) &&\r\n            this.mapStyleContainer &&\r\n            this.styleButton\r\n          ) {\r\n            this.mapStyleContainer.style.display = \"none\";\r\n            this.styleButton.style.display = \"block\";\r\n          }\r\n        }\r\n      }\r\n      if (this.changeStyle) {\r\n        this.mapbox.addControl(new ChangeStyleControl());\r\n      }\r\n      // 导航控件\r\n      if (this.navigation) {\r\n        this.mapbox.addControl(new mapboxgl.NavigationControl());\r\n      }\r\n      // 定位\r\n      if (this.locate) {\r\n        this.mapbox.addControl(\r\n          new mapboxgl.GeolocateControl({\r\n            positionOptions: {\r\n              enableHighAccuracy: true,\r\n            },\r\n            trackUserLocation: true,\r\n          })\r\n        );\r\n      }\r\n      // 全屏\r\n      if (this.fullscreen) {\r\n        this.mapbox.addControl(\r\n          new mapboxgl.FullscreenControl({\r\n            container: document.querySelector(\"body\"),\r\n          })\r\n        );\r\n      }\r\n      this.mapbox.on(\"load\", () => {\r\n        // 中文\r\n        const labelList = this.mapbox.getStyle().layers.filter((layer) => {\r\n          return /-label/.test(layer.id);\r\n        });\r\n        for (let labelLayer of labelList) {\r\n          this.mapbox.setLayoutProperty(labelLayer.id, \"text-field\", [\r\n            \"coalesce\",\r\n            [\"get\", \"name_zh-Hans\"],\r\n            [\"get\", \"name\"],\r\n          ]);\r\n        }\r\n        // 3D建筑\r\n        if (this.building3D) {\r\n          this.mapbox.addLayer({\r\n            id: \"3d-buildings\",\r\n            source: \"composite\",\r\n            \"source-layer\": \"building\",\r\n            filter: [\"==\", \"extrude\", \"true\"],\r\n            type: \"fill-extrusion\",\r\n            minzoom: 15,\r\n            paint: {\r\n              \"fill-extrusion-color\": \"#aaa\",\r\n              \"fill-extrusion-height\": [\r\n                \"interpolate\",\r\n                [\"linear\"],\r\n                [\"zoom\"],\r\n                15,\r\n                0,\r\n                15.05,\r\n                [\"get\", \"height\"],\r\n              ],\r\n              \"fill-extrusion-base\": [\r\n                \"interpolate\",\r\n                [\"linear\"],\r\n                [\"zoom\"],\r\n                15,\r\n                0,\r\n                15.05,\r\n                [\"get\", \"min_height\"],\r\n              ],\r\n              \"fill-extrusion-opacity\": 0.6,\r\n            },\r\n          });\r\n          // 显示点\r\n          this.flyTo();\r\n        }\r\n      });\r\n      // 单点标记\r\n      this.mapbox.on(\"click\", (e) => {\r\n        if (this.preview) {\r\n          return;\r\n        }\r\n        if (this.marker) {\r\n          this.marker.remove();\r\n        }\r\n        this.marker = new mapboxgl.Marker({\r\n          offset: [0, -25],\r\n          draggable: this.draggable,\r\n        })\r\n          .setLngLat([e.lngLat.lng, e.lngLat.lat])\r\n          .addTo(this.mapbox);\r\n        if (this.decimal < 0) {\r\n          this.decimal = 0;\r\n        }\r\n        if (this.decimal > 14) {\r\n          this.decimal = 14;\r\n        }\r\n        let lng = e.lngLat.lng.toFixed(this.decimal);\r\n        let lat = e.lngLat.lat.toFixed(this.decimal);\r\n        this.currentValue = lng + \", \" + lat;\r\n        this.$emit(\"on-click\", this.currentValue);\r\n      });\r\n    },\r\n    flyTo() {\r\n      if (this.data) {\r\n        try {\r\n          let lngLat = this.data.split(\",\");\r\n          let lng = lngLat[0].trim();\r\n          let lat = lngLat[1].trim();\r\n          this.currentValue = this.data;\r\n          if (this.marker) {\r\n            this.marker.remove();\r\n          }\r\n          this.marker = new mapboxgl.Marker({\r\n            offset: [0, -25],\r\n            draggable: true,\r\n          })\r\n            .setLngLat([lng, lat])\r\n            .addTo(this.mapbox);\r\n          this.mapbox.flyTo({\r\n            center: [lng, lat],\r\n            essential: true,\r\n          });\r\n        } catch (error) {\r\n          console.log(error);\r\n          this.$Message.error(\"您输入的坐标不合法\");\r\n        }\r\n      } else {\r\n        this.currentValue = \"\";\r\n        if (this.marker) {\r\n          this.marker.remove();\r\n        }\r\n        this.mapbox.flyTo({\r\n          center: this.center,\r\n          zoom: 9,\r\n          essential: true,\r\n        });\r\n      }\r\n    },\r\n    handleChange(v) {\r\n      this.$emit(\"input\", this.data);\r\n      this.$emit(\"on-change\", this.data);\r\n    },\r\n    setData(value) {\r\n      if (!this.mapbox) {\r\n        this.init();\r\n      }\r\n      if (value != this.data) {\r\n        this.data = value;\r\n        this.$emit(\"input\", this.data);\r\n        this.$emit(\"on-change\", this.data);\r\n      }\r\n    },\r\n    handleFull() {\r\n      this.full = !this.full;\r\n      if (this.full) {\r\n        this.modalHeight = \"100%\";\r\n      } else {\r\n        this.modalHeight = \"500px\";\r\n      }\r\n      setTimeout(() => {\r\n        this.mapbox.resize();\r\n      }, 10);\r\n    },\r\n    handleShow() {\r\n      if (!config.mapboxToken) {\r\n        this.$Message.warning(\"请先配置Mapbox地图的accessToken\");\r\n        return;\r\n      }\r\n      this.showModal = true;\r\n    },\r\n    changeModal(v) {\r\n      if (v) {\r\n        setTimeout(() => {\r\n          this.mapbox.resize();\r\n          this.flyTo();\r\n        }, 10);\r\n      }\r\n    },\r\n    handelSubmit() {\r\n      if (!this.currentValue) {\r\n        this.$Message.warning(\"请在地图中点击鼠标选择一个地点\");\r\n        return;\r\n      }\r\n      this.data = this.currentValue;\r\n      this.$emit(\"input\", this.data);\r\n      this.$emit(\"on-change\", this.data);\r\n      this.showModal = false;\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    // 调用销毁 API 对当前编辑器实例进行销毁\r\n    if (this.mapbox != null) {\r\n      this.mapbox.remove();\r\n    }\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.setData(val);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.mapboxgl-style-list {\r\n  display: none;\r\n}\r\n\r\n.mapboxgl-ctrl-group .mapboxgl-style-list button {\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  display: block;\r\n  font-size: 14px;\r\n  padding: 8px 8px 6px;\r\n  text-align: right;\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n\r\n.mapboxgl-style-list button.active {\r\n  font-weight: bold;\r\n}\r\n\r\n.mapboxgl-style-list button:hover {\r\n  background-color: rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.mapboxgl-style-list button + button {\r\n  border-top: 1px solid #ddd;\r\n}\r\n\r\n.mapboxgl-style-switcher {\r\n  background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTQuODQ5cHgiIGhlaWdodD0iNTQuODQ5cHgiIHZpZXdCb3g9IjAgMCA1NC44NDkgNTQuODQ5IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1NC44NDkgNTQuODQ5OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGc+PGc+PGc+PHBhdGggZD0iTTU0LjQ5NywzOS42MTRsLTEwLjM2My00LjQ5bC0xNC45MTcsNS45NjhjLTAuNTM3LDAuMjE0LTEuMTY1LDAuMzE5LTEuNzkzLDAuMzE5Yy0wLjYyNywwLTEuMjU0LTAuMTA0LTEuNzktMC4zMThsLTE0LjkyMS01Ljk2OEwwLjM1MSwzOS42MTRjLTAuNDcyLDAuMjAzLTAuNDY3LDAuNTI0LDAuMDEsMC43MTZMMjYuNTYsNTAuODFjMC40NzcsMC4xOTEsMS4yNTEsMC4xOTEsMS43MjksMEw1NC40ODgsNDAuMzNDNTQuOTY0LDQwLjEzOSw1NC45NjksMzkuODE3LDU0LjQ5NywzOS42MTR6Ii8+PHBhdGggZD0iTTU0LjQ5NywyNy41MTJsLTEwLjM2NC00LjQ5MWwtMTQuOTE2LDUuOTY2Yy0wLjUzNiwwLjIxNS0xLjE2NSwwLjMyMS0xLjc5MiwwLjMyMWMtMC42MjgsMC0xLjI1Ni0wLjEwNi0xLjc5My0wLjMyMWwtMTQuOTE4LTUuOTY2TDAuMzUxLDI3LjUxMmMtMC40NzIsMC4yMDMtMC40NjcsMC41MjMsMC4wMSwwLjcxNkwyNi41NiwzOC43MDZjMC40NzcsMC4xOSwxLjI1MSwwLjE5LDEuNzI5LDBsMjYuMTk5LTEwLjQ3OUM1NC45NjQsMjguMDM2LDU0Ljk2OSwyNy43MTYsNTQuNDk3LDI3LjUxMnoiLz48cGF0aCBkPSJNMC4zNjEsMTYuMTI1bDEzLjY2Miw1LjQ2NWwxMi41MzcsNS4wMTVjMC40NzcsMC4xOTEsMS4yNTEsMC4xOTEsMS43MjksMGwxMi41NDEtNS4wMTZsMTMuNjU4LTUuNDYzYzAuNDc3LTAuMTkxLDAuNDgtMC41MTEsMC4wMS0wLjcxNkwyOC4yNzcsNC4wNDhjLTAuNDcxLTAuMjA0LTEuMjM2LTAuMjA0LTEuNzA4LDBMMC4zNTEsMTUuNDFDLTAuMTIxLDE1LjYxNC0wLjExNiwxNS45MzUsMC4zNjEsMTYuMTI1eiIvPjwvZz48L2c+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg==);\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: 70%;\r\n}\r\n.map-modal {\r\n  .ivu-modal-body {\r\n    padding: 0px;\r\n  }\r\n}\r\n</style>"]}]}