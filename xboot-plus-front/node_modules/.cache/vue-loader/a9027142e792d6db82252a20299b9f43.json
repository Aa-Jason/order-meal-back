{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\main-components\\user.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\main-components\\user.vue","mtime":1651629755174},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRPdGhlclNldCB9IGZyb20gIkAvYXBpL2luZGV4IjsNCmltcG9ydCB1dGlsIGZyb20gIkAvbGlicy91dGlsLmpzIjsNCmltcG9ydCBjaGFuZ2VQYXNzIGZyb20gIkAvdmlld3MvY2hhbmdlLXBhc3MvY2hhbmdlLXBhc3MiOw0KaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogInVzZXIiLA0KICBjb21wb25lbnRzOiB7DQogICAgY2hhbmdlUGFzcywNCiAgfSwNCiAgcHJvcHM6IHt9LA0KICBjb21wdXRlZDogew0KICAgIG5pY2tuYW1lKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIubmlja25hbWU7DQogICAgfSwNCiAgICBhdmF0YXIoKSB7DQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5hdmF0YXI7DQogICAgfSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2hvd0NoYW5nZVBhc3M6IGZhbHNlLA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0KCkge30sDQogICAgaGFuZGxlQ2xpY2tVc2VyRHJvcGRvd24obmFtZSkgew0KICAgICAgaWYgKG5hbWUgPT0gIm93blNwYWNlIikgew0KICAgICAgICB1dGlsLm9wZW5OZXdQYWdlKHRoaXMsICJvd25zcGFjZV9pbmRleCIpOw0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgbmFtZTogIm93bnNwYWNlX2luZGV4IiwNCiAgICAgICAgfSk7DQogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gImNoYW5nZVBhc3MiKSB7DQogICAgICAgIHRoaXMuc2hvd0NoYW5nZVBhc3MgPSB0cnVlOw0KICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJsb2dpbm91dCIpIHsNCiAgICAgICAgLy8g6YCA5Ye655m75b2VDQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0TG9hZGluZyIsIHRydWUpOw0KICAgICAgICBnZXRPdGhlclNldCgpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0TG9hZGluZyIsIGZhbHNlKTsNCiAgICAgICAgICBpZiAocmVzLnJlc3VsdCkgew0KICAgICAgICAgICAgbGV0IGRvbWFpbiA9IHJlcy5yZXN1bHQuc3NvRG9tYWluOw0KICAgICAgICAgICAgQ29va2llcy5zZXQoImFjY2Vzc1Rva2VuIiwgIiIsIHsNCiAgICAgICAgICAgICAgZG9tYWluOiBkb21haW4sDQogICAgICAgICAgICAgIGV4cGlyZXM6IDcsDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJsb2dvdXQiLCB0aGlzKTsNCiAgICAgICAgICB0aGlzLnNldFN0b3JlKCJhY2Nlc3NUb2tlbiIsICIiKTsNCiAgICAgICAgICAvLyDlvLrliLbliLfmlrDpobXpnaIg6YeN5paw5Yqg6L29cm91dGVyDQogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0KCk7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user.vue","sourceRoot":"src/views/main-components","sourcesContent":["<template>\r\n  <div style=\"display: inline-block\">\r\n    <Dropdown transfer trigger=\"hover\" @on-click=\"handleClickUserDropdown\">\r\n      <div style=\"display: inline-block\">\r\n        <div class=\"header-right-icon header-user header-action\">\r\n          <Avatar v-if=\"avatar\" :src=\"avatar\" size=\"small\"></Avatar>\r\n          <Avatar v-else icon=\"md-person\" size=\"small\"></Avatar>\r\n          <span class=\"header-username\">{{ nickname }}</span>\r\n        </div>\r\n      </div>\r\n      <DropdownMenu slot=\"list\">\r\n        <DropdownItem name=\"ownSpace\">\r\n          <Icon type=\"md-person\" style=\"margin: 0 10px 0 0\" />{{\r\n            $t(\"userCenter\")\r\n          }}</DropdownItem\r\n        >\r\n        <DropdownItem name=\"changePass\">\r\n          <Icon type=\"md-unlock\" style=\"margin: 0 10px 0 0\" />{{\r\n            $t(\"changePass\")\r\n          }}</DropdownItem\r\n        >\r\n        <DropdownItem name=\"loginout\" divided>\r\n          <Icon type=\"md-log-out\" style=\"margin: 0 10px 0 0\" />{{\r\n            $t(\"logout\")\r\n          }}</DropdownItem\r\n        >\r\n      </DropdownMenu>\r\n    </Dropdown>\r\n\r\n    <!-- 修改密码 -->\r\n    <changePass v-model=\"showChangePass\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getOtherSet } from \"@/api/index\";\r\nimport util from \"@/libs/util.js\";\r\nimport changePass from \"@/views/change-pass/change-pass\";\r\nimport Cookies from 'js-cookie';\r\nexport default {\r\n  name: \"user\",\r\n  components: {\r\n    changePass,\r\n  },\r\n  props: {},\r\n  computed: {\r\n    nickname() {\r\n      return this.$store.state.user.nickname;\r\n    },\r\n    avatar() {\r\n      return this.$store.state.user.avatar;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      showChangePass: false,\r\n    };\r\n  },\r\n  methods: {\r\n    init() {},\r\n    handleClickUserDropdown(name) {\r\n      if (name == \"ownSpace\") {\r\n        util.openNewPage(this, \"ownspace_index\");\r\n        this.$router.push({\r\n          name: \"ownspace_index\",\r\n        });\r\n      } else if (name == \"changePass\") {\r\n        this.showChangePass = true;\r\n      } else if (name == \"loginout\") {\r\n        // 退出登录\r\n        this.$store.commit(\"setLoading\", true);\r\n        getOtherSet().then((res) => {\r\n          this.$store.commit(\"setLoading\", false);\r\n          if (res.result) {\r\n            let domain = res.result.ssoDomain;\r\n            Cookies.set(\"accessToken\", \"\", {\r\n              domain: domain,\r\n              expires: 7,\r\n            });\r\n          }\r\n          this.$store.commit(\"logout\", this);\r\n          this.setStore(\"accessToken\", \"\");\r\n          // 强制刷新页面 重新加载router\r\n          location.reload();\r\n        });\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>"]}]}