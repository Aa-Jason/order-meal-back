{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\department-choose.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\department-choose.vue","mtime":1651629755188},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBpbml0RGVwYXJ0bWVudCwgbG9hZERlcGFydG1lbnQgfSBmcm9tICJAL2FwaS9pbmRleCI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJkZXBhcnRtZW50Q2hvb3NlIiwNCiAgcHJvcHM6IHsNCiAgICBzaXplOiBTdHJpbmcsDQogICAgdHJhbnNmZXI6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZSwNCiAgICB9LA0KICAgIGRpc2FibGVkOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UsDQogICAgfSwNCiAgICBmaWx0ZXJhYmxlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogdHJ1ZSwNCiAgICB9LA0KICAgIGNsZWFyYWJsZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUsDQogICAgfSwNCiAgICBwbGFjZWhvbGRlcjogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogIuivt+mAieaLqeaIlui+k+WFpeaQnOe0oumDqOmXqCIsDQogICAgfSwNCiAgICB0cmFuc2ZlckNsYXNzTmFtZTogU3RyaW5nLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzZWxlY3REZXA6IFtdLA0KICAgICAgZGVwYXJ0bWVudDogW10sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGluaXREZXBhcnRtZW50RGF0YSgpIHsNCiAgICAgIGluaXREZXBhcnRtZW50KCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgaWYgKGUuaXNQYXJlbnQpIHsNCiAgICAgICAgICAgICAgZS52YWx1ZSA9IGUuaWQ7DQogICAgICAgICAgICAgIGUubGFiZWwgPSBlLnRpdGxlOw0KICAgICAgICAgICAgICBlLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgZS5jaGlsZHJlbiA9IFtdOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgZS52YWx1ZSA9IGUuaWQ7DQogICAgICAgICAgICAgIGUubGFiZWwgPSBlLnRpdGxlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGUuc3RhdHVzID09IC0xKSB7DQogICAgICAgICAgICAgIGUubGFiZWwgPSAiW+W3suemgeeUqF0gIiArIGUubGFiZWw7DQogICAgICAgICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMuZGVwYXJ0bWVudCA9IHJlcy5yZXN1bHQ7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgbG9hZERhdGEoaXRlbSwgY2FsbGJhY2spIHsNCiAgICAgIGl0ZW0ubG9hZGluZyA9IHRydWU7DQogICAgICBsb2FkRGVwYXJ0bWVudChpdGVtLnZhbHVlKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgaXRlbS5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgaWYgKGUuaXNQYXJlbnQpIHsNCiAgICAgICAgICAgICAgZS52YWx1ZSA9IGUuaWQ7DQogICAgICAgICAgICAgIGUubGFiZWwgPSBlLnRpdGxlOw0KICAgICAgICAgICAgICBlLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgZS5jaGlsZHJlbiA9IFtdOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgZS52YWx1ZSA9IGUuaWQ7DQogICAgICAgICAgICAgIGUubGFiZWwgPSBlLnRpdGxlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGUuc3RhdHVzID09IC0xKSB7DQogICAgICAgICAgICAgIGUubGFiZWwgPSAiW+W3suemgeeUqF0gIiArIGUubGFiZWw7DQogICAgICAgICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICAgIGl0ZW0uY2hpbGRyZW4gPSByZXMucmVzdWx0Ow0KICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlQ2hhbmdlRGVwKHZhbHVlLCBzZWxlY3RlZERhdGEpIHsNCiAgICAgIGxldCBkZXBhcnRtZW50SWQgPSAiIjsNCiAgICAgIC8vIOiOt+WPluacgOWQjuS4gOS4quWAvA0KICAgICAgaWYgKHZhbHVlICYmIHZhbHVlLmxlbmd0aCA+IDApIHsNCiAgICAgICAgZGVwYXJ0bWVudElkID0gdmFsdWVbdmFsdWUubGVuZ3RoIC0gMV07DQogICAgICB9DQogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCBkZXBhcnRtZW50SWQpOw0KICAgIH0sDQogICAgaGFuZGxlVmlzaWJsZUNoYW5nZShzdGF0dXMpIHsNCiAgICAgIHRoaXMuJGVtaXQoIm9uLXZpc2libGUtY2hhbmdlIiwgc3RhdHVzKTsNCiAgICB9LA0KICAgIGNsZWFyU2VsZWN0KCkgew0KICAgICAgdGhpcy5zZWxlY3REZXAgPSBbXTsNCiAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsICIiKTsNCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuaW5pdERlcGFydG1lbnREYXRhKCk7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["department-choose.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"department-choose.vue","sourceRoot":"src/views/my-components/xboot","sourcesContent":["<template>\r\n  <div>\r\n    <Cascader\r\n      v-model=\"selectDep\"\r\n      :data=\"department\"\r\n      :load-data=\"loadData\"\r\n      @on-change=\"handleChangeDep\"\r\n      @on-visible-change=\"handleVisibleChange\"\r\n      change-on-select\r\n      :size=\"size\"\r\n      :transfer=\"transfer\"\r\n      :transfer-class-name=\"transferClassName\"\r\n      :disabled=\"disabled\"\r\n      :filterable=\"filterable\"\r\n      :clearable=\"clearable\"\r\n      :placeholder=\"placeholder\"\r\n    ></Cascader>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { initDepartment, loadDepartment } from \"@/api/index\";\r\nexport default {\r\n  name: \"departmentChoose\",\r\n  props: {\r\n    size: String,\r\n    transfer: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    filterable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    clearable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: \"请选择或输入搜索部门\",\r\n    },\r\n    transferClassName: String,\r\n  },\r\n  data() {\r\n    return {\r\n      selectDep: [],\r\n      department: [],\r\n    };\r\n  },\r\n  methods: {\r\n    initDepartmentData() {\r\n      initDepartment().then((res) => {\r\n        if (res.success) {\r\n          res.result.forEach(function (e) {\r\n            if (e.isParent) {\r\n              e.value = e.id;\r\n              e.label = e.title;\r\n              e.loading = false;\r\n              e.children = [];\r\n            } else {\r\n              e.value = e.id;\r\n              e.label = e.title;\r\n            }\r\n            if (e.status == -1) {\r\n              e.label = \"[已禁用] \" + e.label;\r\n              e.disabled = true;\r\n            }\r\n          });\r\n          this.department = res.result;\r\n        }\r\n      });\r\n    },\r\n    loadData(item, callback) {\r\n      item.loading = true;\r\n      loadDepartment(item.value).then((res) => {\r\n        item.loading = false;\r\n        if (res.success) {\r\n          res.result.forEach(function (e) {\r\n            if (e.isParent) {\r\n              e.value = e.id;\r\n              e.label = e.title;\r\n              e.loading = false;\r\n              e.children = [];\r\n            } else {\r\n              e.value = e.id;\r\n              e.label = e.title;\r\n            }\r\n            if (e.status == -1) {\r\n              e.label = \"[已禁用] \" + e.label;\r\n              e.disabled = true;\r\n            }\r\n          });\r\n          item.children = res.result;\r\n          callback();\r\n        }\r\n      });\r\n    },\r\n    handleChangeDep(value, selectedData) {\r\n      let departmentId = \"\";\r\n      // 获取最后一个值\r\n      if (value && value.length > 0) {\r\n        departmentId = value[value.length - 1];\r\n      }\r\n      this.$emit(\"on-change\", departmentId);\r\n    },\r\n    handleVisibleChange(status) {\r\n      this.$emit(\"on-visible-change\", status);\r\n    },\r\n    clearSelect() {\r\n      this.selectDep = [];\r\n      this.$emit(\"on-change\", \"\");\r\n    },\r\n  },\r\n  mounted() {\r\n    this.initDepartmentData();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n</style>\r\n\r\n"]}]}