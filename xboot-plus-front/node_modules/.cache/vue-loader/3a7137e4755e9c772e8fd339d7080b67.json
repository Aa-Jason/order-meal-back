{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\monaco.vue?vue&type=style&index=0&id=65593818&lang=less&scoped=true&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\monaco.vue","mtime":1651629755196},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1651770028580},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1651770027142},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\postcss-loader\\src\\index.js","mtime":1651770027415},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":1651770042155},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLm1vbmFjby1oZWFkZXIgew0KICBoZWlnaHQ6IDQwcHg7DQogIGRpc3BsYXk6IGZsZXg7DQogIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgYmFja2dyb3VuZDogI2Y3ZjhmYTsNCiAgcGFkZGluZzogMCAxNnB4Ow0KICAudGl0bGUgew0KICAgIGNvbG9yOiAjODQ4Yjk2Ow0KICAgIGZvbnQtd2VpZ2h0OiA1MDA7DQogIH0NCiAgLmljb25zIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgLmJ0biB7DQogICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICBjb2xvcjogIzg0OGI5NjsNCiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7DQogICAgICAuaWNvbiB7DQogICAgICAgIG1hcmdpbi1yaWdodDogM3B4Ow0KICAgICAgfQ0KICAgICAgJjpob3ZlciB7DQogICAgICAgIGNvbG9yOiAjYWZiNGJkOw0KICAgICAgfQ0KICAgIH0NCiAgICAubCB7DQogICAgICBtYXJnaW4tbGVmdDogMTRweDsNCiAgICB9DQogIH0NCn0NCi5oZWFkZXItZGFyayB7DQogIGJhY2tncm91bmQ6ICMyODJhMmU7DQogIC50aXRsZS1kYXJrIHsNCiAgICBjb2xvcjogIzg0ODg4ZTsNCiAgfQ0KICAuYnRuLWRhcmsgew0KICAgIGNvbG9yOiAjODQ4ODhlICFpbXBvcnRhbnQ7DQogICAgJjpob3ZlciB7DQogICAgICBjb2xvcjogI2FmYjRiZCAhaW1wb3J0YW50Ow0KICAgIH0NCiAgfQ0KfQ0KLmVkaXRvci1mdWxsc2NyZWVuIHsNCiAgcG9zaXRpb246IGZpeGVkICFpbXBvcnRhbnQ7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsNCiAgaGVpZ2h0OiAxMDAlICFpbXBvcnRhbnQ7DQogIHotaW5kZXg6IDEwMDA7DQp9DQo="},{"version":3,"sources":["monaco.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"monaco.vue","sourceRoot":"src/views/my-components/xboot","sourcesContent":["<template>\r\n  <div :id=\"`${id}-monaco-editor-content`\" style=\"position: relative\">\r\n    <div :class=\"{ 'header-dark': themeDark, 'monaco-header': true }\" v-if=\"showHeader\">\r\n      <div :class=\"{ 'title-dark': themeDark, title: true }\">\r\n        {{ showTitle ? title : \"\" }}\r\n      </div>\r\n      <div class=\"icons\">\r\n        <div\r\n          :class=\"{ 'btn-dark': themeDark, btn: true }\"\r\n          @click=\"undo\"\r\n          v-if=\"showUndo\"\r\n        >\r\n          <Icon type=\"ios-undo\" class=\"icon\"></Icon>\r\n          撤销\r\n        </div>\r\n        <div\r\n          :class=\"{ 'btn-dark': themeDark, btn: true }\"\r\n          @click=\"redo\"\r\n          v-if=\"showRedo\"\r\n        >\r\n          <Icon type=\"ios-redo\" class=\"icon l\"></Icon>\r\n          恢复\r\n        </div>\r\n        <div\r\n          :class=\"{ 'btn-dark': themeDark, btn: true }\"\r\n          @click=\"copy\"\r\n          v-if=\"showCopy\"\r\n        >\r\n          <Icon type=\"md-copy\" class=\"icon l\"></Icon>\r\n          复制\r\n        </div>\r\n        <div\r\n          :class=\"{ 'btn-dark': themeDark, btn: true }\"\r\n          @click=\"download\"\r\n          v-if=\"showDownload\"\r\n        >\r\n          <Icon type=\"md-download\" class=\"icon l\"></Icon>\r\n          下载\r\n        </div>\r\n        <div\r\n          :class=\"{ 'btn-dark': themeDark, btn: true }\"\r\n          @click=\"format\"\r\n          v-if=\"showFormat\"\r\n        >\r\n          <Icon type=\"md-color-palette\" class=\"icon l\"></Icon>\r\n          美化排版\r\n        </div>\r\n        <div\r\n          :class=\"{ 'btn-dark': themeDark, btn: true }\"\r\n          @click=\"find\"\r\n          v-if=\"showSearch\"\r\n        >\r\n          <Icon type=\"ios-search\" class=\"icon l\"></Icon>\r\n          搜索\r\n        </div>\r\n        <div\r\n          :class=\"{ 'btn-dark': themeDark, 'btn l': true }\"\r\n          @click=\"fullscreen\"\r\n          v-if=\"showFullscreen\"\r\n        >\r\n          <Icon\r\n            :type=\"openFull ? 'md-contract' : 'md-expand'\"\r\n            class=\"icon\"\r\n          ></Icon>\r\n          {{ openFull ? \"退出全屏\" : \"全屏\" }}\r\n        </div>\r\n        <div\r\n          :class=\"{ 'btn-dark': themeDark, 'btn l': true }\"\r\n          @click=\"changeTheme\"\r\n          v-if=\"showTheme\"\r\n        >\r\n          <Icon :type=\"themeDark ? 'md-sunny' : 'md-moon'\" class=\"icon\"></Icon>\r\n          {{ themeDark ? \"明亮主题\" : \"暗黑主题\" }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div :id=\"id\" :style=\"{ overflow: 'hidden', height: realHeight }\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\n// import * as monaco from \"monaco-editor\";\r\nimport FileSaver from \"file-saver\";\r\nexport default {\r\n  name: \"monaco\",\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      default: \"monaco\",\r\n    },\r\n    height: {\r\n      type: [Number, String],\r\n      default: 500,\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    language: String,\r\n    lineNumbers: {\r\n      type: String,\r\n      default: \"on\",\r\n    },\r\n    readOnly: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    cursorStyle: {\r\n      type: String,\r\n      default: \"line\",\r\n    },\r\n    fontSize: {\r\n      type: Number,\r\n      default: 14,\r\n    },\r\n    contextmenu: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    defaultTheme: {\r\n      type: String,\r\n      default: \"vs\",\r\n    },\r\n    autoFormat: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    showHeader: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    title: {\r\n      type: String,\r\n    },\r\n    showTitle: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    showUndo: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    showRedo: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    showCopy: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    showDownload: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    downloadSuffix: {\r\n      type: String,\r\n      default: \".txt\",\r\n    },\r\n    showFormat: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    showSearch: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    showFullscreen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    showTheme: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      data: this.value,\r\n      monacoEditor: null,\r\n      themeDark: this.defaultTheme == \"vs-dark\" ? true : false,\r\n      theme: this.defaultTheme,\r\n      realHeight: this.height + \"px\",\r\n      openFull: false,\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.monacoEditor = monaco.editor.create(\r\n        document.getElementById(this.id),\r\n        {\r\n          value: this.value,\r\n          language: this.language,\r\n          theme: this.theme, // 主题'vs' (default), 'vs-dark', 'hc-black'\r\n          lineNumbers: this.lineNumbers, // 显示行号\r\n          readOnly: this.readOnly, // 是否只读\r\n          cursorStyle: this.cursorStyle, // 光标\r\n          fontSize: this.fontSize, // 字体大小\r\n          contextmenu: this.contextmenu, // 右键菜单\r\n          formatOnPaste: true,\r\n          formatOnType: true,\r\n        }\r\n      );\r\n      // 格式化代码\r\n      if (this.autoFormat) {\r\n        setTimeout(() => {\r\n          if (!this.monacoEditor) {\r\n            return;\r\n          }\r\n          this.monacoEditor.getAction([\"editor.action.formatDocument\"])._run();\r\n        }, 200);\r\n      }\r\n      // 监听事件\r\n      this.monacoEditor.onDidChangeModelContent((e) => {\r\n        let v = this.monacoEditor.getValue();\r\n        this.data = v;\r\n        this.$emit(\"input\", this.data);\r\n        this.$emit(\"on-change\", this.data);\r\n      });\r\n    },\r\n    changeTheme() {\r\n      this.themeDark = !this.themeDark;\r\n      let theme = \"vs\";\r\n      if (this.themeDark) {\r\n        theme = \"vs-dark\";\r\n      }\r\n      this.monacoEditor.updateOptions({\r\n        theme: theme,\r\n      });\r\n    },\r\n    setData(value) {\r\n      if (!this.monacoEditor) {\r\n        this.init();\r\n      }\r\n      if (value != this.data) {\r\n        this.data = value;\r\n        this.monacoEditor.setValue(this.data);\r\n        // 格式化代码\r\n        if (this.autoFormat) {\r\n          this.monacoEditor.getAction([\"editor.action.formatDocument\"])._run();\r\n        }\r\n        this.$emit(\"input\", this.data);\r\n        this.$emit(\"on-change\", this.data);\r\n      }\r\n    },\r\n    layout() {\r\n      this.realHeight = this.height + \"px\";\r\n      setTimeout(() => {\r\n        this.monacoEditor.layout();\r\n      }, 10);\r\n    },\r\n    undo() {\r\n      this.monacoEditor.getModel()?.undo();\r\n    },\r\n    redo() {\r\n      this.monacoEditor.getModel()?.redo();\r\n    },\r\n    copy() {\r\n      this.$copyText(this.data).then((e) => {\r\n        this.$Message.success(\"复制成功\");\r\n      });\r\n    },\r\n    download() {\r\n      var blob = new Blob([this.data], {\r\n        type: \"text/plain;charset=utf-8\",\r\n      });\r\n      let title = this.title;\r\n      if (!title) {\r\n        title = \"文件\";\r\n      }\r\n      title += this.downloadSuffix;\r\n      FileSaver.saveAs(blob, title);\r\n    },\r\n    format() {\r\n      this.monacoEditor.getAction([\"editor.action.formatDocument\"])._run();\r\n    },\r\n    find() {\r\n      this.monacoEditor.getAction([\"actions.find\"])._run();\r\n    },\r\n    fullscreen() {\r\n      let main = document.getElementById(`${this.id}-monaco-editor-content`);\r\n      this.openFull = !this.openFull;\r\n      if (this.openFull) {\r\n        this.realHeight = \"100%\";\r\n        main.classList.add(\"editor-fullscreen\");\r\n        setTimeout(() => {\r\n          this.monacoEditor.layout();\r\n        }, 10);\r\n      } else {\r\n        this.realHeight = this.height + \"px\";\r\n        main.classList.remove(\"editor-fullscreen\");\r\n        setTimeout(() => {\r\n          this.monacoEditor.layout();\r\n        }, 10);\r\n      }\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    // 调用销毁 API 对当前编辑器实例进行销毁\r\n    if (this.monacoEditor != null) {\r\n      this.monacoEditor.dispose();\r\n    }\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.setData(val);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.init();\r\n    });\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.monaco-header {\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background: #f7f8fa;\r\n  padding: 0 16px;\r\n  .title {\r\n    color: #848b96;\r\n    font-weight: 500;\r\n  }\r\n  .icons {\r\n    display: flex;\r\n    align-items: center;\r\n    .btn {\r\n      cursor: pointer;\r\n      height: 100%;\r\n      color: #848b96;\r\n      transition: all 0.2s ease;\r\n      .icon {\r\n        margin-right: 3px;\r\n      }\r\n      &:hover {\r\n        color: #afb4bd;\r\n      }\r\n    }\r\n    .l {\r\n      margin-left: 14px;\r\n    }\r\n  }\r\n}\r\n.header-dark {\r\n  background: #282a2e;\r\n  .title-dark {\r\n    color: #84888e;\r\n  }\r\n  .btn-dark {\r\n    color: #84888e !important;\r\n    &:hover {\r\n      color: #afb4bd !important;\r\n    }\r\n  }\r\n}\r\n.editor-fullscreen {\r\n  position: fixed !important;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  z-index: 1000;\r\n}\r\n</style>"]}]}