{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\activiti\\todo-manage\\todoManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\activiti\\todo-manage\\todoManage.vue","mtime":1651629755143},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdG9kb0xpc3QsIHBhc3MsIGJhY2ssIGdldEJhY2tMaXN0LCBiYWNrVG9UYXNrLCBkZWxlZ2F0ZSwgZ2V0TmV4dE5vZGUsIGdldE5vZGUsIHBhc3NBbGwsIGJhY2tBbGwgfSBmcm9tICJAL2FwaS9hY3Rpdml0aSI7CmltcG9ydCB7IHNlYXJjaFVzZXJCeU5hbWUsIGdldERpY3REYXRhQnlUeXBlIH0gZnJvbSAiQC9hcGkvaW5kZXgiOwppbXBvcnQgaGlzdG9yaWNEZXRhaWwgZnJvbSAiLi4vaGlzdG9yaWMtZGV0YWlsL2hpc3RvcmljRGV0YWlsLnZ1ZSI7CmltcG9ydCB7IHNob3J0Y3V0cyB9IGZyb20gIkAvbGlicy9zaG9ydGN1dHMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInRvZG8tbWFuYWdlIiwKICBjb21wb25lbnRzOiB7CiAgICBoaXN0b3JpY0RldGFpbDogaGlzdG9yaWNEZXRhaWwKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiB7CiAgICAgIHRhYmxlU2l6ZTogImRlZmF1bHQiLAogICAgICBtb2RhbFZpc2libGU6IGZhbHNlLAogICAgICBtb2RhbFR5cGU6IDAsCiAgICAgIHNob3dIaXN0b3J5OiBmYWxzZSwKICAgICAgcHJvY0luc3RJZDogIiIsCiAgICAgIG9wZW5TZWFyY2g6IHRydWUsCiAgICAgIG9wZW5UaXA6IHRydWUsCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIC8vIOihqOWNleWKoOi9veeKtuaAgQogICAgICBtb2RhbFRhc2tWaXNpYmxlOiBmYWxzZSwKICAgICAgdXNlckxvYWRpbmc6IGZhbHNlLAogICAgICBiYWNrTG9hZGluZzogZmFsc2UsCiAgICAgIHVzZXJMaXN0OiBbXSwKICAgICAgc2VsZWN0TGlzdDogW10sCiAgICAgIC8vIOWkmumAieaVsOaNrgogICAgICBhc3NpZ25lZUxpc3Q6IFtdLAogICAgICBiYWNrTGlzdDogW3sKICAgICAgICBrZXk6ICItMSIsCiAgICAgICAgbmFtZTogIuWPkei1t+S6uiIKICAgICAgfV0sCiAgICAgIGVycm9yOiAiIiwKICAgICAgc2hvd0Fzc2lnbjogZmFsc2UsCiAgICAgIHNlYXJjaEZvcm06IHsKICAgICAgICAvLyDmkJzntKLmoYblr7nlupRkYXRh5a+56LGhCiAgICAgICAgbmFtZTogIiIsCiAgICAgICAgcGFnZU51bWJlcjogMSwKICAgICAgICAvLyDlvZPliY3pobXmlbAKICAgICAgICBwYWdlU2l6ZTogMTAgLy8g6aG16Z2i5aSn5bCPCgogICAgICB9LAogICAgICBzZWxlY3REYXRlOiBudWxsLAogICAgICBvcHRpb25zOiB7CiAgICAgICAgc2hvcnRjdXRzOiBzaG9ydGN1dHMKICAgICAgfSwKICAgICAgbW9kYWxUYXNrVGl0bGU6ICIiLAogICAgICBtb2RhbFRpdGxlOiAiIiwKICAgICAgLy8g5re75Yqg5oiW57yW6L6R5qCH6aKYCiAgICAgIGZvcm06IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgdXNlcklkOiAiIiwKICAgICAgICBwcm9jSW5zdElkOiAiIiwKICAgICAgICBjb21tZW50OiAiIiwKICAgICAgICB0eXBlOiAwLAogICAgICAgIGFzc2lnbmVlczogW10sCiAgICAgICAgYmFja1Rhc2tLZXk6ICItMSIsCiAgICAgICAgc2VuZE1lc3NhZ2U6IHRydWUsCiAgICAgICAgc2VuZFNtczogdHJ1ZSwKICAgICAgICBzZW5kRW1haWw6IHRydWUKICAgICAgfSwKICAgICAgZm9ybVZhbGlkYXRlOiB7Ly8g6KGo5Y2V6aqM6K+B6KeE5YiZCiAgICAgIH0sCiAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgICAvLyDmt7vliqDmiJbnvJbovpHmj5DkuqTnirbmgIEKICAgICAgY29sdW1uczogWy8vIOihqOWktAogICAgICB7CiAgICAgICAgdHlwZTogInNlbGVjdGlvbiIsCiAgICAgICAgd2lkdGg6IDYwLAogICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogImluZGV4IiwKICAgICAgICB3aWR0aDogNjAsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuS7u+WKoeWQjeensCIsCiAgICAgICAga2V5OiAibmFtZSIsCiAgICAgICAgbWluV2lkdGg6IDE2MAogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLmiYDlsZ7mtYHnqIsiLAogICAgICAgIGtleTogInByb2Nlc3NOYW1lIiwKICAgICAgICBtaW5XaWR0aDogMTUwLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIHBhcmFtcykgewogICAgICAgICAgdmFyIHRleHQgPSAiIjsKCiAgICAgICAgICBpZiAocGFyYW1zLnJvdy52ZXJzaW9uKSB7CiAgICAgICAgICAgIHRleHQgPSBwYXJhbXMucm93LnByb2Nlc3NOYW1lICsgIiAtIHYuIiArIHBhcmFtcy5yb3cudmVyc2lvbjsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgW2goInNwYW4iLCB0ZXh0KV0pOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi5aeU5omY5Luj5Yqe5Lq6IiwKICAgICAgICBrZXk6ICJvd25lciIsCiAgICAgICAgbWluV2lkdGg6IDEzMCwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcGFyYW1zKSB7CiAgICAgICAgICBpZiAoIXBhcmFtcy5yb3cub3duZXIpIHsKICAgICAgICAgICAgcmV0dXJuIGgoInNwYW4iLCAiLSIpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBoKCJUb29sdGlwIiwgewogICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgIHBsYWNlbWVudDogInRvcCIsCiAgICAgICAgICAgICAgY29udGVudDogcGFyYW1zLnJvdy5vd25lclVzZXJuYW1lCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIFtoKCJUYWciLCB7CiAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgIm1hcmdpbi1yaWdodCI6ICI4cHgiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgdHlwZTogImJvcmRlciIKICAgICAgICAgICAgfQogICAgICAgICAgfSwgcGFyYW1zLnJvdy5vd25lcildKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIua1geeoi+WPkei1t+S6uiIsCiAgICAgICAga2V5OiAiYXBwbHllciIsCiAgICAgICAgbWluV2lkdGg6IDEzMCwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcGFyYW1zKSB7CiAgICAgICAgICByZXR1cm4gaCgiVG9vbHRpcCIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBwbGFjZW1lbnQ6ICJ0b3AiLAogICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcmFtcy5yb3cuYXBwbHllclVzZXJuYW1lCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIFtoKCJUYWciLCB7CiAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgIm1hcmdpbi1yaWdodCI6ICI4cHgiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgdHlwZTogImJvcmRlciIKICAgICAgICAgICAgfQogICAgICAgICAgfSwgcGFyYW1zLnJvdy5hcHBseWVyKV0pOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi5LyY5YWI57qnIiwKICAgICAgICBrZXk6ICJwcmlvcml0eSIsCiAgICAgICAgd2lkdGg6IDEwMCwKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcGFyYW1zKSB7CiAgICAgICAgICB2YXIgdGV4dCA9ICLml6AiLAogICAgICAgICAgICAgIGNvbG9yID0gIiI7CgogICAgICAgICAgaWYgKHBhcmFtcy5yb3cucHJpb3JpdHkgPT0gMCkgewogICAgICAgICAgICBjb2xvciA9ICJncmVlbiI7CiAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5yb3cucHJpb3JpdHkgPT0gMSkgewogICAgICAgICAgICBjb2xvciA9ICJvcmFuZ2UiOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMucm93LnByaW9yaXR5ID09IDIpIHsKICAgICAgICAgICAgY29sb3IgPSAicmVkIjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbG9yID0gImRlZmF1bHQiOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzLmRpY3RQcmlvcml0eS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLnZhbHVlID09IHBhcmFtcy5yb3cucHJpb3JpdHkpIHsKICAgICAgICAgICAgICB0ZXh0ID0gZS50aXRsZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFtoKCJUYWciLCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgY29sb3I6IGNvbG9yCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHRleHQpXSk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLnirbmgIEiLAogICAgICAgIGtleTogImlzU3VzcGVuZGVkIiwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgd2lkdGg6IDExMCwKICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoLCBwYXJhbXMpIHsKICAgICAgICAgIGlmICghcGFyYW1zLnJvdy5pc1N1c3BlbmRlZCkgewogICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgW2goIkJhZGdlIiwgewogICAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgICBzdGF0dXM6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICLlt7Lmv4DmtLsiCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KV0pOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMucm93LmlzU3VzcGVuZGVkKSB7CiAgICAgICAgICAgIHJldHVybiBoKCJkaXYiLCBbaCgiQmFkZ2UiLCB7CiAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgIHN0YXR1czogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6ICLlt7LmjILotbciCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KV0pOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZmlsdGVyczogW3sKICAgICAgICAgIGxhYmVsOiAi5bey5r+A5rS7IiwKICAgICAgICAgIHZhbHVlOiBmYWxzZQogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAi5bey5oyC6LW3IiwKICAgICAgICAgIHZhbHVlOiB0cnVlCiAgICAgICAgfV0sCiAgICAgICAgZmlsdGVyTXVsdGlwbGU6IGZhbHNlLAogICAgICAgIGZpbHRlck1ldGhvZDogZnVuY3Rpb24gZmlsdGVyTWV0aG9kKHZhbHVlLCByb3cpIHsKICAgICAgICAgIHJldHVybiByb3cuaXNTdXNwZW5kZWQgPT0gdmFsdWU7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLliJvlu7rml7bpl7QiLAogICAgICAgIGtleTogImNyZWF0ZVRpbWUiLAogICAgICAgIHdpZHRoOiAxODAsCiAgICAgICAgc29ydFR5cGU6ICJkZXNjIiwKICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLmk43kvZwiLAogICAgICAgIGtleTogImFjdGlvbiIsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHdpZHRoOiAyODAsCiAgICAgICAgZml4ZWQ6ICJyaWdodCIsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcGFyYW1zKSB7CiAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgW2goImEiLCB7CiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgX3RoaXMuZGV0YWlsKHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgIueUs+ivt+ivpuaDhSIpLCBoKCJEaXZpZGVyIiwgewogICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgIHR5cGU6ICJ2ZXJ0aWNhbCIKICAgICAgICAgICAgfQogICAgICAgICAgfSksIGgoImEiLCB7CiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgX3RoaXMucGFzc1Rhc2socGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCAi6YCa6L+HIiksIGgoIkRpdmlkZXIiLCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgdHlwZTogInZlcnRpY2FsIgogICAgICAgICAgICB9CiAgICAgICAgICB9KSwgaCgiYSIsIHsKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5iYWNrVGFzayhwYXJhbXMucm93KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICLpqbPlm54iKSwgaCgiRGl2aWRlciIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB0eXBlOiAidmVydGljYWwiCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLCBoKCJhIiwgewogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgICAgIF90aGlzLmRlbGVnYXRlVGFzayhwYXJhbXMucm93KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICLovazlip4iKSwgaCgiRGl2aWRlciIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB0eXBlOiAidmVydGljYWwiCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLCBoKCJhIiwgewogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgICAgIF90aGlzLmhpc3RvcnkocGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCAi5Y6G5Y+yIildKTsKICAgICAgICB9CiAgICAgIH1dLAogICAgICBkYXRhOiBbXSwKICAgICAgLy8g6KGo5Y2V5pWw5o2uCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDooajljZXmlbDmja7mgLvmlbAKICAgICAgZGljdFByaW9yaXR5OiBbXSwKICAgICAgaXNHYXRld2F5OiBmYWxzZSwKICAgICAgaXNDdXN0b206IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdGhpcy5nZXREaWN0RGF0YVR5cGUoKTsKICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgfSwKICAgIGdldERpY3REYXRhVHlwZTogZnVuY3Rpb24gZ2V0RGljdERhdGFUeXBlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGdldERpY3REYXRhQnlUeXBlKCJwcmlvcml0eSIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMyLmRpY3RQcmlvcml0eSA9IHJlcy5yZXN1bHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hVc2VyOiBmdW5jdGlvbiBzZWFyY2hVc2VyKHYpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoIXYpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMudXNlckxvYWRpbmcgPSB0cnVlOwogICAgICBzZWFyY2hVc2VyQnlOYW1lKHYpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy51c2VyTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzMy51c2VyTGlzdCA9IHJlcy5yZXN1bHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VTb3J0OiBmdW5jdGlvbiBjaGFuZ2VTb3J0KGUpIHsKICAgICAgdGhpcy5zZWFyY2hGb3JtLnNvcnQgPSBlLmtleTsKICAgICAgdGhpcy5zZWFyY2hGb3JtLm9yZGVyID0gZS5vcmRlcjsKCiAgICAgIGlmIChlLm9yZGVyID09ICJub3JtYWwiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLm9yZGVyID0gIiI7CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgIH0sCiAgICBjaGFuZ2VQYWdlOiBmdW5jdGlvbiBjaGFuZ2VQYWdlKHYpIHsKICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VOdW1iZXIgPSB2OwogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICAgIHRoaXMuY2xlYXJTZWxlY3RBbGwoKTsKICAgIH0sCiAgICBjaGFuZ2VQYWdlU2l6ZTogZnVuY3Rpb24gY2hhbmdlUGFnZVNpemUodikgewogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZVNpemUgPSB2OwogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICB9LAogICAgc2VsZWN0RGF0ZVJhbmdlOiBmdW5jdGlvbiBzZWxlY3REYXRlUmFuZ2UodikgewogICAgICBpZiAodikgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5zdGFydERhdGUgPSB2WzBdOwogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5lbmREYXRlID0gdlsxXTsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZVRhYmxlU2l6ZTogZnVuY3Rpb24gY2hhbmdlVGFibGVTaXplKHYpIHsKICAgICAgdGhpcy50YWJsZVNpemUgPSB2OwogICAgfSwKICAgIGV4cG9ydERhdGE6IGZ1bmN0aW9uIGV4cG9ydERhdGEoKSB7CiAgICAgIHRoaXMuJHJlZnMudGFibGUuZXhwb3J0Q3N2KHsKICAgICAgICBmaWxlbmFtZTogIuaVsOaNriIKICAgICAgfSk7CiAgICB9LAogICAgZ2V0RGF0YUxpc3Q6IGZ1bmN0aW9uIGdldERhdGFMaXN0KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRvZG9MaXN0KHRoaXMuc2VhcmNoRm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM0LmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpczQuZGF0YSA9IHJlcy5yZXN1bHQuY29udGVudDsKICAgICAgICAgIF90aGlzNC50b3RhbCA9IHJlcy5yZXN1bHQudG90YWxFbGVtZW50czsKCiAgICAgICAgICBpZiAoX3RoaXM0LmRhdGEubGVuZ3RoID09IDAgJiYgX3RoaXM0LnNlYXJjaEZvcm0ucGFnZU51bWJlciA+IDEpIHsKICAgICAgICAgICAgX3RoaXM0LnNlYXJjaEZvcm0ucGFnZU51bWJlciAtPSAxOwoKICAgICAgICAgICAgX3RoaXM0LmdldERhdGFMaXN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTZWFyY2g6IGZ1bmN0aW9uIGhhbmRsZVNlYXJjaCgpIHsKICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VOdW1iZXIgPSAxOwogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZVNpemUgPSAxMDsKICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgfSwKICAgIGhhbmRsZVJlc2V0OiBmdW5jdGlvbiBoYW5kbGVSZXNldCgpIHsKICAgICAgdGhpcy4kcmVmcy5zZWFyY2hGb3JtLnJlc2V0RmllbGRzKCk7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlTnVtYmVyID0gMTsKICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VTaXplID0gMTA7CiAgICAgIHRoaXMuc2VsZWN0RGF0ZSA9IG51bGw7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5zdGFydERhdGUgPSAiIjsKICAgICAgdGhpcy5zZWFyY2hGb3JtLmVuZERhdGUgPSAiIjsgLy8g6YeN5paw5Yqg6L295pWw5o2uCgogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICB9LAogICAgc2hvd1NlbGVjdDogZnVuY3Rpb24gc2hvd1NlbGVjdChlKSB7CiAgICAgIHRoaXMuc2VsZWN0TGlzdCA9IGU7CiAgICB9LAogICAgY2xlYXJTZWxlY3RBbGw6IGZ1bmN0aW9uIGNsZWFyU2VsZWN0QWxsKCkgewogICAgICB0aGlzLiRyZWZzLnRhYmxlLnNlbGVjdEFsbChmYWxzZSk7CiAgICB9LAogICAgaGFuZGVsU3VibWl0OiBmdW5jdGlvbiBoYW5kZWxTdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLmZvcm0udHlwZSA9PSAwKSB7CiAgICAgICAgLy8g6YCa6L+HCiAgICAgICAgaWYgKCh0aGlzLnNob3dBc3NpZ24gfHwgdGhpcy5pc0N1c3RvbSkgJiYgdGhpcy5mb3JtLmFzc2lnbmVlcy5sZW5ndGggPCAxKSB7CiAgICAgICAgICB0aGlzLmVycm9yID0gIuivt+iHs+WwkemAieaLqeS4gOS4quWuoeaJueS6uiI7CiAgICAgICAgICB0aGlzLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lcnJvciA9ICIiOwogICAgICAgIH0KCiAgICAgICAgcGFzcyh0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXM1LnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgX3RoaXM1LiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwoKICAgICAgICAgICAgX3RoaXM1Lm1vZGFsVGFza1Zpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgIF90aGlzNS5nZXREYXRhTGlzdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybS50eXBlID09IDEpIHsKICAgICAgICAvLyDpqbPlm54KICAgICAgICBpZiAodGhpcy5mb3JtLmJhY2tUYXNrS2V5ID09ICItMSIpIHsKICAgICAgICAgIC8vIOmps+WbnuiHs+WPkei1t+S6ugogICAgICAgICAgYmFjayh0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpczUuc3VibWl0TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgX3RoaXM1LiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwoKICAgICAgICAgICAgICBfdGhpczUubW9kYWxUYXNrVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgICAgICBfdGhpczUuZ2V0RGF0YUxpc3QoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOiHquWumuS5iemps+WbngogICAgICAgICAgaWYgKHRoaXMuZm9ybS5iYWNrVGFza0tleSAhPSAiLTEiICYmIHRoaXMuZm9ybS5hc3NpZ25lZXMubGVuZ3RoIDwgMSkgewogICAgICAgICAgICB0aGlzLmVycm9yID0gIuivt+iHs+WwkemAieaLqeS4gOS4quWuoeaJueS6uiI7CiAgICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmVycm9yID0gIiI7CiAgICAgICAgICB9CgogICAgICAgICAgYmFja1RvVGFzayh0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpczUuc3VibWl0TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgX3RoaXM1LiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwoKICAgICAgICAgICAgICBfdGhpczUubW9kYWxUYXNrVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgICAgICBfdGhpczUuZ2V0RGF0YUxpc3QoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybS50eXBlID09IDIpIHsKICAgICAgICAvLyDovazlip4KICAgICAgICBpZiAoIXRoaXMuZm9ybS51c2VySWQpIHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSAi6K+35pCc57Si6YCJ5oup5LiA6L2s5Yqe5Lq6IjsKICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVycm9yID0gIiI7CiAgICAgICAgfQoKICAgICAgICBkZWxlZ2F0ZSh0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXM1LnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgX3RoaXM1LiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwoKICAgICAgICAgICAgX3RoaXM1Lm1vZGFsVGFza1Zpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgIF90aGlzNS5nZXREYXRhTGlzdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZGV0YWlsOiBmdW5jdGlvbiBkZXRhaWwodikgewogICAgICB2YXIgcXVlcnkgPSB7CiAgICAgICAgaWQ6IHYudGFibGVJZCwKICAgICAgICB0eXBlOiAzLAogICAgICAgIGJhY2tSb3V0ZTogdGhpcy4kcm91dGUubmFtZQogICAgICB9OwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogdi5yb3V0ZU5hbWUsCiAgICAgICAgcXVlcnk6IHF1ZXJ5CiAgICAgIH0pOwogICAgfSwKICAgIHBhc3NUYXNrOiBmdW5jdGlvbiBwYXNzVGFzayh2KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy5tb2RhbFRhc2tUaXRsZSA9ICLlrqHmibnpgJrov4ciOwogICAgICB0aGlzLmZvcm0uaWQgPSB2LmlkOwogICAgICB0aGlzLmZvcm0ucHJvY0luc3RJZCA9IHYucHJvY0luc3RJZDsKICAgICAgdGhpcy5mb3JtLnByaW9yaXR5ID0gdi5wcmlvcml0eTsKICAgICAgdGhpcy5mb3JtLnR5cGUgPSAwOwogICAgICB0aGlzLm1vZGFsVGFza1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLnVzZXJMb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0TmV4dE5vZGUodi5wcm9jRGVmSWQsIHYua2V5KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczYudXNlckxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpczYuZXJyb3IgPSAiIjsKCiAgICAgICAgICBpZiAocmVzLnJlc3VsdC50eXBlID09IDIpIHsKICAgICAgICAgICAgX3RoaXM2LmlzR2F0ZXdheSA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczYuc2hvd0Fzc2lnbiA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczYuaXNDdXN0b20gPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChyZXMucmVzdWx0LnR5cGUgPT0gMyB8fCByZXMucmVzdWx0LnR5cGUgPT0gNCkgewogICAgICAgICAgICBfdGhpczYuaXNHYXRld2F5ID0gdHJ1ZTsKICAgICAgICAgICAgX3RoaXM2LnNob3dBc3NpZ24gPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXM2LmlzQ3VzdG9tID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocmVzLnJlc3VsdC50eXBlID09IDUpIHsKICAgICAgICAgICAgX3RoaXM2LmlzQ3VzdG9tID0gdHJ1ZTsKICAgICAgICAgICAgX3RoaXM2LmlzR2F0ZXdheSA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczYuc2hvd0Fzc2lnbiA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHJlcy5yZXN1bHQudHlwZSA9PSAxKSB7CiAgICAgICAgICAgIF90aGlzNi5zaG93QXNzaWduID0gdHJ1ZTsKICAgICAgICAgICAgX3RoaXM2LmlzR2F0ZXdheSA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczYuaXNDdXN0b20gPSBmYWxzZTsKCiAgICAgICAgICAgIGlmIChyZXMucmVzdWx0LnVzZXJzICYmIHJlcy5yZXN1bHQudXNlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIF90aGlzNi5hc3NpZ25lZUxpc3QgPSByZXMucmVzdWx0LnVzZXJzOyAvLyDpu5jorqTli77pgIkKCiAgICAgICAgICAgICAgdmFyIGlkcyA9IFtdOwogICAgICAgICAgICAgIHJlcy5yZXN1bHQudXNlcnMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgaWRzLnB1c2goZS5pZCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXM2LmZvcm0uYXNzaWduZWVzID0gaWRzOwogICAgICAgICAgICAgIF90aGlzNi5zaG93QXNzaWduID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczYuZm9ybS5hc3NpZ25lZXMgPSBbXTsKICAgICAgICAgICAgICBfdGhpczYuc2hvd0Fzc2lnbiA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VCYWNrVGFzazogZnVuY3Rpb24gY2hhbmdlQmFja1Rhc2sodikgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICh2ID09ICItMSIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMudXNlckxvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgaGlzVGFza0lkID0gIiI7CiAgICAgIHRoaXMuYmFja0xpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChlLmtleSA9PSB2KSB7CiAgICAgICAgICBoaXNUYXNrSWQgPSBlLmlkOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGdldE5vZGUodiwgewogICAgICAgIHRhc2tJZDogdGhpcy5mb3JtLmlkLAogICAgICAgIGhpc1Rhc2tJZDogaGlzVGFza0lkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNy51c2VyTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIGlmIChyZXMucmVzdWx0LnVzZXJzICYmIHJlcy5yZXN1bHQudXNlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBfdGhpczcuYXNzaWduZWVMaXN0ID0gcmVzLnJlc3VsdC51c2VyczsgLy8g6buY6K6k5Yu+6YCJCgogICAgICAgICAgICB2YXIgaWRzID0gW107CiAgICAgICAgICAgIHJlcy5yZXN1bHQudXNlcnMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGlkcy5wdXNoKGUuaWQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3RoaXM3LmZvcm0uYXNzaWduZWVzID0gaWRzOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYmFja1Rhc2s6IGZ1bmN0aW9uIGJhY2tUYXNrKHYpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB0aGlzLm1vZGFsVGFza1RpdGxlID0gIuWuoeaJuemps+WbniI7CiAgICAgIHRoaXMuZm9ybS5pZCA9IHYuaWQ7CiAgICAgIHRoaXMuZm9ybS5wcm9jSW5zdElkID0gdi5wcm9jSW5zdElkOwogICAgICB0aGlzLmZvcm0ucHJvY0RlZklkID0gdi5wcm9jRGVmSWQ7CiAgICAgIHRoaXMuZm9ybS5wcmlvcml0eSA9IHYucHJpb3JpdHk7CiAgICAgIHRoaXMuZm9ybS50eXBlID0gMTsKICAgICAgdGhpcy5zaG93QXNzaWduID0gZmFsc2U7CiAgICAgIHRoaXMuaXNDdXN0b20gPSBmYWxzZTsKICAgICAgdGhpcy5tb2RhbFRhc2tWaXNpYmxlID0gdHJ1ZTsgLy8g6I635Y+W5Y+v6amz5Zue6IqC54K5CgogICAgICB0aGlzLmJhY2tMaXN0ID0gW3sKICAgICAgICBrZXk6ICItMSIsCiAgICAgICAgbmFtZTogIuWPkei1t+S6uiIKICAgICAgfV07CiAgICAgIHRoaXMuZm9ybS5iYWNrVGFza0tleSA9ICItMSI7CiAgICAgIHRoaXMuYmFja0xvYWRpbmcgPSB0cnVlOwogICAgICBnZXRCYWNrTGlzdCh2LnByb2NJbnN0SWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzOC5iYWNrTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBfdGhpczguYmFja0xpc3QucHVzaChlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZGVsZWdhdGVUYXNrOiBmdW5jdGlvbiBkZWxlZ2F0ZVRhc2sodikgewogICAgICB0aGlzLm1vZGFsVGFza1RpdGxlID0gIuWnlOaJmOS7luS6uuS7o+WKniI7CiAgICAgIHRoaXMuZm9ybS5pZCA9IHYuaWQ7CiAgICAgIHRoaXMuZm9ybS5wcm9jSW5zdElkID0gdi5wcm9jSW5zdElkOwogICAgICB0aGlzLmZvcm0udHlwZSA9IDI7CiAgICAgIHRoaXMuc2hvd0Fzc2lnbiA9IGZhbHNlOwogICAgICB0aGlzLmlzQ3VzdG9tID0gZmFsc2U7CiAgICAgIHRoaXMubW9kYWxUYXNrVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaGlzdG9yeTogZnVuY3Rpb24gaGlzdG9yeSh2KSB7CiAgICAgIGlmICghdi5wcm9jSW5zdElkKSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi5rWB56iL5a6e5L6LSUTkuI3lrZjlnKgiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMucHJvY0luc3RJZCA9IHYucHJvY0luc3RJZDsKICAgICAgdGhpcy5zaG93SGlzdG9yeSA9IHRydWU7CiAgICB9LAogICAgcGFzc0FsbFRhc2s6IGZ1bmN0aW9uIHBhc3NBbGxUYXNrKCkgewogICAgICBpZiAodGhpcy5zZWxlY3RMaXN0Lmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLmgqjov5jmnKrpgInmi6nopoHpgJrov4fnmoTmlbDmja4iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8g5om56YeP6YCa6L+HCgoKICAgICAgdGhpcy5tb2RhbFZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLm1vZGFsVHlwZSA9IDA7CiAgICAgIHRoaXMubW9kYWxUaXRsZSA9ICLmibnph4/pgJrov4cgIiArIHRoaXMuc2VsZWN0TGlzdC5sZW5ndGggKyAiIOadoeaVsOaNriI7CiAgICB9LAogICAgYmFja0FsbFRhc2s6IGZ1bmN0aW9uIGJhY2tBbGxUYXNrKCkgewogICAgICBpZiAodGhpcy5zZWxlY3RMaXN0Lmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLmgqjov5jmnKrpgInmi6nopoHpqbPlm57nmoTmlbDmja4iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8g5om56YeP6amz5ZueCgoKICAgICAgdGhpcy5tb2RhbFZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLm1vZGFsVHlwZSA9IDE7CiAgICAgIHRoaXMubW9kYWxUaXRsZSA9ICLmibnph4/pqbPlm54gIiArIHRoaXMuc2VsZWN0TGlzdC5sZW5ndGggKyAiIOadoeaVsOaNriI7CiAgICB9LAogICAgaGFuZGVsU3VibWl0QWxsOiBmdW5jdGlvbiBoYW5kZWxTdWJtaXRBbGwoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMubW9kYWxUeXBlID09IDApIHsKICAgICAgICB2YXIgaWRzID0gIiIsCiAgICAgICAgICAgIHBhcmFtcyA9IHt9OwogICAgICAgIHRoaXMuc2VsZWN0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZHMgKz0gZS5pZCArICIsIjsKICAgICAgICB9KTsKICAgICAgICBpZHMgPSBpZHMuc3Vic3RyaW5nKDAsIGlkcy5sZW5ndGggLSAxKTsKICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICBpZHM6IGlkcywKICAgICAgICAgIGNvbW1lbnQ6IHRoaXMuZm9ybS5jb21tZW50LAogICAgICAgICAgc2VuZE1lc3NhZ2U6IHRoaXMuZm9ybS5zZW5kTWVzc2FnZSwKICAgICAgICAgIHNlbmRTbXM6IHRoaXMuZm9ybS5zZW5kU21zLAogICAgICAgICAgc2VuZEVtYWlsOiB0aGlzLmZvcm0uc2VuZEVtYWlsCiAgICAgICAgfTsKICAgICAgICBwYXNzQWxsKHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczkuJE1vZGFsLnJlbW92ZSgpOwoKICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICBfdGhpczkuJE1lc3NhZ2UuaW5mbyhyZXMubWVzc2FnZSk7CgogICAgICAgICAgICBfdGhpczkubW9kYWxWaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczkuY2xlYXJTZWxlY3RBbGwoKTsKCiAgICAgICAgICAgIF90aGlzOS5nZXREYXRhTGlzdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwcm9jSW5zdElkcyA9ICIiLAogICAgICAgICAgICBfcGFyYW1zID0ge307CiAgICAgICAgdGhpcy5zZWxlY3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHByb2NJbnN0SWRzICs9IGUucHJvY0luc3RJZCArICIsIjsKICAgICAgICB9KTsKICAgICAgICBwcm9jSW5zdElkcyA9IHByb2NJbnN0SWRzLnN1YnN0cmluZygwLCBwcm9jSW5zdElkcy5sZW5ndGggLSAxKTsKICAgICAgICBfcGFyYW1zID0gewogICAgICAgICAgcHJvY0luc3RJZHM6IHByb2NJbnN0SWRzLAogICAgICAgICAgY29tbWVudDogdGhpcy5mb3JtLmNvbW1lbnQsCiAgICAgICAgICBzZW5kTWVzc2FnZTogdGhpcy5mb3JtLnNlbmRNZXNzYWdlLAogICAgICAgICAgc2VuZFNtczogdGhpcy5mb3JtLnNlbmRTbXMsCiAgICAgICAgICBzZW5kRW1haWw6IHRoaXMuZm9ybS5zZW5kRW1haWwKICAgICAgICB9OwogICAgICAgIGJhY2tBbGwoX3BhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczkuJE1vZGFsLnJlbW92ZSgpOwoKICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICBfdGhpczkuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CgogICAgICAgICAgICBfdGhpczkubW9kYWxWaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczkuY2xlYXJTZWxlY3RBbGwoKTsKCiAgICAgICAgICAgIF90aGlzOS5nZXREYXRhTGlzdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICB3YXRjaDogewogICAgLy8g55uR5ZCs6Lev55Sx5Y+Y5YyWCiAgICAkcm91dGU6IGZ1bmN0aW9uICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBpZiAodG8ubmFtZSA9PSAidG9kby1tYW5hZ2UiKSB7CiAgICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkUA,SACAA,QADA,EAEAC,IAFA,EAGAC,IAHA,EAIAC,WAJA,EAKAC,UALA,EAMAC,QANA,EAOAC,WAPA,EAQAC,OARA,EASAC,OATA,EAUAC,OAVA,QAWA,gBAXA;AAYA;AACA;AACA;AACA;EACAC,mBADA;EAEAC;IACAC;EADA,CAFA;EAKAC,IALA,kBAKA;IAAA;;IACA;MACAC,oBADA;MAEAC,mBAFA;MAGAC,YAHA;MAIAC,kBAJA;MAKAC,cALA;MAMAC,gBANA;MAOAC,aAPA;MAQAC,aARA;MAQA;MACAC,uBATA;MAUAC,kBAVA;MAWAC,kBAXA;MAYAC,YAZA;MAaAC,cAbA;MAaA;MACAC,gBAdA;MAeAC,WACA;QACAC,SADA;QAEAnB;MAFA,CADA,CAfA;MAqBAoB,SArBA;MAsBAC,iBAtBA;MAuBAC;QACA;QACAtB,QAFA;QAGAuB,aAHA;QAGA;QACAC,YAJA,CAIA;;MAJA,CAvBA;MA6BAC,gBA7BA;MA8BAC;QACAC;MADA,CA9BA;MAiCAC,kBAjCA;MAkCAC,cAlCA;MAkCA;MACAC;QACAC,MADA;QAEAC,UAFA;QAGAxB,cAHA;QAIAyB,WAJA;QAKAC,OALA;QAMAC,aANA;QAOAC,iBAPA;QAQAC,iBARA;QASAC,aATA;QAUAC;MAVA,CAnCA;MA+CAC,eACA;MADA,CA/CA;MAkDAC,oBAlDA;MAkDA;MACAC,UACA;MACA;QACAR,iBADA;QAEAS,SAFA;QAGAC;MAHA,CAFA,EAOA;QACAV,aADA;QAEAS,SAFA;QAGAC;MAHA,CAPA,EAYA;QACAC,aADA;QAEA1B,WAFA;QAGA2B;MAHA,CAZA,EAiBA;QACAD,aADA;QAEA1B,kBAFA;QAGA2B,aAHA;QAIAC;UACA;;UACA;YACAC;UACA;;UACA;QACA;MAVA,CAjBA,EA6BA;QACAH,cADA;QAEA1B,YAFA;QAGA2B,aAHA;QAIAF,eAJA;QAKAG;UACA;YACA;UACA;;UACA,SACA,SADA,EAEA;YACAE;cACAC,gBADA;cAEAC;YAFA;UADA,CAFA,EAQA,CACAC,EACA,KADA,EAEA;YACAC;cACA;YADA,CADA;YAIAJ;cACAf;YADA;UAJA,CAFA,EAUAoB,gBAVA,CADA,CARA;QAuBA;MAhCA,CA7BA,EA+DA;QACAT,cADA;QAEA1B,cAFA;QAGA2B,aAHA;QAIAF,eAJA;QAKAG;UACA,SACA,SADA,EAEA;YACAE;cACAC,gBADA;cAEAC;YAFA;UADA,CAFA,EAQA,CACAC,EACA,KADA,EAEA;YACAC;cACA;YADA,CADA;YAIAJ;cACAf;YADA;UAJA,CAFA,EAUAoB,kBAVA,CADA,CARA;QAuBA;MA7BA,CA/DA,EA8FA;QACAT,YADA;QAEA1B,eAFA;QAGAwB,UAHA;QAIAY,cAJA;QAKAX,eALA;QAMAG;UACA;UAAA,IACAS,UADA;;UAEA;YACAA;UACA,CAFA,MAEA;YACAA;UACA,CAFA,MAEA;YACAA;UACA,CAFA,MAEA;YACAA;UACA;;UACA;YACA;cACAR;YACA;UACA,CAJA;;UAKA,iBACAI,EACA,KADA,EAEA;YACAH;cACAO;YADA;UADA,CAFA,EAOAR,IAPA,CADA;QAWA;MAlCA,CA9FA,EAkIA;QACAH,WADA;QAEA1B,kBAFA;QAGAyB,eAHA;QAIAD,UAJA;QAKAI;UACA;YACA,iBACAK;cACAH;gBACAQ,iBADA;gBAEAT;cAFA;YADA,EADA;UAQA,CATA,MASA;YACA,iBACAI;cACAH;gBACAQ,eADA;gBAEAT;cAFA;YADA,EADA;UAQA;QACA,CAzBA;QA0BAU,UACA;UACAC,YADA;UAEAC;QAFA,CADA,EAKA;UACAD,YADA;UAEAC;QAFA,CALA,CA1BA;QAoCAC,qBApCA;QAqCAC,YArCA,wBAqCAF,KArCA,EAqCAG,GArCA,EAqCA;UACA;QACA;MAvCA,CAlIA,EA2KA;QACAlB,aADA;QAEA1B,iBAFA;QAGAwB,UAHA;QAIAqB,gBAJA;QAKAT;MALA,CA3KA,EAkLA;QACAV,WADA;QAEA1B,aAFA;QAGAyB,eAHA;QAIAD,UAJA;QAKAsB,cALA;QAMAlB;UACA,iBACAK,EACA,GADA,EAEA;YACAc;cACAC;gBACA;cACA;YAHA;UADA,CAFA,EASA,MATA,CADA,EAYAf;YACAH;cACAf;YADA;UADA,EAZA,EAiBAkB,EACA,GADA,EAEA;YACAc;cACAC;gBACA;cACA;YAHA;UADA,CAFA,EASA,IATA,CAjBA,EA4BAf;YACAH;cACAf;YADA;UADA,EA5BA,EAiCAkB,EACA,GADA,EAEA;YACAc;cACAC;gBACA;cACA;YAHA;UADA,CAFA,EASA,IATA,CAjCA,EA4CAf;YACAH;cACAf;YADA;UADA,EA5CA,EAiDAkB,EACA,GADA,EAEA;YACAc;cACAC;gBACA;cACA;YAHA;UADA,CAFA,EASA,IATA,CAjDA,EA4DAf;YACAH;cACAf;YADA;UADA,EA5DA,EAiEAkB,EACA,GADA,EAEA;YACAc;cACAC;gBACA;cACA;YAHA;UADA,CAFA,EASA,IATA,CAjEA;QA6EA;MApFA,CAlLA,CAnDA;MA4TAhE,QA5TA;MA4TA;MACAiE,QA7TA;MA6TA;MACAC,gBA9TA;MA+TAC,gBA/TA;MAgUAC;IAhUA;EAkUA,CAxUA;EAyUAC;IACAC,IADA,kBACA;MACA;MACA;IACA,CAJA;IAKAC,eALA,6BAKA;MAAA;;MACAC;QACA;UACA;QACA;MACA,CAJA;IAKA,CAXA;IAYAC,UAZA,sBAYAC,CAZA,EAYA;MAAA;;MACA;QACA;MACA;;MACA;MACAC;QACA;;QACA;UACA;QACA;MACA,CALA;IAMA,CAvBA;IAwBAC,UAxBA,sBAwBAC,CAxBA,EAwBA;MACA;MACA;;MACA;QACA;MACA;;MACA;IACA,CA/BA;IAgCAC,UAhCA,sBAgCAJ,CAhCA,EAgCA;MACA;MACA;MACA;IACA,CApCA;IAqCAK,cArCA,0BAqCAL,CArCA,EAqCA;MACA;MACA;IACA,CAxCA;IAyCAM,eAzCA,2BAyCAN,CAzCA,EAyCA;MACA;QACA;QACA;MACA;IACA,CA9CA;IA+CAO,eA/CA,2BA+CAP,CA/CA,EA+CA;MACA;IACA,CAjDA;IAkDAQ,UAlDA,wBAkDA;MACA;QACAC;MADA;IAGA,CAtDA;IAuDAC,WAvDA,yBAuDA;MAAA;;MACA;MACAjG;QACA;;QACA;UACA;UACA;;UACA;YACA;;YACA;UACA;QACA;MACA,CAVA;IAWA,CApEA;IAqEAkG,YArEA,0BAqEA;MACA;MACA;MACA;IACA,CAzEA;IA0EAC,WA1EA,yBA0EA;MACA;MACA;MACA;MACA;MACA;MACA,6BANA,CAOA;;MACA;IACA,CAnFA;IAoFAC,UApFA,sBAoFAV,CApFA,EAoFA;MACA;IACA,CAtFA;IAuFAW,cAvFA,4BAuFA;MACA;IACA,CAzFA;IA0FAC,YA1FA,0BA0FA;MAAA;;MACA;;MACA;QACA;QACA,IACA,sCACA,8BAFA,EAGA;UACA;UACA;UACA;QACA,CAPA,MAOA;UACA;QACA;;QACArG;UACA;;UACA;YACA;;YACA;;YACA;UACA;QACA,CAPA;MAQA,CApBA,MAoBA;QACA;QACA;UACA;UACAC;YACA;;YACA;cACA;;cACA;;cACA;YACA;UACA,CAPA;QAQA,CAVA,MAUA;UACA;UACA;YACA;YACA;YACA;UACA,CAJA,MAIA;YACA;UACA;;UACAE;YACA;;YACA;cACA;;cACA;;cACA;YACA;UACA,CAPA;QAQA;MACA,CA9BA,MA8BA;QACA;QACA;UACA;UACA;UACA;QACA,CAJA,MAIA;UACA;QACA;;QACAC;UACA;;UACA;YACA;;YACA;;YACA;UACA;QACA,CAPA;MAQA;IACA,CAhKA;IAiKAkG,MAjKA,kBAiKAhB,CAjKA,EAiKA;MACA;QACA9C,aADA;QAEAG,OAFA;QAGA4D;MAHA;MAKA;QACA9F,iBADA;QAEA+F;MAFA;IAIA,CA3KA;IA4KAC,QA5KA,oBA4KAnB,CA5KA,EA4KA;MAAA;;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAjF;QACA;;QACA;UACA;;UACA;YACA;YACA;YACA;YACA;UACA;;UACA;YACA;YACA;YACA;YACA;UACA;;UACA;YACA;YACA;YACA;YACA;UACA;;UACA;YACA;YACA;YACA;;YACA;cACA,uCADA,CAEA;;cACA;cACAqG;gBACAC;cACA,CAFA;cAGA;cACA;YACA,CATA,MASA;cACA;cACA;YACA;UACA;QACA;MACA,CAzCA;IA0CA,CA9NA;IA+NAC,cA/NA,0BA+NAtB,CA/NA,EA+NA;MAAA;;MACA;QACA;MACA;;MACA;MACA;MACA;QACA;UACAuB;QACA;MACA,CAJA;MAKAvG;QAAAwG;QAAAD;MAAA;QACA;;QACA;UACA;YACA,uCADA,CAEA;;YACA;YACAH;cACAC;YACA,CAFA;YAGA;UACA;QACA;MACA,CAbA;IAcA,CAxPA;IAyPAI,QAzPA,oBAyPAzB,CAzPA,EAyPA;MAAA;;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,6BATA,CAUA;;MACA,iBACA;QACA1D,SADA;QAEAnB;MAFA,CADA;MAMA;MACA;MACAP;QACA;;QACA;UACAwG;YACA;UACA,CAFA;QAGA;MACA,CAPA;IAQA,CApRA;IAqRAM,YArRA,wBAqRA1B,CArRA,EAqRA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CA7RA;IA8RA2B,OA9RA,mBA8RA3B,CA9RA,EA8RA;MACA;QACA;QACA;MACA;;MACA;MACA;IACA,CArSA;IAsSA4B,WAtSA,yBAsSA;MACA;QACA;QACA;MACA,CAJA,CAKA;;;MACA;MACA;MACA;IACA,CA/SA;IAgTAC,WAhTA,yBAgTA;MACA;QACA;QACA;MACA,CAJA,CAKA;;;MACA;MACA;MACA;IACA,CAzTA;IA0TAC,eA1TA,6BA0TA;MAAA;;MACA;QACA;QAAA,IACArD,WADA;QAEA;UACA4C;QACA,CAFA;QAGAA;QACA5C;UACA4C,QADA;UAEAjE,0BAFA;UAGAI,kCAHA;UAIAC,0BAJA;UAKAC;QALA;QAOAzC;UACA;;UACA;YACA;;YACA;;YACA;;YACA;UACA;QACA,CARA;MASA,CAvBA,MAuBA;QACA;QAAA,IACAwD,YADA;QAEA;UACAsD;QACA,CAFA;QAGAA;QACAtD;UACAsD,wBADA;UAEA3E,0BAFA;UAGAI,kCAHA;UAIAC,0BAJA;UAKAC;QALA;QAOAxC;UACA;;UACA;YACA;;YACA;;YACA;;YACA;UACA;QACA,CARA;MASA;IACA;EA1WA,CAzUA;EAqrBA8G,OArrBA,qBAqrBA;IACA;EACA,CAvrBA;EAwrBAC;IACA;IACAC,MAFA,kBAEAC,EAFA,EAEAC,IAFA,EAEA;MACA;QACA;MACA;IACA;EANA;AAxrBA","names":["todoList","pass","back","getBackList","backToTask","delegate","getNextNode","getNode","passAll","backAll","name","components","historicDetail","data","tableSize","modalVisible","modalType","showHistory","procInstId","openSearch","openTip","loading","modalTaskVisible","userLoading","backLoading","userList","selectList","assigneeList","backList","key","error","showAssign","searchForm","pageNumber","pageSize","selectDate","options","shortcuts","modalTaskTitle","modalTitle","form","id","userId","comment","type","assignees","backTaskKey","sendMessage","sendSms","sendEmail","formValidate","submitLoading","columns","width","align","title","minWidth","render","text","props","placement","content","h","style","params","sortable","color","status","filters","label","value","filterMultiple","filterMethod","row","sortType","fixed","on","click","total","dictPriority","isGateway","isCustom","methods","init","getDictDataType","getDictDataByType","searchUser","v","searchUserByName","changeSort","e","changePage","changePageSize","selectDateRange","changeTableSize","exportData","filename","getDataList","handleSearch","handleReset","showSelect","clearSelectAll","handelSubmit","detail","backRoute","query","passTask","res","ids","changeBackTask","hisTaskId","taskId","backTask","delegateTask","history","passAllTask","backAllTask","handelSubmitAll","procInstIds","mounted","watch","$route","to","from"],"sourceRoot":"src/views/activiti/todo-manage","sources":["todoManage.vue"],"sourcesContent":["<style lang=\"less\">\r\n@import \"@/styles/table-common.less\";\r\n@import \"./todoManage.less\";\r\n</style>\r\n<template>\r\n  <div class=\"search\">\r\n    <historicDetail\r\n      v-if=\"showHistory\"\r\n      @close=\"showHistory = false\"\r\n      :procInstId=\"procInstId\"\r\n    />\r\n    <Card v-show=\"!showHistory\">\r\n      <Row v-show=\"openSearch\" @keydown.enter.native=\"handleSearch\">\r\n        <Form ref=\"searchForm\" :model=\"searchForm\" inline :label-width=\"70\">\r\n          <FormItem label=\"任务名称\" prop=\"name\">\r\n            <Input\r\n              type=\"text\"\r\n              v-model=\"searchForm.name\"\r\n              placeholder=\"请输入\"\r\n              clearable\r\n              style=\"width: 200px\"\r\n            />\r\n          </FormItem>\r\n          <FormItem label=\"创建时间\">\r\n            <DatePicker\r\n              :options=\"options\"\r\n              v-model=\"selectDate\"\r\n              type=\"daterange\"\r\n              format=\"yyyy-MM-dd\"\r\n              clearable\r\n              @on-change=\"selectDateRange\"\r\n              placeholder=\"选择起始时间\"\r\n              style=\"width: 200px\"\r\n            ></DatePicker>\r\n          </FormItem>\r\n          <FormItem style=\"margin-left: -35px\" class=\"br\">\r\n            <Button @click=\"handleSearch\" type=\"primary\" icon=\"ios-search\"\r\n              >搜索</Button\r\n            >\r\n            <Button @click=\"handleReset\">重置</Button>\r\n          </FormItem>\r\n        </Form>\r\n      </Row>\r\n      <Row align=\"middle\" justify=\"space-between\" class=\"operation\">\r\n        <div>\r\n          <Button @click=\"passAllTask\" icon=\"md-checkmark-circle-outline\"\r\n            >批量通过</Button\r\n          >\r\n          <Button @click=\"backAllTask\" icon=\"md-close\">批量驳回</Button>\r\n        </div>\r\n        <div class=\"icons\">\r\n          <Tooltip content=\"刷新\" placement=\"top\" transfer>\r\n            <Icon\r\n              type=\"md-refresh\"\r\n              size=\"18\"\r\n              class=\"item\"\r\n              @click=\"getDataList\"\r\n            />\r\n          </Tooltip>\r\n          <Tooltip\r\n            :content=\"openSearch ? '关闭搜索' : '开启搜索'\"\r\n            placement=\"top\"\r\n            transfer\r\n          >\r\n            <Icon\r\n              type=\"ios-search\"\r\n              size=\"18\"\r\n              class=\"item tip\"\r\n              @click=\"openSearch = !openSearch\"\r\n            />\r\n          </Tooltip>\r\n          <Tooltip\r\n            :content=\"openTip ? '关闭提示' : '开启提示'\"\r\n            placement=\"top\"\r\n            transfer\r\n          >\r\n            <Icon\r\n              type=\"md-bulb\"\r\n              size=\"18\"\r\n              class=\"item tip\"\r\n              @click=\"openTip = !openTip\"\r\n            />\r\n          </Tooltip>\r\n          <Tooltip content=\"表格密度\" placement=\"top\" transfer>\r\n            <Dropdown @on-click=\"changeTableSize\" trigger=\"click\">\r\n              <Icon type=\"md-list\" size=\"18\" class=\"item\" />\r\n              <DropdownMenu slot=\"list\">\r\n                <DropdownItem :selected=\"tableSize == 'default'\" name=\"default\"\r\n                  >默认</DropdownItem\r\n                >\r\n                <DropdownItem :selected=\"tableSize == 'large'\" name=\"large\"\r\n                  >宽松</DropdownItem\r\n                >\r\n                <DropdownItem :selected=\"tableSize == 'small'\" name=\"small\"\r\n                  >紧密</DropdownItem\r\n                >\r\n              </DropdownMenu>\r\n            </Dropdown>\r\n          </Tooltip>\r\n          <Tooltip content=\"导出数据\" placement=\"top\" transfer>\r\n            <Icon\r\n              type=\"md-download\"\r\n              size=\"18\"\r\n              class=\"item\"\r\n              @click=\"exportData\"\r\n            />\r\n          </Tooltip>\r\n        </div>\r\n      </Row>\r\n      <Alert show-icon v-show=\"openTip\">\r\n        已选择\r\n        <span class=\"select-count\">{{ selectList.length }}</span> 项\r\n        <a class=\"select-clear\" @click=\"clearSelectAll\">清空</a>\r\n      </Alert>\r\n      <Table\r\n        :loading=\"loading\"\r\n        border\r\n        :columns=\"columns\"\r\n        sortable=\"custom\"\r\n        :data=\"data\"\r\n        :size=\"tableSize\"\r\n        @on-sort-change=\"changeSort\"\r\n        @on-selection-change=\"showSelect\"\r\n        ref=\"table\"\r\n      ></Table>\r\n      <Row type=\"flex\" justify=\"end\" class=\"page\">\r\n        <Page\r\n          :current=\"searchForm.pageNumber\"\r\n          :total=\"total\"\r\n          :page-size=\"searchForm.pageSize\"\r\n          @on-change=\"changePage\"\r\n          @on-page-size-change=\"changePageSize\"\r\n          :page-size-opts=\"[10, 20, 50]\"\r\n          size=\"small\"\r\n          show-total\r\n          show-elevator\r\n          show-sizer\r\n        ></Page>\r\n      </Row>\r\n    </Card>\r\n\r\n    <!-- 审批操作 -->\r\n    <Modal\r\n      :title=\"modalTaskTitle\"\r\n      v-model=\"modalTaskVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"500\"\r\n    >\r\n      <Form ref=\"form\" :model=\"form\" :label-width=\"85\" :rules=\"formValidate\">\r\n        <FormItem label=\"审批意见\" prop=\"reason\">\r\n          <Input type=\"textarea\" v-model=\"form.comment\" :rows=\"4\" />\r\n        </FormItem>\r\n        <FormItem\r\n          label=\"下一审批人\"\r\n          prop=\"assignees\"\r\n          v-show=\"showAssign\"\r\n          :error=\"error\"\r\n        >\r\n          <Select\r\n            v-model=\"form.assignees\"\r\n            placeholder=\"请选择或输入搜索\"\r\n            filterable\r\n            clearable\r\n            multiple\r\n            :loading=\"userLoading\"\r\n          >\r\n            <Option\r\n              v-for=\"(item, i) in assigneeList\"\r\n              :key=\"i\"\r\n              :value=\"item.id\"\r\n              :label=\"item.nickname\"\r\n            >\r\n              <span style=\"margin-right: 10px\">{{ item.nickname }}</span>\r\n              <span style=\"color: #ccc\">{{ item.username }}</span>\r\n            </Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem\r\n          label=\"自定义搜索选择审批人\"\r\n          prop=\"assignees\"\r\n          v-show=\"isCustom\"\r\n          :error=\"error\"\r\n        >\r\n          <Select\r\n            v-model=\"form.assignees\"\r\n            placeholder=\"请输入用户名搜索选择用户\"\r\n            filterable\r\n            remote\r\n            multiple\r\n            :remote-method=\"searchUser\"\r\n            :loading=\"userLoading\"\r\n          >\r\n            <Option\r\n              v-for=\"(item, i) in userList\"\r\n              :value=\"item.id\"\r\n              :key=\"i\"\r\n              :label=\"item.nickname\"\r\n            >\r\n              <span style=\"margin-right: 10px\">{{ item.nickname }}</span>\r\n              <span style=\"color: #ccc\">{{ item.username }}</span>\r\n            </Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"下一审批人\" v-show=\"isGateway\">\r\n          <span\r\n            >分支网关处暂不支持自定义选择下一审批人，将发送给下一节点所有人</span\r\n          >\r\n        </FormItem>\r\n        <div v-show=\"form.type == 1\">\r\n          <FormItem label=\"驳回至\">\r\n            <Select\r\n              v-model=\"form.backTaskKey\"\r\n              filterable\r\n              :loading=\"backLoading\"\r\n              @on-change=\"changeBackTask\"\r\n            >\r\n              <Option\r\n                v-for=\"(item, i) in backList\"\r\n                :key=\"i\"\r\n                :value=\"item.key\"\r\n                >{{ item.name }}</Option\r\n              >\r\n            </Select>\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"指定原节点审批人\"\r\n            prop=\"assignees\"\r\n            v-show=\"form.backTaskKey != -1\"\r\n            :error=\"error\"\r\n          >\r\n            <Select\r\n              v-model=\"form.assignees\"\r\n              placeholder=\"请选择或输入搜索\"\r\n              filterable\r\n              clearable\r\n              multiple\r\n              :loading=\"userLoading\"\r\n            >\r\n              <Option\r\n                v-for=\"(item, i) in assigneeList\"\r\n                :key=\"i\"\r\n                :value=\"item.id\"\r\n                :label=\"item.nickname\"\r\n              >\r\n                <span style=\"margin-right: 10px\">{{ item.nickname }}</span>\r\n                <span style=\"color: #ccc\">{{ item.username }}</span>\r\n              </Option>\r\n            </Select>\r\n          </FormItem>\r\n        </div>\r\n        <FormItem\r\n          label=\"选择转办人\"\r\n          prop=\"userId\"\r\n          :error=\"error\"\r\n          v-show=\"form.type == 2\"\r\n        >\r\n          <Select\r\n            v-model=\"form.userId\"\r\n            placeholder=\"请输入用户名搜索选择用户\"\r\n            filterable\r\n            remote\r\n            :remote-method=\"searchUser\"\r\n            :loading=\"userLoading\"\r\n          >\r\n            <Option\r\n              v-for=\"(item, i) in userList\"\r\n              :value=\"item.id\"\r\n              :key=\"i\"\r\n              :label=\"item.nickname\"\r\n            >\r\n              <span style=\"margin-right: 10px\">{{ item.nickname }}</span>\r\n              <span style=\"color: #ccc\">{{ item.username }}</span>\r\n            </Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"消息通知\">\r\n          <Checkbox v-model=\"form.sendMessage\">站内消息通知</Checkbox>\r\n          <Checkbox v-model=\"form.sendSms\">短信通知</Checkbox>\r\n          <Checkbox v-model=\"form.sendEmail\">邮件通知</Checkbox>\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"modalTaskVisible = false\">取消</Button>\r\n        <Button type=\"primary\" :loading=\"submitLoading\" @click=\"handelSubmit\"\r\n          >提交</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n\r\n    <!-- 批量审批操作 -->\r\n    <Modal\r\n      :title=\"modalTitle\"\r\n      v-model=\"modalVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"500\"\r\n    >\r\n      <Alert show-icon>{{\r\n        modalType == 0\r\n          ? \"注意：将默认分配给节点设定的所有可审批用户\"\r\n          : \"注意：所有流程将驳回至发起人\"\r\n      }}</Alert>\r\n      <Form ref=\"form\" :model=\"form\" :label-width=\"85\" :rules=\"formValidate\">\r\n        <FormItem label=\"审批意见\" prop=\"reason\">\r\n          <Input type=\"textarea\" v-model=\"form.comment\" :rows=\"4\" />\r\n        </FormItem>\r\n        <FormItem label=\"消息通知\">\r\n          <Checkbox v-model=\"form.sendMessage\">站内消息通知</Checkbox>\r\n          <Checkbox v-model=\"form.sendSms\">短信通知</Checkbox>\r\n          <Checkbox v-model=\"form.sendEmail\">邮件通知</Checkbox>\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"modalVisible = false\">取消</Button>\r\n        <Button type=\"primary\" :loading=\"submitLoading\" @click=\"handelSubmitAll\"\r\n          >提交</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  todoList,\r\n  pass,\r\n  back,\r\n  getBackList,\r\n  backToTask,\r\n  delegate,\r\n  getNextNode,\r\n  getNode,\r\n  passAll,\r\n  backAll,\r\n} from \"@/api/activiti\";\r\nimport { searchUserByName, getDictDataByType } from \"@/api/index\";\r\nimport historicDetail from \"../historic-detail/historicDetail.vue\";\r\nimport { shortcuts } from \"@/libs/shortcuts\";\r\nexport default {\r\n  name: \"todo-manage\",\r\n  components: {\r\n    historicDetail,\r\n  },\r\n  data() {\r\n    return {\r\n      tableSize: \"default\",\r\n      modalVisible: false,\r\n      modalType: 0,\r\n      showHistory: false,\r\n      procInstId: \"\",\r\n      openSearch: true,\r\n      openTip: true,\r\n      loading: true, // 表单加载状态\r\n      modalTaskVisible: false,\r\n      userLoading: false,\r\n      backLoading: false,\r\n      userList: [],\r\n      selectList: [], // 多选数据\r\n      assigneeList: [],\r\n      backList: [\r\n        {\r\n          key: \"-1\",\r\n          name: \"发起人\",\r\n        },\r\n      ],\r\n      error: \"\",\r\n      showAssign: false,\r\n      searchForm: {\r\n        // 搜索框对应data对象\r\n        name: \"\",\r\n        pageNumber: 1, // 当前页数\r\n        pageSize: 10, // 页面大小\r\n      },\r\n      selectDate: null,\r\n      options: {\r\n        shortcuts: shortcuts,\r\n      },\r\n      modalTaskTitle: \"\",\r\n      modalTitle: \"\", // 添加或编辑标题\r\n      form: {\r\n        id: \"\",\r\n        userId: \"\",\r\n        procInstId: \"\",\r\n        comment: \"\",\r\n        type: 0,\r\n        assignees: [],\r\n        backTaskKey: \"-1\",\r\n        sendMessage: true,\r\n        sendSms: true,\r\n        sendEmail: true,\r\n      },\r\n      formValidate: {\r\n        // 表单验证规则\r\n      },\r\n      submitLoading: false, // 添加或编辑提交状态\r\n      columns: [\r\n        // 表头\r\n        {\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"任务名称\",\r\n          key: \"name\",\r\n          minWidth: 160,\r\n        },\r\n        {\r\n          title: \"所属流程\",\r\n          key: \"processName\",\r\n          minWidth: 150,\r\n          render: (h, params) => {\r\n            let text = \"\";\r\n            if (params.row.version) {\r\n              text = params.row.processName + \" - v.\" + params.row.version;\r\n            }\r\n            return h(\"div\", [h(\"span\", text)]);\r\n          },\r\n        },\r\n        {\r\n          title: \"委托代办人\",\r\n          key: \"owner\",\r\n          minWidth: 130,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            if (!params.row.owner) {\r\n              return h(\"span\", \"-\");\r\n            }\r\n            return h(\r\n              \"Tooltip\",\r\n              {\r\n                props: {\r\n                  placement: \"top\",\r\n                  content: params.row.ownerUsername,\r\n                },\r\n              },\r\n              [\r\n                h(\r\n                  \"Tag\",\r\n                  {\r\n                    style: {\r\n                      \"margin-right\": \"8px\",\r\n                    },\r\n                    props: {\r\n                      type: \"border\",\r\n                    },\r\n                  },\r\n                  params.row.owner\r\n                ),\r\n              ]\r\n            );\r\n          },\r\n        },\r\n        {\r\n          title: \"流程发起人\",\r\n          key: \"applyer\",\r\n          minWidth: 130,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return h(\r\n              \"Tooltip\",\r\n              {\r\n                props: {\r\n                  placement: \"top\",\r\n                  content: params.row.applyerUsername,\r\n                },\r\n              },\r\n              [\r\n                h(\r\n                  \"Tag\",\r\n                  {\r\n                    style: {\r\n                      \"margin-right\": \"8px\",\r\n                    },\r\n                    props: {\r\n                      type: \"border\",\r\n                    },\r\n                  },\r\n                  params.row.applyer\r\n                ),\r\n              ]\r\n            );\r\n          },\r\n        },\r\n        {\r\n          title: \"优先级\",\r\n          key: \"priority\",\r\n          width: 100,\r\n          sortable: true,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            let text = \"无\",\r\n              color = \"\";\r\n            if (params.row.priority == 0) {\r\n              color = \"green\";\r\n            } else if (params.row.priority == 1) {\r\n              color = \"orange\";\r\n            } else if (params.row.priority == 2) {\r\n              color = \"red\";\r\n            } else {\r\n              color = \"default\";\r\n            }\r\n            this.dictPriority.forEach((e) => {\r\n              if (e.value == params.row.priority) {\r\n                text = e.title;\r\n              }\r\n            });\r\n            return h(\"div\", [\r\n              h(\r\n                \"Tag\",\r\n                {\r\n                  props: {\r\n                    color: color,\r\n                  },\r\n                },\r\n                text\r\n              ),\r\n            ]);\r\n          },\r\n        },\r\n        {\r\n          title: \"状态\",\r\n          key: \"isSuspended\",\r\n          align: \"center\",\r\n          width: 110,\r\n          render: (h, params) => {\r\n            if (!params.row.isSuspended) {\r\n              return h(\"div\", [\r\n                h(\"Badge\", {\r\n                  props: {\r\n                    status: \"success\",\r\n                    text: \"已激活\",\r\n                  },\r\n                }),\r\n              ]);\r\n            } else if (params.row.isSuspended) {\r\n              return h(\"div\", [\r\n                h(\"Badge\", {\r\n                  props: {\r\n                    status: \"error\",\r\n                    text: \"已挂起\",\r\n                  },\r\n                }),\r\n              ]);\r\n            }\r\n          },\r\n          filters: [\r\n            {\r\n              label: \"已激活\",\r\n              value: false,\r\n            },\r\n            {\r\n              label: \"已挂起\",\r\n              value: true,\r\n            },\r\n          ],\r\n          filterMultiple: false,\r\n          filterMethod(value, row) {\r\n            return row.isSuspended == value;\r\n          },\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          key: \"createTime\",\r\n          width: 180,\r\n          sortType: \"desc\",\r\n          sortable: true,\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"action\",\r\n          align: \"center\",\r\n          width: 280,\r\n          fixed: \"right\",\r\n          render: (h, params) => {\r\n            return h(\"div\", [\r\n              h(\r\n                \"a\",\r\n                {\r\n                  on: {\r\n                    click: () => {\r\n                      this.detail(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"申请详情\"\r\n              ),\r\n              h(\"Divider\", {\r\n                props: {\r\n                  type: \"vertical\",\r\n                },\r\n              }),\r\n              h(\r\n                \"a\",\r\n                {\r\n                  on: {\r\n                    click: () => {\r\n                      this.passTask(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"通过\"\r\n              ),\r\n              h(\"Divider\", {\r\n                props: {\r\n                  type: \"vertical\",\r\n                },\r\n              }),\r\n              h(\r\n                \"a\",\r\n                {\r\n                  on: {\r\n                    click: () => {\r\n                      this.backTask(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"驳回\"\r\n              ),\r\n              h(\"Divider\", {\r\n                props: {\r\n                  type: \"vertical\",\r\n                },\r\n              }),\r\n              h(\r\n                \"a\",\r\n                {\r\n                  on: {\r\n                    click: () => {\r\n                      this.delegateTask(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"转办\"\r\n              ),\r\n              h(\"Divider\", {\r\n                props: {\r\n                  type: \"vertical\",\r\n                },\r\n              }),\r\n              h(\r\n                \"a\",\r\n                {\r\n                  on: {\r\n                    click: () => {\r\n                      this.history(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"历史\"\r\n              ),\r\n            ]);\r\n          },\r\n        },\r\n      ],\r\n      data: [], // 表单数据\r\n      total: 0, // 表单数据总数\r\n      dictPriority: [],\r\n      isGateway: false,\r\n      isCustom: false,\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getDictDataType();\r\n      this.getDataList();\r\n    },\r\n    getDictDataType() {\r\n      getDictDataByType(\"priority\").then((res) => {\r\n        if (res.success) {\r\n          this.dictPriority = res.result;\r\n        }\r\n      });\r\n    },\r\n    searchUser(v) {\r\n      if (!v) {\r\n        return;\r\n      }\r\n      this.userLoading = true;\r\n      searchUserByName(v).then((res) => {\r\n        this.userLoading = false;\r\n        if (res.success) {\r\n          this.userList = res.result;\r\n        }\r\n      });\r\n    },\r\n    changeSort(e) {\r\n      this.searchForm.sort = e.key;\r\n      this.searchForm.order = e.order;\r\n      if (e.order == \"normal\") {\r\n        this.searchForm.order = \"\";\r\n      }\r\n      this.getDataList();\r\n    },\r\n    changePage(v) {\r\n      this.searchForm.pageNumber = v;\r\n      this.getDataList();\r\n      this.clearSelectAll();\r\n    },\r\n    changePageSize(v) {\r\n      this.searchForm.pageSize = v;\r\n      this.getDataList();\r\n    },\r\n    selectDateRange(v) {\r\n      if (v) {\r\n        this.searchForm.startDate = v[0];\r\n        this.searchForm.endDate = v[1];\r\n      }\r\n    },\r\n    changeTableSize(v) {\r\n      this.tableSize = v;\r\n    },\r\n    exportData() {\r\n      this.$refs.table.exportCsv({\r\n        filename: \"数据\",\r\n      });\r\n    },\r\n    getDataList() {\r\n      this.loading = true;\r\n      todoList(this.searchForm).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.data = res.result.content;\r\n          this.total = res.result.totalElements;\r\n          if (this.data.length == 0 && this.searchForm.pageNumber > 1) {\r\n            this.searchForm.pageNumber -= 1;\r\n            this.getDataList();\r\n          }\r\n        }\r\n      });\r\n    },\r\n    handleSearch() {\r\n      this.searchForm.pageNumber = 1;\r\n      this.searchForm.pageSize = 10;\r\n      this.getDataList();\r\n    },\r\n    handleReset() {\r\n      this.$refs.searchForm.resetFields();\r\n      this.searchForm.pageNumber = 1;\r\n      this.searchForm.pageSize = 10;\r\n      this.selectDate = null;\r\n      this.searchForm.startDate = \"\";\r\n      this.searchForm.endDate = \"\";\r\n      // 重新加载数据\r\n      this.getDataList();\r\n    },\r\n    showSelect(e) {\r\n      this.selectList = e;\r\n    },\r\n    clearSelectAll() {\r\n      this.$refs.table.selectAll(false);\r\n    },\r\n    handelSubmit() {\r\n      this.submitLoading = true;\r\n      if (this.form.type == 0) {\r\n        // 通过\r\n        if (\r\n          (this.showAssign || this.isCustom) &&\r\n          this.form.assignees.length < 1\r\n        ) {\r\n          this.error = \"请至少选择一个审批人\";\r\n          this.submitLoading = false;\r\n          return;\r\n        } else {\r\n          this.error = \"\";\r\n        }\r\n        pass(this.form).then((res) => {\r\n          this.submitLoading = false;\r\n          if (res.success) {\r\n            this.$Message.success(\"操作成功\");\r\n            this.modalTaskVisible = false;\r\n            this.getDataList();\r\n          }\r\n        });\r\n      } else if (this.form.type == 1) {\r\n        // 驳回\r\n        if (this.form.backTaskKey == \"-1\") {\r\n          // 驳回至发起人\r\n          back(this.form).then((res) => {\r\n            this.submitLoading = false;\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.modalTaskVisible = false;\r\n              this.getDataList();\r\n            }\r\n          });\r\n        } else {\r\n          // 自定义驳回\r\n          if (this.form.backTaskKey != \"-1\" && this.form.assignees.length < 1) {\r\n            this.error = \"请至少选择一个审批人\";\r\n            this.submitLoading = false;\r\n            return;\r\n          } else {\r\n            this.error = \"\";\r\n          }\r\n          backToTask(this.form).then((res) => {\r\n            this.submitLoading = false;\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.modalTaskVisible = false;\r\n              this.getDataList();\r\n            }\r\n          });\r\n        }\r\n      } else if (this.form.type == 2) {\r\n        // 转办\r\n        if (!this.form.userId) {\r\n          this.error = \"请搜索选择一转办人\";\r\n          this.submitLoading = false;\r\n          return;\r\n        } else {\r\n          this.error = \"\";\r\n        }\r\n        delegate(this.form).then((res) => {\r\n          this.submitLoading = false;\r\n          if (res.success) {\r\n            this.$Message.success(\"操作成功\");\r\n            this.modalTaskVisible = false;\r\n            this.getDataList();\r\n          }\r\n        });\r\n      }\r\n    },\r\n    detail(v) {\r\n      let query = {\r\n        id: v.tableId,\r\n        type: 3,\r\n        backRoute: this.$route.name,\r\n      };\r\n      this.$router.push({\r\n        name: v.routeName,\r\n        query: query,\r\n      });\r\n    },\r\n    passTask(v) {\r\n      this.modalTaskTitle = \"审批通过\";\r\n      this.form.id = v.id;\r\n      this.form.procInstId = v.procInstId;\r\n      this.form.priority = v.priority;\r\n      this.form.type = 0;\r\n      this.modalTaskVisible = true;\r\n      this.userLoading = true;\r\n      getNextNode(v.procDefId, v.key).then((res) => {\r\n        this.userLoading = false;\r\n        if (res.success) {\r\n          this.error = \"\";\r\n          if (res.result.type == 2) {\r\n            this.isGateway = false;\r\n            this.showAssign = false;\r\n            this.isCustom = false;\r\n            return;\r\n          }\r\n          if (res.result.type == 3 || res.result.type == 4) {\r\n            this.isGateway = true;\r\n            this.showAssign = false;\r\n            this.isCustom = false;\r\n            return;\r\n          }\r\n          if (res.result.type == 5) {\r\n            this.isCustom = true;\r\n            this.isGateway = false;\r\n            this.showAssign = false;\r\n            return;\r\n          }\r\n          if (res.result.type == 1) {\r\n            this.showAssign = true;\r\n            this.isGateway = false;\r\n            this.isCustom = false;\r\n            if (res.result.users && res.result.users.length > 0) {\r\n              this.assigneeList = res.result.users;\r\n              // 默认勾选\r\n              let ids = [];\r\n              res.result.users.forEach((e) => {\r\n                ids.push(e.id);\r\n              });\r\n              this.form.assignees = ids;\r\n              this.showAssign = true;\r\n            } else {\r\n              this.form.assignees = [];\r\n              this.showAssign = false;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    changeBackTask(v) {\r\n      if (v == \"-1\") {\r\n        return;\r\n      }\r\n      this.userLoading = true;\r\n      let hisTaskId = \"\";\r\n      this.backList.forEach((e) => {\r\n        if (e.key == v) {\r\n          hisTaskId = e.id;\r\n        }\r\n      });\r\n      getNode(v, { taskId: this.form.id, hisTaskId: hisTaskId }).then((res) => {\r\n        this.userLoading = false;\r\n        if (res.success) {\r\n          if (res.result.users && res.result.users.length > 0) {\r\n            this.assigneeList = res.result.users;\r\n            // 默认勾选\r\n            let ids = [];\r\n            res.result.users.forEach((e) => {\r\n              ids.push(e.id);\r\n            });\r\n            this.form.assignees = ids;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    backTask(v) {\r\n      this.modalTaskTitle = \"审批驳回\";\r\n      this.form.id = v.id;\r\n      this.form.procInstId = v.procInstId;\r\n      this.form.procDefId = v.procDefId;\r\n      this.form.priority = v.priority;\r\n      this.form.type = 1;\r\n      this.showAssign = false;\r\n      this.isCustom = false;\r\n      this.modalTaskVisible = true;\r\n      // 获取可驳回节点\r\n      this.backList = [\r\n        {\r\n          key: \"-1\",\r\n          name: \"发起人\",\r\n        },\r\n      ];\r\n      this.form.backTaskKey = \"-1\";\r\n      this.backLoading = true;\r\n      getBackList(v.procInstId).then((res) => {\r\n        this.backLoading = false;\r\n        if (res.success) {\r\n          res.result.forEach((e) => {\r\n            this.backList.push(e);\r\n          });\r\n        }\r\n      });\r\n    },\r\n    delegateTask(v) {\r\n      this.modalTaskTitle = \"委托他人代办\";\r\n      this.form.id = v.id;\r\n      this.form.procInstId = v.procInstId;\r\n      this.form.type = 2;\r\n      this.showAssign = false;\r\n      this.isCustom = false;\r\n      this.modalTaskVisible = true;\r\n    },\r\n    history(v) {\r\n      if (!v.procInstId) {\r\n        this.$Message.error(\"流程实例ID不存在\");\r\n        return;\r\n      }\r\n      this.procInstId = v.procInstId;\r\n      this.showHistory = true;\r\n    },\r\n    passAllTask() {\r\n      if (this.selectList.length <= 0) {\r\n        this.$Message.warning(\"您还未选择要通过的数据\");\r\n        return;\r\n      }\r\n      // 批量通过\r\n      this.modalVisible = true;\r\n      this.modalType = 0;\r\n      this.modalTitle = \"批量通过 \" + this.selectList.length + \" 条数据\";\r\n    },\r\n    backAllTask() {\r\n      if (this.selectList.length <= 0) {\r\n        this.$Message.warning(\"您还未选择要驳回的数据\");\r\n        return;\r\n      }\r\n      // 批量驳回\r\n      this.modalVisible = true;\r\n      this.modalType = 1;\r\n      this.modalTitle = \"批量驳回 \" + this.selectList.length + \" 条数据\";\r\n    },\r\n    handelSubmitAll() {\r\n      if (this.modalType == 0) {\r\n        let ids = \"\",\r\n          params = {};\r\n        this.selectList.forEach(function (e) {\r\n          ids += e.id + \",\";\r\n        });\r\n        ids = ids.substring(0, ids.length - 1);\r\n        params = {\r\n          ids: ids,\r\n          comment: this.form.comment,\r\n          sendMessage: this.form.sendMessage,\r\n          sendSms: this.form.sendSms,\r\n          sendEmail: this.form.sendEmail,\r\n        };\r\n        passAll(params).then((res) => {\r\n          this.$Modal.remove();\r\n          if (res.success) {\r\n            this.$Message.info(res.message);\r\n            this.modalVisible = false;\r\n            this.clearSelectAll();\r\n            this.getDataList();\r\n          }\r\n        });\r\n      } else {\r\n        let procInstIds = \"\",\r\n          params = {};\r\n        this.selectList.forEach(function (e) {\r\n          procInstIds += e.procInstId + \",\";\r\n        });\r\n        procInstIds = procInstIds.substring(0, procInstIds.length - 1);\r\n        params = {\r\n          procInstIds: procInstIds,\r\n          comment: this.form.comment,\r\n          sendMessage: this.form.sendMessage,\r\n          sendSms: this.form.sendSms,\r\n          sendEmail: this.form.sendEmail,\r\n        };\r\n        backAll(params).then((res) => {\r\n          this.$Modal.remove();\r\n          if (res.success) {\r\n            this.$Message.success(\"操作成功\");\r\n            this.modalVisible = false;\r\n            this.clearSelectAll();\r\n            this.getDataList();\r\n          }\r\n        });\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  watch: {\r\n    // 监听路由变化\r\n    $route(to, from) {\r\n      if (to.name == \"todo-manage\") {\r\n        this.getDataList();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>"]}]}