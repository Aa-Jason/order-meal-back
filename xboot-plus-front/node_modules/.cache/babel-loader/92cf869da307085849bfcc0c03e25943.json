{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\mapLocate.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\mapLocate.vue","mtime":1651629755194},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bIkBAaXRlcmF0b3IiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KCmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CgpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0KCmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCAicHJvdG90eXBlIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG1hcGJveGdsIGZyb20gIm1hcGJveC1nbCI7CmltcG9ydCBNYXBib3hHZW9jb2RlciBmcm9tICJAbWFwYm94L21hcGJveC1nbC1nZW9jb2RlciI7CmltcG9ydCAnQG1hcGJveC9tYXBib3gtZ2wtZ2VvY29kZXIvZGlzdC9tYXBib3gtZ2wtZ2VvY29kZXIuY3NzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJtYXBMb2NhdGUiLAogIHByb3BzOiB7CiAgICBpZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJtYXAiCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIHNob3dJbnB1dDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgcHJldmlldzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIHRleHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAi5Zyw5Zu+6YCJ54K5IgogICAgfSwKICAgIHdpZHRoOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogOTAwCiAgICB9LAogICAgcGl0Y2g6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9LAogICAgZGVjaW1hbDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDYKICAgIH0sCiAgICBkcmFnZ2FibGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHNpemU6IFN0cmluZywKICAgIHR5cGU6IFN0cmluZywKICAgIHNoYXBlOiBTdHJpbmcsCiAgICBnaG9zdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgY2xlYXJhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBwbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICLovpPlhaXlnZDmoIfmiJbpgInmi6nlnLDngrkiCiAgICB9LAogICAgbWF4bGVuZ3RoOiBOdW1iZXIsCiAgICByZWFkb25seTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGljb246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAibWQtbG9jYXRlIgogICAgfSwKICAgIHN0eWxlczogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJtYXBib3g6Ly9zdHlsZXMvbWFwYm94L3N0cmVldHMtdjExIgogICAgfSwKICAgIGNlbnRlcjogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFsxMTYuMzUsIDM5Ljg1XTsKICAgICAgfQogICAgfSwKICAgIHpvb206IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA5CiAgICB9LAogICAgY29tcGFjdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgY3VzdG9tQXR0cmlidXRpb246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIHNlYXJjaGFibGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIGNoYW5nZVN0eWxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBuYXZpZ2F0aW9uOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBsb2NhdGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIGZ1bGxzY3JlZW46IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBidWlsZGluZzNEOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhOiB0aGlzLnZhbHVlLAogICAgICBtYXBib3g6IG51bGwsCiAgICAgIGN1cnJlbnRWYWx1ZTogIiIsCiAgICAgIHNob3dNb2RhbDogZmFsc2UsCiAgICAgIGZ1bGw6IGZhbHNlLAogICAgICBtb2RhbEhlaWdodDogIjUwMHB4IiwKICAgICAgbWFya2VyOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAoIWNvbmZpZy5tYXBib3hUb2tlbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgbWFwYm94Z2wuYWNjZXNzVG9rZW4gPSBjb25maWcubWFwYm94VG9rZW47CiAgICAgIHRoaXMubWFwYm94ID0gbmV3IG1hcGJveGdsLk1hcCh7CiAgICAgICAgY29udGFpbmVyOiB0aGlzLmlkLAogICAgICAgIHN0eWxlOiB0aGlzLnN0eWxlcywKICAgICAgICBjZW50ZXI6IHRoaXMuY2VudGVyLAogICAgICAgIHpvb206IHRoaXMuem9vbSwKICAgICAgICBwaXRjaDogdGhpcy5waXRjaCwKICAgICAgICBhdHRyaWJ1dGlvbkNvbnRyb2w6IGZhbHNlCiAgICAgIH0pOyAvLyDlsZ7mgKcKCiAgICAgIHRoaXMubWFwYm94LmFkZENvbnRyb2wobmV3IG1hcGJveGdsLkF0dHJpYnV0aW9uQ29udHJvbCh7CiAgICAgICAgY29tcGFjdDogdGhpcy5jb21wYWN0LAogICAgICAgIGN1c3RvbUF0dHJpYnV0aW9uOiB0aGlzLmN1c3RvbUF0dHJpYnV0aW9uCiAgICAgIH0pKTsgLy8g5pCc57SiCgogICAgICBpZiAodGhpcy5zZWFyY2hhYmxlKSB7CiAgICAgICAgdGhpcy5tYXBib3guYWRkQ29udHJvbChuZXcgTWFwYm94R2VvY29kZXIoewogICAgICAgICAgYWNjZXNzVG9rZW46IG1hcGJveGdsLmFjY2Vzc1Rva2VuLAogICAgICAgICAgbWFwYm94Z2w6IG1hcGJveGdsCiAgICAgICAgfSkpOwogICAgICB9IC8vIOWcsOWbvuagt+W8j+WIh+aNogoKCiAgICAgIHZhciBDaGFuZ2VTdHlsZUNvbnRyb2wgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIENoYW5nZVN0eWxlQ29udHJvbCgpIHsKICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDaGFuZ2VTdHlsZUNvbnRyb2wpOwogICAgICAgIH0KCiAgICAgICAgX2NyZWF0ZUNsYXNzKENoYW5nZVN0eWxlQ29udHJvbCwgW3sKICAgICAgICAgIGtleTogImdldERlZmF1bHRQb3NpdGlvbiIsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVmYXVsdFBvc2l0aW9uKCkgewogICAgICAgICAgICB2YXIgZGVmYXVsdFBvc2l0aW9uID0gInRvcC1yaWdodCI7CiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0UG9zaXRpb247CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAib25BZGQiLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWRkKG1hcCkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgdGhpcy5tYXAgPSBtYXA7CiAgICAgICAgICAgIHRoaXMuY29udHJvbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICB0aGlzLmNvbnRyb2xDb250YWluZXIuY2xhc3NMaXN0LmFkZCgibWFwYm94Z2wtY3RybCIpOwogICAgICAgICAgICB0aGlzLmNvbnRyb2xDb250YWluZXIuY2xhc3NMaXN0LmFkZCgibWFwYm94Z2wtY3RybC1ncm91cCIpOwogICAgICAgICAgICB0aGlzLm1hcFN0eWxlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgIHRoaXMuc3R5bGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKICAgICAgICAgICAgdGhpcy5zdHlsZUJ1dHRvbi50eXBlID0gImJ1dHRvbiI7CiAgICAgICAgICAgIHRoaXMubWFwU3R5bGVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgibWFwYm94Z2wtc3R5bGUtbGlzdCIpOwogICAgICAgICAgICB2YXIgZGVmYXVsdFN0eWxlID0gIuihl+mBk+WcsOWbviI7CiAgICAgICAgICAgIHZhciBzdHlsZXMgPSBbewogICAgICAgICAgICAgIHRpdGxlOiAi6KGX6YGT5Zyw5Zu+IiwKICAgICAgICAgICAgICB1cmk6ICJtYXBib3g6Ly9zdHlsZXMvbWFwYm94L3N0cmVldHMtdjExIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgdGl0bGU6ICLljavmmJ/ooZfpgZMiLAogICAgICAgICAgICAgIHVyaTogIm1hcGJveDovL3N0eWxlcy9tYXBib3gvc2F0ZWxsaXRlLXN0cmVldHMtdjExIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgdGl0bGU6ICLmmpfpu5Hpo47moLwiLAogICAgICAgICAgICAgIHVyaTogIm1hcGJveDovL3N0eWxlcy9tYXBib3gvZGFyay12MTAiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICB0aXRsZTogIuaYjuS6rumjjuagvCIsCiAgICAgICAgICAgICAgdXJpOiAibWFwYm94Oi8vc3R5bGVzL21hcGJveC9saWdodC12MTAiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICB0aXRsZTogIuaIt+WkluWcsOWbviIsCiAgICAgICAgICAgICAgdXJpOiAibWFwYm94Oi8vc3R5bGVzL21hcGJveC9vdXRkb29ycy12MTEiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICB0aXRsZTogIuWNq+aYn+WcsOWbviIsCiAgICAgICAgICAgICAgdXJpOiAibWFwYm94Oi8vc3R5bGVzL21hcGJveC9zYXRlbGxpdGUtdjkiCiAgICAgICAgICAgIH1dOwoKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfc3R5bGVzID0gc3R5bGVzOyBfaSA8IF9zdHlsZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHN0eWxlID0gX3N0eWxlc1tfaV07CiAgICAgICAgICAgICAgdmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwogICAgICAgICAgICAgIHN0eWxlRWxlbWVudC50eXBlID0gImJ1dHRvbiI7CiAgICAgICAgICAgICAgc3R5bGVFbGVtZW50LmlubmVyVGV4dCA9IHN0eWxlLnRpdGxlOwogICAgICAgICAgICAgIHN0eWxlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHN0eWxlLnRpdGxlLnJlcGxhY2UoL1teYS16MC05LV0vZ2ksICJfIikpOwogICAgICAgICAgICAgIHN0eWxlRWxlbWVudC5kYXRhc2V0LnVyaSA9IEpTT04uc3RyaW5naWZ5KHN0eWxlLnVyaSk7CiAgICAgICAgICAgICAgc3R5bGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgc3JjRWxlbWVudCA9IGV2ZW50LnNyY0VsZW1lbnQ7CgogICAgICAgICAgICAgICAgaWYgKHNyY0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJhY3RpdmUiKSkgewogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMubWFwLnNldFN0eWxlKEpTT04ucGFyc2Uoc3JjRWxlbWVudC5kYXRhc2V0LnVyaSkpOwoKICAgICAgICAgICAgICAgIF90aGlzLm1hcC5vbigiZGF0YSIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlLmlzU291cmNlTG9hZGVkKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsTGlzdCA9IF90aGlzLm1hcC5nZXRTdHlsZSgpLmxheWVycy5maWx0ZXIoZnVuY3Rpb24gKGxheWVyKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLy1sYWJlbC8udGVzdChsYXllci5pZCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihsYWJlbExpc3QpLAogICAgICAgICAgICAgICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbExheWVyID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5tYXAuc2V0TGF5b3V0UHJvcGVydHkobGFiZWxMYXllci5pZCwgInRleHQtZmllbGQiLCBbImNvYWxlc2NlIiwgWyJnZXQiLCAibmFtZV96aC1IYW5zIl0sIFsiZ2V0IiwgIm5hbWUiXV0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzLm1hcFN0eWxlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgICAgICBfdGhpcy5zdHlsZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKCiAgICAgICAgICAgICAgICB2YXIgZWxtcyA9IF90aGlzLm1hcFN0eWxlQ29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImFjdGl2ZSIpOwoKICAgICAgICAgICAgICAgIHdoaWxlIChlbG1zWzBdKSB7CiAgICAgICAgICAgICAgICAgIGVsbXNbMF0uY2xhc3NMaXN0LnJlbW92ZSgiYWN0aXZlIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc3JjRWxlbWVudC5jbGFzc0xpc3QuYWRkKCJhY3RpdmUiKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaWYgKHN0eWxlLnRpdGxlID09PSBkZWZhdWx0U3R5bGUpIHsKICAgICAgICAgICAgICAgIHN0eWxlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCJhY3RpdmUiKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMubWFwU3R5bGVDb250YWluZXIuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5zdHlsZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCJtYXBib3hnbC1jdHJsLWljb24iKTsKICAgICAgICAgICAgdGhpcy5zdHlsZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCJtYXBib3hnbC1zdHlsZS1zd2l0Y2hlciIpOwogICAgICAgICAgICB0aGlzLnN0eWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzLnN0eWxlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgICAgX3RoaXMubWFwU3R5bGVDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIHRoaXMub25Eb2N1bWVudENsaWNrKTsKICAgICAgICAgICAgdGhpcy5jb250cm9sQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuc3R5bGVCdXR0b24pOwogICAgICAgICAgICB0aGlzLmNvbnRyb2xDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5tYXBTdHlsZUNvbnRhaW5lcik7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xDb250YWluZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAib25SZW1vdmUiLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkgewogICAgICAgICAgICBpZiAoIXRoaXMuY29udHJvbENvbnRhaW5lciB8fCAhdGhpcy5jb250cm9sQ29udGFpbmVyLnBhcmVudE5vZGUgfHwgIXRoaXMubWFwIHx8ICF0aGlzLnN0eWxlQnV0dG9uKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLnN0eWxlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5vbkRvY3VtZW50Q2xpY2spOwogICAgICAgICAgICB0aGlzLmNvbnRyb2xDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmNvbnRyb2xDb250YWluZXIpOwogICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsIHRoaXMub25Eb2N1bWVudENsaWNrKTsKICAgICAgICAgICAgdGhpcy5tYXAgPSB1bmRlZmluZWQ7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAib25Eb2N1bWVudENsaWNrIiwKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRvY3VtZW50Q2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbENvbnRhaW5lciAmJiAhdGhpcy5jb250cm9sQ29udGFpbmVyLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgJiYgdGhpcy5tYXBTdHlsZUNvbnRhaW5lciAmJiB0aGlzLnN0eWxlQnV0dG9uKSB7CiAgICAgICAgICAgICAgdGhpcy5tYXBTdHlsZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgIHRoaXMuc3R5bGVCdXR0b24uc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9XSk7CgogICAgICAgIHJldHVybiBDaGFuZ2VTdHlsZUNvbnRyb2w7CiAgICAgIH0oKTsKCiAgICAgIGlmICh0aGlzLmNoYW5nZVN0eWxlKSB7CiAgICAgICAgdGhpcy5tYXBib3guYWRkQ29udHJvbChuZXcgQ2hhbmdlU3R5bGVDb250cm9sKCkpOwogICAgICB9IC8vIOWvvOiIquaOp+S7tgoKCiAgICAgIGlmICh0aGlzLm5hdmlnYXRpb24pIHsKICAgICAgICB0aGlzLm1hcGJveC5hZGRDb250cm9sKG5ldyBtYXBib3hnbC5OYXZpZ2F0aW9uQ29udHJvbCgpKTsKICAgICAgfSAvLyDlrprkvY0KCgogICAgICBpZiAodGhpcy5sb2NhdGUpIHsKICAgICAgICB0aGlzLm1hcGJveC5hZGRDb250cm9sKG5ldyBtYXBib3hnbC5HZW9sb2NhdGVDb250cm9sKHsKICAgICAgICAgIHBvc2l0aW9uT3B0aW9uczogewogICAgICAgICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICB0cmFja1VzZXJMb2NhdGlvbjogdHJ1ZQogICAgICAgIH0pKTsKICAgICAgfSAvLyDlhajlsY8KCgogICAgICBpZiAodGhpcy5mdWxsc2NyZWVuKSB7CiAgICAgICAgdGhpcy5tYXBib3guYWRkQ29udHJvbChuZXcgbWFwYm94Z2wuRnVsbHNjcmVlbkNvbnRyb2woewogICAgICAgICAgY29udGFpbmVyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJib2R5IikKICAgICAgICB9KSk7CiAgICAgIH0KCiAgICAgIHRoaXMubWFwYm94Lm9uKCJsb2FkIiwgZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOS4reaWhwogICAgICAgIHZhciBsYWJlbExpc3QgPSBfdGhpczIubWFwYm94LmdldFN0eWxlKCkubGF5ZXJzLmZpbHRlcihmdW5jdGlvbiAobGF5ZXIpIHsKICAgICAgICAgIHJldHVybiAvLWxhYmVsLy50ZXN0KGxheWVyLmlkKTsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihsYWJlbExpc3QpLAogICAgICAgICAgICBfc3RlcDI7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgbGFiZWxMYXllciA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICAgIF90aGlzMi5tYXBib3guc2V0TGF5b3V0UHJvcGVydHkobGFiZWxMYXllci5pZCwgInRleHQtZmllbGQiLCBbImNvYWxlc2NlIiwgWyJnZXQiLCAibmFtZV96aC1IYW5zIl0sIFsiZ2V0IiwgIm5hbWUiXV0pOwogICAgICAgICAgfSAvLyAzROW7uuetkQoKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICB9CgogICAgICAgIGlmIChfdGhpczIuYnVpbGRpbmczRCkgewogICAgICAgICAgX3RoaXMyLm1hcGJveC5hZGRMYXllcih7CiAgICAgICAgICAgIGlkOiAiM2QtYnVpbGRpbmdzIiwKICAgICAgICAgICAgc291cmNlOiAiY29tcG9zaXRlIiwKICAgICAgICAgICAgInNvdXJjZS1sYXllciI6ICJidWlsZGluZyIsCiAgICAgICAgICAgIGZpbHRlcjogWyI9PSIsICJleHRydWRlIiwgInRydWUiXSwKICAgICAgICAgICAgdHlwZTogImZpbGwtZXh0cnVzaW9uIiwKICAgICAgICAgICAgbWluem9vbTogMTUsCiAgICAgICAgICAgIHBhaW50OiB7CiAgICAgICAgICAgICAgImZpbGwtZXh0cnVzaW9uLWNvbG9yIjogIiNhYWEiLAogICAgICAgICAgICAgICJmaWxsLWV4dHJ1c2lvbi1oZWlnaHQiOiBbImludGVycG9sYXRlIiwgWyJsaW5lYXIiXSwgWyJ6b29tIl0sIDE1LCAwLCAxNS4wNSwgWyJnZXQiLCAiaGVpZ2h0Il1dLAogICAgICAgICAgICAgICJmaWxsLWV4dHJ1c2lvbi1iYXNlIjogWyJpbnRlcnBvbGF0ZSIsIFsibGluZWFyIl0sIFsiem9vbSJdLCAxNSwgMCwgMTUuMDUsIFsiZ2V0IiwgIm1pbl9oZWlnaHQiXV0sCiAgICAgICAgICAgICAgImZpbGwtZXh0cnVzaW9uLW9wYWNpdHkiOiAwLjYKICAgICAgICAgICAgfQogICAgICAgICAgfSk7IC8vIOaYvuekuueCuQoKCiAgICAgICAgICBfdGhpczIuZmx5VG8oKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyDljZXngrnmoIforrAKCiAgICAgIHRoaXMubWFwYm94Lm9uKCJjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKF90aGlzMi5wcmV2aWV3KSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoX3RoaXMyLm1hcmtlcikgewogICAgICAgICAgX3RoaXMyLm1hcmtlci5yZW1vdmUoKTsKICAgICAgICB9CgogICAgICAgIF90aGlzMi5tYXJrZXIgPSBuZXcgbWFwYm94Z2wuTWFya2VyKHsKICAgICAgICAgIG9mZnNldDogWzAsIC0yNV0sCiAgICAgICAgICBkcmFnZ2FibGU6IF90aGlzMi5kcmFnZ2FibGUKICAgICAgICB9KS5zZXRMbmdMYXQoW2UubG5nTGF0LmxuZywgZS5sbmdMYXQubGF0XSkuYWRkVG8oX3RoaXMyLm1hcGJveCk7CgogICAgICAgIGlmIChfdGhpczIuZGVjaW1hbCA8IDApIHsKICAgICAgICAgIF90aGlzMi5kZWNpbWFsID0gMDsKICAgICAgICB9CgogICAgICAgIGlmIChfdGhpczIuZGVjaW1hbCA+IDE0KSB7CiAgICAgICAgICBfdGhpczIuZGVjaW1hbCA9IDE0OwogICAgICAgIH0KCiAgICAgICAgdmFyIGxuZyA9IGUubG5nTGF0LmxuZy50b0ZpeGVkKF90aGlzMi5kZWNpbWFsKTsKICAgICAgICB2YXIgbGF0ID0gZS5sbmdMYXQubGF0LnRvRml4ZWQoX3RoaXMyLmRlY2ltYWwpOwogICAgICAgIF90aGlzMi5jdXJyZW50VmFsdWUgPSBsbmcgKyAiLCAiICsgbGF0OwoKICAgICAgICBfdGhpczIuJGVtaXQoIm9uLWNsaWNrIiwgX3RoaXMyLmN1cnJlbnRWYWx1ZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGZseVRvOiBmdW5jdGlvbiBmbHlUbygpIHsKICAgICAgaWYgKHRoaXMuZGF0YSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgbG5nTGF0ID0gdGhpcy5kYXRhLnNwbGl0KCIsIik7CiAgICAgICAgICB2YXIgbG5nID0gbG5nTGF0WzBdLnRyaW0oKTsKICAgICAgICAgIHZhciBsYXQgPSBsbmdMYXRbMV0udHJpbSgpOwogICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB0aGlzLmRhdGE7CgogICAgICAgICAgaWYgKHRoaXMubWFya2VyKSB7CiAgICAgICAgICAgIHRoaXMubWFya2VyLnJlbW92ZSgpOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMubWFya2VyID0gbmV3IG1hcGJveGdsLk1hcmtlcih7CiAgICAgICAgICAgIG9mZnNldDogWzAsIC0yNV0sCiAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZQogICAgICAgICAgfSkuc2V0TG5nTGF0KFtsbmcsIGxhdF0pLmFkZFRvKHRoaXMubWFwYm94KTsKICAgICAgICAgIHRoaXMubWFwYm94LmZseVRvKHsKICAgICAgICAgICAgY2VudGVyOiBbbG5nLCBsYXRdLAogICAgICAgICAgICBlc3NlbnRpYWw6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCLmgqjovpPlhaXnmoTlnZDmoIfkuI3lkIjms5UiKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSAiIjsKCiAgICAgICAgaWYgKHRoaXMubWFya2VyKSB7CiAgICAgICAgICB0aGlzLm1hcmtlci5yZW1vdmUoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMubWFwYm94LmZseVRvKHsKICAgICAgICAgIGNlbnRlcjogdGhpcy5jZW50ZXIsCiAgICAgICAgICB6b29tOiA5LAogICAgICAgICAgZXNzZW50aWFsOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZSh2KSB7CiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5kYXRhKTsKICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5kYXRhKTsKICAgIH0sCiAgICBzZXREYXRhOiBmdW5jdGlvbiBzZXREYXRhKHZhbHVlKSB7CiAgICAgIGlmICghdGhpcy5tYXBib3gpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgfQoKICAgICAgaWYgKHZhbHVlICE9IHRoaXMuZGF0YSkgewogICAgICAgIHRoaXMuZGF0YSA9IHZhbHVlOwogICAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5kYXRhKTsKICAgICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmRhdGEpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlRnVsbDogZnVuY3Rpb24gaGFuZGxlRnVsbCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmZ1bGwgPSAhdGhpcy5mdWxsOwoKICAgICAgaWYgKHRoaXMuZnVsbCkgewogICAgICAgIHRoaXMubW9kYWxIZWlnaHQgPSAiMTAwJSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tb2RhbEhlaWdodCA9ICI1MDBweCI7CiAgICAgIH0KCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy5tYXBib3gucmVzaXplKCk7CiAgICAgIH0sIDEwKTsKICAgIH0sCiAgICBoYW5kbGVTaG93OiBmdW5jdGlvbiBoYW5kbGVTaG93KCkgewogICAgICBpZiAoIWNvbmZpZy5tYXBib3hUb2tlbikgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi6K+35YWI6YWN572uTWFwYm945Zyw5Zu+55qEYWNjZXNzVG9rZW4iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuc2hvd01vZGFsID0gdHJ1ZTsKICAgIH0sCiAgICBjaGFuZ2VNb2RhbDogZnVuY3Rpb24gY2hhbmdlTW9kYWwodikgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh2KSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczQubWFwYm94LnJlc2l6ZSgpOwoKICAgICAgICAgIF90aGlzNC5mbHlUbygpOwogICAgICAgIH0sIDEwKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRlbFN1Ym1pdDogZnVuY3Rpb24gaGFuZGVsU3VibWl0KCkgewogICAgICBpZiAoIXRoaXMuY3VycmVudFZhbHVlKSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLor7flnKjlnLDlm77kuK3ngrnlh7vpvKDmoIfpgInmi6nkuIDkuKrlnLDngrkiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YSA9IHRoaXMuY3VycmVudFZhbHVlOwogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMuZGF0YSk7CiAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsIHRoaXMuZGF0YSk7CiAgICAgIHRoaXMuc2hvd01vZGFsID0gZmFsc2U7CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgLy8g6LCD55So6ZSA5q+BIEFQSSDlr7nlvZPliY3nvJbovpHlmajlrp7kvovov5vooYzplIDmr4EKICAgIGlmICh0aGlzLm1hcGJveCAhPSBudWxsKSB7CiAgICAgIHRoaXMubWFwYm94LnJlbW92ZSgpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSh2YWwpIHsKICAgICAgdGhpcy5zZXREYXRhKHZhbCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["name","props","id","type","default","value","showInput","preview","text","width","pitch","decimal","draggable","size","shape","ghost","disabled","clearable","placeholder","maxlength","readonly","icon","styles","center","zoom","compact","customAttribution","searchable","changeStyle","navigation","locate","fullscreen","building3D","data","mapbox","currentValue","showModal","full","modalHeight","marker","methods","init","mapboxgl","container","style","attributionControl","accessToken","ChangeStyleControl","title","uri","styleElement","getStyle","layers","filter","labelList","elms","srcElement","document","positionOptions","enableHighAccuracy","trackUserLocation","source","minzoom","paint","offset","setLngLat","addTo","flyTo","essential","console","handleChange","v","setData","handleFull","setTimeout","handleShow","changeModal","handelSubmit","beforeDestroy","watch","val","mounted"],"sourceRoot":"src/views/my-components/xboot","sources":["mapLocate.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"display: flex\">\r\n      <Input\r\n        v-model=\"data\"\r\n        @on-change=\"handleChange\"\r\n        :placeholder=\"placeholder\"\r\n        :size=\"size\"\r\n        :disabled=\"disabled\"\r\n        :readonly=\"readonly\"\r\n        :maxlength=\"maxlength\"\r\n        :clearable=\"clearable\"\r\n        v-if=\"showInput\"\r\n        style=\"margin-right: 10px\"\r\n      />\r\n      <Button\r\n        :size=\"size\"\r\n        :type=\"type\"\r\n        :shape=\"shape\"\r\n        :ghost=\"ghost\"\r\n        :disabled=\"disabled\"\r\n        :icon=\"icon\"\r\n        @click=\"handleShow\"\r\n        >{{ text }}</Button\r\n      >\r\n    </div>\r\n    <Modal\r\n      v-model=\"showModal\"\r\n      :mask-closable=\"false\"\r\n      :width=\"width\"\r\n      :fullscreen=\"full\"\r\n      @on-visible-change=\"changeModal\"\r\n      class=\"map-modal\"\r\n    >\r\n      <div slot=\"header\">\r\n        <div class=\"ivu-modal-header-inner\">{{ text }}</div>\r\n        <a @click=\"handleFull\" class=\"modal-fullscreen\">\r\n          <Icon\r\n            v-show=\"!full\"\r\n            type=\"ios-expand\"\r\n            class=\"model-fullscreen-icon\"\r\n          />\r\n          <Icon\r\n            v-show=\"full\"\r\n            type=\"ios-contract\"\r\n            class=\"model-fullscreen-icon\"\r\n          />\r\n        </a>\r\n        <a @click=\"showModal = false\" class=\"ivu-modal-close\">\r\n          <Icon type=\"ios-close\" class=\"ivu-icon-ios-close\" />\r\n        </a>\r\n      </div>\r\n      <div :id=\"id\" :style=\"{ width: '100%', height: modalHeight }\"></div>\r\n      <div slot=\"footer\">\r\n        <Row align=\"middle\" justify=\"space-between\">\r\n          <Alert show-icon style=\"margin-bottom: 0\" v-show=\"currentValue\"\r\n            >当前坐标：{{ currentValue }}</Alert\r\n          >\r\n          <div v-show=\"!currentValue\"></div>\r\n          <div>\r\n            <Button type=\"text\" @click=\"showModal = false\" v-if=\"!preview\"\r\n              >取消</Button\r\n            >\r\n            <Button @click=\"showModal = false\" v-if=\"preview\">关闭</Button>\r\n            <Button type=\"primary\" @click=\"handelSubmit\" v-if=\"!preview\"\r\n              >确认提交</Button\r\n            >\r\n          </div>\r\n        </Row>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport MapboxGeocoder from \"@mapbox/mapbox-gl-geocoder\";\r\nimport '@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css';\r\nexport default {\r\n  name: \"mapLocate\",\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      default: \"map\",\r\n    },\r\n    value: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    showInput: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    preview: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    text: {\r\n      type: String,\r\n      default: \"地图选点\",\r\n    },\r\n    width: {\r\n      type: Number,\r\n      default: 900,\r\n    },\r\n    pitch: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    decimal: {\r\n      type: Number,\r\n      default: 6,\r\n    },\r\n    draggable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    size: String,\r\n    type: String,\r\n    shape: String,\r\n    ghost: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    clearable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: \"输入坐标或选择地点\",\r\n    },\r\n    maxlength: Number,\r\n    readonly: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    icon: {\r\n      type: String,\r\n      default: \"md-locate\",\r\n    },\r\n    styles: {\r\n      type: String,\r\n      default: \"mapbox://styles/mapbox/streets-v11\",\r\n    },\r\n    center: {\r\n      type: Array,\r\n      default: function () {\r\n        return [116.35, 39.85];\r\n      },\r\n    },\r\n    zoom: {\r\n      type: Number,\r\n      default: 9,\r\n    },\r\n    compact: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    customAttribution: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    searchable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    changeStyle: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    navigation: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    locate: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    fullscreen: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    building3D: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      data: this.value,\r\n      mapbox: null,\r\n      currentValue: \"\",\r\n      showModal: false,\r\n      full: false,\r\n      modalHeight: \"500px\",\r\n      marker: null,\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (!config.mapboxToken) {\r\n        return;\r\n      }\r\n      mapboxgl.accessToken = config.mapboxToken;\r\n      this.mapbox = new mapboxgl.Map({\r\n        container: this.id,\r\n        style: this.styles,\r\n        center: this.center,\r\n        zoom: this.zoom,\r\n        pitch: this.pitch,\r\n        attributionControl: false,\r\n      });\r\n      // 属性\r\n      this.mapbox.addControl(\r\n        new mapboxgl.AttributionControl({\r\n          compact: this.compact,\r\n          customAttribution: this.customAttribution,\r\n        })\r\n      );\r\n      // 搜索\r\n      if (this.searchable) {\r\n        this.mapbox.addControl(\r\n          new MapboxGeocoder({\r\n            accessToken: mapboxgl.accessToken,\r\n            mapboxgl: mapboxgl,\r\n          })\r\n        );\r\n      }\r\n      // 地图样式切换\r\n      class ChangeStyleControl {\r\n        getDefaultPosition() {\r\n          const defaultPosition = \"top-right\";\r\n          return defaultPosition;\r\n        }\r\n        onAdd(map) {\r\n          this.map = map;\r\n          this.controlContainer = document.createElement(\"div\");\r\n          this.controlContainer.classList.add(\"mapboxgl-ctrl\");\r\n          this.controlContainer.classList.add(\"mapboxgl-ctrl-group\");\r\n          this.mapStyleContainer = document.createElement(\"div\");\r\n          this.styleButton = document.createElement(\"button\");\r\n          this.styleButton.type = \"button\";\r\n          this.mapStyleContainer.classList.add(\"mapboxgl-style-list\");\r\n          const defaultStyle = \"街道地图\";\r\n          const styles = [\r\n            { title: \"街道地图\", uri: \"mapbox://styles/mapbox/streets-v11\" },\r\n            {\r\n              title: \"卫星街道\",\r\n              uri: \"mapbox://styles/mapbox/satellite-streets-v11\",\r\n            },\r\n            { title: \"暗黑风格\", uri: \"mapbox://styles/mapbox/dark-v10\" },\r\n            { title: \"明亮风格\", uri: \"mapbox://styles/mapbox/light-v10\" },\r\n            { title: \"户外地图\", uri: \"mapbox://styles/mapbox/outdoors-v11\" },\r\n            { title: \"卫星地图\", uri: \"mapbox://styles/mapbox/satellite-v9\" },\r\n          ];\r\n          for (const style of styles) {\r\n            const styleElement = document.createElement(\"button\");\r\n            styleElement.type = \"button\";\r\n            styleElement.innerText = style.title;\r\n            styleElement.classList.add(\r\n              style.title.replace(/[^a-z0-9-]/gi, \"_\")\r\n            );\r\n            styleElement.dataset.uri = JSON.stringify(style.uri);\r\n            styleElement.addEventListener(\"click\", (event) => {\r\n              const srcElement = event.srcElement;\r\n              if (srcElement.classList.contains(\"active\")) {\r\n                return;\r\n              }\r\n              this.map.setStyle(JSON.parse(srcElement.dataset.uri));\r\n              this.map.on(\"data\", (e) => {\r\n                if (e.isSourceLoaded) {\r\n                  const labelList = this.map\r\n                    .getStyle()\r\n                    .layers.filter((layer) => {\r\n                      return /-label/.test(layer.id);\r\n                    });\r\n                  for (let labelLayer of labelList) {\r\n                    this.map.setLayoutProperty(labelLayer.id, \"text-field\", [\r\n                      \"coalesce\",\r\n                      [\"get\", \"name_zh-Hans\"],\r\n                      [\"get\", \"name\"],\r\n                    ]);\r\n                  }\r\n                }\r\n              });\r\n              this.mapStyleContainer.style.display = \"none\";\r\n              this.styleButton.style.display = \"block\";\r\n              const elms =\r\n                this.mapStyleContainer.getElementsByClassName(\"active\");\r\n              while (elms[0]) {\r\n                elms[0].classList.remove(\"active\");\r\n              }\r\n              srcElement.classList.add(\"active\");\r\n            });\r\n            if (style.title === defaultStyle) {\r\n              styleElement.classList.add(\"active\");\r\n            }\r\n            this.mapStyleContainer.appendChild(styleElement);\r\n          }\r\n          this.styleButton.classList.add(\"mapboxgl-ctrl-icon\");\r\n          this.styleButton.classList.add(\"mapboxgl-style-switcher\");\r\n          this.styleButton.addEventListener(\"click\", () => {\r\n            this.styleButton.style.display = \"none\";\r\n            this.mapStyleContainer.style.display = \"block\";\r\n          });\r\n          document.addEventListener(\"click\", this.onDocumentClick);\r\n          this.controlContainer.appendChild(this.styleButton);\r\n          this.controlContainer.appendChild(this.mapStyleContainer);\r\n          return this.controlContainer;\r\n        }\r\n        onRemove() {\r\n          if (\r\n            !this.controlContainer ||\r\n            !this.controlContainer.parentNode ||\r\n            !this.map ||\r\n            !this.styleButton\r\n          ) {\r\n            return;\r\n          }\r\n          this.styleButton.removeEventListener(\"click\", this.onDocumentClick);\r\n          this.controlContainer.parentNode.removeChild(this.controlContainer);\r\n          document.removeEventListener(\"click\", this.onDocumentClick);\r\n          this.map = undefined;\r\n        }\r\n        onDocumentClick(event) {\r\n          if (\r\n            this.controlContainer &&\r\n            !this.controlContainer.contains(event.target) &&\r\n            this.mapStyleContainer &&\r\n            this.styleButton\r\n          ) {\r\n            this.mapStyleContainer.style.display = \"none\";\r\n            this.styleButton.style.display = \"block\";\r\n          }\r\n        }\r\n      }\r\n      if (this.changeStyle) {\r\n        this.mapbox.addControl(new ChangeStyleControl());\r\n      }\r\n      // 导航控件\r\n      if (this.navigation) {\r\n        this.mapbox.addControl(new mapboxgl.NavigationControl());\r\n      }\r\n      // 定位\r\n      if (this.locate) {\r\n        this.mapbox.addControl(\r\n          new mapboxgl.GeolocateControl({\r\n            positionOptions: {\r\n              enableHighAccuracy: true,\r\n            },\r\n            trackUserLocation: true,\r\n          })\r\n        );\r\n      }\r\n      // 全屏\r\n      if (this.fullscreen) {\r\n        this.mapbox.addControl(\r\n          new mapboxgl.FullscreenControl({\r\n            container: document.querySelector(\"body\"),\r\n          })\r\n        );\r\n      }\r\n      this.mapbox.on(\"load\", () => {\r\n        // 中文\r\n        const labelList = this.mapbox.getStyle().layers.filter((layer) => {\r\n          return /-label/.test(layer.id);\r\n        });\r\n        for (let labelLayer of labelList) {\r\n          this.mapbox.setLayoutProperty(labelLayer.id, \"text-field\", [\r\n            \"coalesce\",\r\n            [\"get\", \"name_zh-Hans\"],\r\n            [\"get\", \"name\"],\r\n          ]);\r\n        }\r\n        // 3D建筑\r\n        if (this.building3D) {\r\n          this.mapbox.addLayer({\r\n            id: \"3d-buildings\",\r\n            source: \"composite\",\r\n            \"source-layer\": \"building\",\r\n            filter: [\"==\", \"extrude\", \"true\"],\r\n            type: \"fill-extrusion\",\r\n            minzoom: 15,\r\n            paint: {\r\n              \"fill-extrusion-color\": \"#aaa\",\r\n              \"fill-extrusion-height\": [\r\n                \"interpolate\",\r\n                [\"linear\"],\r\n                [\"zoom\"],\r\n                15,\r\n                0,\r\n                15.05,\r\n                [\"get\", \"height\"],\r\n              ],\r\n              \"fill-extrusion-base\": [\r\n                \"interpolate\",\r\n                [\"linear\"],\r\n                [\"zoom\"],\r\n                15,\r\n                0,\r\n                15.05,\r\n                [\"get\", \"min_height\"],\r\n              ],\r\n              \"fill-extrusion-opacity\": 0.6,\r\n            },\r\n          });\r\n          // 显示点\r\n          this.flyTo();\r\n        }\r\n      });\r\n      // 单点标记\r\n      this.mapbox.on(\"click\", (e) => {\r\n        if (this.preview) {\r\n          return;\r\n        }\r\n        if (this.marker) {\r\n          this.marker.remove();\r\n        }\r\n        this.marker = new mapboxgl.Marker({\r\n          offset: [0, -25],\r\n          draggable: this.draggable,\r\n        })\r\n          .setLngLat([e.lngLat.lng, e.lngLat.lat])\r\n          .addTo(this.mapbox);\r\n        if (this.decimal < 0) {\r\n          this.decimal = 0;\r\n        }\r\n        if (this.decimal > 14) {\r\n          this.decimal = 14;\r\n        }\r\n        let lng = e.lngLat.lng.toFixed(this.decimal);\r\n        let lat = e.lngLat.lat.toFixed(this.decimal);\r\n        this.currentValue = lng + \", \" + lat;\r\n        this.$emit(\"on-click\", this.currentValue);\r\n      });\r\n    },\r\n    flyTo() {\r\n      if (this.data) {\r\n        try {\r\n          let lngLat = this.data.split(\",\");\r\n          let lng = lngLat[0].trim();\r\n          let lat = lngLat[1].trim();\r\n          this.currentValue = this.data;\r\n          if (this.marker) {\r\n            this.marker.remove();\r\n          }\r\n          this.marker = new mapboxgl.Marker({\r\n            offset: [0, -25],\r\n            draggable: true,\r\n          })\r\n            .setLngLat([lng, lat])\r\n            .addTo(this.mapbox);\r\n          this.mapbox.flyTo({\r\n            center: [lng, lat],\r\n            essential: true,\r\n          });\r\n        } catch (error) {\r\n          console.log(error);\r\n          this.$Message.error(\"您输入的坐标不合法\");\r\n        }\r\n      } else {\r\n        this.currentValue = \"\";\r\n        if (this.marker) {\r\n          this.marker.remove();\r\n        }\r\n        this.mapbox.flyTo({\r\n          center: this.center,\r\n          zoom: 9,\r\n          essential: true,\r\n        });\r\n      }\r\n    },\r\n    handleChange(v) {\r\n      this.$emit(\"input\", this.data);\r\n      this.$emit(\"on-change\", this.data);\r\n    },\r\n    setData(value) {\r\n      if (!this.mapbox) {\r\n        this.init();\r\n      }\r\n      if (value != this.data) {\r\n        this.data = value;\r\n        this.$emit(\"input\", this.data);\r\n        this.$emit(\"on-change\", this.data);\r\n      }\r\n    },\r\n    handleFull() {\r\n      this.full = !this.full;\r\n      if (this.full) {\r\n        this.modalHeight = \"100%\";\r\n      } else {\r\n        this.modalHeight = \"500px\";\r\n      }\r\n      setTimeout(() => {\r\n        this.mapbox.resize();\r\n      }, 10);\r\n    },\r\n    handleShow() {\r\n      if (!config.mapboxToken) {\r\n        this.$Message.warning(\"请先配置Mapbox地图的accessToken\");\r\n        return;\r\n      }\r\n      this.showModal = true;\r\n    },\r\n    changeModal(v) {\r\n      if (v) {\r\n        setTimeout(() => {\r\n          this.mapbox.resize();\r\n          this.flyTo();\r\n        }, 10);\r\n      }\r\n    },\r\n    handelSubmit() {\r\n      if (!this.currentValue) {\r\n        this.$Message.warning(\"请在地图中点击鼠标选择一个地点\");\r\n        return;\r\n      }\r\n      this.data = this.currentValue;\r\n      this.$emit(\"input\", this.data);\r\n      this.$emit(\"on-change\", this.data);\r\n      this.showModal = false;\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    // 调用销毁 API 对当前编辑器实例进行销毁\r\n    if (this.mapbox != null) {\r\n      this.mapbox.remove();\r\n    }\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.setData(val);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.mapboxgl-style-list {\r\n  display: none;\r\n}\r\n\r\n.mapboxgl-ctrl-group .mapboxgl-style-list button {\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  display: block;\r\n  font-size: 14px;\r\n  padding: 8px 8px 6px;\r\n  text-align: right;\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n\r\n.mapboxgl-style-list button.active {\r\n  font-weight: bold;\r\n}\r\n\r\n.mapboxgl-style-list button:hover {\r\n  background-color: rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.mapboxgl-style-list button + button {\r\n  border-top: 1px solid #ddd;\r\n}\r\n\r\n.mapboxgl-style-switcher {\r\n  background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTQuODQ5cHgiIGhlaWdodD0iNTQuODQ5cHgiIHZpZXdCb3g9IjAgMCA1NC44NDkgNTQuODQ5IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1NC44NDkgNTQuODQ5OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGc+PGc+PGc+PHBhdGggZD0iTTU0LjQ5NywzOS42MTRsLTEwLjM2My00LjQ5bC0xNC45MTcsNS45NjhjLTAuNTM3LDAuMjE0LTEuMTY1LDAuMzE5LTEuNzkzLDAuMzE5Yy0wLjYyNywwLTEuMjU0LTAuMTA0LTEuNzktMC4zMThsLTE0LjkyMS01Ljk2OEwwLjM1MSwzOS42MTRjLTAuNDcyLDAuMjAzLTAuNDY3LDAuNTI0LDAuMDEsMC43MTZMMjYuNTYsNTAuODFjMC40NzcsMC4xOTEsMS4yNTEsMC4xOTEsMS43MjksMEw1NC40ODgsNDAuMzNDNTQuOTY0LDQwLjEzOSw1NC45NjksMzkuODE3LDU0LjQ5NywzOS42MTR6Ii8+PHBhdGggZD0iTTU0LjQ5NywyNy41MTJsLTEwLjM2NC00LjQ5MWwtMTQuOTE2LDUuOTY2Yy0wLjUzNiwwLjIxNS0xLjE2NSwwLjMyMS0xLjc5MiwwLjMyMWMtMC42MjgsMC0xLjI1Ni0wLjEwNi0xLjc5My0wLjMyMWwtMTQuOTE4LTUuOTY2TDAuMzUxLDI3LjUxMmMtMC40NzIsMC4yMDMtMC40NjcsMC41MjMsMC4wMSwwLjcxNkwyNi41NiwzOC43MDZjMC40NzcsMC4xOSwxLjI1MSwwLjE5LDEuNzI5LDBsMjYuMTk5LTEwLjQ3OUM1NC45NjQsMjguMDM2LDU0Ljk2OSwyNy43MTYsNTQuNDk3LDI3LjUxMnoiLz48cGF0aCBkPSJNMC4zNjEsMTYuMTI1bDEzLjY2Miw1LjQ2NWwxMi41MzcsNS4wMTVjMC40NzcsMC4xOTEsMS4yNTEsMC4xOTEsMS43MjksMGwxMi41NDEtNS4wMTZsMTMuNjU4LTUuNDYzYzAuNDc3LTAuMTkxLDAuNDgtMC41MTEsMC4wMS0wLjcxNkwyOC4yNzcsNC4wNDhjLTAuNDcxLTAuMjA0LTEuMjM2LTAuMjA0LTEuNzA4LDBMMC4zNTEsMTUuNDFDLTAuMTIxLDE1LjYxNC0wLjExNiwxNS45MzUsMC4zNjEsMTYuMTI1eiIvPjwvZz48L2c+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg==);\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: 70%;\r\n}\r\n.map-modal {\r\n  .ivu-modal-body {\r\n    padding: 0px;\r\n  }\r\n}\r\n</style>"]}]}