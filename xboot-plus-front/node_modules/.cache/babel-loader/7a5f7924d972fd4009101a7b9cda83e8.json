{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\file-upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\file-upload.vue","mtime":1651629755193},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdXBsb2FkRmlsZSB9IGZyb20gIkAvYXBpL2luZGV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmaWxlVXBsb2FkIiwKICBwcm9wczogewogICAgdmFsdWU6IG51bGwsCiAgICBzaXplOiBTdHJpbmcsCiAgICB0eXBlOiBTdHJpbmcsCiAgICBtdWx0aTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGxpbWl0OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMTAKICAgIH0sCiAgICBnaG9zdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgc2hhcGU6IFN0cmluZywKICAgIGljb246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiaW9zLWNsb3VkLXVwbG9hZC1vdXRsaW5lIgogICAgfSwKICAgIHRleHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAi5LiK5Lyg5paH5Lu2IgogICAgfSwKICAgIG1heFNpemU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA1CiAgICB9LAogICAgYWNjZXB0OiBTdHJpbmcsCiAgICBzaG93VXBsb2FkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBub0RhdGFUZXh0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIuaaguaXoOaVsOaNriIKICAgIH0sCiAgICBzaG93VGlwOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICB0aXBTaXplOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNTAKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdCgpIHsKICAgICAgaWYgKHRoaXMuYWNjZXB0KSB7CiAgICAgICAgdmFyIGZvcm1hdCA9IFtdOwogICAgICAgIHRoaXMuYWNjZXB0LnNwbGl0KCIsIikuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgZm9ybWF0LnB1c2goZS5yZXBsYWNlKCIuIiwgIiIpLnJlcGxhY2UoIiAiLCAiIikpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmb3JtYXQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWNjZXNzVG9rZW46IHt9LAogICAgICBjdXJyZW50VmFsdWU6IHRoaXMudmFsdWUsCiAgICAgIHVwbG9hZEZpbGVVcmw6IHVwbG9hZEZpbGUsCiAgICAgIGZpbGVMaXN0OiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSB7CiAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuZ2V0U3RvcmUoImFjY2Vzc1Rva2VuIikKICAgICAgfTsKICAgICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodGhpcy52YWx1ZSk7CiAgICB9LAogICAgaGFuZGxlRm9ybWF0RXJyb3I6IGZ1bmN0aW9uIGhhbmRsZUZvcm1hdEVycm9yKGZpbGUpIHsKICAgICAgdGhpcy4kTm90aWNlLndhcm5pbmcoewogICAgICAgIHRpdGxlOiAi5LiN5pSv5oyB55qE5paH5Lu25qC85byPIiwKICAgICAgICBkZXNjOiAi5omA6YCJ5paH5Lu24oCYICIgKyBmaWxlLm5hbWUgKyAiIOKAmeagvOW8j+S4jeato+ehriwg6K+36YCJ5oupICIgKyB0aGlzLmFjY2VwdCArICIg5qC85byP5paH5Lu2IgogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVNYXhTaXplOiBmdW5jdGlvbiBoYW5kbGVNYXhTaXplKGZpbGUpIHsKICAgICAgdGhpcy4kTm90aWNlLndhcm5pbmcoewogICAgICAgIHRpdGxlOiAi5paH5Lu25aSn5bCP6L+H5aSnIiwKICAgICAgICBkZXNjOiAi5omA6YCJ5paH5Lu24oCYICIgKyBmaWxlLm5hbWUgKyAiIOKAmeWkp+Wwj+i/h+Wkpywg5LiN5b6X6LaF6L+HICIgKyB0aGlzLm1heFNpemUgKyAiTS4iCiAgICAgIH0pOwogICAgfSwKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgaWYgKHRoaXMubXVsdGkgJiYgdGhpcy5maWxlTGlzdC5sZW5ndGggPj0gdGhpcy5saW1pdCkgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5pyA5aSa5Y+q6IO95LiK5LygIiArIHRoaXMubGltaXQgKyAi5byg5Zu+54mHIik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVTdWNjZXNzKHJlcywgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgaWYgKHRoaXMubXVsdGkpIHsKICAgICAgICAgIHRoaXMuY3VycmVudFZhbHVlLnB1c2goewogICAgICAgICAgICB1cmw6IHJlcy5yZXN1bHQsCiAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSwKICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB7CiAgICAgICAgICAgIHVybDogcmVzLnJlc3VsdCwKICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLAogICAgICAgICAgICBzaXplOiBmaWxlLnNpemUKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMuY3VycmVudFZhbHVlKTsKICAgICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmN1cnJlbnRWYWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlsZS5wZXJjZW50YWdlID0gMDsKICAgICAgICBmaWxlLnN0YXR1cyA9ICJmYWlsIjsKICAgICAgICBmaWxlLm5hbWUgKz0gIu+8iOS4iuS8oOWksei0pe+8iSI7CiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVFcnJvcjogZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyb3IsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyb3IudG9TdHJpbmcoKSk7CiAgICB9LAogICAgaGFuZGxlUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUHJldmlldyhmaWxlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgc2hvd1RpcCA9IHRoaXMuc2hvd1RpcCAmJiBmaWxlLnNpemUgJiYgZmlsZS5zaXplID4gdGhpcy50aXBTaXplICogMTAyNCAqIDEwMjQ7CgogICAgICBpZiAoc2hvd1RpcCkgewogICAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oewogICAgICAgICAgdGl0bGU6ICLmlofku7bovoPlpKfmj5DnpLoiLAogICAgICAgICAgY29udGVudDogIuivpeaWh+S7tuWkp+Wwj+W3sui2hei/hyAiICsgdGhpcy50aXBTaXplICsgIiBNQu+8jOehruiupOS4i+i9ve+8nyIsCiAgICAgICAgICBva1RleHQ6ICLnu6fnu63kuIvovb0iLAogICAgICAgICAgb25PazogZnVuY3Rpb24gb25PaygpIHsKICAgICAgICAgICAgX3RoaXMuZG93bmxvYWQoZmlsZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kb3dubG9hZChmaWxlKTsKICAgICAgfQogICAgfSwKICAgIGRvd25sb2FkOiBmdW5jdGlvbiBkb3dubG9hZChmaWxlKSB7CiAgICAgIGlmICghZmlsZS51cmwpIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCLml6DmlYjnmoTpk77mjqUiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHdpbmRvdy5vcGVuKGZpbGUudXJsICsgIj9hdHRuYW1lPSZyZXNwb25zZS1jb250ZW50LXR5cGU9YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJmZpbGVuYW1lPSIgKyBmaWxlLm5hbWUpOwogICAgfSwKICAgIGhhbmRsZVJlbW92ZTogZnVuY3Rpb24gaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGlmICh0aGlzLm11bHRpKSB7CiAgICAgICAgdmFyIHJlID0gW107CiAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKGUuc3RhdHVzID09ICJmaW5pc2hlZCIpIHsKICAgICAgICAgICAgcmUucHVzaCh7CiAgICAgICAgICAgICAgdXJsOiBlLnVybCwKICAgICAgICAgICAgICBuYW1lOiBlLm5hbWUsCiAgICAgICAgICAgICAgc2l6ZTogZS5zaXplCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuZmlsZUxpc3QgPSByZTsKICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHJlOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChmaWxlTGlzdC5sZW5ndGggPiAwICYmIGZpbGVMaXN0WzBdLnN0YXR1cyA9PSAiZmluaXNoZWQiKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHsKICAgICAgICAgICAgdXJsOiBmaWxlTGlzdFswXS51cmwsCiAgICAgICAgICAgIG5hbWU6IGZpbGVMaXN0WzBdLm5hbWUsCiAgICAgICAgICAgIHNpemU6IGZpbGVMaXN0WzBdLnNpemUKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmZpbGVMaXN0ID0gW3RoaXMuY3VycmVudFZhbHVlXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB7fTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5jdXJyZW50VmFsdWUpOwogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmN1cnJlbnRWYWx1ZSk7CiAgICB9LAogICAgc2V0Q3VycmVudFZhbHVlOiBmdW5jdGlvbiBzZXRDdXJyZW50VmFsdWUodikgewogICAgICBpZiAoIXYubGVuZ3RoICYmIHYubGVuZ3RoICE9IDApIHsKICAgICAgICAvLyDljZXkuKoKICAgICAgICBpZiAodGhpcy5tdWx0aSkgewogICAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLlpJrkuKrkuIrkvKDku4XmlK/mjIHkvKDlhaXmlbDnu4TmlbDmja7nsbvlnosiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghdi5uYW1lICYmICF2LnVybCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB2OwogICAgICAgIHRoaXMuZmlsZUxpc3QucHVzaCh2KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDlpJrkuKoKICAgICAgICBpZiAoIXRoaXMubXVsdGkpIHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5Y2V5Liq5LiK5Lyg5LuF5pSv5oyB5Lyg5YWl5a2X56ym5Liy5pWw5o2u57G75Z6LIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAodi5sZW5ndGggPiB0aGlzLmxpbWl0KSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGltaXQ7IGkrKykgewogICAgICAgICAgICB0aGlzLmZpbGVMaXN0LnB1c2goewogICAgICAgICAgICAgIHVybDogdltpXS51cmwsCiAgICAgICAgICAgICAgbmFtZTogdltpXS5uYW1lLAogICAgICAgICAgICAgIHNpemU6IHZbaV0uc2l6ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMuZmlsZUxpc3Q7CiAgICAgICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMuY3VycmVudFZhbHVlKTsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5pyA5aSa5Y+q6IO95LiK5LygIiArIHRoaXMubGltaXQgKyAi5Liq5paH5Lu2Iik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdjsKICAgICAgICAgIHRoaXMuZmlsZUxpc3QgPSB2OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jb3VudCA9IHRoaXMuY3VycmVudFZhbHVlLmxlbmd0aDsKICAgICAgdGhpcy4kZW1pdCgib24tY2hhbmdlIiwgdGhpcy5jdXJyZW50VmFsdWUpOwogICAgfSwKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy4kcmVmcy51cGxvYWQuY2xlYXJGaWxlcygpOwoKICAgICAgaWYgKHRoaXMubXVsdGkpIHsKICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IFtdOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5jdXJyZW50VmFsdWUpOwogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCB0aGlzLmN1cnJlbnRWYWx1ZSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHZhbCkgewogICAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh2YWwpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;EACAA,kBADA;EAEAC;IACAC,WADA;IAEAC,YAFA;IAGAC,YAHA;IAIAC;MACAD,aADA;MAEAE;IAFA,CAJA;IAQAC;MACAH,YADA;MAEAE;IAFA,CARA;IAYAE;MACAJ,aADA;MAEAE;IAFA,CAZA;IAgBAG;MACAL,aADA;MAEAE;IAFA,CAhBA;IAoBAI,aApBA;IAqBAC;MACAP,YADA;MAEAE;IAFA,CArBA;IAyBAM;MACAR,YADA;MAEAE;IAFA,CAzBA;IA6BAO;MACAT,YADA;MAEAE;IAFA,CA7BA;IAiCAQ,cAjCA;IAkCAC;MACAX,aADA;MAEAE;IAFA,CAlCA;IAsCAU;MACAZ,YADA;MAEAE;IAFA,CAtCA;IA0CAW;MACAb,aADA;MAEAE;IAFA,CA1CA;IA8CAY;MACAd,YADA;MAEAE;IAFA;EA9CA,CAFA;EAqDAa;IACAC,MADA,oBACA;MACA;QACA;QACA;UACAA;QACA,CAFA;QAGA;MACA,CANA,MAMA;QACA;MACA;IACA;EAXA,CArDA;EAkEAC,IAlEA,kBAkEA;IACA;MACAC,eADA;MAEAC,wBAFA;MAGAC,yBAHA;MAIAC;IAJA;EAMA,CAzEA;EA0EAC;IACAC,IADA,kBACA;MACA;QACAL;MADA;MAGA;IACA,CANA;IAOAM,iBAPA,6BAOAC,IAPA,EAOA;MACA;QACAC,iBADA;QAEAC,MACA,WACAF,SADA,GAEA,eAFA,GAGA,WAHA,GAIA;MAPA;IASA,CAjBA;IAkBAG,aAlBA,yBAkBAH,IAlBA,EAkBA;MACA;QACAC,eADA;QAEAC,MACA,WACAF,SADA,GAEA,eAFA,GAGA,YAHA,GAIA;MAPA;IASA,CA5BA;IA6BAI,YA7BA,wBA6BAJ,IA7BA,EA6BA;MACA;QACA;QACA;MACA;;MACA;IACA,CAnCA;IAoCAK,aApCA,yBAoCAC,GApCA,EAoCAN,IApCA,EAoCAJ,QApCA,EAoCA;MACA;QACA;UACA;YACAW,eADA;YAEApC,eAFA;YAGAG;UAHA;QAKA,CANA,MAMA;UACA;YACAiC,eADA;YAEApC,eAFA;YAGAG;UAHA;QAKA;;QACA;QACA;MACA,CAhBA,MAgBA;QACA0B;QACAA;QACAA;QACA;MACA;IACA,CA3DA;IA4DAQ,WA5DA,uBA4DAC,KA5DA,EA4DAT,IA5DA,EA4DAJ,QA5DA,EA4DA;MACA;IACA,CA9DA;IA+DAc,aA/DA,yBA+DAV,IA/DA,EA+DA;MAAA;;MACA,cACA,mEADA;;MAEA;QACA;UACAC,eADA;UAEAU,iDAFA;UAGAC,cAHA;UAIAC;YACA;UACA;QANA;MAQA,CATA,MASA;QACA;MACA;IACA,CA9EA;IA+EAC,QA/EA,oBA+EAd,IA/EA,EA+EA;MACA;QACA;QACA;MACA;;MACAe,YACAf,WACA,oEADA,GAEAA,SAHA;IAKA,CAzFA;IA0FAgB,YA1FA,wBA0FAhB,IA1FA,EA0FAJ,QA1FA,EA0FA;MACA;QACA;QACAA;UACA;YACAqB;cACAV,UADA;cAEApC,YAFA;cAGAG;YAHA;UAKA;QACA,CARA;QASA;QACA;MACA,CAbA,MAaA;QACA;UACA;YACAiC,oBADA;YAEApC,sBAFA;YAGAG;UAHA;UAKA;QACA,CAPA,MAOA;UACA;QACA;MACA;;MACA;MACA;IACA,CAtHA;IAuHA4C,eAvHA,2BAuHAC,CAvHA,EAuHA;MACA;QACA;QACA;UACA;UACA;QACA;;QACA;UACA;QACA;;QACA;QACA;MACA,CAXA,MAWA;QACA;QACA;UACA;UACA;QACA;;QACA;UACA;YACA;cACAZ,aADA;cAEApC,eAFA;cAGAG;YAHA;UAKA;;UACA;UACA;UACA;QACA,CAXA,MAWA;UACA;UACA;QACA;MACA;;MACA;MACA;IACA,CA3JA;IA4JA8C,KA5JA,mBA4JA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;MACA;IACA;EArKA,CA1EA;EAiPAC;IACAhD,KADA,iBACAiD,GADA,EACA;MACA;IACA;EAHA,CAjPA;EAsPAC,OAtPA,qBAsPA;IACA;EACA;AAxPA","names":["name","props","value","size","type","multi","default","limit","ghost","disabled","shape","icon","text","maxSize","accept","showUpload","noDataText","showTip","tipSize","computed","format","data","accessToken","currentValue","uploadFileUrl","fileList","methods","init","handleFormatError","file","title","desc","handleMaxSize","beforeUpload","handleSuccess","res","url","handleError","error","handlePreview","content","okText","onOk","download","window","handleRemove","re","setCurrentValue","v","clear","watch","val","mounted"],"sourceRoot":"src/views/my-components/xboot","sources":["file-upload.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div :class=\"{ 'file-upload-wrap-nobutton': !showUpload }\">\r\n      <Upload\r\n        :action=\"uploadFileUrl\"\r\n        :headers=\"accessToken\"\r\n        :on-success=\"handleSuccess\"\r\n        :on-error=\"handleError\"\r\n        :format=\"format\"\r\n        :accept=\"accept\"\r\n        :max-size=\"maxSize * 1024\"\r\n        :on-format-error=\"handleFormatError\"\r\n        :on-exceeded-size=\"handleMaxSize\"\r\n        :before-upload=\"beforeUpload\"\r\n        :default-file-list=\"fileList\"\r\n        :on-preview=\"handlePreview\"\r\n        :on-remove=\"handleRemove\"\r\n        ref=\"upload\"\r\n      >\r\n        <Button\r\n          :type=\"type\"\r\n          :ghost=\"ghost\"\r\n          :shape=\"shape\"\r\n          :size=\"size\"\r\n          :disabled=\"disabled\"\r\n          :icon=\"icon\"\r\n          v-show=\"showUpload\"\r\n          >{{ text }}</Button\r\n        >\r\n      </Upload>\r\n      <span v-show=\"!showUpload && fileList.length < 1\">{{ noDataText }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { uploadFile } from \"@/api/index\";\r\nexport default {\r\n  name: \"fileUpload\",\r\n  props: {\r\n    value: null,\r\n    size: String,\r\n    type: String,\r\n    multi: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    limit: {\r\n      type: Number,\r\n      default: 10,\r\n    },\r\n    ghost: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    shape: String,\r\n    icon: {\r\n      type: String,\r\n      default: \"ios-cloud-upload-outline\",\r\n    },\r\n    text: {\r\n      type: String,\r\n      default: \"上传文件\",\r\n    },\r\n    maxSize: {\r\n      type: Number,\r\n      default: 5,\r\n    },\r\n    accept: String,\r\n    showUpload: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    noDataText: {\r\n      type: String,\r\n      default: \"暂无数据\",\r\n    },\r\n    showTip: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    tipSize: {\r\n      type: Number,\r\n      default: 50,\r\n    },\r\n  },\r\n  computed: {\r\n    format() {\r\n      if (this.accept) {\r\n        let format = [];\r\n        this.accept.split(\",\").forEach((e) => {\r\n          format.push(e.replace(\".\", \"\").replace(\" \", \"\"));\r\n        });\r\n        return format;\r\n      } else {\r\n        return [];\r\n      }\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      accessToken: {},\r\n      currentValue: this.value,\r\n      uploadFileUrl: uploadFile,\r\n      fileList: [],\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.accessToken = {\r\n        accessToken: this.getStore(\"accessToken\"),\r\n      };\r\n      this.setCurrentValue(this.value);\r\n    },\r\n    handleFormatError(file) {\r\n      this.$Notice.warning({\r\n        title: \"不支持的文件格式\",\r\n        desc:\r\n          \"所选文件‘ \" +\r\n          file.name +\r\n          \" ’格式不正确, 请选择 \" +\r\n          this.accept +\r\n          \" 格式文件\",\r\n      });\r\n    },\r\n    handleMaxSize(file) {\r\n      this.$Notice.warning({\r\n        title: \"文件大小过大\",\r\n        desc:\r\n          \"所选文件‘ \" +\r\n          file.name +\r\n          \" ’大小过大, 不得超过 \" +\r\n          this.maxSize +\r\n          \"M.\",\r\n      });\r\n    },\r\n    beforeUpload(file) {\r\n      if (this.multi && this.fileList.length >= this.limit) {\r\n        this.$Message.warning(\"最多只能上传\" + this.limit + \"张图片\");\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    handleSuccess(res, file, fileList) {\r\n      if (res.success) {\r\n        if (this.multi) {\r\n          this.currentValue.push({\r\n            url: res.result,\r\n            name: file.name,\r\n            size: file.size,\r\n          });\r\n        } else {\r\n          this.currentValue = {\r\n            url: res.result,\r\n            name: file.name,\r\n            size: file.size,\r\n          };\r\n        }\r\n        this.$emit(\"input\", this.currentValue);\r\n        this.$emit(\"on-change\", this.currentValue);\r\n      } else {\r\n        file.percentage = 0;\r\n        file.status = \"fail\";\r\n        file.name += \"（上传失败）\";\r\n        this.$Message.error(res.message);\r\n      }\r\n    },\r\n    handleError(error, file, fileList) {\r\n      this.$Message.error(error.toString());\r\n    },\r\n    handlePreview(file) {\r\n      let showTip =\r\n        this.showTip && file.size && file.size > this.tipSize * 1024 * 1024;\r\n      if (showTip) {\r\n        this.$Modal.confirm({\r\n          title: \"文件较大提示\",\r\n          content: \"该文件大小已超过 \" + this.tipSize + \" MB，确认下载？\",\r\n          okText: \"继续下载\",\r\n          onOk: () => {\r\n            this.download(file);\r\n          },\r\n        });\r\n      } else {\r\n        this.download(file);\r\n      }\r\n    },\r\n    download(file) {\r\n      if (!file.url) {\r\n        this.$Message.error(\"无效的链接\");\r\n        return;\r\n      }\r\n      window.open(\r\n        file.url +\r\n          \"?attname=&response-content-type=application/octet-stream&filename=\" +\r\n          file.name\r\n      );\r\n    },\r\n    handleRemove(file, fileList) {\r\n      if (this.multi) {\r\n        let re = [];\r\n        fileList.forEach((e) => {\r\n          if (e.status == \"finished\") {\r\n            re.push({\r\n              url: e.url,\r\n              name: e.name,\r\n              size: e.size,\r\n            });\r\n          }\r\n        });\r\n        this.fileList = re;\r\n        this.currentValue = re;\r\n      } else {\r\n        if (fileList.length > 0 && fileList[0].status == \"finished\") {\r\n          this.currentValue = {\r\n            url: fileList[0].url,\r\n            name: fileList[0].name,\r\n            size: fileList[0].size,\r\n          };\r\n          this.fileList = [this.currentValue];\r\n        } else {\r\n          this.currentValue = {};\r\n        }\r\n      }\r\n      this.$emit(\"input\", this.currentValue);\r\n      this.$emit(\"on-change\", this.currentValue);\r\n    },\r\n    setCurrentValue(v) {\r\n      if (!v.length && v.length != 0) {\r\n        // 单个\r\n        if (this.multi) {\r\n          this.$Message.warning(\"多个上传仅支持传入数组数据类型\");\r\n          return;\r\n        }\r\n        if (!v.name && !v.url) {\r\n          return;\r\n        }\r\n        this.currentValue = v;\r\n        this.fileList.push(v);\r\n      } else {\r\n        // 多个\r\n        if (!this.multi) {\r\n          this.$Message.warning(\"单个上传仅支持传入字符串数据类型\");\r\n          return;\r\n        }\r\n        if (v.length > this.limit) {\r\n          for (let i = 0; i < this.limit; i++) {\r\n            this.fileList.push({\r\n              url: v[i].url,\r\n              name: v[i].name,\r\n              size: v[i].size,\r\n            });\r\n          }\r\n          this.currentValue = this.fileList;\r\n          this.$emit(\"input\", this.currentValue);\r\n          this.$Message.warning(\"最多只能上传\" + this.limit + \"个文件\");\r\n        } else {\r\n          this.currentValue = v;\r\n          this.fileList = v;\r\n        }\r\n      }\r\n      this.count = this.currentValue.length;\r\n      this.$emit(\"on-change\", this.currentValue);\r\n    },\r\n    clear() {\r\n      this.$refs.upload.clearFiles();\r\n      if (this.multi) {\r\n        this.currentValue = [];\r\n      } else {\r\n        this.currentValue = {};\r\n      }\r\n      this.$emit(\"input\", this.currentValue);\r\n      this.$emit(\"on-change\", this.currentValue);\r\n    },\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.setCurrentValue(val);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.file-upload-wrap-nobutton {\r\n  .ivu-upload-list {\r\n    margin-top: -20px;\r\n  }\r\n}\r\n</style>\r\n\r\n"]}]}