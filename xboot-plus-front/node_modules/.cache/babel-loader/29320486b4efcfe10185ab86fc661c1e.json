{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\main-components\\tags-page-opened.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\main-components\\tags-page-opened.vue","mtime":1651629755173},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJ0YWdzUGFnZU9wZW5lZCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRQYWdlTmFtZTogdGhpcy4kcm91dGUubmFtZSwKICAgICAgdGFnQm9keUxlZnQ6IDAsCiAgICAgIHBhZGRpbmdSaWdodDogNDAsCiAgICAgIHJlZnNUYWc6IFtdLAogICAgICB0YWdzQ291bnQ6IDEKICAgIH07CiAgfSwKICBwcm9wczogewogICAgcGFnZVRhZ3NMaXN0OiBBcnJheSwKICAgIGJlZm9yZVB1c2g6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KGl0ZW0pIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRpdGxlOiBmdW5jdGlvbiB0aXRsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmFwcC5jdXJyZW50VGl0bGU7CiAgICB9LAogICAgdGFnc0xpc3Q6IGZ1bmN0aW9uIHRhZ3NMaXN0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYXBwLnBhZ2VPcGVuZWRMaXN0OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaXRlbVRpdGxlOiBmdW5jdGlvbiBpdGVtVGl0bGUoaXRlbSkgewogICAgICBpZiAoaXRlbS5sb2NhbGl6ZSAmJiBpdGVtLmkxOG4pIHsKICAgICAgICByZXR1cm4gdGhpcy4kdChpdGVtLmkxOG4pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBpdGVtLnRpdGxlOwogICAgICB9CiAgICB9LAogICAgY2xvc2VQYWdlOiBmdW5jdGlvbiBjbG9zZVBhZ2UoZXZlbnQsIG5hbWUpIHsKICAgICAgdmFyIHBhZ2VPcGVuZWRMaXN0ID0gdGhpcy4kc3RvcmUuc3RhdGUuYXBwLnBhZ2VPcGVuZWRMaXN0OwogICAgICB2YXIgbGFzdFBhZ2VPYmogPSBwYWdlT3BlbmVkTGlzdFswXTsKCiAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlTmFtZSA9PSBuYW1lKSB7CiAgICAgICAgdmFyIGxlbiA9IHBhZ2VPcGVuZWRMaXN0Lmxlbmd0aDsKCiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgaWYgKHBhZ2VPcGVuZWRMaXN0W2ldLm5hbWUgPT0gbmFtZSkgewogICAgICAgICAgICBpZiAoaSA8IGxlbiAtIDEpIHsKICAgICAgICAgICAgICBsYXN0UGFnZU9iaiA9IHBhZ2VPcGVuZWRMaXN0W2kgKyAxXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBsYXN0UGFnZU9iaiA9IHBhZ2VPcGVuZWRMaXN0W2kgLSAxXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciB0YWdXaWR0aCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLm9mZnNldFdpZHRoOwogICAgICAgIHRoaXMudGFnQm9keUxlZnQgPSBNYXRoLm1pbih0aGlzLnRhZ0JvZHlMZWZ0ICsgdGFnV2lkdGgsIDApOwogICAgICB9CgogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInJlbW92ZVRhZyIsIG5hbWUpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoImNsb3NlUGFnZSIsIG5hbWUpOwogICAgICBwYWdlT3BlbmVkTGlzdCA9IHRoaXMuJHN0b3JlLnN0YXRlLmFwcC5wYWdlT3BlbmVkTGlzdDsKICAgICAgbG9jYWxTdG9yYWdlLnBhZ2VPcGVuZWRMaXN0ID0gSlNPTi5zdHJpbmdpZnkocGFnZU9wZW5lZExpc3QpOwoKICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2VOYW1lID09IG5hbWUpIHsKICAgICAgICB0aGlzLmxpbmtUbyhsYXN0UGFnZU9iaik7CiAgICAgIH0KICAgIH0sCiAgICBsaW5rVG86IGZ1bmN0aW9uIGxpbmtUbyhpdGVtKSB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09IGl0ZW0ubmFtZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHJvdXRlck9iaiA9IHt9OwogICAgICByb3V0ZXJPYmoubmFtZSA9IGl0ZW0ubmFtZTsKCiAgICAgIGlmIChpdGVtLmFyZ3UpIHsKICAgICAgICByb3V0ZXJPYmoucGFyYW1zID0gaXRlbS5hcmd1OwogICAgICB9CgogICAgICBpZiAoaXRlbS5xdWVyeSkgewogICAgICAgIHJvdXRlck9iai5xdWVyeSA9IGl0ZW0ucXVlcnk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmJlZm9yZVB1c2goaXRlbSkpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChyb3V0ZXJPYmopOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlc2Nyb2xsOiBmdW5jdGlvbiBoYW5kbGVzY3JvbGwoZSkgewogICAgICB2YXIgdHlwZSA9IGUudHlwZTsKICAgICAgdmFyIGRlbHRhID0gMDsKCiAgICAgIGlmICh0eXBlID09ICJET01Nb3VzZVNjcm9sbCIgfHwgdHlwZSA9PSAibW91c2V3aGVlbCIpIHsKICAgICAgICBkZWx0YSA9IGUud2hlZWxEZWx0YSA/IGUud2hlZWxEZWx0YSA6IC0oZS5kZXRhaWwgfHwgMCkgKiA0MDsKICAgICAgfQoKICAgICAgdmFyIGxlZnQgPSAwOwoKICAgICAgaWYgKGRlbHRhID4gMCkgewogICAgICAgIGxlZnQgPSBNYXRoLm1pbigwLCB0aGlzLnRhZ0JvZHlMZWZ0ICsgZGVsdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLiRyZWZzLnNjcm9sbENvbi5vZmZzZXRXaWR0aCAtIDEwMCA8IHRoaXMuJHJlZnMuc2Nyb2xsQm9keS5vZmZzZXRXaWR0aCkgewogICAgICAgICAgaWYgKHRoaXMudGFnQm9keUxlZnQgPCAtKHRoaXMuJHJlZnMuc2Nyb2xsQm9keS5vZmZzZXRXaWR0aCAtIHRoaXMuJHJlZnMuc2Nyb2xsQ29uLm9mZnNldFdpZHRoICsgdGhpcy5wYWRkaW5nUmlnaHQpKSB7CiAgICAgICAgICAgIGxlZnQgPSB0aGlzLnRhZ0JvZHlMZWZ0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGVmdCA9IE1hdGgubWF4KHRoaXMudGFnQm9keUxlZnQgKyBkZWx0YSwgdGhpcy4kcmVmcy5zY3JvbGxDb24ub2Zmc2V0V2lkdGggLSB0aGlzLiRyZWZzLnNjcm9sbEJvZHkub2Zmc2V0V2lkdGggLSB0aGlzLnBhZGRpbmdSaWdodCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudGFnQm9keUxlZnQgPSAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy50YWdCb2R5TGVmdCA9IGxlZnQ7CiAgICB9LAogICAgaGFuZGxlVGFnc09wdGlvbjogZnVuY3Rpb24gaGFuZGxlVGFnc09wdGlvbih0eXBlKSB7CiAgICAgIGlmICh0eXBlID09ICJjbGVhckFsbCIpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImNsZWFyQWxsVGFncyIpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJob21lX2luZGV4IgogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiY2xlYXJPdGhlclRhZ3MiLCB0aGlzKTsKICAgICAgfQoKICAgICAgdGhpcy50YWdCb2R5TGVmdCA9IDA7CiAgICB9LAogICAgbW92ZVRvVmlldzogZnVuY3Rpb24gbW92ZVRvVmlldyh0YWcpIHsKICAgICAgaWYgKHRhZy5vZmZzZXRMZWZ0IDwgLXRoaXMudGFnQm9keUxlZnQpIHsKICAgICAgICAvLyDmoIfnrb7lnKjlj6/op4bljLrln5/lt6bkvqcKICAgICAgICB0aGlzLnRhZ0JvZHlMZWZ0ID0gLXRhZy5vZmZzZXRMZWZ0ICsgMTA7CiAgICAgIH0gZWxzZSBpZiAodGFnLm9mZnNldExlZnQgKyAxMCA+IC10aGlzLnRhZ0JvZHlMZWZ0ICYmIHRhZy5vZmZzZXRMZWZ0ICsgdGFnLm9mZnNldFdpZHRoIDwgLXRoaXMudGFnQm9keUxlZnQgKyB0aGlzLiRyZWZzLnNjcm9sbENvbi5vZmZzZXRXaWR0aCAtIHRoaXMucGFkZGluZ1JpZ2h0KSB7CiAgICAgICAgLy8g5qCH562+5Zyo5Y+v6KeG5Yy65Z+fCiAgICAgICAgdGhpcy50YWdCb2R5TGVmdCA9IE1hdGgubWluKDAsIHRoaXMuJHJlZnMuc2Nyb2xsQ29uLm9mZnNldFdpZHRoIC0gdGhpcy5wYWRkaW5nUmlnaHQgLSB0YWcub2Zmc2V0V2lkdGggLSB0YWcub2Zmc2V0TGVmdCAtIDIwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDmoIfnrb7lnKjlj6/op4bljLrln5/lj7PkvqcKICAgICAgICB0aGlzLnRhZ0JvZHlMZWZ0ID0gLSh0YWcub2Zmc2V0TGVmdCAtICh0aGlzLiRyZWZzLnNjcm9sbENvbi5vZmZzZXRXaWR0aCAtIHRoaXMucGFkZGluZ1JpZ2h0IC0gdGFnLm9mZnNldFdpZHRoKSArIDIwKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5yZWZzVGFnID0gdGhpcy4kcmVmcy50YWdzUGFnZU9wZW5lZDsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5yZWZzVGFnLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaWYgKF90aGlzLiRyb3V0ZS5uYW1lID09IGl0ZW0ubmFtZSkgewogICAgICAgICAgdmFyIHRhZyA9IF90aGlzLnJlZnNUYWdbaW5kZXhdLiRlbDsKCiAgICAgICAgICBfdGhpcy5tb3ZlVG9WaWV3KHRhZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sIDEpOyAvLyDov5nph4zkuI3orr7lrprml7blmajlsLHkvJrmnInlgY/np7tidWcKCiAgICB0aGlzLnRhZ3NDb3VudCA9IHRoaXMudGFnc0xpc3QubGVuZ3RoOwogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogZnVuY3Rpb24gJHJvdXRlKHRvKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5jdXJyZW50UGFnZU5hbWUgPSB0by5uYW1lOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLnJlZnNUYWcuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIGlmICh0by5uYW1lID09IGl0ZW0ubmFtZSkgewogICAgICAgICAgICB2YXIgdGFnID0gX3RoaXMyLnJlZnNUYWdbaW5kZXhdLiRlbDsKCiAgICAgICAgICAgIF90aGlzMi5tb3ZlVG9WaWV3KHRhZyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB0aGlzLnRhZ3NDb3VudCA9IHRoaXMudGFnc0xpc3QubGVuZ3RoOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;EACAA,sBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,iCADA;MAEAC,cAFA;MAGAC,gBAHA;MAIAC,WAJA;MAKAC;IALA;EAOA,CAVA;EAWAC;IACAC,mBADA;IAEAC;MACAC,cADA;MAEAC;QACA;MACA;IAJA;EAFA,CAXA;EAoBAC;IACAC,KADA,mBACA;MACA;IACA,CAHA;IAIAC,QAJA,sBAIA;MACA;IACA;EANA,CApBA;EA4BAC;IACAC,SADA,qBACAC,IADA,EACA;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAPA;IAQAC,SARA,qBAQAC,KARA,EAQAnB,IARA,EAQA;MACA;MACA;;MACA;QACA;;QACA;UACA;YACA;cACAoB;YACA,CAFA,MAEA;cACAA;YACA;;YACA;UACA;QACA;MACA,CAZA,MAYA;QACA;QACA;MACA;;MACA;MACA;MACAC;MACAC;;MACA;QACA;MACA;IACA,CAlCA;IAmCAC,MAnCA,kBAmCAN,IAnCA,EAmCA;MACA;QACA;MACA;;MACA;MACAO;;MACA;QACAA;MACA;;MACA;QACAA;MACA;;MACA;QACA;MACA;IACA,CAlDA;IAmDAC,YAnDA,wBAmDAC,CAnDA,EAmDA;MACA;MACA;;MACA;QACAC;MACA;;MACA;;MACA;QACAC;MACA,CAFA,MAEA;QACA,IACA,yCACA,iCAFA,EAGA;UACA,IACA,mBACA,EACA,oCACA,gCADA,GAEA,iBAHA,CAFA,EAOA;YACAA;UACA,CATA,MASA;YACAA,gBACA,wBADA,EAEA,mCACA,iCADA,GAEA,iBAJA;UAMA;QACA,CArBA,MAqBA;UACA;QACA;MACA;;MACA;IACA,CAvFA;IAwFAC,gBAxFA,4BAwFAnB,IAxFA,EAwFA;MACA;QACA;QACA;UACAV;QADA;MAGA,CALA,MAKA;QACA;MACA;;MACA;IACA,CAlGA;IAmGA8B,UAnGA,sBAmGAC,GAnGA,EAmGA;MACA;QACA;QACA;MACA,CAHA,MAGA,IACAA,2CACAA,mCACA,oBACA,gCADA,GAEA,iBALA,EAMA;QACA;QACA,4BACA,CADA,EAEA,mCACA,iBADA,GAEAA,eAFA,GAGAA,cAHA,GAIA,EANA;MAQA,CAhBA,MAgBA;QACA;QACA,qBACAA,kBACA,mCACA,iBADA,GAEAA,eAHA,IAIA,EALA;MAOA;IACA;EAjIA,CA5BA;EA+JAC,OA/JA,qBA+JA;IAAA;;IACA;IACAC;MACA;QACA;UACA;;UACA;QACA;MACA,CALA;IAMA,CAPA,EAOA,CAPA,EAFA,CASA;;IACA;EACA,CA1KA;EA2KAC;IACAC,MADA,kBACAC,EADA,EACA;MAAA;;MACA;MACA;QACA;UACA;YACA;;YACA;UACA;QACA,CALA;MAMA,CAPA;MAQA;IACA;EAZA;AA3KA","names":["name","data","currentPageName","tagBodyLeft","paddingRight","refsTag","tagsCount","props","pageTagsList","beforePush","type","default","computed","title","tagsList","methods","itemTitle","item","closePage","event","lastPageObj","pageOpenedList","localStorage","linkTo","routerObj","handlescroll","e","delta","left","handleTagsOption","moveToView","tag","mounted","setTimeout","watch","$route","to"],"sourceRoot":"src/views/main-components","sources":["tags-page-opened.vue"],"sourcesContent":["<template>\r\n  <div\r\n    ref=\"scrollCon\"\r\n    @DOMMouseScroll=\"handlescroll\"\r\n    @mousewheel=\"handlescroll\"\r\n    class=\"tags-scroll-content\"\r\n  >\r\n    <div\r\n      ref=\"scrollBody\"\r\n      class=\"tags-scroll-body\"\r\n      :style=\"{ left: tagBodyLeft + 'px' }\"\r\n    >\r\n      <transition-group name=\"taglist-moving-animation\">\r\n        <Tag\r\n          type=\"dot\"\r\n          v-for=\"item in pageTagsList\"\r\n          ref=\"tagsPageOpened\"\r\n          :key=\"item.name\"\r\n          :name=\"item.name\"\r\n          @on-close=\"closePage\"\r\n          @click.native=\"linkTo(item)\"\r\n          :closable=\"item.name == 'home_index' ? false : true\"\r\n          :color=\"\r\n            item.children\r\n              ? item.children[0].name == currentPageName\r\n                ? 'primary'\r\n                : 'default'\r\n              : item.name == currentPageName\r\n              ? 'primary'\r\n              : 'default'\r\n          \"\r\n          >{{ itemTitle(item) }}</Tag\r\n        >\r\n      </transition-group>\r\n    </div>\r\n    <div class=\"close-tag-content\">\r\n      <Dropdown\r\n        transfer\r\n        trigger=\"hover\"\r\n        @on-click=\"handleTagsOption\"\r\n        placement=\"bottom-end\"\r\n        transfer-class-name=\"close-tag-dropdown\"\r\n      >\r\n        <div class=\"icon-content\">\r\n          <Icon type=\"ios-arrow-down\" size=\"16\" />\r\n        </div>\r\n        <DropdownMenu slot=\"list\">\r\n          <DropdownItem name=\"clearAll\">{{ $t(\"closeAll\") }}</DropdownItem>\r\n          <DropdownItem name=\"clearOthers\">{{\r\n            $t(\"closeOthers\")\r\n          }}</DropdownItem>\r\n        </DropdownMenu>\r\n      </Dropdown>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"tagsPageOpened\",\r\n  data() {\r\n    return {\r\n      currentPageName: this.$route.name,\r\n      tagBodyLeft: 0,\r\n      paddingRight: 40,\r\n      refsTag: [],\r\n      tagsCount: 1,\r\n    };\r\n  },\r\n  props: {\r\n    pageTagsList: Array,\r\n    beforePush: {\r\n      type: Function,\r\n      default: (item) => {\r\n        return true;\r\n      },\r\n    },\r\n  },\r\n  computed: {\r\n    title() {\r\n      return this.$store.state.app.currentTitle;\r\n    },\r\n    tagsList() {\r\n      return this.$store.state.app.pageOpenedList;\r\n    },\r\n  },\r\n  methods: {\r\n    itemTitle(item) {\r\n      if (item.localize && item.i18n) {\r\n        return this.$t(item.i18n);\r\n      } else {\r\n        return item.title;\r\n      }\r\n    },\r\n    closePage(event, name) {\r\n      let pageOpenedList = this.$store.state.app.pageOpenedList;\r\n      let lastPageObj = pageOpenedList[0];\r\n      if (this.currentPageName == name) {\r\n        let len = pageOpenedList.length;\r\n        for (let i = 1; i < len; i++) {\r\n          if (pageOpenedList[i].name == name) {\r\n            if (i < len - 1) {\r\n              lastPageObj = pageOpenedList[i + 1];\r\n            } else {\r\n              lastPageObj = pageOpenedList[i - 1];\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        let tagWidth = event.target.parentNode.offsetWidth;\r\n        this.tagBodyLeft = Math.min(this.tagBodyLeft + tagWidth, 0);\r\n      }\r\n      this.$store.commit(\"removeTag\", name);\r\n      this.$store.commit(\"closePage\", name);\r\n      pageOpenedList = this.$store.state.app.pageOpenedList;\r\n      localStorage.pageOpenedList = JSON.stringify(pageOpenedList);\r\n      if (this.currentPageName == name) {\r\n        this.linkTo(lastPageObj);\r\n      }\r\n    },\r\n    linkTo(item) {\r\n      if (this.$route.name == item.name) {\r\n        return;\r\n      }\r\n      let routerObj = {};\r\n      routerObj.name = item.name;\r\n      if (item.argu) {\r\n        routerObj.params = item.argu;\r\n      }\r\n      if (item.query) {\r\n        routerObj.query = item.query;\r\n      }\r\n      if (this.beforePush(item)) {\r\n        this.$router.push(routerObj);\r\n      }\r\n    },\r\n    handlescroll(e) {\r\n      var type = e.type;\r\n      let delta = 0;\r\n      if (type == \"DOMMouseScroll\" || type == \"mousewheel\") {\r\n        delta = e.wheelDelta ? e.wheelDelta : -(e.detail || 0) * 40;\r\n      }\r\n      let left = 0;\r\n      if (delta > 0) {\r\n        left = Math.min(0, this.tagBodyLeft + delta);\r\n      } else {\r\n        if (\r\n          this.$refs.scrollCon.offsetWidth - 100 <\r\n          this.$refs.scrollBody.offsetWidth\r\n        ) {\r\n          if (\r\n            this.tagBodyLeft <\r\n            -(\r\n              this.$refs.scrollBody.offsetWidth -\r\n              this.$refs.scrollCon.offsetWidth +\r\n              this.paddingRight\r\n            )\r\n          ) {\r\n            left = this.tagBodyLeft;\r\n          } else {\r\n            left = Math.max(\r\n              this.tagBodyLeft + delta,\r\n              this.$refs.scrollCon.offsetWidth -\r\n                this.$refs.scrollBody.offsetWidth -\r\n                this.paddingRight\r\n            );\r\n          }\r\n        } else {\r\n          this.tagBodyLeft = 0;\r\n        }\r\n      }\r\n      this.tagBodyLeft = left;\r\n    },\r\n    handleTagsOption(type) {\r\n      if (type == \"clearAll\") {\r\n        this.$store.commit(\"clearAllTags\");\r\n        this.$router.push({\r\n          name: \"home_index\",\r\n        });\r\n      } else {\r\n        this.$store.commit(\"clearOtherTags\", this);\r\n      }\r\n      this.tagBodyLeft = 0;\r\n    },\r\n    moveToView(tag) {\r\n      if (tag.offsetLeft < -this.tagBodyLeft) {\r\n        // 标签在可视区域左侧\r\n        this.tagBodyLeft = -tag.offsetLeft + 10;\r\n      } else if (\r\n        tag.offsetLeft + 10 > -this.tagBodyLeft &&\r\n        tag.offsetLeft + tag.offsetWidth <\r\n          -this.tagBodyLeft +\r\n            this.$refs.scrollCon.offsetWidth -\r\n            this.paddingRight\r\n      ) {\r\n        // 标签在可视区域\r\n        this.tagBodyLeft = Math.min(\r\n          0,\r\n          this.$refs.scrollCon.offsetWidth -\r\n            this.paddingRight -\r\n            tag.offsetWidth -\r\n            tag.offsetLeft -\r\n            20\r\n        );\r\n      } else {\r\n        // 标签在可视区域右侧\r\n        this.tagBodyLeft = -(\r\n          tag.offsetLeft -\r\n          (this.$refs.scrollCon.offsetWidth -\r\n            this.paddingRight -\r\n            tag.offsetWidth) +\r\n          20\r\n        );\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.refsTag = this.$refs.tagsPageOpened;\r\n    setTimeout(() => {\r\n      this.refsTag.forEach((item, index) => {\r\n        if (this.$route.name == item.name) {\r\n          let tag = this.refsTag[index].$el;\r\n          this.moveToView(tag);\r\n        }\r\n      });\r\n    }, 1); // 这里不设定时器就会有偏移bug\r\n    this.tagsCount = this.tagsList.length;\r\n  },\r\n  watch: {\r\n    $route(to) {\r\n      this.currentPageName = to.name;\r\n      this.$nextTick(() => {\r\n        this.refsTag.forEach((item, index) => {\r\n          if (to.name == item.name) {\r\n            let tag = this.refsTag[index].$el;\r\n            this.moveToView(tag);\r\n          }\r\n        });\r\n      });\r\n      this.tagsCount = this.tagsList.length;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.tags-scroll-content {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  height: 40px;\r\n  z-index: 0;\r\n  overflow: hidden;\r\n  background: #f0f2f5;\r\n  padding-right: 40px;\r\n\r\n  .tags-scroll-body {\r\n    position: absolute;\r\n    padding: 2px 10px;\r\n    overflow: visible;\r\n    white-space: nowrap;\r\n    transition: left 0.3s ease;\r\n    // 自定义Tag样式\r\n    .ivu-tag {\r\n      font-size: 14px;\r\n      padding: 0 16px;\r\n      .ivu-icon-ios-close {\r\n        font-size: 16px;\r\n        margin-left: 3px !important;\r\n        margin-right: -5px;\r\n        top: 0px;\r\n      }\r\n      .ivu-tag-text {\r\n        color: #74788d;\r\n        transition: all 0.2s ease-in-out;\r\n      }\r\n      &:hover {\r\n        .ivu-tag-text {\r\n          color: #2d8cf0;\r\n        }\r\n      }\r\n    }\r\n    .ivu-tag-primary .ivu-tag-text {\r\n      color: #2d8cf0;\r\n    }\r\n    .ivu-tag-dot-inner {\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  .close-tag-content {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    .icon-content {\r\n      background: white;\r\n      box-shadow: -3px 0 15px 3px rgba(0, 0, 0, 0.1);\r\n      z-index: 10;\r\n      width: 40px;\r\n      height: 40px;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n.close-tag-dropdown {\r\n  right: 5px !important;\r\n}\r\n</style>\r\n"]}]}