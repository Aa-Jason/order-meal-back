{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\message\\message.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\message\\message.vue","mtime":1651629755176},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IENvb2tpZXMgZnJvbSAianMtY29va2llIjsKaW1wb3J0IHsgZ2V0TWVzc2FnZVNlbmREYXRhLCBlZGl0TWVzc2FnZVNlbmQsIGRlbGV0ZU1lc3NhZ2VTZW5kLCBhbGxNZXNzYWdlU2VuZCB9IGZyb20gIkAvYXBpL2luZGV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJtZXNzYWdlX2luZGV4IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgbWFya0FzcmVhZEJ0biA9IGZ1bmN0aW9uIG1hcmtBc3JlYWRCdG4oaCwgcGFyYW1zKSB7CiAgICAgIHJldHVybiBoKCJCdXR0b24iLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIGljb246ICJtZC1leWUtb2ZmIiwKICAgICAgICAgIHNpemU6ICJzbWFsbCIKICAgICAgICB9LAogICAgICAgIG9uOiB7CiAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgIC8vIOagh+iusOW3suivuwogICAgICAgICAgICB2YXIgdiA9IHBhcmFtcy5yb3c7IC8vIOi9rOaNom51bGzkuLoiIgoKICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiB2KSB7CiAgICAgICAgICAgICAgaWYgKHZbYXR0cl0gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdlthdHRyXSA9ICIiOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOwogICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2Uoc3RyKTsKICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAxOwogICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgZWRpdE1lc3NhZ2VTZW5kKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICBfdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5nZXRDb3VudCgpOwoKICAgICAgICAgICAgICAgIF90aGlzLnJlZnJlc2hNZXNzYWdlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sICLmoIfkuLrlt7Lor7siKTsKICAgIH07CgogICAgdmFyIGRlbGV0ZVJlYWxCdG4gPSBmdW5jdGlvbiBkZWxldGVSZWFsQnRuKGgsIHBhcmFtcykgewogICAgICByZXR1cm4gaCgiQnV0dG9uIiwgewogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBpY29uOiAibWQtdHJhc2giLAogICAgICAgICAgc2l6ZTogInNtYWxsIgogICAgICAgIH0sCiAgICAgICAgb246IHsKICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgLy8g5b275bqV5Yig6ZmkCiAgICAgICAgICAgIHZhciB2ID0gcGFyYW1zLnJvdzsKICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgIGRlbGV0ZU1lc3NhZ2VTZW5kKHsKICAgICAgICAgICAgICBpZHM6IHYuaWQKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIF90aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwoKICAgICAgICAgICAgICAgIF90aGlzLmdldENvdW50KCk7CgogICAgICAgICAgICAgICAgX3RoaXMucmVmcmVzaE1lc3NhZ2UoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgIuWIoOmZpCIpOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICBoZWlnaHQ6ICI1MDBweCIsCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHBhcmFtczogewogICAgICAgIHVzZXJJZDogSlNPTi5wYXJzZShDb29raWVzLmdldCgidXNlckluZm8iKSkuaWQsCiAgICAgICAgc3RhdHVzOiAwLAogICAgICAgIHBhZ2VOdW1iZXI6IDEsCiAgICAgICAgLy8g5b2T5YmN6aG15pWwCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIC8vIOmhtemdouWkp+WwjwogICAgICAgIHNvcnQ6ICJjcmVhdGVUaW1lIiwKICAgICAgICAvLyDpu5jorqTmjpLluo/lrZfmrrUKICAgICAgICBvcmRlcjogImRlc2MiIC8vIOm7mOiupOaOkuW6j+aWueW8jwoKICAgICAgfSwKICAgICAgdG90YWw6IDAsCiAgICAgIG1lc0xpc3Q6IFtdLAogICAgICBjdXJyZW50TWVzVHlwZTogInVucmVhZCIsCiAgICAgIHNob3dNZXNMaXN0OiB0cnVlLAogICAgICB1bnJlYWRDb3VudDogMCwKICAgICAgaGFzcmVhZENvdW50OiAwLAogICAgICBtZXM6IHsKICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgdGltZTogIiIsCiAgICAgICAgY29udGVudDogIiIKICAgICAgfSwKICAgICAgY29sdW1uczogW3sKICAgICAgICB0eXBlOiAiaW5kZXgiLAogICAgICAgIHdpZHRoOiA2MCwKICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAiICIsCiAgICAgICAga2V5OiAidGl0bGUiLAogICAgICAgIGFsaWduOiAibGVmdCIsCiAgICAgICAgZWxsaXBzaXM6IHRydWUsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcGFyYW1zKSB7CiAgICAgICAgICByZXR1cm4gaCgic3BhbiIsIFtoKCJhIiwgewogICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgIG1hcmdpbjogIjAgMzBweCAwIDAiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgX3RoaXMuZ2V0Q29udGVudChwYXJhbXMucm93KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICLjgJAiICsgcGFyYW1zLnJvdy50eXBlICsgIuOAkSAiICsgcGFyYW1zLnJvdy50aXRsZSldKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIiAiLAogICAgICAgIGtleTogInRpbWUiLAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogMTkwLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIHBhcmFtcykgewogICAgICAgICAgcmV0dXJuIGgoInNwYW4iLCBbaCgiSWNvbiIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB0eXBlOiAibWQtdGltZSIsCiAgICAgICAgICAgICAgc2l6ZTogMTYKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICBtYXJnaW46ICIwIDVweCAzcHggMCIKICAgICAgICAgICAgfQogICAgICAgICAgfSksIGgoInNwYW4iLCBwYXJhbXMucm93LmNyZWF0ZVRpbWUpXSk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICIgIiwKICAgICAgICBrZXk6ICJhc3JlYWQiLAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogMjEwLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIHBhcmFtcykgewogICAgICAgICAgaWYgKF90aGlzLmN1cnJlbnRNZXNUeXBlID09ICJ1bnJlYWQiKSB7CiAgICAgICAgICAgIHJldHVybiBoKCJkaXYiLCBbbWFya0FzcmVhZEJ0bihoLCBwYXJhbXMpXSk7CiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLmN1cnJlbnRNZXNUeXBlID09ICJoYXNyZWFkIikgewogICAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgW2RlbGV0ZVJlYWxCdG4oaCwgcGFyYW1zKV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfV0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFuZ2VQYWdlOiBmdW5jdGlvbiBjaGFuZ2VQYWdlKHYpIHsKICAgICAgdGhpcy5wYXJhbXMucGFnZU51bWJlciA9IHY7CiAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsKICAgIH0sCiAgICBjaGFuZ2VQYWdlU2l6ZTogZnVuY3Rpb24gY2hhbmdlUGFnZVNpemUodikgewogICAgICB0aGlzLnBhcmFtcy5wYWdlU2l6ZSA9IHY7CiAgICAgIHRoaXMucmVmcmVzaE1lc3NhZ2UoKTsKICAgIH0sCiAgICByZWZyZXNoTWVzc2FnZTogZnVuY3Rpb24gcmVmcmVzaE1lc3NhZ2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHN0YXR1cyA9IDA7CiAgICAgIHZhciB0eXBlID0gdGhpcy5jdXJyZW50TWVzVHlwZTsKCiAgICAgIGlmICh0eXBlID09ICJ1bnJlYWQiKSB7CiAgICAgICAgc3RhdHVzID0gMDsKICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJoYXNyZWFkIikgewogICAgICAgIHN0YXR1cyA9IDE7CiAgICAgIH0KCiAgICAgIHRoaXMucGFyYW1zLnN0YXR1cyA9IHN0YXR1czsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0TWVzc2FnZVNlbmREYXRhKHRoaXMucGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzMi5tZXNMaXN0ID0gcmVzLnJlc3VsdC5jb250ZW50OwogICAgICAgICAgX3RoaXMyLnRvdGFsID0gcmVzLnJlc3VsdC50b3RhbEVsZW1lbnRzOwoKICAgICAgICAgIGlmICh0eXBlID09ICJ1bnJlYWQiKSB7CiAgICAgICAgICAgIF90aGlzMi51bnJlYWRDb3VudCA9IF90aGlzMi50b3RhbDsKICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAiaGFzcmVhZCIpIHsKICAgICAgICAgICAgX3RoaXMyLmhhc3JlYWRDb3VudCA9IF90aGlzMi50b3RhbDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGluaXRNZXNzYWdlOiBmdW5jdGlvbiBpbml0TWVzc2FnZSgpIHsKICAgICAgLy8g5piv5ZCm6Lez6L2s5p+l55yL5raI5oGv6K+m5oOFCiAgICAgIHZhciBxID0gdGhpcy4kcm91dGUucXVlcnk7CgogICAgICBpZiAocS5jb250ZW50KSB7CiAgICAgICAgdGhpcy5nZXRDb250ZW50KHEuY29udGVudCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0Q291bnQodHJ1ZSk7CiAgICB9LAogICAgLy8g6I635Y+W5raI5oGv6K6h5pWwCiAgICBnZXRDb3VudDogZnVuY3Rpb24gZ2V0Q291bnQoaW5pdCkgewogICAgICB0aGlzLmdldFVucmVhZENvdW50KGluaXQpOwogICAgICB0aGlzLmdldFJlYWRDb3VudCgpOwogICAgfSwKICAgIC8vIOacquivu+a2iOaBr+iuoeaVsAogICAgZ2V0VW5yZWFkQ291bnQ6IGZ1bmN0aW9uIGdldFVucmVhZENvdW50KGluaXQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnBhcmFtcy5zdGF0dXMgPSAwOwogICAgICBnZXRNZXNzYWdlU2VuZERhdGEodGhpcy5wYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgaWYgKGluaXQpIHsKICAgICAgICAgICAgX3RoaXMzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMzLm1lc0xpc3QgPSByZXMucmVzdWx0LmNvbnRlbnQ7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMzLnVucmVhZENvdW50ID0gcmVzLnJlc3VsdC50b3RhbEVsZW1lbnRzOwoKICAgICAgICAgIF90aGlzMy4kc3RvcmUuY29tbWl0KCJzZXRNZXNzYWdlQ291bnQiLCBfdGhpczMudW5yZWFkQ291bnQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5bey6K+75raI5oGv6K6h5pWwCiAgICBnZXRSZWFkQ291bnQ6IGZ1bmN0aW9uIGdldFJlYWRDb3VudCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLnBhcmFtcy5zdGF0dXMgPSAxOwogICAgICBnZXRNZXNzYWdlU2VuZERhdGEodGhpcy5wYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXM0Lmhhc3JlYWRDb3VudCA9IHJlcy5yZXN1bHQudG90YWxFbGVtZW50czsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZU1lc3NhZ2U6IGZ1bmN0aW9uIGRlbGV0ZU1lc3NhZ2UoaWQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBkZWxldGVNZXNzYWdlU2VuZCh7CiAgICAgICAgaWRzOiBpZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzNS4kTWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNldEN1cnJlbnRNZXNUeXBlOiBmdW5jdGlvbiBzZXRDdXJyZW50TWVzVHlwZSh0eXBlKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRNZXNUeXBlICE9IHR5cGUpIHsKICAgICAgICB0aGlzLnNob3dNZXNMaXN0ID0gdHJ1ZTsKICAgICAgfQoKICAgICAgdGhpcy5jdXJyZW50TWVzVHlwZSA9IHR5cGU7CiAgICAgIHRoaXMucGFyYW1zLnBhZ2VOdW1iZXIgPSAxOwogICAgICB0aGlzLnJlZnJlc2hNZXNzYWdlKCk7CiAgICB9LAogICAgZ2V0Q29udGVudDogZnVuY3Rpb24gZ2V0Q29udGVudCh2KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy5zaG93TWVzTGlzdCA9IGZhbHNlOwogICAgICB0aGlzLm1lcy50aXRsZSA9IHYudGl0bGU7CiAgICAgIHRoaXMubWVzLnRpbWUgPSB2LmNyZWF0ZVRpbWU7CiAgICAgIHRoaXMubWVzLmNvbnRlbnQgPSB2LmNvbnRlbnQ7CgogICAgICBpZiAodi5zdGF0dXMgPT0gMCkgewogICAgICAgIC8vIOagh+iusOW3suivuyDovazmjaJudWxs5Li6IiIKICAgICAgICBmb3IgKHZhciBhdHRyIGluIHYpIHsKICAgICAgICAgIGlmICh2W2F0dHJdID09IG51bGwpIHsKICAgICAgICAgICAgdlthdHRyXSA9ICIiOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOwogICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShzdHIpOwogICAgICAgIGRhdGEuc3RhdHVzID0gMTsKICAgICAgICBlZGl0TWVzc2FnZVNlbmQoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgX3RoaXM2LmdldENvdW50KCk7CgogICAgICAgICAgICBfdGhpczYucmVmcmVzaE1lc3NhZ2UoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHJlYWRBbGw6IGZ1bmN0aW9uIHJlYWRBbGwoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgYWxsTWVzc2FnZVNlbmQoMCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpczcuZ2V0Q291bnQoKTsKCiAgICAgICAgICBfdGhpczcucmVmcmVzaE1lc3NhZ2UoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZUFsbDogZnVuY3Rpb24gZGVsZXRlQWxsKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIGFsbE1lc3NhZ2VTZW5kKDEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXM4LmdldENvdW50KCk7CgogICAgICAgICAgX3RoaXM4LnJlZnJlc2hNZXNzYWdlKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBiYWNrTGlzdDogZnVuY3Rpb24gYmFja0xpc3QoKSB7CiAgICAgIHRoaXMuc2hvd01lc0xpc3QgPSB0cnVlOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogIm1lc3NhZ2VfaW5kZXgiCiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vIOiuoeeul+mrmOW6pgogICAgdmFyIGhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7CiAgICB0aGlzLmhlaWdodCA9IE51bWJlcihoZWlnaHQgLSAxMjApICsgInB4IjsKICAgIHRoaXMuaW5pdE1lc3NhZ2UoKTsKICB9LAogIHdhdGNoOiB7CiAgICAvLyDnm5HlkKzot6/nlLHlj5jljJbpgJrov4dpZOiOt+WPluaVsOaNrgogICAgJHJvdXRlOiBmdW5jdGlvbiAkcm91dGUodG8sIGZyb20pIHsKICAgICAgaWYgKHRvLm5hbWUgPT0gIm1lc3NhZ2VfaW5kZXgiKSB7CiAgICAgICAgdmFyIHEgPSB0aGlzLiRyb3V0ZS5xdWVyeTsKCiAgICAgICAgaWYgKHEuY29udGVudCkgewogICAgICAgICAgdGhpcy5pbml0TWVzc2FnZSgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5yZWZyZXNoTWVzc2FnZSgpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA,SACAA,kBADA,EAEAC,eAFA,EAGAC,iBAHA,EAIAC,cAJA,QAKA,aALA;AAMA;EACAC,qBADA;EAEAC,IAFA,kBAEA;IAAA;;IACA;MACA,SACA,QADA,EAEA;QACAC;UACAC,kBADA;UAEAC;QAFA,CADA;QAKAC;UACAC;YACA;YACA,mBAFA,CAGA;;YACA;cACA;gBACAC;cACA;YACA;;YACA;YACA;YACAN;YACA;YACAJ;cACA;;cACA;gBACA;;gBACA;;gBACA;cACA;YACA,CAPA;UAQA;QAtBA;MALA,CAFA,EAgCA,MAhCA;IAkCA,CAnCA;;IAoCA;MACA,SACA,QADA,EAEA;QACAK;UACAC,gBADA;UAEAC;QAFA,CADA;QAKAC;UACAC;YACA;YACA;YACA;YACAR;cAAAU;YAAA;cACA;;cACA;gBACA;;gBACA;;gBACA;cACA;YACA,CAPA;UAQA;QAbA;MALA,CAFA,EAuBA,IAvBA;IAyBA,CA1BA;;IA2BA;MACAC,eADA;MAEAC,aAFA;MAGAC;QACAC,8CADA;QAEAC,SAFA;QAGAC,aAHA;QAGA;QACAC,YAJA;QAIA;QACAC,kBALA;QAKA;QACAC,aANA,CAMA;;MANA,CAHA;MAWAC,QAXA;MAYAC,WAZA;MAaAC,wBAbA;MAcAC,iBAdA;MAeAC,cAfA;MAgBAC,eAhBA;MAiBAC;QACAC,SADA;QAEAC,QAFA;QAGAC;MAHA,CAjBA;MAsBAC,UACA;QACAC,aADA;QAEAC,SAFA;QAGAC;MAHA,CADA,EAMA;QACAN,UADA;QAEAO,YAFA;QAGAD,aAHA;QAIAE,cAJA;QAKAC;UACA,kBACAC,EACA,GADA,EAEA;YACAC;cACAC;YADA,CADA;YAIAhC;cACAC;gBACA;cACA;YAHA;UAJA,CAFA,EAYA,+CAZA,CADA;QAgBA;MAtBA,CANA,EA8BA;QACAmB,UADA;QAEAO,WAFA;QAGAD,eAHA;QAIAD,UAJA;QAKAI;UACA,kBACAC;YACAjC;cACA2B,eADA;cAEAzB;YAFA,CADA;YAKAgC;cACAC;YADA;UALA,EADA,EAUAF,gCAVA;QAYA;MAlBA,CA9BA,EAkDA;QACAV,UADA;QAEAO,aAFA;QAGAD,eAHA;QAIAD,UAJA;QAKAI;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA;QACA;MAXA,CAlDA;IAtBA;EAuFA,CAzJA;EA0JAI;IACAC,UADA,sBACAhC,CADA,EACA;MACA;MACA;IACA,CAJA;IAKAiC,cALA,0BAKAjC,CALA,EAKA;MACA;MACA;IACA,CARA;IASAkC,cATA,4BASA;MAAA;;MACA;MACA;;MACA;QACA5B;MACA,CAFA,MAEA;QACAA;MACA;;MACA;MACA;MACAjB;QACA;;QACA;UACA;UACA;;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA;QACA;MACA,CAXA;IAYA,CA/BA;IAgCA8C,WAhCA,yBAgCA;MACA;MACA;;MACA;QACA;MACA;;MACA;IACA,CAvCA;IAwCA;IACAC,QAzCA,oBAyCAC,IAzCA,EAyCA;MACA;MACA;IACA,CA5CA;IA6CA;IACAC,cA9CA,0BA8CAD,IA9CA,EA8CA;MAAA;;MACA;MACAhD;QACA;UACA;YACA;YACA;UACA;;UACA;;UACA;QACA;MACA,CATA;IAUA,CA1DA;IA2DA;IACAkD,YA5DA,0BA4DA;MAAA;;MACA;MACAlD;QACA;UACA;QACA;MACA,CAJA;IAKA,CAnEA;IAoEAmD,aApEA,yBAoEAC,EApEA,EAoEA;MAAA;;MACAlD;QAAAU;MAAA;QACA;UACA;QACA;MACA,CAJA;IAKA,CA1EA;IA2EAyC,iBA3EA,6BA2EApB,IA3EA,EA2EA;MACA;QACA;MACA;;MACA;MACA;MACA;IACA,CAlFA;IAmFAqB,UAnFA,sBAmFA3C,CAnFA,EAmFA;MAAA;;MACA;MACA;MACA;MACA;;MACA;QACA;QACA;UACA;YACAA;UACA;QACA;;QACA;QACA;QACAN;QACAJ;UACA;YACA;;YACA;UACA;QACA,CALA;MAMA;IACA,CAzGA;IA0GAsD,OA1GA,qBA0GA;MAAA;;MACApD;QACA;UACA;;UACA;QACA;MACA,CALA;IAMA,CAjHA;IAkHAqD,SAlHA,uBAkHA;MAAA;;MACArD;QACA;UACA;;UACA;QACA;MACA,CALA;IAMA,CAzHA;IA0HAsD,QA1HA,sBA0HA;MACA;MACA;QACArD;MADA;IAGA;EA/HA,CA1JA;EA2RAsD,OA3RA,qBA2RA;IACA;IACA;IACA;IACA;EACA,CAhSA;EAiSAC;IACA;IACAC,MAFA,kBAEAC,EAFA,EAEAC,IAFA,EAEA;MACA;QACA;;QACA;UACA;UACA;QACA;;QACA;MACA;IACA;EAXA;AAjSA","names":["getMessageSendData","editMessageSend","deleteMessageSend","allMessageSend","name","data","props","icon","size","on","click","v","ids","height","loading","params","userId","status","pageNumber","pageSize","sort","order","total","mesList","currentMesType","showMesList","unreadCount","hasreadCount","mes","title","time","content","columns","type","width","align","key","ellipsis","render","h","style","margin","methods","changePage","changePageSize","refreshMessage","initMessage","getCount","init","getUnreadCount","getReadCount","deleteMessage","id","setCurrentMesType","getContent","readAll","deleteAll","backList","mounted","watch","$route","to","from"],"sourceRoot":"src/views/message","sources":["message.vue"],"sourcesContent":["<style lang=\"less\">\r\n@import \"./message.less\";\r\n</style>\r\n\r\n<template>\r\n  <div class=\"own-space-message-content\" :style=\"{ height: height }\">\r\n    <div class=\"message-main-content\">\r\n      <div class=\"message-mainlist-content\">\r\n        <div>\r\n          <Button\r\n            @click=\"setCurrentMesType('unread')\"\r\n            size=\"large\"\r\n            long\r\n            type=\"text\"\r\n          >\r\n            <div class=\"mes-wrap\">\r\n              <transition name=\"mes-current-type-btn\">\r\n                <Icon\r\n                  v-show=\"currentMesType == 'unread'\"\r\n                  type=\"md-checkmark\"\r\n                ></Icon>\r\n              </transition>\r\n              <span class=\"mes-type-btn-text\">未读消息</span>\r\n              <Badge\r\n                class=\"message-count-badge-outer\"\r\n                class-name=\"message-count-badge-red\"\r\n                :count=\"unreadCount\"\r\n              ></Badge>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n        <div>\r\n          <Button\r\n            @click=\"setCurrentMesType('hasread')\"\r\n            size=\"large\"\r\n            long\r\n            type=\"text\"\r\n          >\r\n            <div class=\"mes-wrap\">\r\n              <transition name=\"mes-current-type-btn\">\r\n                <Icon\r\n                  v-show=\"currentMesType == 'hasread'\"\r\n                  type=\"md-checkmark\"\r\n                ></Icon>\r\n              </transition>\r\n              <span class=\"mes-type-btn-text\">已读消息</span>\r\n              <Badge\r\n                class=\"message-count-badge-outer\"\r\n                class-name=\"message-count-badge\"\r\n                :count=\"hasreadCount\"\r\n              ></Badge>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div class=\"message-content-content\">\r\n        <transition name=\"view-message\">\r\n          <div v-if=\"showMesList\" class=\"message-title-list-content\">\r\n            <Table\r\n              ref=\"messageList\"\r\n              :loading=\"loading\"\r\n              :columns=\"columns\"\r\n              :data=\"mesList\"\r\n            ></Table>\r\n            <div class=\"message-page\">\r\n              <Poptip\r\n                confirm\r\n                transfer\r\n                title=\"确定标记所有消息为已读？\"\r\n                @on-ok=\"readAll\"\r\n                v-if=\"currentMesType == 'unread'\"\r\n              >\r\n                <Button icon=\"md-notifications-off\" :disabled=\"unreadCount <= 0\"\r\n                  >全部标记已读</Button\r\n                >\r\n              </Poptip>\r\n              <Poptip\r\n                confirm\r\n                transfer\r\n                title=\"确定彻底删除所有已读消息？\"\r\n                @on-ok=\"deleteAll\"\r\n                v-if=\"currentMesType == 'hasread'\"\r\n              >\r\n                <Button icon=\"md-trash\" :disabled=\"hasreadCount <= 0\"\r\n                  >全部彻底删除</Button\r\n                >\r\n              </Poptip>\r\n              <Page\r\n                :current=\"params.pageNumber\"\r\n                :total=\"total\"\r\n                :page-size=\"params.pageSize\"\r\n                @on-change=\"changePage\"\r\n                @on-page-size-change=\"changePageSize\"\r\n                :page-size-opts=\"[5, 10]\"\r\n                size=\"small\"\r\n                show-total\r\n                show-elevator\r\n                show-sizer\r\n                class=\"page-fix\"\r\n              ></Page>\r\n            </div>\r\n          </div>\r\n        </transition>\r\n        <transition name=\"back-message-list\">\r\n          <div v-if=\"!showMesList\" class=\"message-view-content-content\">\r\n            <div class=\"message-content-top-bar\">\r\n              <span class=\"mes-back-btn-content\">\r\n                <Button type=\"text\" @click=\"backList\">\r\n                  <Icon type=\"ios-arrow-back\"></Icon>&nbsp;&nbsp;返回\r\n                </Button>\r\n              </span>\r\n              <h3 class=\"mes-title\">{{ mes.title }}</h3>\r\n            </div>\r\n            <p class=\"mes-time-content\">\r\n              <Icon type=\"android-time\"></Icon>\r\n              &nbsp;&nbsp;{{ mes.time }}\r\n            </p>\r\n            <div class=\"message-content-body\">\r\n              <p class=\"message-content\" v-html=\"mes.content\">\r\n                {{ mes.content }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </transition>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cookies from \"js-cookie\";\r\nimport {\r\n  getMessageSendData,\r\n  editMessageSend,\r\n  deleteMessageSend,\r\n  allMessageSend,\r\n} from \"@/api/index\";\r\nexport default {\r\n  name: \"message_index\",\r\n  data() {\r\n    const markAsreadBtn = (h, params) => {\r\n      return h(\r\n        \"Button\",\r\n        {\r\n          props: {\r\n            icon: \"md-eye-off\",\r\n            size: \"small\",\r\n          },\r\n          on: {\r\n            click: () => {\r\n              // 标记已读\r\n              let v = params.row;\r\n              // 转换null为\"\"\r\n              for (let attr in v) {\r\n                if (v[attr] == null) {\r\n                  v[attr] = \"\";\r\n                }\r\n              }\r\n              let str = JSON.stringify(v);\r\n              let data = JSON.parse(str);\r\n              data.status = 1;\r\n              this.loading = true;\r\n              editMessageSend(data).then((res) => {\r\n                this.loading = false;\r\n                if (res.success) {\r\n                  this.$Message.success(\"操作成功\");\r\n                  this.getCount();\r\n                  this.refreshMessage();\r\n                }\r\n              });\r\n            },\r\n          },\r\n        },\r\n        \"标为已读\"\r\n      );\r\n    };\r\n    const deleteRealBtn = (h, params) => {\r\n      return h(\r\n        \"Button\",\r\n        {\r\n          props: {\r\n            icon: \"md-trash\",\r\n            size: \"small\",\r\n          },\r\n          on: {\r\n            click: () => {\r\n              // 彻底删除\r\n              let v = params.row;\r\n              this.loading = true;\r\n              deleteMessageSend({ ids: v.id }).then((res) => {\r\n                this.loading = false;\r\n                if (res.success) {\r\n                  this.$Message.success(\"操作成功\");\r\n                  this.getCount();\r\n                  this.refreshMessage();\r\n                }\r\n              });\r\n            },\r\n          },\r\n        },\r\n        \"删除\"\r\n      );\r\n    };\r\n    return {\r\n      height: \"500px\",\r\n      loading: true,\r\n      params: {\r\n        userId: JSON.parse(Cookies.get(\"userInfo\")).id,\r\n        status: 0,\r\n        pageNumber: 1, // 当前页数\r\n        pageSize: 10, // 页面大小\r\n        sort: \"createTime\", // 默认排序字段\r\n        order: \"desc\", // 默认排序方式\r\n      },\r\n      total: 0,\r\n      mesList: [],\r\n      currentMesType: \"unread\",\r\n      showMesList: true,\r\n      unreadCount: 0,\r\n      hasreadCount: 0,\r\n      mes: {\r\n        title: \"\",\r\n        time: \"\",\r\n        content: \"\",\r\n      },\r\n      columns: [\r\n        {\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \" \",\r\n          key: \"title\",\r\n          align: \"left\",\r\n          ellipsis: true,\r\n          render: (h, params) => {\r\n            return h(\"span\", [\r\n              h(\r\n                \"a\",\r\n                {\r\n                  style: {\r\n                    margin: \"0 30px 0 0\",\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.getContent(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"【\" + params.row.type + \"】 \" + params.row.title\r\n              ),\r\n            ]);\r\n          },\r\n        },\r\n        {\r\n          title: \" \",\r\n          key: \"time\",\r\n          align: \"center\",\r\n          width: 190,\r\n          render: (h, params) => {\r\n            return h(\"span\", [\r\n              h(\"Icon\", {\r\n                props: {\r\n                  type: \"md-time\",\r\n                  size: 16,\r\n                },\r\n                style: {\r\n                  margin: \"0 5px 3px 0\",\r\n                },\r\n              }),\r\n              h(\"span\", params.row.createTime),\r\n            ]);\r\n          },\r\n        },\r\n        {\r\n          title: \" \",\r\n          key: \"asread\",\r\n          align: \"center\",\r\n          width: 210,\r\n          render: (h, params) => {\r\n            if (this.currentMesType == \"unread\") {\r\n              return h(\"div\", [markAsreadBtn(h, params)]);\r\n            } else if (this.currentMesType == \"hasread\") {\r\n              return h(\"div\", [deleteRealBtn(h, params)]);\r\n            }\r\n          },\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    changePage(v) {\r\n      this.params.pageNumber = v;\r\n      this.refreshMessage();\r\n    },\r\n    changePageSize(v) {\r\n      this.params.pageSize = v;\r\n      this.refreshMessage();\r\n    },\r\n    refreshMessage() {\r\n      let status = 0;\r\n      let type = this.currentMesType;\r\n      if (type == \"unread\") {\r\n        status = 0;\r\n      } else if (type == \"hasread\") {\r\n        status = 1;\r\n      }\r\n      this.params.status = status;\r\n      this.loading = true;\r\n      getMessageSendData(this.params).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.mesList = res.result.content;\r\n          this.total = res.result.totalElements;\r\n          if (type == \"unread\") {\r\n            this.unreadCount = this.total;\r\n          } else if (type == \"hasread\") {\r\n            this.hasreadCount = this.total;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    initMessage() {\r\n      // 是否跳转查看消息详情\r\n      let q = this.$route.query;\r\n      if (q.content) {\r\n        this.getContent(q.content);\r\n      }\r\n      this.getCount(true);\r\n    },\r\n    // 获取消息计数\r\n    getCount(init) {\r\n      this.getUnreadCount(init);\r\n      this.getReadCount();\r\n    },\r\n    // 未读消息计数\r\n    getUnreadCount(init) {\r\n      this.params.status = 0;\r\n      getMessageSendData(this.params).then((res) => {\r\n        if (res.success) {\r\n          if (init) {\r\n            this.loading = false;\r\n            this.mesList = res.result.content;\r\n          }\r\n          this.unreadCount = res.result.totalElements;\r\n          this.$store.commit(\"setMessageCount\", this.unreadCount);\r\n        }\r\n      });\r\n    },\r\n    // 已读消息计数\r\n    getReadCount() {\r\n      this.params.status = 1;\r\n      getMessageSendData(this.params).then((res) => {\r\n        if (res.success) {\r\n          this.hasreadCount = res.result.totalElements;\r\n        }\r\n      });\r\n    },\r\n    deleteMessage(id) {\r\n      deleteMessageSend({ ids: id }).then((res) => {\r\n        if (res.success) {\r\n          this.$Message.success(\"删除成功\");\r\n        }\r\n      });\r\n    },\r\n    setCurrentMesType(type) {\r\n      if (this.currentMesType != type) {\r\n        this.showMesList = true;\r\n      }\r\n      this.currentMesType = type;\r\n      this.params.pageNumber = 1;\r\n      this.refreshMessage();\r\n    },\r\n    getContent(v) {\r\n      this.showMesList = false;\r\n      this.mes.title = v.title;\r\n      this.mes.time = v.createTime;\r\n      this.mes.content = v.content;\r\n      if (v.status == 0) {\r\n        // 标记已读 转换null为\"\"\r\n        for (let attr in v) {\r\n          if (v[attr] == null) {\r\n            v[attr] = \"\";\r\n          }\r\n        }\r\n        let str = JSON.stringify(v);\r\n        let data = JSON.parse(str);\r\n        data.status = 1;\r\n        editMessageSend(data).then((res) => {\r\n          if (res.success) {\r\n            this.getCount();\r\n            this.refreshMessage();\r\n          }\r\n        });\r\n      }\r\n    },\r\n    readAll() {\r\n      allMessageSend(0).then((res) => {\r\n        if (res.success) {\r\n          this.getCount();\r\n          this.refreshMessage();\r\n        }\r\n      });\r\n    },\r\n    deleteAll() {\r\n      allMessageSend(1).then((res) => {\r\n        if (res.success) {\r\n          this.getCount();\r\n          this.refreshMessage();\r\n        }\r\n      });\r\n    },\r\n    backList() {\r\n      this.showMesList = true;\r\n      this.$router.push({\r\n        name: \"message_index\",\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    // 计算高度\r\n    let height = document.documentElement.clientHeight;\r\n    this.height = Number(height - 120) + \"px\";\r\n    this.initMessage();\r\n  },\r\n  watch: {\r\n    // 监听路由变化通过id获取数据\r\n    $route(to, from) {\r\n      if (to.name == \"message_index\") {\r\n        let q = this.$route.query;\r\n        if (q.content) {\r\n          this.initMessage();\r\n          return;\r\n        }\r\n        this.refreshMessage();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n"]}]}