{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\sys\\menu-manage\\add.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\sys\\menu-manage\\add.vue","mtime":1651629755220},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgYWRkUGVybWlzc2lvbiB9IGZyb20gIkAvYXBpL2luZGV4IjsKaW1wb3J0IGRpY3QgZnJvbSAiQC92aWV3cy9teS1jb21wb25lbnRzL3hib290L2RpY3QiOwppbXBvcnQgSWNvbkNob29zZSBmcm9tICJAL3ZpZXdzL215LWNvbXBvbmVudHMveGJvb3QvaWNvbi1jaG9vc2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFkZCIsCiAgY29tcG9uZW50czogewogICAgZGljdDogZGljdCwKICAgIEljb25DaG9vc2U6IEljb25DaG9vc2UKICB9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGlzUm9vdDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGZvcm06IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgZGF0YUxlbmd0aDogewogICAgICB0eXBlOiBOdW1iZXIKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93TWFzazogdHJ1ZSwKICAgICAgdmlzaWJsZTogdGhpcy52YWx1ZSwKICAgICAgcGFyZW50VGl0bGU6ICIiLAogICAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZSwKICAgICAgbWF4SGVpZ2h0OiA1MTAsCiAgICAgIGZvcm1BZGQ6IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHt9LAogICAgY2hhbmdlQWRkVXJsOiBmdW5jdGlvbiBjaGFuZ2VBZGRVcmwoZSkgewogICAgICB2YXIgdiA9IGUudGFyZ2V0LnZhbHVlOwoKICAgICAgaWYgKHYuaW5kZXhPZigiaHR0cCIpID4gLTEpIHsKICAgICAgICB0aGlzLmZvcm1BZGQuY29tcG9uZW50ID0gInN5cy9tb25pdG9yL21vbml0b3IiOwogICAgICB9CiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmZvcm1BZGQudmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAvLyDmt7vliqAKICAgICAgICAgIF90aGlzLnN1Ym1pdExvYWRpbmcgPSB0cnVlOwoKICAgICAgICAgIGlmIChfdGhpcy5mb3JtQWRkLnR5cGUgPT0gMSkgewogICAgICAgICAgICBfdGhpcy5mb3JtQWRkLm5hbWUgPSAiIjsKICAgICAgICAgICAgX3RoaXMuZm9ybUFkZC5pY29uID0gIiI7CiAgICAgICAgICAgIF90aGlzLmZvcm1BZGQuY29tcG9uZW50ID0gIiI7CiAgICAgICAgICB9CgogICAgICAgICAgYWRkUGVybWlzc2lvbihfdGhpcy5mb3JtQWRkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgX3RoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CgogICAgICAgICAgICAgIF90aGlzLiRlbWl0KCJvbi1zdWJtaXQiLCB0cnVlKTsKCiAgICAgICAgICAgICAgX3RoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNldEN1cnJlbnRWYWx1ZTogZnVuY3Rpb24gc2V0Q3VycmVudFZhbHVlKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy52aXNpYmxlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRyZWZzLmZvcm1BZGQucmVzZXRGaWVsZHMoKTsKCiAgICAgIGlmICh0aGlzLmlzUm9vdCkgewogICAgICAgIC8vIOa3u+WKoOmhtumDqOiPnOWNlQogICAgICAgIHRoaXMuZm9ybUFkZCA9IHsKICAgICAgICAgIHR5cGU6IC0xLAogICAgICAgICAgbGV2ZWw6IDAsCiAgICAgICAgICBwYXJlbnRJZDogMCwKICAgICAgICAgIGlzTWVudTogdHJ1ZSwKICAgICAgICAgIHNvcnRPcmRlcjogdGhpcy5kYXRhTGVuZ3RoICsgMSwKICAgICAgICAgIHN0YXR1czogMCwKICAgICAgICAgIGNvbXBvbmVudDogIm5vcm1hbCIKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGFyZW50VGl0bGUgPSB0aGlzLmZvcm0udGl0bGU7CiAgICAgICAgdmFyIHR5cGUgPSAwOwoKICAgICAgICBpZiAodGhpcy5mb3JtLmxldmVsID09IDIpIHsKICAgICAgICAgIHR5cGUgPSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF0aGlzLmZvcm0uY2hpbGRyZW4pIHsKICAgICAgICAgIHRoaXMuZm9ybS5jaGlsZHJlbiA9IFtdOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5mb3JtQWRkID0gewogICAgICAgICAgaWNvbjogIiIsCiAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgcGFyZW50SWQ6IHRoaXMuZm9ybS5pZCwKICAgICAgICAgIGxldmVsOiBOdW1iZXIodGhpcy5mb3JtLmxldmVsKSArIDEsCiAgICAgICAgICBzb3J0T3JkZXI6IHRoaXMuZm9ybS5jaGlsZHJlbi5sZW5ndGggKyAxLAogICAgICAgICAgYnV0dG9uVHlwZTogIiIsCiAgICAgICAgICBzdGF0dXM6IDAsCiAgICAgICAgICBzaG93QWx3YXlzOiB0cnVlCiAgICAgICAgfTsKCiAgICAgICAgaWYgKHRoaXMuZm9ybS5sZXZlbCA9PSAwKSB7CiAgICAgICAgICB0aGlzLmZvcm1BZGQucGF0aCA9ICIvIjsKICAgICAgICAgIHRoaXMuZm9ybUFkZC5jb21wb25lbnQgPSAiTWFpbiI7CiAgICAgICAgfQogICAgICB9IC8vIOaYvuekugoKCiAgICAgIHRoaXMudmlzaWJsZSA9IHZhbHVlOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSh2YWwpIHsKICAgICAgdGhpcy5zZXRDdXJyZW50VmFsdWUodmFsKTsKICAgIH0sCiAgICB2aXNpYmxlOiBmdW5jdGlvbiB2aXNpYmxlKHZhbHVlKSB7CiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdmFsdWUpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgdGhpcy5tYXhIZWlnaHQgPSBOdW1iZXIoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAtIDEyMSkgKyAicHgiOwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqWA;AACA;AACA;AACA;EACAA,WADA;EAEAC;IACAC,UADA;IAEAC;EAFA,CAFA;EAMAC;IACAC;MACAC,aADA;MAEAC;IAFA,CADA;IAKAC;MACAF,aADA;MAEAC;IAFA,CALA;IASAE;MACAH;IADA,CATA;IAYAI;MACAJ;IADA;EAZA,CANA;EAsBAK,IAtBA,kBAsBA;IACA;MACAC,cADA;MAEAC,mBAFA;MAGAC,eAHA;MAIAC,oBAJA;MAKAC,cALA;MAMAC;IANA;EAQA,CA/BA;EAgCAC;IACAC,IADA,kBACA,EADA;IAEAC,YAFA,wBAEAC,CAFA,EAEA;MACA;;MACA;QACA;MACA;IACA,CAPA;IAQAC,MARA,oBAQA;MAAA;;MACA;QACA;UACA;UACA;;UACA;YACA;YACA;YACA;UACA;;UACAC;YACA;;YACA;cACA;;cACA;;cACA;YACA;UACA,CAPA;QAQA;MACA,CAlBA;IAmBA,CA5BA;IA6BAC,eA7BA,2BA6BAnB,KA7BA,EA6BA;MACA;QACA;MACA;;MACA;;MACA;QACA;QACA;UACAC,QADA;UAEAmB,QAFA;UAGAC,WAHA;UAIAC,YAJA;UAKAC,8BALA;UAMAC,SANA;UAOAC;QAPA;MASA,CAXA,MAWA;QACA;QACA;;QACA;UACAxB;QACA;;QACA;UACA;QACA;;QACA;UACAyB,QADA;UAEAzB,UAFA;UAGAoB,sBAHA;UAIAD,kCAJA;UAKAG,wCALA;UAMAI,cANA;UAOAH,SAPA;UAQAI;QARA;;QAUA;UACA;UACA;QACA;MACA,CAvCA,CAwCA;;;MACA;IACA;EAvEA,CAhCA;EAyGAC;IACA7B,KADA,iBACA8B,GADA,EACA;MACA;IACA,CAHA;IAIAtB,OAJA,mBAIAR,KAJA,EAIA;MACA;IACA;EANA,CAzGA;EAiHA+B,OAjHA,qBAiHA;IACA;IACA;EACA;AApHA","names":["name","components","dict","IconChoose","props","value","type","default","isRoot","form","dataLength","data","showMask","visible","parentTitle","submitLoading","maxHeight","formAdd","methods","init","changeAddUrl","e","submit","addPermission","setCurrentValue","level","parentId","isMenu","sortOrder","status","component","icon","buttonType","showAlways","watch","val","mounted"],"sourceRoot":"src/views/sys/menu-manage","sources":["add.vue"],"sourcesContent":["<template>\r\n  <div class=\"menu-add\">\r\n    <!-- Drawer抽屉 -->\r\n    <Drawer\r\n      :title=\"isRoot ? '添加顶部菜单' : '添加子节点'\"\r\n      v-model=\"visible\"\r\n      width=\"500\"\r\n      draggable\r\n      :mask=\"showMask\"\r\n      :mask-closable=\"false\"\r\n    >\r\n      <div :style=\"{ maxHeight: maxHeight }\" class=\"drawer-content\">\r\n        <Form label-colon>\r\n          <FormItem label=\"上级节点\" v-show=\"!isRoot\">{{\r\n            parentTitle\r\n          }}</FormItem>\r\n          <FormItem label=\"类型\" prop=\"type\">\r\n            <div v-show=\"formAdd.type == -1\">\r\n              <Icon\r\n                type=\"ios-navigate-outline\"\r\n                size=\"16\"\r\n                style=\"margin-right: 5px\"\r\n              ></Icon>\r\n              <span>顶部菜单</span>\r\n            </div>\r\n            <div v-show=\"formAdd.type == 0\">\r\n              <Icon\r\n                type=\"ios-list-box-outline\"\r\n                size=\"16\"\r\n                style=\"margin-right: 5px\"\r\n              ></Icon>\r\n              <span>页面菜单</span>\r\n            </div>\r\n            <div v-show=\"formAdd.type == 1\">\r\n              <Icon\r\n                type=\"md-radio-button-on\"\r\n                size=\"16\"\r\n                style=\"margin-right: 5px\"\r\n              ></Icon>\r\n              <span>操作按钮</span>\r\n            </div>\r\n          </FormItem>\r\n        </Form>\r\n        <Form\r\n          ref=\"formAdd\"\r\n          :model=\"formAdd\"\r\n          label-position=\"top\"\r\n        >\r\n          <FormItem\r\n            label=\"名称\"\r\n            prop=\"title\"\r\n            v-if=\"formAdd.type == -1 || formAdd.type == 0\"\r\n          >\r\n            <div style=\"display: flex\">\r\n              <div style=\"width: 100%\">\r\n                <Input v-model=\"formAdd.title\">\r\n                  <Poptip\r\n                    transfer\r\n                    trigger=\"hover\"\r\n                    title=\"多语言\"\r\n                    placement=\"right\"\r\n                    width=\"350\"\r\n                    style=\"width: 17px; cursor: pointer\"\r\n                    slot=\"append\"\r\n                  >\r\n                    <Button icon=\"ios-globe-outline\"></Button>\r\n                    <div slot=\"content\">\r\n                      <Form :label-width=\"80\">\r\n                        <FormItem label=\"启用多语言\">\r\n                          <i-switch v-model=\"formAdd.localize\" size=\"large\">\r\n                            <span slot=\"open\">开</span>\r\n                            <span slot=\"close\">关</span>\r\n                          </i-switch>\r\n                        </FormItem>\r\n                        <FormItem label=\"多语言Key\">\r\n                          <Input\r\n                            v-model=\"formAdd.i18n\"\r\n                            placeholder=\"输入用于渲染I18n的$t('KEY')\"\r\n                          ></Input>\r\n                        </FormItem>\r\n                      </Form>\r\n                    </div>\r\n                  </Poptip>\r\n                </Input>\r\n              </div>\r\n            </div>\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"名称\"\r\n            prop=\"title\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '名称不能为空',\r\n              trigger: 'blur',\r\n            }\"\r\n            v-if=\"formAdd.type == 1\"\r\n            class=\"block-tool\"\r\n          >\r\n            <Tooltip placement=\"right\" content=\"操作按钮名称不得重复\">\r\n              <Input v-model=\"formAdd.title\" />\r\n            </Tooltip>\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"路径\"\r\n            prop=\"path\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '路径不能为空',\r\n              trigger: 'blur',\r\n            }\"\r\n            v-if=\"formAdd.type == 0\"\r\n          >\r\n            <Input v-model=\"formAdd.path\" />\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"请求路径\"\r\n            prop=\"path\"\r\n            :required=\"false\"\r\n            v-if=\"formAdd.type == 1\"\r\n            class=\"block-tool\"\r\n          >\r\n            <Tooltip\r\n              placement=\"right\"\r\n              :max-width=\"230\"\r\n              transfer\r\n              content=\"填写后端请求URL，后端将作权限拦截，若无可填写'无'或其他\"\r\n            >\r\n              <Input v-model=\"formAdd.path\" />\r\n            </Tooltip>\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"按钮权限类型\"\r\n            prop=\"buttonType\"\r\n            v-if=\"formAdd.type == 1\"\r\n          >\r\n            <dict\r\n              dict=\"permission_type\"\r\n              v-model=\"formAdd.buttonType\"\r\n              placeholder=\"请选择或输入搜索\"\r\n              filterable\r\n              clearable\r\n              transfer\r\n            />\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"英文名\"\r\n            prop=\"name\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '英文名不能为空',\r\n              trigger: 'blur',\r\n            }\"\r\n            v-if=\"formAdd.type == -1\"\r\n            class=\"block-tool\"\r\n          >\r\n            <Tooltip placement=\"right\" content=\"需唯一\">\r\n              <Input v-model=\"formAdd.name\" />\r\n            </Tooltip>\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"路由英文名\"\r\n            prop=\"name\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '路由英文名不能为空',\r\n              trigger: 'blur',\r\n            }\"\r\n            v-if=\"formAdd.type == 0\"\r\n            class=\"block-tool\"\r\n          >\r\n            <Tooltip placement=\"right\" content=\"需唯一\">\r\n              <Input v-model=\"formAdd.name\" />\r\n            </Tooltip>\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"图标\"\r\n            prop=\"icon\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '图标不能为空',\r\n              trigger: 'blur',\r\n            }\"\r\n            v-if=\"formAdd.type == -1 || formAdd.type == 0\"\r\n          >\r\n            <icon-choose\r\n              showCustom\r\n              showInput\r\n              v-model=\"formAdd.icon\"\r\n            ></icon-choose>\r\n          </FormItem>\r\n          <FormItem label=\"显示红点\" prop=\"component\" v-if=\"formAdd.type == -1\">\r\n            <i-switch\r\n              size=\"large\"\r\n              v-model=\"formAdd.component\"\r\n              :true-value=\"'hot'\"\r\n              :false-value=\"'normal'\"\r\n            >\r\n              <span slot=\"open\">开</span>\r\n              <span slot=\"close\">关</span>\r\n            </i-switch>\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"系统站内菜单\"\r\n            prop=\"isMenu\"\r\n            v-if=\"formAdd.type == -1\"\r\n          >\r\n            <i-switch size=\"large\" v-model=\"formAdd.isMenu\">\r\n              <span slot=\"open\">是</span>\r\n              <span slot=\"close\">否</span>\r\n            </i-switch>\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"其他链接\"\r\n            prop=\"url\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '其他链接不能为空',\r\n              trigger: 'blur',\r\n            }\"\r\n            v-if=\"formAdd.type == -1 && !formAdd.isMenu\"\r\n          >\r\n            <Input v-model=\"formAdd.url\" placeholder=\"Http链接或路由名\" />\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"打开方式\"\r\n            prop=\"description\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '请选择打开方式',\r\n              trigger: 'change',\r\n            }\"\r\n            v-if=\"formAdd.type == -1 && !formAdd.isMenu\"\r\n          >\r\n            <Select v-model=\"formAdd.description\" transfer placeholder=\"请选择\">\r\n              <Option value=\"direct\" label=\"直接跳转\">\r\n                <span style=\"margin-right: 10px\">直接跳转</span>\r\n                <span style=\"color: #ccc\">其他链接填写完整链接</span>\r\n              </Option>\r\n              <Option value=\"window\" label=\"新窗口打开\">\r\n                <span style=\"margin-right: 10px\">新窗口打开</span>\r\n                <span style=\"color: #ccc\">其他链接填写完整链接</span>\r\n              </Option>\r\n              <Option value=\"route\" label=\"站内路由\">\r\n                <span style=\"margin-right: 10px\">站内路由</span>\r\n                <span style=\"color: #ccc\">其他链接填写Vue路由名</span>\r\n              </Option>\r\n            </Select>\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"前端组件\"\r\n            prop=\"component\"\r\n            v-if=\"formAdd.type == 0\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '前端组件不能为空',\r\n              trigger: 'blur',\r\n            }\"\r\n          >\r\n            <Input v-model=\"formAdd.component\" />\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"第三方链接\"\r\n            prop=\"url\"\r\n            v-if=\"formAdd.type == 0 && formAdd.level == 2\"\r\n            :required=\"false\"\r\n          >\r\n            <Input\r\n              v-model=\"formAdd.url\"\r\n              placeholder=\"http://\"\r\n              @on-change=\"changeAddUrl\"\r\n            />\r\n            <span class=\"url-remark\"\r\n              >前端组件需为 sys/monitor/monitor 时生效</span\r\n            >\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"排序值\"\r\n            prop=\"sortOrder\"\r\n            :rules=\"{\r\n              required: true,\r\n              type: 'number',\r\n              message: '前端组件不能为空',\r\n              trigger: 'blur',\r\n            }\"\r\n          >\r\n            <Tooltip\r\n              trigger=\"hover\"\r\n              placement=\"right\"\r\n              content=\"值越小越靠前，支持小数\"\r\n            >\r\n              <InputNumber\r\n                :max=\"1000\"\r\n                :min=\"0\"\r\n                v-model=\"formAdd.sortOrder\"\r\n              ></InputNumber>\r\n            </Tooltip>\r\n          </FormItem>\r\n          <FormItem\r\n            label=\"始终显示\"\r\n            prop=\"showAlways\"\r\n            v-if=\"formAdd.level == 1\"\r\n            class=\"block-tool\"\r\n          >\r\n            <i-switch size=\"large\" v-model=\"formAdd.showAlways\">\r\n              <span slot=\"open\">是</span>\r\n              <span slot=\"close\">否</span>\r\n            </i-switch>\r\n            <Tooltip\r\n              content=\"当设为不始终显示时，一级菜单下仅有一个子级菜单只会显示该子级菜单，避免用户多次点击\"\r\n              placement=\"right\"\r\n              transfer\r\n              max-width=\"280\"\r\n              style=\"display: inline-block !important\"\r\n            >\r\n              <Icon\r\n                type=\"md-help-circle\"\r\n                size=\"20\"\r\n                color=\"#c5c5c5\"\r\n                style=\"margin-left: 10px; cursor: pointer\"\r\n              />\r\n            </Tooltip>\r\n          </FormItem>\r\n          <FormItem label=\"是否启用\" prop=\"status\">\r\n            <i-switch\r\n              size=\"large\"\r\n              v-model=\"formAdd.status\"\r\n              :true-value=\"0\"\r\n              :false-value=\"-1\"\r\n            >\r\n              <span slot=\"open\">启用</span>\r\n              <span slot=\"close\">禁用</span>\r\n            </i-switch>\r\n          </FormItem>\r\n        </Form>\r\n      </div>\r\n      <div class=\"drawer-footer br\">\r\n        <div class=\"footer-between\">\r\n          <div>\r\n            <Button type=\"primary\" :loading=\"submitLoading\" @click=\"submit\"\r\n              >提交</Button\r\n            >\r\n            <Button @click=\"visible = false\">取消</Button>\r\n          </div>\r\n          <div class=\"flex-center\">\r\n            <!-- 遮罩： -->\r\n            <i-switch size=\"large\" v-model=\"showMask\">\r\n              <span slot=\"open\">遮罩</span>\r\n              <span slot=\"close\">关闭</span>\r\n            </i-switch>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addPermission } from \"@/api/index\";\r\nimport dict from \"@/views/my-components/xboot/dict\";\r\nimport IconChoose from \"@/views/my-components/xboot/icon-choose\";\r\nexport default {\r\n  name: \"add\",\r\n  components: {\r\n    dict,\r\n    IconChoose,\r\n  },\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    isRoot: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    form: {\r\n      type: Object,\r\n    },\r\n    dataLength: {\r\n      type: Number,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      showMask: true,\r\n      visible: this.value,\r\n      parentTitle: \"\",\r\n      submitLoading: false,\r\n      maxHeight: 510,\r\n      formAdd: {},\r\n    };\r\n  },\r\n  methods: {\r\n    init() {},\r\n    changeAddUrl(e) {\r\n      let v = e.target.value;\r\n      if (v.indexOf(\"http\") > -1) {\r\n        this.formAdd.component = \"sys/monitor/monitor\";\r\n      }\r\n    },\r\n    submit() {\r\n      this.$refs.formAdd.validate((valid) => {\r\n        if (valid) {\r\n          // 添加\r\n          this.submitLoading = true;\r\n          if (this.formAdd.type == 1) {\r\n            this.formAdd.name = \"\";\r\n            this.formAdd.icon = \"\";\r\n            this.formAdd.component = \"\";\r\n          }\r\n          addPermission(this.formAdd).then((res) => {\r\n            this.submitLoading = false;\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.$emit(\"on-submit\", true);\r\n              this.visible = false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    setCurrentValue(value) {\r\n      if (value === this.visible) {\r\n        return;\r\n      }\r\n      this.$refs.formAdd.resetFields();\r\n      if (this.isRoot) {\r\n        // 添加顶部菜单\r\n        this.formAdd = {\r\n          type: -1,\r\n          level: 0,\r\n          parentId: 0,\r\n          isMenu: true,\r\n          sortOrder: this.dataLength + 1,\r\n          status: 0,\r\n          component: \"normal\",\r\n        };\r\n      } else {\r\n        this.parentTitle = this.form.title;\r\n        let type = 0;\r\n        if (this.form.level == 2) {\r\n          type = 1;\r\n        }\r\n        if (!this.form.children) {\r\n          this.form.children = [];\r\n        }\r\n        this.formAdd = {\r\n          icon: \"\",\r\n          type: type,\r\n          parentId: this.form.id,\r\n          level: Number(this.form.level) + 1,\r\n          sortOrder: this.form.children.length + 1,\r\n          buttonType: \"\",\r\n          status: 0,\r\n          showAlways: true,\r\n        };\r\n        if (this.form.level == 0) {\r\n          this.formAdd.path = \"/\";\r\n          this.formAdd.component = \"Main\";\r\n        }\r\n      }\r\n      // 显示\r\n      this.visible = value;\r\n    },\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.setCurrentValue(val);\r\n    },\r\n    visible(value) {\r\n      this.$emit(\"input\", value);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n    this.maxHeight = Number(document.documentElement.clientHeight - 121) + \"px\";\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"@/styles/drawer-common.less\";\r\n@import \"./menuManage.less\";\r\n.footer-between {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  .flex-center {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n}\r\n</style>\r\n\r\n"]}]}