{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\sys\\menu-manage\\menuManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\sys\\menu-manage\\menuManage.vue","mtime":1651629755222},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbG9hZFBlcm1pc3Npb24sIGVkaXRQZXJtaXNzaW9uLCBkZWxldGVQZXJtaXNzaW9uLCBzZWFyY2hQZXJtaXNzaW9uIH0gZnJvbSAiQC9hcGkvaW5kZXgiOwppbXBvcnQgZGljdCBmcm9tICJAL3ZpZXdzL215LWNvbXBvbmVudHMveGJvb3QvZGljdCI7CmltcG9ydCBJY29uQ2hvb3NlIGZyb20gIkAvdmlld3MvbXktY29tcG9uZW50cy94Ym9vdC9pY29uLWNob29zZSI7CmltcG9ydCB1dGlsIGZyb20gIkAvbGlicy91dGlsLmpzIjsKaW1wb3J0IGFkZCBmcm9tICIuL2FkZC52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIm1lbnUtbWFuYWdlIiwKICBjb21wb25lbnRzOiB7CiAgICBkaWN0OiBkaWN0LAogICAgSWNvbkNob29zZTogSWNvbkNob29zZSwKICAgIGFkZDogYWRkCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gewogICAgICBzaG93VHlwZTogInRyZWUiLAogICAgICBjb2x1bW5zOiBbewogICAgICAgIHR5cGU6ICJzZWxlY3Rpb24iLAogICAgICAgIHdpZHRoOiA2MCwKICAgICAgICBhbGlnbjogImNlbnRlciIKICAgICAgfSwgewogICAgICAgIHR5cGU6ICJpbmRleCIsCiAgICAgICAgd2lkdGg6IDYwLAogICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLoj5zljZXlkI3np7AiLAogICAgICAgIGtleTogInRpdGxlIiwKICAgICAgICBtaW5XaWR0aDogMTUwLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHRyZWU6IHRydWUKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi6Iux5paH5ZCNIiwKICAgICAgICBrZXk6ICJuYW1lIiwKICAgICAgICBtaW5XaWR0aDogMTAwLAogICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuexu+WeiyIsCiAgICAgICAga2V5OiAidHlwZSIsCiAgICAgICAgbWluV2lkdGg6IDEyMCwKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcGFyYW1zKSB7CiAgICAgICAgICB2YXIgaWNvbiA9ICIiLAogICAgICAgICAgICAgIHR5cGUgPSAiIiwKICAgICAgICAgICAgICBsZXZlbCA9IHBhcmFtcy5yb3cubGV2ZWw7CgogICAgICAgICAgaWYgKGxldmVsID09IDApIHsKICAgICAgICAgICAgaWNvbiA9ICJpb3MtbmF2aWdhdGUiOwogICAgICAgICAgICB0eXBlID0gIumhtumDqOiPnOWNlSI7CiAgICAgICAgICB9IGVsc2UgaWYgKGxldmVsID09IDEpIHsKICAgICAgICAgICAgaWNvbiA9ICJtZC1saXN0LWJveCI7CiAgICAgICAgICAgIHR5cGUgPSAi6aG16Z2i6I+c5Y2VIjsKICAgICAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT0gMikgewogICAgICAgICAgICBpY29uID0gIm1kLWxpc3QiOwogICAgICAgICAgICB0eXBlID0gIumhtemdouiPnOWNlSI7CiAgICAgICAgICB9IGVsc2UgaWYgKGxldmVsID09IDMpIHsKICAgICAgICAgICAgaWNvbiA9ICJtZC1yYWRpby1idXR0b24tb24iOwogICAgICAgICAgICB0eXBlID0gIuaTjeS9nOaMiemSriI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpY29uID0gIm1kLXJhZGlvLWJ1dHRvbi1vZmYiOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBoKCJkaXYiLCBbaCgiSWNvbiIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB0eXBlOiBpY29uCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgbWFyZ2luOiAiMCA1cHggMCAwIgogICAgICAgICAgICB9CiAgICAgICAgICB9KSwgaCgic3BhbiIsIHR5cGUpXSk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLlm77moIciLAogICAgICAgIGtleTogImljb24iLAogICAgICAgIG1pbldpZHRoOiAxMDAsCiAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIHBhcmFtcykgewogICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFtoKCJYSWNvbiIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB0eXBlOiBwYXJhbXMucm93Lmljb24KICAgICAgICAgICAgfQogICAgICAgICAgfSldKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIui3r+W+hC9VUkwiLAogICAgICAgIG1pbldpZHRoOiAxMDAsCiAgICAgICAga2V5OiAicGF0aCIsCiAgICAgICAgdG9vbHRpcDogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLmjpLluo8iLAogICAgICAgIGtleTogInNvcnRPcmRlciIsCiAgICAgICAgbWluV2lkdGg6IDEwMCwKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgc29ydFR5cGU6ICJhc2MiCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuWIm+W7uuaXtumXtCIsCiAgICAgICAga2V5OiAiY3JlYXRlVGltZSIsCiAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgd2lkdGg6IDE3MAogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLmk43kvZwiLAogICAgICAgIGtleTogImFjdGlvbiIsCiAgICAgICAgd2lkdGg6IDIwMCwKICAgICAgICBmaXhlZDogInJpZ2h0IiwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcGFyYW1zKSB7CiAgICAgICAgICByZXR1cm4gaCgiZGl2IiwgW2goImEiLCB7CiAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgX3RoaXMudGFibGVBZGQocGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCAi5re75Yqg5a2Q6IqC54K5IiksIGgoIkRpdmlkZXIiLCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgdHlwZTogInZlcnRpY2FsIgogICAgICAgICAgICB9CiAgICAgICAgICB9KSwgaCgiYSIsIHsKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmUocGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCAi5Yig6ZmkIildKTsKICAgICAgICB9CiAgICAgIH1dLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBzdHJpY3Q6IHRydWUsCiAgICAgIG1heEhlaWdodDogIjUwMHB4IiwKICAgICAgZXhwYW5kTGV2ZWw6IDEsCiAgICAgIHNlbGVjdExpc3Q6IFtdLAogICAgICBzZWFyY2hLZXk6ICIiLAogICAgICBwYXJlbnRUaXRsZTogIiIsCiAgICAgIGlzUm9vdDogZmFsc2UsCiAgICAgIHNob3dBZGQ6IGZhbHNlLAogICAgICBlZGl0VGl0bGU6ICIiLAogICAgICBmb3JtOiB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIHRpdGxlOiAiIiwKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBpY29uOiAiIiwKICAgICAgICBwYXRoOiAiIiwKICAgICAgICBjb21wb25lbnQ6ICIiLAogICAgICAgIHBhcmVudElkOiAiIiwKICAgICAgICBidXR0b25UeXBlOiAiIiwKICAgICAgICBpc01lbnU6IHRydWUsCiAgICAgICAgdHlwZTogLTEsCiAgICAgICAgc29ydE9yZGVyOiAwLAogICAgICAgIGxldmVsOiAwLAogICAgICAgIHN0YXR1czogMCwKICAgICAgICB1cmw6ICIiLAogICAgICAgIHNob3dBbHdheXM6IHRydWUsCiAgICAgICAgcGFyZW50VGl0bGU6ICIiCiAgICAgIH0sCiAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgICBkYXRhOiBbXSwKICAgICAgZGF0YUVkaXQ6IFtdLAogICAgICB0YWJsZURhdGE6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdGhpcy5nZXRBbGxMaXN0KCk7CiAgICAgIHRoaXMuZ2V0UGFyZW50TGlzdChudWxsLCB0cnVlKTsKICAgIH0sCiAgICBnZXRQYXJlbnRMaXN0OiBmdW5jdGlvbiBnZXRQYXJlbnRMaXN0KGYsIG5vdFNob3dMb2FkaW5nKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKCFub3RTaG93TG9hZGluZykgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIH0KCiAgICAgIGxvYWRQZXJtaXNzaW9uKCIwIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKCFub3RTaG93TG9hZGluZykgewogICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgcmVzLnJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLmlzUGFyZW50KSB7CiAgICAgICAgICAgICAgZS5jaGlsZHJlbiA9IFtdOwogICAgICAgICAgICAgIGUuX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpczIudGFibGVEYXRhID0gcmVzLnJlc3VsdDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWREYXRhOiBmdW5jdGlvbiBsb2FkRGF0YShpdGVtLCBjYWxsYmFjaykgewogICAgICBsb2FkUGVybWlzc2lvbihpdGVtLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoZS5pc1BhcmVudCkgewogICAgICAgICAgICAgIGUuY2hpbGRyZW4gPSBbXTsKICAgICAgICAgICAgICBlLl9sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgY2FsbGJhY2socmVzLnJlc3VsdCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZW5kZXJDb250ZW50OiBmdW5jdGlvbiByZW5kZXJDb250ZW50KGgsIF9yZWYpIHsKICAgICAgdmFyIHJvb3QgPSBfcmVmLnJvb3QsCiAgICAgICAgICBub2RlID0gX3JlZi5ub2RlLAogICAgICAgICAgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgdmFyIGljb24gPSAibWQtcmFkaW8tYnV0dG9uLW9mZiI7CgogICAgICBpZiAoZGF0YS5sZXZlbCA9PSAwKSB7CiAgICAgICAgaWNvbiA9ICJpb3MtbmF2aWdhdGUiOwogICAgICB9IGVsc2UgaWYgKGRhdGEubGV2ZWwgPT0gMSkgewogICAgICAgIGljb24gPSAibWQtbGlzdC1ib3giOwogICAgICB9IGVsc2UgaWYgKGRhdGEubGV2ZWwgPT0gMikgewogICAgICAgIGljb24gPSAibWQtbGlzdCI7CiAgICAgIH0gZWxzZSBpZiAoZGF0YS5sZXZlbCA9PSAzKSB7CiAgICAgICAgaWNvbiA9ICJtZC1yYWRpby1idXR0b24tb24iOwogICAgICB9CgogICAgICByZXR1cm4gaCgic3BhbiIsIFtoKCJzcGFuIiwgW2goIkljb24iLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHR5cGU6IGljb24sCiAgICAgICAgICBzaXplOiAiMTYiCiAgICAgICAgfSwKICAgICAgICBzdHlsZTogewogICAgICAgICAgIm1hcmdpbi1yaWdodCI6ICI4cHgiLAogICAgICAgICAgIm1hcmdpbi1ib3R0b20iOiAiM3B4IgogICAgICAgIH0KICAgICAgfSksIGgoInNwYW4iLCBkYXRhLnRpdGxlKV0pXSk7CiAgICB9LAogICAgaGFuZGxlRHJvcGRvd246IGZ1bmN0aW9uIGhhbmRsZURyb3Bkb3duKG5hbWUpIHsKICAgICAgaWYgKG5hbWUgPT0gImV4cGFuZE9uZSIpIHsKICAgICAgICB0aGlzLmV4cGFuZExldmVsID0gMTsKICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJleHBhbmRUd28iKSB7CiAgICAgICAgdGhpcy5leHBhbmRMZXZlbCA9IDI7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAiZXhwYW5kVGhyZWUiKSB7CiAgICAgICAgdGhpcy5leHBhbmRMZXZlbCA9IDM7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAiZXhwYW5kQWxsIikgewogICAgICAgIHRoaXMuZXhwYW5kTGV2ZWwgPSA0OwogICAgICB9CgogICAgICB0aGlzLmdldEFsbExpc3QoKTsKICAgIH0sCiAgICBnZXRBbGxMaXN0OiBmdW5jdGlvbiBnZXRBbGxMaXN0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuZ2V0UmVxdWVzdCgiL3Blcm1pc3Npb24vZ2V0QWxsTGlzdCIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgLy8g5LuF5bGV5byA5oyH5a6a57qn5pWwIOm7mOiupOWQjuerr+W3suWxleW8gOaJgOaciQogICAgICAgICAgdmFyIGV4cGFuZExldmVsID0gX3RoaXMzLmV4cGFuZExldmVsOwogICAgICAgICAgcmVzLnJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChleHBhbmRMZXZlbCA9PSAxKSB7CiAgICAgICAgICAgICAgaWYgKGUubGV2ZWwgPT0gMCkgewogICAgICAgICAgICAgICAgZS5leHBhbmQgPSBmYWxzZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChlLmNoaWxkcmVuICYmIGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjLmxldmVsID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBjLmV4cGFuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBpZiAoYy5jaGlsZHJlbiAmJiBjLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBjLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChiLmxldmVsID09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYi5leHBhbmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGV4cGFuZExldmVsID09IDIpIHsKICAgICAgICAgICAgICBpZiAoZS5sZXZlbCA9PSAwKSB7CiAgICAgICAgICAgICAgICBlLmV4cGFuZCA9IHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAoZS5jaGlsZHJlbiAmJiBlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgICAgICBpZiAoYy5sZXZlbCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgYy5leHBhbmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKGMuY2hpbGRyZW4gJiYgYy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgYy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoYi5sZXZlbCA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGIuZXhwYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChleHBhbmRMZXZlbCA9PSAzKSB7CiAgICAgICAgICAgICAgaWYgKGUubGV2ZWwgPT0gMCkgewogICAgICAgICAgICAgICAgZS5leHBhbmQgPSB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKGUuY2hpbGRyZW4gJiYgZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgICAgaWYgKGMubGV2ZWwgPT0gMSkgewogICAgICAgICAgICAgICAgICAgIGMuZXhwYW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKGMuY2hpbGRyZW4gJiYgYy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgYy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoYi5sZXZlbCA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGIuZXhwYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpczMuZGF0YSA9IHJlcy5yZXN1bHQ7CiAgICAgICAgICB2YXIgc3RyID0gSlNPTi5zdHJpbmdpZnkocmVzLnJlc3VsdCk7CiAgICAgICAgICBfdGhpczMuZGF0YUVkaXQgPSBKU09OLnBhcnNlKHN0cik7IC8vIOWktOmDqOWKoOWFpeS4gOe6pwoKICAgICAgICAgIHZhciBmaXJzdCA9IHsKICAgICAgICAgICAgaWQ6ICIwIiwKICAgICAgICAgICAgbGV2ZWw6IC0xLAogICAgICAgICAgICB0aXRsZTogIuS4gOe6p+iPnOWNlSIKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMzLmRhdGFFZGl0LnVuc2hpZnQoZmlyc3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuc2VhcmNoS2V5KSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICBzZWFyY2hQZXJtaXNzaW9uKHsKICAgICAgICAgIHRpdGxlOiB0aGlzLnNlYXJjaEtleQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXM0LmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgX3RoaXM0LmRhdGEgPSByZXMucmVzdWx0OwogICAgICAgICAgICBfdGhpczQudGFibGVEYXRhID0gcmVzLnJlc3VsdDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmdldEFsbExpc3QoKTsKICAgICAgICB0aGlzLmdldFBhcmVudExpc3QoKTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdFRyZWU6IGZ1bmN0aW9uIHNlbGVjdFRyZWUodikgewogICAgICBpZiAodi5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0RmllbGRzKCk7IC8vIOi9rOaNom51bGzkuLoiIgoKICAgICAgICBmb3IgKHZhciBhdHRyIGluIHZbMF0pIHsKICAgICAgICAgIGlmICh2WzBdW2F0dHJdID09IG51bGwpIHsKICAgICAgICAgICAgdlswXVthdHRyXSA9ICIiOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHN0ciA9IEpTT04uc3RyaW5naWZ5KHZbMF0pOwogICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShzdHIpOwogICAgICAgIHRoaXMuZm9ybSA9IGRhdGE7CiAgICAgICAgdGhpcy5lZGl0VGl0bGUgPSBkYXRhLnRpdGxlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2FuY2VsRWRpdCgpOwogICAgICB9CiAgICB9LAogICAgc2VsZWN0VHJlZUVkaXQ6IGZ1bmN0aW9uIHNlbGVjdFRyZWVFZGl0KHYpIHsKICAgICAgaWYgKHYubGVuZ3RoID4gMCkgewogICAgICAgIC8vIOi9rOaNom51bGzkuLoiIgogICAgICAgIGZvciAodmFyIGF0dHIgaW4gdlswXSkgewogICAgICAgICAgaWYgKHZbMF1bYXR0cl0gPT0gbnVsbCkgewogICAgICAgICAgICB2WzBdW2F0dHJdID0gIiI7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgc3RyID0gSlNPTi5zdHJpbmdpZnkodlswXSk7CiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHN0cik7CgogICAgICAgIGlmICh0aGlzLmZvcm0uaWQgPT0gZGF0YS5pZCkgewogICAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLor7fli7/pgInmi6noh6rlt7HkvZzkuLrniLboioLngrkiKTsKICAgICAgICAgIHZbMF0uc2VsZWN0ZWQgPSBmYWxzZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IC8vIOmqjOivgee6p+WIq2xldmVs5piv5ZCm5q2j56GuCgoKICAgICAgICBpZiAodGhpcy5mb3JtLmxldmVsIC0gMSAhPSBkYXRhLmxldmVsKSB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuivt+mAieaLqeS4gOS4qiIgKyB0aGlzLmZvcm0ubGV2ZWwgKyAi57qn6I+c5Y2V6IqC54K5Iik7CiAgICAgICAgICB2WzBdLnNlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0aGlzLmZvcm0ucGFyZW50SWQgPSBkYXRhLmlkOwogICAgICAgIHZhciBsZXZlbCA9IGRhdGEubGV2ZWwgKyAxOwoKICAgICAgICBpZiAobGV2ZWwgPCAwKSB7CiAgICAgICAgICBsZXZlbCA9IDA7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmZvcm0ubGV2ZWwgPSBsZXZlbDsKICAgICAgICB0aGlzLmZvcm0ucGFyZW50VGl0bGUgPSBkYXRhLnRpdGxlOwogICAgICB9CiAgICB9LAogICAgY2FuY2VsRWRpdDogZnVuY3Rpb24gY2FuY2VsRWRpdCgpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLiRyZWZzLnRyZWUuZ2V0U2VsZWN0ZWROb2RlcygpWzBdOwoKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICBkYXRhLnNlbGVjdGVkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLmZvcm0uaWQgPSAiIjsKICAgICAgdGhpcy5lZGl0VGl0bGUgPSAiIjsKICAgIH0sCiAgICBoYW5kbGVSZXNldDogZnVuY3Rpb24gaGFuZGxlUmVzZXQoKSB7CiAgICAgIHZhciB0eXBlID0gdGhpcy5mb3JtLnR5cGU7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLmZvcm0uaWNvbiA9ICIiOwogICAgICB0aGlzLmZvcm0uY29tcG9uZW50ID0gIiI7CiAgICAgIHRoaXMuZm9ybS50eXBlID0gdHlwZTsKICAgIH0sCiAgICBzdWJtaXRFZGl0OiBmdW5jdGlvbiBzdWJtaXRFZGl0KCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICghX3RoaXM1LmZvcm0uaWQpIHsKICAgICAgICAgICAgX3RoaXM1LiRNZXNzYWdlLndhcm5pbmcoIuivt+WFiOeCueWHu+mAieaLqeimgeS/ruaUueeahOiPnOWNleiKgueCuSIpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzNS5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICBpZiAoX3RoaXM1LmZvcm0uc29ydE9yZGVyID09IG51bGwpIHsKICAgICAgICAgICAgX3RoaXM1LmZvcm0uc29ydE9yZGVyID0gIiI7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKF90aGlzNS5mb3JtLmJ1dHRvblR5cGUgPT0gbnVsbCkgewogICAgICAgICAgICBfdGhpczUuZm9ybS5idXR0b25UeXBlID0gIiI7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKF90aGlzNS5mb3JtLnR5cGUgPT0gMSkgewogICAgICAgICAgICBfdGhpczUuZm9ybS5uYW1lID0gIiI7CiAgICAgICAgICAgIF90aGlzNS5mb3JtLmljb24gPSAiIjsKICAgICAgICAgICAgX3RoaXM1LmZvcm0uY29tcG9uZW50ID0gIiI7CiAgICAgICAgICB9CgogICAgICAgICAgZWRpdFBlcm1pc3Npb24oX3RoaXM1LmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpczUuc3VibWl0TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgX3RoaXM1LmVkaXRUaXRsZSA9IF90aGlzNS5mb3JtLnRpdGxlOwoKICAgICAgICAgICAgICBfdGhpczUuJE1lc3NhZ2Uuc3VjY2Vzcygi57yW6L6R5oiQ5YqfIik7IC8vIOagh+iusOmHjeaWsOiOt+WPluiPnOWNleaVsOaNrgoKCiAgICAgICAgICAgICAgX3RoaXM1LiRzdG9yZS5jb21taXQoInNldEFkZGVkIiwgZmFsc2UpOwoKICAgICAgICAgICAgICB1dGlsLmluaXRSb3V0ZXIoX3RoaXM1KTsKCiAgICAgICAgICAgICAgX3RoaXM1LmluaXQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VFZGl0VXJsOiBmdW5jdGlvbiBjaGFuZ2VFZGl0VXJsKGUpIHsKICAgICAgdmFyIHYgPSBlLnRhcmdldC52YWx1ZTsKCiAgICAgIGlmICh2LmluZGV4T2YoImh0dHAiKSA+IC0xKSB7CiAgICAgICAgdGhpcy5mb3JtLmNvbXBvbmVudCA9ICJzeXMvbW9uaXRvci9tb25pdG9yIjsKICAgICAgfQogICAgfSwKICAgIGFkZFJvb3Q6IGZ1bmN0aW9uIGFkZFJvb3QoKSB7CiAgICAgIHRoaXMuaXNSb290ID0gdHJ1ZTsKICAgICAgdGhpcy5zaG93QWRkID0gdHJ1ZTsKICAgIH0sCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgaWYgKCF0aGlzLmZvcm0uaWQpIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuivt+WFiOeCueWHu+mAieaLqeS4gOS4quiPnOWNleadg+mZkOiKgueCuSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZm9ybS5sZXZlbCA9PSAzKSB7CiAgICAgICAgdGhpcy4kTW9kYWwud2FybmluZyh7CiAgICAgICAgICB0aXRsZTogIuaKseatie+8jOaXoOazlee7p+e7rea3u+WKoCIsCiAgICAgICAgICBjb250ZW50OiAi5bem5L6n6I+c5Y2V5pyA5aSa5LuF5pSv5oyB5LqM57qn6I+c5Y2V55uu5b2VIgogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5pc1Jvb3QgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93QWRkID0gdHJ1ZTsKICAgIH0sCiAgICB0YWJsZUFkZDogZnVuY3Rpb24gdGFibGVBZGQodikgewogICAgICB0aGlzLmZvcm0gPSB2OwogICAgICB0aGlzLmFkZCgpOwogICAgICB0aGlzLmVkaXRUaXRsZSA9ICIiOwogICAgICB2YXIgZGF0YSA9IHRoaXMuJHJlZnMudHJlZS5nZXRTZWxlY3RlZE5vZGVzKClbMF07CgogICAgICBpZiAoZGF0YSkgewogICAgICAgIGRhdGEuc2VsZWN0ZWQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGFkZFN1Y2Nlc3M6IGZ1bmN0aW9uIGFkZFN1Y2Nlc3MoKSB7CiAgICAgIC8vIOagh+iusOmHjeaWsOiOt+WPluiPnOWNleaVsOaNrgogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldEFkZGVkIiwgZmFsc2UpOwogICAgICB1dGlsLmluaXRSb3V0ZXIodGhpcyk7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfSwKICAgIGNoYW5nZVNlbGVjdDogZnVuY3Rpb24gY2hhbmdlU2VsZWN0KHYpIHsKICAgICAgdGhpcy5zZWxlY3RMaXN0ID0gdjsKICAgIH0sCiAgICBzaG93U2VsZWN0OiBmdW5jdGlvbiBzaG93U2VsZWN0KGUpIHsKICAgICAgdGhpcy5zZWxlY3RMaXN0ID0gZTsKICAgIH0sCiAgICBjbGVhclNlbGVjdEFsbDogZnVuY3Rpb24gY2xlYXJTZWxlY3RBbGwoKSB7CiAgICAgIHRoaXMuJHJlZnMudGFibGUuc2VsZWN0QWxsKGZhbHNlKTsKICAgIH0sCiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSh2KSB7CiAgICAgIHRoaXMuc2VsZWN0TGlzdCA9IFtdOwogICAgICB0aGlzLnNlbGVjdExpc3QucHVzaCh2KTsKICAgICAgdGhpcy5kZWxBbGwoKTsKICAgIH0sCiAgICBkZWxBbGw6IGZ1bmN0aW9uIGRlbEFsbCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5zZWxlY3RMaXN0Lmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLmgqjov5jmnKrli77pgInopoHliKDpmaTnmoTmlbDmja4iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oewogICAgICAgIHRpdGxlOiAi56Gu6K6k5Yig6ZmkIiwKICAgICAgICBjb250ZW50OiAi5oKo56Gu6K6k6KaB5Yig6Zmk5omA6YCJ55qEICIgKyB0aGlzLnNlbGVjdExpc3QubGVuZ3RoICsgIiDmnaHmlbDmja7lj4rlhbbkuIvnuqfmiYDmnInmlbDmja4/IiwKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIG9uT2s6IGZ1bmN0aW9uIG9uT2soKSB7CiAgICAgICAgICB2YXIgaWRzID0gIiI7CgogICAgICAgICAgX3RoaXM2LnNlbGVjdExpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZHMgKz0gZS5pZCArICIsIjsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlkcyA9IGlkcy5zdWJzdHJpbmcoMCwgaWRzLmxlbmd0aCAtIDEpOwogICAgICAgICAgZGVsZXRlUGVybWlzc2lvbih7CiAgICAgICAgICAgIGlkczogaWRzCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXM2LiRNb2RhbC5yZW1vdmUoKTsKCiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIF90aGlzNi4kTWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsgLy8g5qCH6K6w6YeN5paw6I635Y+W6I+c5Y2V5pWw5o2uCgoKICAgICAgICAgICAgICBfdGhpczYuJHN0b3JlLmNvbW1pdCgic2V0QWRkZWQiLCBmYWxzZSk7CgogICAgICAgICAgICAgIHV0aWwuaW5pdFJvdXRlcihfdGhpczYpOwogICAgICAgICAgICAgIF90aGlzNi5zZWxlY3RMaXN0ID0gW107CgogICAgICAgICAgICAgIF90aGlzNi5jYW5jZWxFZGl0KCk7CgogICAgICAgICAgICAgIF90aGlzNi5pbml0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8g6K6h566X6auY5bqmCiAgICB2YXIgaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKICAgIHRoaXMubWF4SGVpZ2h0ID0gTnVtYmVyKGhlaWdodCAtIDI4NykgKyAicHgiOwogICAgdGhpcy5pbml0KCk7CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmeA,SACAA,cADA,EAEAC,cAFA,EAGAC,gBAHA,EAIAC,gBAJA,QAKA,aALA;AAMA;AACA;AACA;AACA;AACA;EACAC,mBADA;EAEAC;IACAC,UADA;IAEAC,sBAFA;IAGAC;EAHA,CAFA;EAOAC,IAPA,kBAOA;IAAA;;IACA;MACAC,gBADA;MAEAC,UACA;QACAC,iBADA;QAEAC,SAFA;QAGAC;MAHA,CADA,EAMA;QACAF,aADA;QAEAC,SAFA;QAGAC;MAHA,CANA,EAWA;QACAC,aADA;QAEAC,YAFA;QAGAC,aAHA;QAIAC,cAJA;QAKAC;MALA,CAXA,EAkBA;QACAJ,YADA;QAEAC,WAFA;QAGAC,aAHA;QAIAC;MAJA,CAlBA,EAwBA;QACAH,WADA;QAEAC,WAFA;QAGAC,aAHA;QAIAC,cAJA;QAKAJ,eALA;QAMAM;UACA;UAAA,IACAR,SADA;UAAA,IAEAS,wBAFA;;UAGA;YACAC;YACAV;UACA,CAHA,MAGA;YACAU;YACAV;UACA,CAHA,MAGA;YACAU;YACAV;UACA,CAHA,MAGA;YACAU;YACAV;UACA,CAHA,MAGA;YACAU;UACA;;UACA,iBACAC;YACAC;cACAZ;YADA,CADA;YAIAa;cACAC;YADA;UAJA,EADA,EASAH,eATA;QAWA;MApCA,CAxBA,EA8DA;QACAR,WADA;QAEAC,WAFA;QAGAC,aAHA;QAIAC,cAJA;QAKAJ,eALA;QAMAM;UACA,iBACAG;YACAC;cACAZ;YADA;UADA,EADA;QAOA;MAdA,CA9DA,EA8EA;QACAG,eADA;QAEAE,aAFA;QAGAD,WAHA;QAIAW;MAJA,CA9EA,EAoFA;QACAZ,WADA;QAEAC,gBAFA;QAGAC,aAHA;QAIAC,cAJA;QAKAJ,eALA;QAMAc;MANA,CApFA,EA4FA;QACAb,aADA;QAEAC,iBAFA;QAGAE,cAHA;QAIAL;MAJA,CA5FA,EAkGA;QACAE,WADA;QAEAC,aAFA;QAGAH,UAHA;QAIAgB,cAJA;QAKAf,eALA;QAMAM;UACA,iBACAG,EACA,GADA,EAEA;YACAO;cACAC;gBACA;cACA;YAHA;UADA,CAFA,EASA,OATA,CADA,EAYAR;YACAC;cACAZ;YADA;UADA,EAZA,EAiBAW,EACA,GADA,EAEA;YACAO;cACAC;gBACA;cACA;YAHA;UADA,CAFA,EASA,IATA,CAjBA;QA6BA;MApCA,CAlGA,CAFA;MA2IAC,aA3IA;MA4IAC,YA5IA;MA6IAC,kBA7IA;MA8IAC,cA9IA;MA+IAC,cA/IA;MAgJAC,aAhJA;MAiJAC,eAjJA;MAkJAC,aAlJA;MAmJAC,cAnJA;MAoJAC,aApJA;MAqJAC;QACAC,MADA;QAEA5B,SAFA;QAGAX,QAHA;QAIAkB,QAJA;QAKAsB,QALA;QAMAC,aANA;QAOAC,YAPA;QAQAC,cARA;QASAC,YATA;QAUApC,QAVA;QAWAqC,YAXA;QAYA5B,QAZA;QAaA6B,SAbA;QAcAC,OAdA;QAeAC,gBAfA;QAgBAd;MAhBA,CArJA;MAuKAe,oBAvKA;MAwKA5C,QAxKA;MAyKA6C,YAzKA;MA0KAC;IA1KA;EA4KA,CApLA;EAqLAC;IACAC,IADA,kBACA;MACA;MACA;IACA,CAJA;IAKAC,aALA,yBAKAC,CALA,EAKAC,cALA,EAKA;MAAA;;MACA;QACA;MACA;;MACA5D;QACA;UACA;QACA;;QACA;UACA6D;YACA;cACAC;cACAA;YACA;UACA,CALA;UAMA;QACA;MACA,CAbA;IAcA,CAvBA;IAwBAC,QAxBA,oBAwBAC,IAxBA,EAwBAC,QAxBA,EAwBA;MACAjE;QACA;UACA6D;YACA;cACAC;cACAA;YACA;UACA,CALA;UAMAG;QACA;MACA,CAVA;IAWA,CApCA;IAqCAC,aArCA,yBAqCA3C,CArCA,QAqCA;MAAA;MAAA;MAAA;MACA;;MACA;QACAD;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;;MACA,kBACAC,WACAA;QACAC;UACAZ,UADA;UAEAuD;QAFA,CADA;QAKA1C;UACA,qBADA;UAEA;QAFA;MALA,EADA,EAWAF,qBAXA,EADA;IAeA,CA/DA;IAgEA6C,cAhEA,0BAgEAhE,IAhEA,EAgEA;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;IACA,CA3EA;IA4EAiE,UA5EA,wBA4EA;MAAA;;MACA;MACA;QACA;;QACA;UACA;UACA;UACAR;YACA;cACA;gBACAC;cACA;;cACA;gBACAA;kBACA;oBACAQ;kBACA;;kBACA;oBACAA;sBACA;wBACAC;sBACA;oBACA,CAJA;kBAKA;gBACA,CAXA;cAYA;YACA,CAlBA,MAkBA;cACA;gBACAT;cACA;;cACA;gBACAA;kBACA;oBACAQ;kBACA;;kBACA;oBACAA;sBACA;wBACAC;sBACA;oBACA,CAJA;kBAKA;gBACA,CAXA;cAYA;YACA,CAlBA,MAkBA;cACA;gBACAT;cACA;;cACA;gBACAA;kBACA;oBACAQ;kBACA;;kBACA;oBACAA;sBACA;wBACAC;sBACA;oBACA,CAJA;kBAKA;gBACA,CAXA;cAYA;YACA;UACA,CAxDA;UAyDA;UACA;UACA,kCA9DA,CA+DA;;UACA;YACA5B,OADA;YAEAtB,SAFA;YAGAN;UAHA;;UAKA;QACA;MACA,CAzEA;IA0EA,CAxJA;IAyJAyD,MAzJA,oBAyJA;MAAA;;MACA;QACA;QACArE;UAAAY;QAAA;UACA;;UACA;YACA;YACA;UACA;QACA,CANA;MAOA,CATA,MASA;QACA;QACA;MACA;IACA,CAvKA;IAwKA0D,UAxKA,sBAwKAC,CAxKA,EAwKA;MACA;QACA,8BADA,CAEA;;QACA;UACA;YACAA;UACA;QACA;;QACA;QACA;QACA;QACA;MACA,CAZA,MAYA;QACA;MACA;IACA,CAxLA;IAyLAC,cAzLA,0BAyLAD,CAzLA,EAyLA;MACA;QACA;QACA;UACA;YACAA;UACA;QACA;;QACA;QACA;;QACA;UACA;UACAA;UACA;QACA,CAbA,CAcA;;;QACA;UACA;UACAA;UACA;QACA;;QACA;QACA;;QACA;UACArD;QACA;;QACA;QACA;MACA;IACA,CAtNA;IAuNAuD,UAvNA,wBAuNA;MACA;;MACA;QACAnE;MACA;;MACA;MACA;MACA;IACA,CA/NA;IAgOAoE,WAhOA,yBAgOA;MACA;MACA;MACA;MACA;MACA;IACA,CAtOA;IAuOAC,UAvOA,wBAuOA;MAAA;;MACA;QACA;UACA;YACA;;YACA;UACA;;UACA;;UACA;YACA;UACA;;UACA;YACA;UACA;;UACA;YACA;YACA;YACA;UACA;;UACA7E;YACA;;YACA;cACA;;cACA,gCAFA,CAGA;;;cACA;;cACA8E;;cACA;YACA;UACA,CAVA;QAWA;MACA,CA9BA;IA+BA,CAvQA;IAwQAC,aAxQA,yBAwQAlB,CAxQA,EAwQA;MACA;;MACA;QACA;MACA;IACA,CA7QA;IA8QAmB,OA9QA,qBA8QA;MACA;MACA;IACA,CAjRA;IAkRAzE,GAlRA,iBAkRA;MACA;QACA;QACA;MACA;;MACA;QACA;UACAO,kBADA;UAEAmE;QAFA;QAIA;MACA;;MACA;MACA;IACA,CAhSA;IAiSAC,QAjSA,oBAiSAT,CAjSA,EAiSA;MACA;MACA;MACA;MACA;;MACA;QACAjE;MACA;IACA,CAzSA;IA0SA2E,UA1SA,wBA0SA;MACA;MACA;MACAL;MACA;IACA,CA/SA;IAgTAM,YAhTA,wBAgTAX,CAhTA,EAgTA;MACA;IACA,CAlTA;IAmTAY,UAnTA,sBAmTAxB,CAnTA,EAmTA;MACA;IACA,CArTA;IAsTAyB,cAtTA,4BAsTA;MACA;IACA,CAxTA;IAyTAC,MAzTA,kBAyTAd,CAzTA,EAyTA;MACA;MACA;MACA;IACA,CA7TA;IA8TAe,MA9TA,oBA8TA;MAAA;;MACA;QACA;QACA;MACA;;MACA;QACA1E,aADA;QAEAmE,SACA,eACA,sBADA,GAEA,eALA;QAMAlD,aANA;QAOA0D;UACA;;UACA;YACAC;UACA,CAFA;;UAGAA;UACAzF;YAAAyF;UAAA;YACA;;YACA;cACA,gCADA,CAEA;;;cACA;;cACAZ;cACA;;cACA;;cACA;YACA;UACA,CAXA;QAYA;MAzBA;IA2BA;EA9VA,CArLA;EAqhBAa,OArhBA,qBAqhBA;IACA;IACA;IACA;IACA;EACA;AA1hBA","names":["loadPermission","editPermission","deletePermission","searchPermission","name","components","dict","IconChoose","add","data","showType","columns","type","width","align","title","key","minWidth","sortable","tree","render","level","icon","h","props","style","margin","tooltip","sortType","fixed","on","click","loading","strict","maxHeight","expandLevel","selectList","searchKey","parentTitle","isRoot","showAdd","editTitle","form","id","path","component","parentId","buttonType","isMenu","sortOrder","status","url","showAlways","submitLoading","dataEdit","tableData","methods","init","getParentList","f","notShowLoading","res","e","loadData","item","callback","renderContent","size","handleDropdown","getAllList","c","b","search","selectTree","v","selectTreeEdit","cancelEdit","handleReset","submitEdit","util","changeEditUrl","addRoot","content","tableAdd","addSuccess","changeSelect","showSelect","clearSelectAll","remove","delAll","onOk","ids","mounted"],"sourceRoot":"src/views/sys/menu-manage","sources":["menuManage.vue"],"sourcesContent":["<style lang=\"less\">\r\n@import \"@/styles/tree-common.less\";\r\n@import \"./menuManage.less\";\r\n</style>\r\n<template>\r\n  <div class=\"search\">\r\n    <Card>\r\n      <Row class=\"operation\" align=\"middle\" justify=\"space-between\">\r\n        <div>\r\n          <Button\r\n            @click=\"add\"\r\n            type=\"primary\"\r\n            icon=\"md-add\"\r\n            v-show=\"showType == 'tree'\"\r\n            >添加子节点</Button\r\n          >\r\n          <Button @click=\"addRoot\" icon=\"md-add\">添加顶部菜单</Button>\r\n          <Button @click=\"delAll\" icon=\"md-trash\">批量删除</Button>\r\n          <Button\r\n            @click=\"getParentList\"\r\n            icon=\"md-refresh\"\r\n            v-show=\"showType == 'list'\"\r\n            >刷新</Button\r\n          >\r\n          <Dropdown @on-click=\"handleDropdown\" v-show=\"showType == 'tree'\">\r\n            <Button>\r\n              更多操作\r\n              <Icon type=\"md-arrow-dropdown\"></Icon>\r\n            </Button>\r\n            <DropdownMenu slot=\"list\">\r\n              <DropdownItem name=\"refresh\">刷新</DropdownItem>\r\n              <DropdownItem name=\"expandOne\">收合所有</DropdownItem>\r\n              <DropdownItem name=\"expandTwo\">仅展开一级</DropdownItem>\r\n              <DropdownItem name=\"expandThree\">仅展开两级</DropdownItem>\r\n              <DropdownItem name=\"expandAll\">展开所有</DropdownItem>\r\n            </DropdownMenu>\r\n          </Dropdown>\r\n          <Input\r\n            v-model=\"searchKey\"\r\n            suffix=\"ios-search\"\r\n            @on-change=\"search\"\r\n            placeholder=\"输入菜单名搜索\"\r\n            clearable\r\n            style=\"width: 250px\"\r\n            v-show=\"showType == 'list'\"\r\n          />\r\n          <i-switch\r\n            v-model=\"strict\"\r\n            size=\"large\"\r\n            style=\"margin-left: 5px\"\r\n            v-show=\"showType == 'tree'\"\r\n          >\r\n            <span slot=\"open\">级联</span>\r\n            <span slot=\"close\">单选</span>\r\n          </i-switch>\r\n        </div>\r\n        <div>\r\n          <RadioGroup v-model=\"showType\" type=\"button\">\r\n            <Radio title=\"树结构\" label=\"tree\">\r\n              <Icon type=\"md-list\"></Icon>\r\n            </Radio>\r\n            <Radio title=\"列表\" label=\"list\">\r\n              <Icon type=\"ios-apps\"></Icon>\r\n            </Radio>\r\n          </RadioGroup>\r\n        </div>\r\n      </Row>\r\n      <Alert show-icon v-show=\"showType == 'list'\">\r\n        已选择\r\n        <span class=\"select-count\">{{ selectList.length }}</span> 项\r\n        <a class=\"select-clear\" @click=\"clearSelectAll\">清空</a>\r\n      </Alert>\r\n      <Table\r\n        row-key=\"title\"\r\n        :load-data=\"loadData\"\r\n        :columns=\"columns\"\r\n        :data=\"tableData\"\r\n        :loading=\"loading\"\r\n        border\r\n        :update-show-children=\"true\"\r\n        ref=\"table\"\r\n        @on-selection-change=\"showSelect\"\r\n        v-if=\"showType == 'list'\"\r\n      ></Table>\r\n      <Row type=\"flex\" justify=\"start\" :gutter=\"16\" v-show=\"showType == 'tree'\">\r\n        <Col :sm=\"8\" :md=\"8\" :lg=\"8\" :xl=\"6\">\r\n          <Alert show-icon>\r\n            当前选择编辑：\r\n            <span class=\"select-title\">{{ editTitle }}</span>\r\n            <a\r\n              class=\"select-clear\"\r\n              v-show=\"form.id && editTitle\"\r\n              @click=\"cancelEdit\"\r\n              >取消选择</a\r\n            >\r\n          </Alert>\r\n          <Input\r\n            v-model=\"searchKey\"\r\n            suffix=\"ios-search\"\r\n            @on-change=\"search\"\r\n            placeholder=\"输入菜单名搜索\"\r\n            clearable\r\n          />\r\n          <div style=\"position: relative\">\r\n            <div class=\"tree-bar\" :style=\"{ maxHeight: maxHeight }\">\r\n              <Tree\r\n                ref=\"tree\"\r\n                :data=\"data\"\r\n                show-checkbox\r\n                :render=\"renderContent\"\r\n                @on-select-change=\"selectTree\"\r\n                @on-check-change=\"changeSelect\"\r\n                :check-strictly=\"!strict\"\r\n              ></Tree>\r\n            </div>\r\n            <Spin size=\"large\" fix v-if=\"loading\"></Spin>\r\n          </div>\r\n        </Col>\r\n        <Col :sm=\"16\" :md=\"16\" :lg=\"16\" :xl=\"9\">\r\n          <Form ref=\"form\" :model=\"form\" :label-width=\"110\">\r\n            <FormItem label=\"类型\" prop=\"type\">\r\n              <div v-show=\"form.type == -1\">\r\n                <Icon\r\n                  type=\"ios-navigate-outline\"\r\n                  size=\"16\"\r\n                  style=\"margin-right: 5px\"\r\n                ></Icon>\r\n                <span>顶部菜单</span>\r\n              </div>\r\n              <div v-show=\"form.type == 0\">\r\n                <Icon\r\n                  type=\"ios-list-box-outline\"\r\n                  size=\"16\"\r\n                  style=\"margin-right: 5px\"\r\n                ></Icon>\r\n                <span>页面菜单</span>\r\n              </div>\r\n              <div v-show=\"form.type == 1\">\r\n                <Icon\r\n                  type=\"md-radio-button-on\"\r\n                  size=\"16\"\r\n                  style=\"margin-right: 5px\"\r\n                ></Icon>\r\n                <span>操作按钮</span>\r\n              </div>\r\n            </FormItem>\r\n            <FormItem label=\"上级菜单\" prop=\"parentTitle\" class=\"form-noheight\">\r\n              <div style=\"display: flex\">\r\n                <Input\r\n                  v-model=\"form.parentTitle\"\r\n                  readonly\r\n                  style=\"margin-right: 10px\"\r\n                />\r\n                <Poptip\r\n                  transfer\r\n                  trigger=\"click\"\r\n                  placement=\"right-start\"\r\n                  title=\"选择上级菜单\"\r\n                  width=\"250\"\r\n                >\r\n                  <Button icon=\"md-list\">选择菜单</Button>\r\n                  <div slot=\"content\" class=\"tree-bar tree-select\">\r\n                    <Tree\r\n                      :data=\"dataEdit\"\r\n                      @on-select-change=\"selectTreeEdit\"\r\n                    ></Tree>\r\n                    <Spin size=\"large\" fix v-if=\"loading\"></Spin>\r\n                  </div>\r\n                </Poptip>\r\n              </div>\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"名称\"\r\n              prop=\"title\"\r\n              :rules=\"{\r\n                required: true,\r\n                message: '名称不能为空',\r\n                trigger: 'blur',\r\n              }\"\r\n              v-if=\"form.type == -1 || form.type == 0\"\r\n            >\r\n              <div style=\"display: flex\">\r\n                <div style=\"width: 100%\">\r\n                  <Input v-model=\"form.title\">\r\n                    <Poptip\r\n                      transfer\r\n                      trigger=\"hover\"\r\n                      title=\"多语言\"\r\n                      placement=\"right\"\r\n                      width=\"350\"\r\n                      style=\"width: 17px; cursor: pointer\"\r\n                      slot=\"append\"\r\n                    >\r\n                      <Button icon=\"ios-globe-outline\"></Button>\r\n                      <div slot=\"content\">\r\n                        <Form :label-width=\"80\">\r\n                          <FormItem label=\"启用多语言\">\r\n                            <i-switch v-model=\"form.localize\" size=\"large\">\r\n                              <span slot=\"open\">开</span>\r\n                              <span slot=\"close\">关</span>\r\n                            </i-switch>\r\n                          </FormItem>\r\n                          <FormItem label=\"多语言Key\">\r\n                            <Input\r\n                              v-model=\"form.i18n\"\r\n                              placeholder=\"输入用于渲染I18n的$t('KEY')\"\r\n                            ></Input>\r\n                          </FormItem>\r\n                        </Form>\r\n                      </div>\r\n                    </Poptip>\r\n                  </Input>\r\n                </div>\r\n              </div>\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"名称\"\r\n              prop=\"title\"\r\n              :rules=\"{\r\n                required: true,\r\n                message: '名称不能为空',\r\n                trigger: 'blur',\r\n              }\"\r\n              v-if=\"form.type == 1\"\r\n              class=\"block-tool\"\r\n            >\r\n              <Tooltip placement=\"right\" content=\"操作按钮名称不得重复\">\r\n                <Input v-model=\"form.title\" />\r\n              </Tooltip>\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"路径\"\r\n              prop=\"path\"\r\n              :rules=\"{\r\n                required: true,\r\n                message: '路径不能为空',\r\n                trigger: 'blur',\r\n              }\"\r\n              v-if=\"form.type == 0\"\r\n            >\r\n              <Input v-model=\"form.path\" />\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"请求路径\"\r\n              prop=\"path\"\r\n              v-if=\"form.type == 1\"\r\n              class=\"block-tool\"\r\n              :required=\"false\"\r\n            >\r\n              <Tooltip\r\n                placement=\"right\"\r\n                :max-width=\"230\"\r\n                transfer\r\n                content=\"填写后端请求URL，后端将作权限拦截，若无可留空\"\r\n              >\r\n                <Input v-model=\"form.path\" />\r\n              </Tooltip>\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"按钮权限类型\"\r\n              prop=\"buttonType\"\r\n              v-if=\"form.type == 1\"\r\n            >\r\n              <dict\r\n                dict=\"permission_type\"\r\n                v-model=\"form.buttonType\"\r\n                placeholder=\"请选择或输入搜索\"\r\n                filterable\r\n                clearable\r\n              />\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"英文名\"\r\n              prop=\"name\"\r\n              :rules=\"{\r\n                required: true,\r\n                message: '英文名不能为空',\r\n                trigger: 'blur',\r\n              }\"\r\n              v-if=\"form.type == -1\"\r\n              class=\"block-tool\"\r\n            >\r\n              <Tooltip placement=\"right\" content=\"需唯一\">\r\n                <Input v-model=\"form.name\" />\r\n              </Tooltip>\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"路由英文名\"\r\n              prop=\"name\"\r\n              :rules=\"{\r\n                required: true,\r\n                message: '路由英文名不能为空',\r\n                trigger: 'blur',\r\n              }\"\r\n              v-if=\"form.type == 0\"\r\n              class=\"block-tool\"\r\n            >\r\n              <Tooltip placement=\"right\" content=\"需唯一\" transfer>\r\n                <Input v-model=\"form.name\" />\r\n              </Tooltip>\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"图标\"\r\n              prop=\"icon\"\r\n              :rules=\"{\r\n                required: true,\r\n                message: '图标不能为空',\r\n                trigger: 'blur',\r\n              }\"\r\n              v-if=\"form.type == -1 || form.type == 0\"\r\n            >\r\n              <icon-choose\r\n                showCustom\r\n                showInput\r\n                v-model=\"form.icon\"\r\n              ></icon-choose>\r\n            </FormItem>\r\n            <FormItem label=\"显示红点\" prop=\"component\" v-if=\"form.type == -1\">\r\n              <i-switch\r\n                size=\"large\"\r\n                v-model=\"form.component\"\r\n                :true-value=\"'hot'\"\r\n                :false-value=\"'normal'\"\r\n              >\r\n                <span slot=\"open\">开</span>\r\n                <span slot=\"close\">关</span>\r\n              </i-switch>\r\n            </FormItem>\r\n            <FormItem label=\"系统站内菜单\" prop=\"isMenu\" v-if=\"form.type == -1\">\r\n              <i-switch size=\"large\" v-model=\"form.isMenu\">\r\n                <span slot=\"open\">是</span>\r\n                <span slot=\"close\">否</span>\r\n              </i-switch>\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"其他链接\"\r\n              prop=\"url\"\r\n              :rules=\"{\r\n                required: true,\r\n                message: '其他链接不能为空',\r\n                trigger: 'blur',\r\n              }\"\r\n              v-if=\"form.type == -1 && !form.isMenu\"\r\n            >\r\n              <Input v-model=\"form.url\" placeholder=\"Http链接或路由名\" />\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"打开方式\"\r\n              prop=\"description\"\r\n              :rules=\"{\r\n                required: true,\r\n                message: '请选择打开方式',\r\n                trigger: 'change',\r\n              }\"\r\n              v-if=\"form.type == -1 && !form.isMenu\"\r\n            >\r\n              <Select v-model=\"form.description\" placeholder=\"请选择\">\r\n                <Option value=\"direct\" label=\"直接跳转\">\r\n                  <span style=\"margin-right: 10px\">直接跳转</span>\r\n                  <span style=\"color: #ccc\">其他链接填写完整链接</span>\r\n                </Option>\r\n                <Option value=\"window\" label=\"新窗口打开\">\r\n                  <span style=\"margin-right: 10px\">新窗口打开</span>\r\n                  <span style=\"color: #ccc\">其他链接填写完整链接</span>\r\n                </Option>\r\n                <Option value=\"route\" label=\"站内路由\">\r\n                  <span style=\"margin-right: 10px\">站内路由</span>\r\n                  <span style=\"color: #ccc\">其他链接填写Vue路由名</span>\r\n                </Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"前端组件\"\r\n              prop=\"component\"\r\n              :rules=\"{\r\n                required: true,\r\n                message: '前端组件不能为空',\r\n                trigger: 'blur',\r\n              }\"\r\n              v-if=\"form.type == 0\"\r\n            >\r\n              <Input v-model=\"form.component\" />\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"第三方链接\"\r\n              prop=\"url\"\r\n              v-if=\"form.type == 0 && form.level == 2\"\r\n              :required=\"false\"\r\n            >\r\n              <Input\r\n                v-model=\"form.url\"\r\n                placeholder=\"http://\"\r\n                @on-change=\"changeEditUrl\"\r\n              />\r\n              <span class=\"url-remark\"\r\n                >前端组件需为 sys/monitor/monitor 时生效</span\r\n              >\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"排序值\"\r\n              prop=\"sortOrder\"\r\n              :rules=\"{\r\n                required: true,\r\n                type: 'number',\r\n                message: '前端组件不能为空',\r\n                trigger: 'blur',\r\n              }\"\r\n            >\r\n              <Tooltip\r\n                trigger=\"hover\"\r\n                placement=\"right\"\r\n                content=\"值越小越靠前，支持小数\"\r\n              >\r\n                <InputNumber\r\n                  :max=\"1000\"\r\n                  :min=\"0\"\r\n                  v-model=\"form.sortOrder\"\r\n                ></InputNumber>\r\n              </Tooltip>\r\n            </FormItem>\r\n            <FormItem\r\n              label=\"始终显示\"\r\n              prop=\"showAlways\"\r\n              v-if=\"form.level == 1\"\r\n              class=\"block-tool\"\r\n            >\r\n              <i-switch size=\"large\" v-model=\"form.showAlways\">\r\n                <span slot=\"open\">是</span>\r\n                <span slot=\"close\">否</span>\r\n              </i-switch>\r\n              <Tooltip\r\n                content=\"当设为不始终显示时，一级菜单下仅有一个子级菜单只会显示该子级菜单，避免用户多次点击\"\r\n                placement=\"right\"\r\n                transfer\r\n                max-width=\"280\"\r\n                style=\"display: inline-block !important\"\r\n              >\r\n                <Icon\r\n                  type=\"md-help-circle\"\r\n                  size=\"20\"\r\n                  color=\"#c5c5c5\"\r\n                  style=\"margin-left: 10px; cursor: pointer\"\r\n                />\r\n              </Tooltip>\r\n            </FormItem>\r\n            <FormItem label=\"是否启用\" prop=\"status\">\r\n              <i-switch\r\n                size=\"large\"\r\n                v-model=\"form.status\"\r\n                :true-value=\"0\"\r\n                :false-value=\"-1\"\r\n              >\r\n                <span slot=\"open\">启用</span>\r\n                <span slot=\"close\">禁用</span>\r\n              </i-switch>\r\n            </FormItem>\r\n            <FormItem>\r\n              <Button\r\n                style=\"margin-right: 5px\"\r\n                @click=\"submitEdit\"\r\n                :loading=\"submitLoading\"\r\n                :disabled=\"!form.id || !editTitle\"\r\n                type=\"primary\"\r\n                >修改并保存</Button\r\n              >\r\n              <Button @click=\"handleReset\">重置</Button>\r\n            </FormItem>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n\r\n    <add\r\n      :form=\"form\"\r\n      :isRoot=\"isRoot\"\r\n      :dataLength=\"data.length\"\r\n      v-model=\"showAdd\"\r\n      @on-submit=\"addSuccess\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  loadPermission,\r\n  editPermission,\r\n  deletePermission,\r\n  searchPermission,\r\n} from \"@/api/index\";\r\nimport dict from \"@/views/my-components/xboot/dict\";\r\nimport IconChoose from \"@/views/my-components/xboot/icon-choose\";\r\nimport util from \"@/libs/util.js\";\r\nimport add from \"./add.vue\";\r\nexport default {\r\n  name: \"menu-manage\",\r\n  components: {\r\n    dict,\r\n    IconChoose,\r\n    add,\r\n  },\r\n  data() {\r\n    return {\r\n      showType: \"tree\",\r\n      columns: [\r\n        {\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"菜单名称\",\r\n          key: \"title\",\r\n          minWidth: 150,\r\n          sortable: true,\r\n          tree: true,\r\n        },\r\n        {\r\n          title: \"英文名\",\r\n          key: \"name\",\r\n          minWidth: 100,\r\n          sortable: true,\r\n        },\r\n        {\r\n          title: \"类型\",\r\n          key: \"type\",\r\n          minWidth: 120,\r\n          sortable: true,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            let icon = \"\",\r\n              type = \"\",\r\n              level = params.row.level;\r\n            if (level == 0) {\r\n              icon = \"ios-navigate\";\r\n              type = \"顶部菜单\";\r\n            } else if (level == 1) {\r\n              icon = \"md-list-box\";\r\n              type = \"页面菜单\";\r\n            } else if (level == 2) {\r\n              icon = \"md-list\";\r\n              type = \"页面菜单\";\r\n            } else if (level == 3) {\r\n              icon = \"md-radio-button-on\";\r\n              type = \"操作按钮\";\r\n            } else {\r\n              icon = \"md-radio-button-off\";\r\n            }\r\n            return h(\"div\", [\r\n              h(\"Icon\", {\r\n                props: {\r\n                  type: icon,\r\n                },\r\n                style: {\r\n                  margin: \"0 5px 0 0\",\r\n                },\r\n              }),\r\n              h(\"span\", type),\r\n            ]);\r\n          },\r\n        },\r\n        {\r\n          title: \"图标\",\r\n          key: \"icon\",\r\n          minWidth: 100,\r\n          sortable: true,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return h(\"div\", [\r\n              h(\"XIcon\", {\r\n                props: {\r\n                  type: params.row.icon,\r\n                },\r\n              }),\r\n            ]);\r\n          },\r\n        },\r\n        {\r\n          title: \"路径/URL\",\r\n          minWidth: 100,\r\n          key: \"path\",\r\n          tooltip: true,\r\n        },\r\n        {\r\n          title: \"排序\",\r\n          key: \"sortOrder\",\r\n          minWidth: 100,\r\n          sortable: true,\r\n          align: \"center\",\r\n          sortType: \"asc\",\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          key: \"createTime\",\r\n          sortable: true,\r\n          width: 170,\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"action\",\r\n          width: 200,\r\n          fixed: \"right\",\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return h(\"div\", [\r\n              h(\r\n                \"a\",\r\n                {\r\n                  on: {\r\n                    click: () => {\r\n                      this.tableAdd(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"添加子节点\"\r\n              ),\r\n              h(\"Divider\", {\r\n                props: {\r\n                  type: \"vertical\",\r\n                },\r\n              }),\r\n              h(\r\n                \"a\",\r\n                {\r\n                  on: {\r\n                    click: () => {\r\n                      this.remove(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"删除\"\r\n              ),\r\n            ]);\r\n          },\r\n        },\r\n      ],\r\n      loading: true,\r\n      strict: true,\r\n      maxHeight: \"500px\",\r\n      expandLevel: 1,\r\n      selectList: [],\r\n      searchKey: \"\",\r\n      parentTitle: \"\",\r\n      isRoot: false,\r\n      showAdd: false,\r\n      editTitle: \"\",\r\n      form: {\r\n        id: \"\",\r\n        title: \"\",\r\n        name: \"\",\r\n        icon: \"\",\r\n        path: \"\",\r\n        component: \"\",\r\n        parentId: \"\",\r\n        buttonType: \"\",\r\n        isMenu: true,\r\n        type: -1,\r\n        sortOrder: 0,\r\n        level: 0,\r\n        status: 0,\r\n        url: \"\",\r\n        showAlways: true,\r\n        parentTitle: \"\",\r\n      },\r\n      submitLoading: false,\r\n      data: [],\r\n      dataEdit: [],\r\n      tableData: [],\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getAllList();\r\n      this.getParentList(null, true);\r\n    },\r\n    getParentList(f, notShowLoading) {\r\n      if (!notShowLoading) {\r\n        this.loading = true;\r\n      }\r\n      loadPermission(\"0\").then((res) => {\r\n        if (!notShowLoading) {\r\n          this.loading = false;\r\n        }\r\n        if (res.success) {\r\n          res.result.forEach(function (e) {\r\n            if (e.isParent) {\r\n              e.children = [];\r\n              e._loading = false;\r\n            }\r\n          });\r\n          this.tableData = res.result;\r\n        }\r\n      });\r\n    },\r\n    loadData(item, callback) {\r\n      loadPermission(item.id).then((res) => {\r\n        if (res.success) {\r\n          res.result.forEach(function (e) {\r\n            if (e.isParent) {\r\n              e.children = [];\r\n              e._loading = false;\r\n            }\r\n          });\r\n          callback(res.result);\r\n        }\r\n      });\r\n    },\r\n    renderContent(h, { root, node, data }) {\r\n      let icon = \"md-radio-button-off\";\r\n      if (data.level == 0) {\r\n        icon = \"ios-navigate\";\r\n      } else if (data.level == 1) {\r\n        icon = \"md-list-box\";\r\n      } else if (data.level == 2) {\r\n        icon = \"md-list\";\r\n      } else if (data.level == 3) {\r\n        icon = \"md-radio-button-on\";\r\n      }\r\n      return h(\"span\", [\r\n        h(\"span\", [\r\n          h(\"Icon\", {\r\n            props: {\r\n              type: icon,\r\n              size: \"16\",\r\n            },\r\n            style: {\r\n              \"margin-right\": \"8px\",\r\n              \"margin-bottom\": \"3px\",\r\n            },\r\n          }),\r\n          h(\"span\", data.title),\r\n        ]),\r\n      ]);\r\n    },\r\n    handleDropdown(name) {\r\n      if (name == \"expandOne\") {\r\n        this.expandLevel = 1;\r\n      } else if (name == \"expandTwo\") {\r\n        this.expandLevel = 2;\r\n      } else if (name == \"expandThree\") {\r\n        this.expandLevel = 3;\r\n      } else if (name == \"expandAll\") {\r\n        this.expandLevel = 4;\r\n      }\r\n      this.getAllList();\r\n    },\r\n    getAllList() {\r\n      this.loading = true;\r\n      this.getRequest(\"/permission/getAllList\").then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          // 仅展开指定级数 默认后端已展开所有\r\n          let expandLevel = this.expandLevel;\r\n          res.result.forEach(function (e) {\r\n            if (expandLevel == 1) {\r\n              if (e.level == 0) {\r\n                e.expand = false;\r\n              }\r\n              if (e.children && e.children.length > 0) {\r\n                e.children.forEach(function (c) {\r\n                  if (c.level == 1) {\r\n                    c.expand = false;\r\n                  }\r\n                  if (c.children && c.children.length > 0) {\r\n                    c.children.forEach(function (b) {\r\n                      if (b.level == 2) {\r\n                        b.expand = false;\r\n                      }\r\n                    });\r\n                  }\r\n                });\r\n              }\r\n            } else if (expandLevel == 2) {\r\n              if (e.level == 0) {\r\n                e.expand = true;\r\n              }\r\n              if (e.children && e.children.length > 0) {\r\n                e.children.forEach(function (c) {\r\n                  if (c.level == 1) {\r\n                    c.expand = false;\r\n                  }\r\n                  if (c.children && c.children.length > 0) {\r\n                    c.children.forEach(function (b) {\r\n                      if (b.level == 2) {\r\n                        b.expand = false;\r\n                      }\r\n                    });\r\n                  }\r\n                });\r\n              }\r\n            } else if (expandLevel == 3) {\r\n              if (e.level == 0) {\r\n                e.expand = true;\r\n              }\r\n              if (e.children && e.children.length > 0) {\r\n                e.children.forEach(function (c) {\r\n                  if (c.level == 1) {\r\n                    c.expand = true;\r\n                  }\r\n                  if (c.children && c.children.length > 0) {\r\n                    c.children.forEach(function (b) {\r\n                      if (b.level == 2) {\r\n                        b.expand = false;\r\n                      }\r\n                    });\r\n                  }\r\n                });\r\n              }\r\n            }\r\n          });\r\n          this.data = res.result;\r\n          let str = JSON.stringify(res.result);\r\n          this.dataEdit = JSON.parse(str);\r\n          // 头部加入一级\r\n          let first = {\r\n            id: \"0\",\r\n            level: -1,\r\n            title: \"一级菜单\",\r\n          };\r\n          this.dataEdit.unshift(first);\r\n        }\r\n      });\r\n    },\r\n    search() {\r\n      if (this.searchKey) {\r\n        this.loading = true;\r\n        searchPermission({ title: this.searchKey }).then((res) => {\r\n          this.loading = false;\r\n          if (res.success) {\r\n            this.data = res.result;\r\n            this.tableData = res.result;\r\n          }\r\n        });\r\n      } else {\r\n        this.getAllList();\r\n        this.getParentList();\r\n      }\r\n    },\r\n    selectTree(v) {\r\n      if (v.length > 0) {\r\n        this.$refs.form.resetFields();\r\n        // 转换null为\"\"\r\n        for (let attr in v[0]) {\r\n          if (v[0][attr] == null) {\r\n            v[0][attr] = \"\";\r\n          }\r\n        }\r\n        let str = JSON.stringify(v[0]);\r\n        let data = JSON.parse(str);\r\n        this.form = data;\r\n        this.editTitle = data.title;\r\n      } else {\r\n        this.cancelEdit();\r\n      }\r\n    },\r\n    selectTreeEdit(v) {\r\n      if (v.length > 0) {\r\n        // 转换null为\"\"\r\n        for (let attr in v[0]) {\r\n          if (v[0][attr] == null) {\r\n            v[0][attr] = \"\";\r\n          }\r\n        }\r\n        let str = JSON.stringify(v[0]);\r\n        let data = JSON.parse(str);\r\n        if (this.form.id == data.id) {\r\n          this.$Message.warning(\"请勿选择自己作为父节点\");\r\n          v[0].selected = false;\r\n          return;\r\n        }\r\n        // 验证级别level是否正确\r\n        if (this.form.level - 1 != data.level) {\r\n          this.$Message.warning(\"请选择一个\" + this.form.level + \"级菜单节点\");\r\n          v[0].selected = false;\r\n          return;\r\n        }\r\n        this.form.parentId = data.id;\r\n        let level = data.level + 1;\r\n        if (level < 0) {\r\n          level = 0;\r\n        }\r\n        this.form.level = level;\r\n        this.form.parentTitle = data.title;\r\n      }\r\n    },\r\n    cancelEdit() {\r\n      let data = this.$refs.tree.getSelectedNodes()[0];\r\n      if (data) {\r\n        data.selected = false;\r\n      }\r\n      this.$refs.form.resetFields();\r\n      this.form.id = \"\";\r\n      this.editTitle = \"\";\r\n    },\r\n    handleReset() {\r\n      let type = this.form.type;\r\n      this.$refs.form.resetFields();\r\n      this.form.icon = \"\";\r\n      this.form.component = \"\";\r\n      this.form.type = type;\r\n    },\r\n    submitEdit() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          if (!this.form.id) {\r\n            this.$Message.warning(\"请先点击选择要修改的菜单节点\");\r\n            return;\r\n          }\r\n          this.submitLoading = true;\r\n          if (this.form.sortOrder == null) {\r\n            this.form.sortOrder = \"\";\r\n          }\r\n          if (this.form.buttonType == null) {\r\n            this.form.buttonType = \"\";\r\n          }\r\n          if (this.form.type == 1) {\r\n            this.form.name = \"\";\r\n            this.form.icon = \"\";\r\n            this.form.component = \"\";\r\n          }\r\n          editPermission(this.form).then((res) => {\r\n            this.submitLoading = false;\r\n            if (res.success) {\r\n              this.editTitle = this.form.title;\r\n              this.$Message.success(\"编辑成功\");\r\n              // 标记重新获取菜单数据\r\n              this.$store.commit(\"setAdded\", false);\r\n              util.initRouter(this);\r\n              this.init();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    changeEditUrl(e) {\r\n      let v = e.target.value;\r\n      if (v.indexOf(\"http\") > -1) {\r\n        this.form.component = \"sys/monitor/monitor\";\r\n      }\r\n    },\r\n    addRoot() {\r\n      this.isRoot = true;\r\n      this.showAdd = true;\r\n    },\r\n    add() {\r\n      if (!this.form.id) {\r\n        this.$Message.warning(\"请先点击选择一个菜单权限节点\");\r\n        return;\r\n      }\r\n      if (this.form.level == 3) {\r\n        this.$Modal.warning({\r\n          title: \"抱歉，无法继续添加\",\r\n          content: \"左侧菜单最多仅支持二级菜单目录\",\r\n        });\r\n        return;\r\n      }\r\n      this.isRoot = false;\r\n      this.showAdd = true;\r\n    },\r\n    tableAdd(v) {\r\n      this.form = v;\r\n      this.add();\r\n      this.editTitle = \"\";\r\n      let data = this.$refs.tree.getSelectedNodes()[0];\r\n      if (data) {\r\n        data.selected = false;\r\n      }\r\n    },\r\n    addSuccess() {\r\n      // 标记重新获取菜单数据\r\n      this.$store.commit(\"setAdded\", false);\r\n      util.initRouter(this);\r\n      this.init();\r\n    },\r\n    changeSelect(v) {\r\n      this.selectList = v;\r\n    },\r\n    showSelect(e) {\r\n      this.selectList = e;\r\n    },\r\n    clearSelectAll() {\r\n      this.$refs.table.selectAll(false);\r\n    },\r\n    remove(v) {\r\n      this.selectList = [];\r\n      this.selectList.push(v);\r\n      this.delAll();\r\n    },\r\n    delAll() {\r\n      if (this.selectList.length <= 0) {\r\n        this.$Message.warning(\"您还未勾选要删除的数据\");\r\n        return;\r\n      }\r\n      this.$Modal.confirm({\r\n        title: \"确认删除\",\r\n        content:\r\n          \"您确认要删除所选的 \" +\r\n          this.selectList.length +\r\n          \" 条数据及其下级所有数据?\",\r\n        loading: true,\r\n        onOk: () => {\r\n          let ids = \"\";\r\n          this.selectList.forEach(function (e) {\r\n            ids += e.id + \",\";\r\n          });\r\n          ids = ids.substring(0, ids.length - 1);\r\n          deletePermission({ ids: ids }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"删除成功\");\r\n              // 标记重新获取菜单数据\r\n              this.$store.commit(\"setAdded\", false);\r\n              util.initRouter(this);\r\n              this.selectList = [];\r\n              this.cancelEdit();\r\n              this.init();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    // 计算高度\r\n    let height = document.documentElement.clientHeight;\r\n    this.maxHeight = Number(height - 287) + \"px\";\r\n    this.init();\r\n  },\r\n};\r\n</script>"]}]}