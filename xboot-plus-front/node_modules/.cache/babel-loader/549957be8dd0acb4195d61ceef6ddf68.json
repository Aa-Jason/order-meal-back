{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\app-toB\\file\\file.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\app-toB\\file\\file.vue","mtime":1652172213783},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdXBsb2FkRmlsZSwgY2hlY2tPc3NTZXQsIGdldFVzZXJGaWxlTGlzdERhdGEsIGNvcHlVc2VyRmlsZSwgbW92ZUZpbGUsIHJlbmFtZVVzZXJGaWxlLCB0cmFzaEZpbGUsIGNvbGxlY3RGaWxlIH0gZnJvbSAiQC9hcGkvaW5kZXgiOwppbXBvcnQgZmlsZUNhdGVnb3J5IGZyb20gIkAvdmlld3MvYXBwLXRvQi9maWxlL2ZpbGVDYXRlZ29yeSI7CmltcG9ydCB0cmFzaCBmcm9tICIuL3RyYXNoLnZ1ZSI7CmltcG9ydCBEUGxheWVyIGZyb20gImRwbGF5ZXIiOwppbXBvcnQgInZpZXdlcmpzL2Rpc3Qvdmlld2VyLmNzcyI7CmltcG9ydCBWaWV3ZXIgZnJvbSAidmlld2VyanMiOwppbXBvcnQgeyBzaG9ydGN1dHMgfSBmcm9tICJAL2xpYnMvc2hvcnRjdXRzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmaWxlIiwKICBjb21wb25lbnRzOiB7CiAgICBmaWxlQ2F0ZWdvcnk6IGZpbGVDYXRlZ29yeSwKICAgIHRyYXNoOiB0cmFzaAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIHsKICAgICAgc2hvd1RyYXNoOiBmYWxzZSwKICAgICAgdXBsb2FkRGF0YToge30sCiAgICAgIGN1cnJDYXRlOiAiIiwKICAgICAgZXhwYW5kOiB0cnVlLAogICAgICBzcGFuOiAxOCwKICAgICAgZXhwYW5kSWNvbjogImlvcy1hcnJvdy1iYWNrIiwKICAgICAgZHA6IG51bGwsCiAgICAgIHVwbG9hZEZpbGVVcmw6IHVwbG9hZEZpbGUsCiAgICAgIG9wZW5TZWFyY2g6IHRydWUsCiAgICAgIG9wZW5UaXA6IHRydWUsCiAgICAgIGFjY2Vzc1Rva2VuOiB7fSwKICAgICAgLy8g5LiK5LygdG9rZW7pibTmnYMKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIC8vIOihqOWNleWKoOi9veeKtuaAgQogICAgICBmaWxlVHlwZTogImFsbCIsCiAgICAgIHNob3dUeXBlOiAibGlzdCIsCiAgICAgIG1vZGFsVmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIOa3u+WKoOaIlue8lui+keaYvuekugogICAgICBtb3ZlVmlzaWJsZTogZmFsc2UsCiAgICAgIHVwbG9hZFZpc2libGU6IGZhbHNlLAogICAgICB2aWRlb1Zpc2libGU6IGZhbHNlLAogICAgICBwaWNWaXNpYmxlOiBmYWxzZSwKICAgICAgcGljVGl0bGU6ICIiLAogICAgICB2aWRlb1RpdGxlOiAiIiwKICAgICAgbW9kYWxUaXRsZTogIiIsCiAgICAgIC8vIOa3u+WKoOaIlue8lui+keagh+mimAogICAgICBtb3ZlQ2F0ZWdvcnlJZDogIiIsCiAgICAgIG1vdmVGaWxlSWRzOiBbXSwKICAgICAgc2VhcmNoRm9ybTogewogICAgICAgIC8vIOaQnOe0ouahhuWvueW6lGRhdGHlr7nosaEKICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgdHlwZTogIiIsCiAgICAgICAgcGFnZU51bWJlcjogMSwKICAgICAgICAvLyDlvZPliY3pobXmlbAKICAgICAgICBwYWdlU2l6ZTogNSwKICAgICAgICAvLyDpobXpnaLlpKflsI8KICAgICAgICBzb3J0OiAiY3JlYXRlVGltZSIsCiAgICAgICAgLy8g6buY6K6k5o6S5bqP5a2X5q61CiAgICAgICAgb3JkZXI6ICJkZXNjIiwKICAgICAgICAvLyDpu5jorqTmjpLluo/mlrnlvI8KICAgICAgICBzdGFydERhdGU6ICIiLAogICAgICAgIC8vIOi1t+Wni+aXtumXtAogICAgICAgIGVuZERhdGU6ICIiLAogICAgICAgIC8vIOe7iOatouaXtumXtAogICAgICAgIGNhdGVnb3J5SWQ6ICIwIiwKICAgICAgICBpc0NvbGxlY3Q6IG51bGwKICAgICAgfSwKICAgICAgc2VsZWN0RGF0ZTogbnVsbCwKICAgICAgLy8g6YCJ5oup5pel5pyf57uR5a6abW9kYWwKICAgICAgb3B0aW9uczogewogICAgICAgIHNob3J0Y3V0czogc2hvcnRjdXRzCiAgICAgIH0sCiAgICAgIGZvcm06IHsKICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgZmtleTogIiIKICAgICAgfSwKICAgICAgZmlsZToge30sCiAgICAgIC8vIOihqOWNlemqjOivgeinhOWImQogICAgICBmb3JtVmFsaWRhdGU6IHsKICAgICAgICB0aXRsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBma2V5OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgICAvLyDmt7vliqDmiJbnvJbovpHmj5DkuqTnirbmgIEKICAgICAgc2VsZWN0TGlzdDogW10sCiAgICAgIC8vIOWkmumAieaVsOaNrgogICAgICB0b3RhbFNpemU6ICIiLAogICAgICAvLyDmlofku7blpKflsI/nu5/orqEKICAgICAgY29sdW1uczogWy8vIOihqOWktAogICAgICB7CiAgICAgICAgdHlwZTogInNlbGVjdGlvbiIsCiAgICAgICAgd2lkdGg6IDYwLAogICAgICAgIGFsaWduOiAiY2VudGVyIgogICAgICB9LCB7CiAgICAgICAgdHlwZTogImluZGV4IiwKICAgICAgICB3aWR0aDogNjAsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuaWh+S7tuWQjSIsCiAgICAgICAga2V5OiAidGl0bGUiLAogICAgICAgIG1pbldpZHRoOiAxNTAsCiAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcGFyYW1zKSB7CiAgICAgICAgICBpZiAocGFyYW1zLnJvdy5pc0NvbGxlY3QpIHsKICAgICAgICAgICAgcmV0dXJuIGgoImRpdiIsIFtoKCJzcGFuIiwgcGFyYW1zLnJvdy50aXRsZSksIGgoIkljb24iLCB7CiAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICI1cHgiCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgICAgdHlwZTogIm1kLXN0YXIiLAogICAgICAgICAgICAgICAgY29sb3I6ICIjZmZjNjBhIiwKICAgICAgICAgICAgICAgIHNpemU6ICIxOCIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pXSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGgoInNwYW4iLCBwYXJhbXMucm93LnRpdGxlKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIue8qeeVpeWbvijngrnlh7vpooTop4gpIiwKICAgICAgICBrZXk6ICJ1cmwiLAogICAgICAgIHdpZHRoOiAxNTAsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIHBhcmFtcykgewogICAgICAgICAgaWYgKHBhcmFtcy5yb3cudHlwZS5pbmNsdWRlcygiaW1hZ2UiKSA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIGgoImltZyIsIHsKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgc3JjOiBwYXJhbXMucm93LnVybAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgIGN1cnNvcjogInpvb20taW4iLAogICAgICAgICAgICAgICAgd2lkdGg6ICI4MHB4IiwKICAgICAgICAgICAgICAgIGhlaWdodDogIjYwcHgiLAogICAgICAgICAgICAgICAgbWFyZ2luOiAiMTBweCAwIiwKICAgICAgICAgICAgICAgICJvYmplY3QtZml0IjogImNvbnRhaW4iCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5zaG93UGljKHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5yb3cudHlwZS5pbmNsdWRlcygidmlkZW8iKSA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIGgoInZpZGVvIiwgewogICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICBjdXJzb3I6ICJwb2ludGVyIiwKICAgICAgICAgICAgICAgIHdpZHRoOiAiODBweCIsCiAgICAgICAgICAgICAgICBoZWlnaHQ6ICI2MHB4IiwKICAgICAgICAgICAgICAgIG1hcmdpbjogIjEwcHggMCIsCiAgICAgICAgICAgICAgICAib2JqZWN0LWZpdCI6ICJjb250YWluIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvd1ZpZGVvKHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgW2goInNvdXJjZSIsIHsKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgc3JjOiBwYXJhbXMucm93LnVybCArICIjdD0xIiwKICAgICAgICAgICAgICAgIHByZWxvYWQ6ICJtZXRhZGF0YSIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pXSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5yb3cudHlwZS5pbmNsdWRlcygid29yZCIpID4gMCkgewogICAgICAgICAgICByZXR1cm4gaCgiaW1nIiwgewogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICBzcmM6IHJlcXVpcmUoIkAvYXNzZXRzL2ljb24vd29yZC5wbmciKQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgIGN1cnNvcjogInpvb20taW4iLAogICAgICAgICAgICAgICAgd2lkdGg6ICI4MHB4IiwKICAgICAgICAgICAgICAgIGhlaWdodDogIjYwcHgiLAogICAgICAgICAgICAgICAgbWFyZ2luOiAiMTBweCAwIiwKICAgICAgICAgICAgICAgICJvYmplY3QtZml0IjogImNvbnRhaW4iCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5zaG93T2ZmaWNlKHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5yb3cuZmtleS5pbmNsdWRlcygiLnhsc3giKSA+IDAgfHwgcGFyYW1zLnJvdy5ma2V5LmluY2x1ZGVzKCIueGxzIikgPiAwIHx8IHBhcmFtcy5yb3cudHlwZS5pbmNsdWRlcygic2hlZXQiKSA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIGgoImltZyIsIHsKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgc3JjOiByZXF1aXJlKCJAL2Fzc2V0cy9pY29uL3hscy5wbmciKQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgIGN1cnNvcjogInpvb20taW4iLAogICAgICAgICAgICAgICAgd2lkdGg6ICI4MHB4IiwKICAgICAgICAgICAgICAgIGhlaWdodDogIjYwcHgiLAogICAgICAgICAgICAgICAgbWFyZ2luOiAiMTBweCAwIiwKICAgICAgICAgICAgICAgICJvYmplY3QtZml0IjogImNvbnRhaW4iCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5zaG93T2ZmaWNlKHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtcy5yb3cudHlwZS5pbmNsdWRlcygicHJlc2VudGF0aW9uIikgPiAwKSB7CiAgICAgICAgICAgIHJldHVybiBoKCJpbWciLCB7CiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHNyYzogcmVxdWlyZSgiQC9hc3NldHMvaWNvbi9wcHQucG5nIikKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICBjdXJzb3I6ICJ6b29tLWluIiwKICAgICAgICAgICAgICAgIHdpZHRoOiAiODBweCIsCiAgICAgICAgICAgICAgICBoZWlnaHQ6ICI2MHB4IiwKICAgICAgICAgICAgICAgIG1hcmdpbjogIjEwcHggMCIsCiAgICAgICAgICAgICAgICAib2JqZWN0LWZpdCI6ICJjb250YWluIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvd09mZmljZShwYXJhbXMucm93KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMucm93LnR5cGUuaW5jbHVkZXMoInBkZiIpID4gMCkgewogICAgICAgICAgICByZXR1cm4gaCgiaW1nIiwgewogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICBzcmM6IHJlcXVpcmUoIkAvYXNzZXRzL2ljb24vcGRmLnBuZyIpCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgY3Vyc29yOiAiem9vbS1pbiIsCiAgICAgICAgICAgICAgICB3aWR0aDogIjYwcHgiLAogICAgICAgICAgICAgICAgbWFyZ2luOiAiMTBweCAwIiwKICAgICAgICAgICAgICAgICJvYmplY3QtZml0IjogImNvbnRhaW4iCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5zaG93RmlsZShwYXJhbXMucm93KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMucm93LnR5cGUuaW5jbHVkZXMoImF1ZGlvIikgPiAwKSB7CiAgICAgICAgICAgIHJldHVybiBoKCJpbWciLCB7CiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHNyYzogcmVxdWlyZSgiQC9hc3NldHMvaWNvbi9tcDMucG5nIikKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICBjdXJzb3I6ICJ6b29tLWluIiwKICAgICAgICAgICAgICAgIHdpZHRoOiAiNjBweCIsCiAgICAgICAgICAgICAgICBtYXJnaW46ICIxMHB4IDAiLAogICAgICAgICAgICAgICAgIm9iamVjdC1maXQiOiAiY29udGFpbiIKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnNob3dWaWRlbyhwYXJhbXMucm93KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMucm93LnR5cGUuaW5jbHVkZXMoInppcCIpID4gMCB8fCBwYXJhbXMucm93LnR5cGUuaW5jbHVkZXMoInJhciIpID4gMCB8fCBwYXJhbXMucm93LnR5cGUuaW5jbHVkZXMoIjd6IikgPiAwKSB7CiAgICAgICAgICAgIHJldHVybiBoKCJpbWciLCB7CiAgICAgICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgICAgIHNyYzogcmVxdWlyZSgiQC9hc3NldHMvaWNvbi96aXAucG5nIikKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICB3aWR0aDogIjYwcHgiLAogICAgICAgICAgICAgICAgbWFyZ2luOiAiMTBweCAwIiwKICAgICAgICAgICAgICAgICJvYmplY3QtZml0IjogImNvbnRhaW4iCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLmmoLkuI3mlK/mjIHpooTop4giKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJhbXMucm93LnR5cGUuaW5jbHVkZXMoInRleHQiKSA+IDAgfHwgcGFyYW1zLnJvdy50eXBlLmluY2x1ZGVzKCJvY3RldCIpID4gMCkgewogICAgICAgICAgICByZXR1cm4gaCgiaW1nIiwgewogICAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgICBzcmM6IHJlcXVpcmUoIkAvYXNzZXRzL2ljb24vZmlsZS5wbmciKQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgIGN1cnNvcjogInpvb20taW4iLAogICAgICAgICAgICAgICAgd2lkdGg6ICI1NXB4IiwKICAgICAgICAgICAgICAgIGhlaWdodDogIjYwcHgiLAogICAgICAgICAgICAgICAgbWFyZ2luOiAiMTBweCAwIiwKICAgICAgICAgICAgICAgICJvYmplY3QtZml0IjogImNvbnRhaW4iCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5zaG93RmlsZShwYXJhbXMucm93KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGgoImltZyIsIHsKICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgc3JjOiByZXF1aXJlKCJAL2Fzc2V0cy9pY29uL2ZpbGUucG5nIikKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICB3aWR0aDogIjU1cHgiLAogICAgICAgICAgICAgICAgaGVpZ2h0OiAiNjBweCIsCiAgICAgICAgICAgICAgICBtYXJnaW46ICIxMHB4IDAiLAogICAgICAgICAgICAgICAgIm9iamVjdC1maXQiOiAiY29udGFpbiIKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLiRNZXNzYWdlLndhcm5pbmcoIuaaguS4jeaUr+aMgemihOiniCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLmlofku7bnsbvlnosiLAogICAgICAgIGtleTogInR5cGUiLAogICAgICAgIHdpZHRoOiAxMjAsCiAgICAgICAgc29ydGFibGU6IHRydWUsCiAgICAgICAgdG9vbHRpcDogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLmlofku7blpKflsI8iLAogICAgICAgIGtleTogInNpemUiLAogICAgICAgIHdpZHRoOiAxMjAsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIHNvcnRhYmxlOiB0cnVlLAogICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIHBhcmFtcykgewogICAgICAgICAgdmFyIG0gPSBfdGhpcy51dGlsLmdldEZpbGVTaXplKHBhcmFtcy5yb3cuc2l6ZSk7CgogICAgICAgICAgcmV0dXJuIGgoInNwYW4iLCBtKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuWIm+W7uuaXtumXtCIsCiAgICAgICAga2V5OiAiY3JlYXRlVGltZSIsCiAgICAgICAgd2lkdGg6IDE4MCwKICAgICAgICBzb3J0YWJsZTogdHJ1ZSwKICAgICAgICBzb3J0VHlwZTogImRlc2MiCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuaTjeS9nCIsCiAgICAgICAga2V5OiAiYWN0aW9uIiwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgZml4ZWQ6ICJyaWdodCIsCiAgICAgICAgd2lkdGg6IDE3MCwKICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoLCBwYXJhbXMpIHsKICAgICAgICAgIHJldHVybiBoKCJkaXYiLCBbaCgiYSIsIHsKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5kb3dubG9hZChwYXJhbXMucm93KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICLkuIvovb0iKSwgaCgiRGl2aWRlciIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB0eXBlOiAidmVydGljYWwiCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLCBoKCJEcm9wZG93biIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB0cmFuc2ZlcjogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICJvbi1jbGljayI6IGZ1bmN0aW9uIG9uQ2xpY2sodikgewogICAgICAgICAgICAgICAgX3RoaXMuY2hhbmdlRHJvcERvd24ocGFyYW1zLnJvdywgdik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBbaCgiYSIsIFsi5pu05aSa5pON5L2cIiwgaCgiSWNvbiIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICB0eXBlOiAiaW9zLWFycm93LWRvd24iCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pXSksIGgoIkRyb3Bkb3duTWVudSIsIHsKICAgICAgICAgICAgc2xvdDogImxpc3QiCiAgICAgICAgICB9LCBbaCgiRHJvcGRvd25JdGVtIiwgewogICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgIG5hbWU6ICJzaGFyZSIKICAgICAgICAgICAgfQogICAgICAgICAgfSwgIuWIhuS6qyIpLCBoKCJEcm9wZG93bkl0ZW0iLCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgbmFtZTogImNvbGxlY3QiCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHBhcmFtcy5yb3cuaXNDb2xsZWN0ID8gIuWPlua2iOaUtuiXjyIgOiAi5pS26JePIiksIGgoIkRyb3Bkb3duSXRlbSIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBuYW1lOiAicmVuYW1lIgogICAgICAgICAgICB9CiAgICAgICAgICB9LCAi6YeN5ZG95ZCNIiksIGgoIkRyb3Bkb3duSXRlbSIsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBuYW1lOiAibW92ZSIKICAgICAgICAgICAgfQogICAgICAgICAgfSwgIuenu+WKqCIpLCBoKCJEcm9wZG93bkl0ZW0iLCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgbmFtZTogImNvcHkiCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICLlpI3liLYiKSwgaCgiRHJvcGRvd25JdGVtIiwgewogICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgIG5hbWU6ICJyZW1vdmUiCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICLliKDpmaQiKV0pXSldKTsKICAgICAgICB9CiAgICAgIH1dLAogICAgICBkYXRhOiBbXSwKICAgICAgLy8g6KGo5Y2V5pWw5o2uCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDooajljZXmlbDmja7mgLvmlbAKICAgICAgcGFnZVNpemVPcHRzOiBbNSwgMTAsIDIwXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZURyb3Bkb3duOiBmdW5jdGlvbiBoYW5kbGVEcm9wZG93bihuYW1lKSB7CiAgICAgIGlmIChuYW1lID09ICJtb3ZlQWxsIikgewogICAgICAgIHRoaXMubW92ZUFsbCgpOwogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gInJlbW92ZUFsbCIpIHsKICAgICAgICB0aGlzLnJlbW92ZUFsbCgpOwogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gInRpdGxlIikgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5zb3J0ID0gInRpdGxlIjsKICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAic2l6ZSIpIHsKICAgICAgICB0aGlzLnNlYXJjaEZvcm0uc29ydCA9ICJzaXplIjsKICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAidHlwZSIpIHsKICAgICAgICB0aGlzLnNlYXJjaEZvcm0uc29ydCA9ICJ0eXBlIjsKICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAidGltZSIpIHsKICAgICAgICB0aGlzLnNlYXJjaEZvcm0uc29ydCA9ICJjcmVhdGVUaW1lIjsKICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICAgIH0KICAgIH0sCiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSB7CiAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuZ2V0U3RvcmUoImFjY2Vzc1Rva2VuIikKICAgICAgfTsKICAgICAgY2hlY2tPc3NTZXQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoIXJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpczIuJE1vZGFsLmNvbmZpcm0oewogICAgICAgICAgICB0aXRsZTogIuezu+e7n+i/mOacqumFjee9rk9TUyIsCiAgICAgICAgICAgIGNvbnRlbnQ6ICLnrqHnkIblkZjov5jmnKrphY3nva7nrKzkuInmlrlPU1PmnI3liqHvvIzmmK/lkKbnjrDlnKjnq4vljbPljrvphY3nva4/IiwKICAgICAgICAgICAgb25PazogZnVuY3Rpb24gb25PaygpIHsKICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6ICJzZXR0aW5nIiwKICAgICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICJvc3MiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2VsZWN0Q2F0ZWdvcnk6IGZ1bmN0aW9uIHNlbGVjdENhdGVnb3J5KHYpIHsKICAgICAgaWYgKHYuaWQgPT0gIi0xIikgewogICAgICAgIC8vIOaUtuiXj+WkuQogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5jYXRlZ29yeUlkID0gIiI7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLmlzQ29sbGVjdCA9IHRydWU7CiAgICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5pc0NvbGxlY3QgPSBudWxsOwogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5jYXRlZ29yeUlkID0gdi5pZDsKICAgICAgICB0aGlzLnVwbG9hZERhdGEgPSB7CiAgICAgICAgICBjYXRlZ29yeUlkOiB2LmlkCiAgICAgICAgfTsKICAgICAgICB0aGlzLmN1cnJDYXRlID0gdi50aXRsZTsKICAgICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VFeHBhbmQ6IGZ1bmN0aW9uIGNoYW5nZUV4cGFuZCgpIHsKICAgICAgdGhpcy5leHBhbmQgPSAhdGhpcy5leHBhbmQ7CgogICAgICBpZiAodGhpcy5leHBhbmQpIHsKICAgICAgICB0aGlzLmV4cGFuZEljb24gPSAiaW9zLWFycm93LWJhY2siOwogICAgICAgIHRoaXMuc3BhbiA9IDE4OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXhwYW5kSWNvbiA9ICJpb3MtYXJyb3ctZm9yd2FyZCI7CiAgICAgICAgdGhpcy5zcGFuID0gMjM7CiAgICAgIH0KICAgIH0sCiAgICBzaG93UGljOiBmdW5jdGlvbiBzaG93UGljKHYpIHsKICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7CiAgICAgIGltYWdlLnNyYyA9IHYudXJsOwogICAgICB2YXIgdmlld2VyID0gbmV3IFZpZXdlcihpbWFnZSwgewogICAgICAgIGhpZGRlbjogZnVuY3Rpb24gaGlkZGVuKCkgewogICAgICAgICAgdmlld2VyLmRlc3Ryb3koKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB2aWV3ZXIuc2hvdygpOwogICAgfSwKICAgIHNob3dWaWRlbzogZnVuY3Rpb24gc2hvd1ZpZGVvKHYpIHsKICAgICAgdGhpcy5kcCA9IG5ldyBEUGxheWVyKHsKICAgICAgICBjb250YWluZXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkcGxheWVyIiksCiAgICAgICAgc2NyZWVuc2hvdDogdHJ1ZSwKICAgICAgICB2aWRlbzogewogICAgICAgICAgdXJsOiB2LnVybAogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuZmlsZSA9IHY7CiAgICAgIHRoaXMuZmlsZS5tc2l6ZSA9IHRoaXMudXRpbC5nZXRGaWxlU2l6ZSh2LnNpemUpOwogICAgICB0aGlzLnZpZGVvVGl0bGUgPSB2LnRpdGxlICsgIigiICsgdi5ma2V5ICsgIikiOwogICAgICB0aGlzLnZpZGVvVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgY2xvc2VWaWRlbzogZnVuY3Rpb24gY2xvc2VWaWRlbygpIHsKICAgICAgaWYgKHRoaXMuZHApIHsKICAgICAgICB0aGlzLmRwLmRlc3Ryb3koKTsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZVBhZ2U6IGZ1bmN0aW9uIGNoYW5nZVBhZ2UodikgewogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bWJlciA9IHY7CiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgICAgdGhpcy5jbGVhclNlbGVjdEFsbCgpOwogICAgfSwKICAgIGNoYW5nZVBhZ2VTaXplOiBmdW5jdGlvbiBjaGFuZ2VQYWdlU2l6ZSh2KSB7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IHY7CiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgIH0sCiAgICBjaGFuZ2VTb3J0OiBmdW5jdGlvbiBjaGFuZ2VTb3J0KGUpIHsKICAgICAgdGhpcy5zZWFyY2hGb3JtLnNvcnQgPSBlLmtleTsKICAgICAgdGhpcy5zZWFyY2hGb3JtLm9yZGVyID0gZS5vcmRlcjsKCiAgICAgIGlmIChlLm9yZGVyID09ICJub3JtYWwiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLm9yZGVyID0gIiI7CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgIH0sCiAgICBzZWxlY3REYXRlUmFuZ2U6IGZ1bmN0aW9uIHNlbGVjdERhdGVSYW5nZSh2KSB7CiAgICAgIGlmICh2KSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnN0YXJ0RGF0ZSA9IHZbMF07CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLmVuZERhdGUgPSB2WzFdOwogICAgICB9CiAgICB9LAogICAgY2hhbmdlU2hvd1R5cGU6IGZ1bmN0aW9uIGNoYW5nZVNob3dUeXBlKCkgewogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bWJlciA9IDE7CgogICAgICBpZiAodGhpcy5zaG93VHlwZSA9PSAibGlzdCIpIHsKICAgICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZVNpemUgPSA1OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IDEyOwogICAgICB9CgogICAgICB0aGlzLmdldERhdGFMaXN0KCk7CiAgICB9LAogICAgZ2V0RGF0YUxpc3Q6IGZ1bmN0aW9uIGdldERhdGFMaXN0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnNob3dUeXBlID09ICJsaXN0IikgewogICAgICAgIHRoaXMucGFnZVNpemVPcHRzID0gWzUsIDEwLCAyMF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYWdlU2l6ZU9wdHMgPSBbMTIsIDI0XTsKICAgICAgfQoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0VXNlckZpbGVMaXN0RGF0YSh0aGlzLnNlYXJjaEZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMzLmRhdGEgPSByZXMucmVzdWx0LmNvbnRlbnQ7CiAgICAgICAgICBfdGhpczMudG90YWwgPSByZXMucmVzdWx0LnRvdGFsRWxlbWVudHM7CgogICAgICAgICAgaWYgKF90aGlzMy5kYXRhLmxlbmd0aCA9PSAwICYmIF90aGlzMy5zZWFyY2hGb3JtLnBhZ2VOdW1iZXIgPiAxKSB7CiAgICAgICAgICAgIF90aGlzMy5zZWFyY2hGb3JtLnBhZ2VOdW1iZXIgLT0gMTsKCiAgICAgICAgICAgIF90aGlzMy5nZXREYXRhTGlzdCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VhcmNoOiBmdW5jdGlvbiBoYW5kbGVTZWFyY2goKSB7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlTnVtYmVyID0gMTsKCiAgICAgIGlmICh0aGlzLnNob3dUeXBlID09ICJsaXN0IikgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IDU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnBhZ2VTaXplID0gMTI7CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgIH0sCiAgICBjaGFuZ2VGaWxlVHlwZTogZnVuY3Rpb24gY2hhbmdlRmlsZVR5cGUoKSB7CiAgICAgIHZhciBuYW1lID0gdGhpcy5maWxlVHlwZTsKCiAgICAgIGlmIChuYW1lID09ICJhbGwiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAiIjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJwaWMiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAiaW1hZ2UiOwogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gInZpZGVvIikgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS50eXBlID0gInZpZGVvIjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJ3b3JkIikgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS50eXBlID0gIndvcmQiOwogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gImV4Y2VsIikgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS50eXBlID0gInNoZWV0IjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJwcHQiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAicHJlc2VudGF0aW9uIjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJwZGYiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAicGRmIjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJhdWRpbyIpIHsKICAgICAgICB0aGlzLnNlYXJjaEZvcm0udHlwZSA9ICJhdWRpbyI7CiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAidGV4dCIpIHsKICAgICAgICB0aGlzLnNlYXJjaEZvcm0udHlwZSA9ICJ0ZXh0IjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJ6aXAiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAiemlwIjsKICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJyYXIiKSB7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLnR5cGUgPSAicmFyIjsKICAgICAgfQoKICAgICAgdGhpcy5oYW5kbGVTZWFyY2goKTsKICAgIH0sCiAgICBoYW5kbGVSZXNldDogZnVuY3Rpb24gaGFuZGxlUmVzZXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuc2VhcmNoRm9ybS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZU51bWJlciA9IDE7CgogICAgICBpZiAodGhpcy5zaG93VHlwZSA9PSAibGlzdCIpIHsKICAgICAgICB0aGlzLnNlYXJjaEZvcm0ucGFnZVNpemUgPSA1OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoRm9ybS5wYWdlU2l6ZSA9IDEyOwogICAgICB9CgogICAgICB0aGlzLnNlbGVjdERhdGUgPSBudWxsOwogICAgICB0aGlzLnNlYXJjaEZvcm0uc3RhcnREYXRlID0gIiI7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5lbmREYXRlID0gIiI7IC8vIOmHjeaWsOWKoOi9veaVsOaNrgoKICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgfSwKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVNYXhTaXplOiBmdW5jdGlvbiBoYW5kbGVNYXhTaXplKGZpbGUpIHsKICAgICAgdGhpcy4kTm90aWNlLndhcm5pbmcoewogICAgICAgIHRpdGxlOiAi5paH5Lu25aSn5bCP6L+H5aSnIiwKICAgICAgICBkZXNjOiAi5omA6YCJ5paH5Lu24oCYICIgKyBmaWxlLm5hbWUgKyAiIOKAmeWkp+Wwj+i/h+Wkpywg5LiN5b6X6LaF6L+HIDVNLiIKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlU3VjY2VzcyhyZXMsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5LiK5Lyg5paH5Lu2ICIgKyBmaWxlLm5hbWUgKyAiIOaIkOWKnyIpOwogICAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaWxlLnBlcmNlbnRhZ2UgPSAwOwogICAgICAgIGZpbGUuc3RhdHVzID0gImZhaWwiOwogICAgICAgIGZpbGUubmFtZSArPSAi77yI5LiK5Lyg5aSx6LSl77yJIjsKICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUVycm9yOiBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnJvciwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihlcnJvci50b1N0cmluZygpKTsKICAgIH0sCiAgICBjbGVhckZpbGVzOiBmdW5jdGlvbiBjbGVhckZpbGVzKCkgewogICAgICB0aGlzLiRyZWZzLnVwLmNsZWFyRmlsZXMoKTsKICAgIH0sCiAgICBoYW5kbGVDYW5jZWw6IGZ1bmN0aW9uIGhhbmRsZUNhbmNlbCgpIHsKICAgICAgdGhpcy5tb2RhbFZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBkb3dubG9hZDogZnVuY3Rpb24gZG93bmxvYWQodikgewogICAgICB3aW5kb3cub3Blbih2LnVybCArICI/YXR0bmFtZT0mcmVzcG9uc2UtY29udGVudC10eXBlPWFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSZmaWxlbmFtZT0iICsgdi50aXRsZSk7CiAgICB9LAogICAgc2hvd09mZmljZTogZnVuY3Rpb24gc2hvd09mZmljZSh2KSB7CiAgICAgIHdpbmRvdy5vcGVuKCJodHRwczovL3ZpZXcub2ZmaWNlYXBwcy5saXZlLmNvbS9vcC92aWV3LmFzcHg/c3JjPSIgKyB2LnVybCk7CiAgICB9LAogICAgc2hvd0ZpbGU6IGZ1bmN0aW9uIHNob3dGaWxlKHYpIHsKICAgICAgd2luZG93Lm9wZW4odi51cmwgKyAiP3ByZXZpZXc9dHJ1ZSIpOwogICAgfSwKICAgIHByZXZpZXdGaWxlOiBmdW5jdGlvbiBwcmV2aWV3RmlsZSh2KSB7CiAgICAgIGlmICh2LnR5cGUuaW5kZXhPZigiYXVkaW8iKSA+PSAwKSB7CiAgICAgICAgdGhpcy5zaG93VmlkZW8odik7CiAgICAgIH0gZWxzZSBpZiAodi50eXBlLmluZGV4T2YoIm9mZmljZSIpID49IDAgfHwgdi50eXBlLmluZGV4T2YoIndvcmQiKSA+PSAwKSB7CiAgICAgICAgdGhpcy5zaG93T2ZmaWNlKHYpOwogICAgICB9IGVsc2UgaWYgKHYudHlwZS5pbmRleE9mKCJwZGYiKSA+PSAwIHx8IHYudHlwZS5pbmRleE9mKCJ0ZXh0IikgPj0gMCB8fCB2LnR5cGUuaW5kZXhPZigib2N0ZXQiKSA+PSAwKSB7CiAgICAgICAgdGhpcy5zaG93RmlsZSh2KTsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZURyb3BEb3duOiBmdW5jdGlvbiBjaGFuZ2VEcm9wRG93bihyb3csIHYpIHsKICAgICAgaWYgKHYgPT0gInJlbmFtZSIpIHsKICAgICAgICB0aGlzLnJlbmFtZShyb3cpOwogICAgICB9IGVsc2UgaWYgKHYgPT0gImNvcHkiKSB7CiAgICAgICAgdGhpcy5jb3B5KHJvdyk7CiAgICAgIH0gZWxzZSBpZiAodiA9PSAicmVtb3ZlIikgewogICAgICAgIHRoaXMucmVtb3ZlKHJvdyk7CiAgICAgIH0gZWxzZSBpZiAodiA9PSAibW92ZSIpIHsKICAgICAgICB0aGlzLm1vdmUocm93KTsKICAgICAgfSBlbHNlIGlmICh2ID09ICJzaGFyZSIpIHsKICAgICAgICB0aGlzLnNoYXJlKHJvdyk7CiAgICAgIH0gZWxzZSBpZiAodiA9PSAiY29sbGVjdCIpIHsKICAgICAgICB0aGlzLmNvbGxlY3Qocm93KTsKICAgICAgfQogICAgfSwKICAgIHNoYXJlOiBmdW5jdGlvbiBzaGFyZSh2KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy4kY29weVRleHQodi51cmwpLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczQuJE1lc3NhZ2Uuc3VjY2Vzcygi5aSN5Yi26ZO+5o6l5oiQ5YqfIik7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdE1vdmVDYXRlZ29yeTogZnVuY3Rpb24gc2VsZWN0TW92ZUNhdGVnb3J5KHYpIHsKICAgICAgdGhpcy5tb3ZlQ2F0ZWdvcnlJZCA9IHYuaWQ7CiAgICB9LAogICAgbW92ZUFsbDogZnVuY3Rpb24gbW92ZUFsbCgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0TGlzdC5sZW5ndGggPD0gMCkgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygi5oKo6L+Y5pyq6YCJ5oup6KaB56e75Yqo55qE5paH5Lu2Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaWRzID0gIiI7CiAgICAgIHRoaXMuc2VsZWN0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWRzICs9IGUuaWQgKyAiLCI7CiAgICAgIH0pOwogICAgICBpZHMgPSBpZHMuc3Vic3RyaW5nKDAsIGlkcy5sZW5ndGggLSAxKTsKICAgICAgdGhpcy5tb3ZlRmlsZUlkcyA9IGlkczsKICAgICAgdGhpcy5tb3ZlVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgbW92ZTogZnVuY3Rpb24gbW92ZSh2KSB7CiAgICAgIHRoaXMubW92ZUZpbGVJZHMgPSBbdi5pZF07CiAgICAgIHRoaXMubW92ZVZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdE1vdmU6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdE1vdmUoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKICAgICAgbW92ZUZpbGUoewogICAgICAgIGlkczogdGhpcy5tb3ZlRmlsZUlkcywKICAgICAgICBjYXRlZ29yeUlkOiB0aGlzLm1vdmVDYXRlZ29yeUlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNS5zdWJtaXRMb2FkaW5nID0gZmFsc2U7CgogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXM1LiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwoKICAgICAgICAgIF90aGlzNS5tb3ZlVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzNS5jbGVhclNlbGVjdEFsbCgpOwoKICAgICAgICAgIF90aGlzNS5nZXREYXRhTGlzdCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY29weTogZnVuY3Rpb24gY29weSh2KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy4kTW9kYWwuY29uZmlybSh7CiAgICAgICAgdGl0bGU6ICLnoa7orqTlpI3liLYiLAogICAgICAgIGNvbnRlbnQ6ICLmgqjnoa7orqTopoHlpI3liLbmlofku7YgIiArIHYudGl0bGUgKyAiID8iLAogICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgb25PazogZnVuY3Rpb24gb25PaygpIHsKICAgICAgICAgIGNvcHlVc2VyRmlsZSh7CiAgICAgICAgICAgIGlkOiB2LmlkLAogICAgICAgICAgICBrZXk6IHYuZmtleQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzNi4kTW9kYWwucmVtb3ZlKCk7CgogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICBfdGhpczYuJE1lc3NhZ2Uuc3VjY2Vzcygi5aSN5Yi25paH5Lu25oiQ5Yqf77yM5paw5paH5Lu25ZCN5Li6IOWJr+acrF8iICsgdi50aXRsZSk7CgogICAgICAgICAgICAgIF90aGlzNi5nZXREYXRhTGlzdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNvbGxlY3Q6IGZ1bmN0aW9uIGNvbGxlY3QodikgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGNvbGxlY3RGaWxlKHsKICAgICAgICBpZDogdi5pZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczcuJE1vZGFsLnJlbW92ZSgpOwoKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzNy4kTWVzc2FnZS5zdWNjZXNzKHYuaXNDb2xsZWN0ID8gIuWPlua2iOaUtuiXj+aIkOWKnyIgOiAi5pS26JeP5oiQ5YqfIik7CgogICAgICAgICAgX3RoaXM3LmdldERhdGFMaXN0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVBbGw6IGZ1bmN0aW9uIHJlbW92ZUFsbCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBpZiAodGhpcy5zZWxlY3RMaXN0Lmxlbmd0aCA8PSAwKSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLmgqjov5jmnKrpgInmi6nopoHliKDpmaTnmoTmlofku7YiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oewogICAgICAgIHRpdGxlOiAi56Gu6K6k5Yig6ZmkIiwKICAgICAgICBjb250ZW50OiAi5oKo56Gu6K6k6KaB5bCG5omA6YCJ55qEICIgKyB0aGlzLnNlbGVjdExpc3QubGVuZ3RoICsgIiDkuKrmlofku7bnp7vlhaXlm57mlLbnq5nvvIwgN+WkqeWGheWQjuiHquWKqOW9u+W6leWIoOmZpCIsCiAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICBvbk9rOiBmdW5jdGlvbiBvbk9rKCkgewogICAgICAgICAgdmFyIGlkcyA9ICIiOwoKICAgICAgICAgIF90aGlzOC5zZWxlY3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWRzICs9IGUuaWQgKyAiLCI7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZHMgPSBpZHMuc3Vic3RyaW5nKDAsIGlkcy5sZW5ndGggLSAxKTsKICAgICAgICAgIHRyYXNoRmlsZSh7CiAgICAgICAgICAgIGlkczogaWRzCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXM4LiRNb2RhbC5yZW1vdmUoKTsKCiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIF90aGlzOC4kTWVzc2FnZS5zdWNjZXNzKCLmibnph4/liKDpmaTmlofku7bmiJDlip8iKTsKCiAgICAgICAgICAgICAgX3RoaXM4LmNsZWFyU2VsZWN0QWxsKCk7CgogICAgICAgICAgICAgIF90aGlzOC5nZXREYXRhTGlzdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKHYpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB0aGlzLiRNb2RhbC5jb25maXJtKHsKICAgICAgICB0aXRsZTogIuehruiupOWIoOmZpCIsCiAgICAgICAgY29udGVudDogIuaCqOehruiupOimgeWwhuaWh+S7tiAiICsgdi50aXRsZSArICIg56e75YWl5Zue5pS256uZ77yMIDflpKnlhoXlkI7oh6rliqjlvbvlupXliKDpmaQiLAogICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgb25PazogZnVuY3Rpb24gb25PaygpIHsKICAgICAgICAgIHRyYXNoRmlsZSh7CiAgICAgICAgICAgIGlkczogdi5pZAogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzOS4kTW9kYWwucmVtb3ZlKCk7CgogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICBfdGhpczkuY2xlYXJTZWxlY3RBbGwoKTsKCiAgICAgICAgICAgICAgX3RoaXM5LiRNZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaWh+S7tiAiICsgdi50aXRsZSArICIg5oiQ5YqfIik7CgogICAgICAgICAgICAgIF90aGlzOS5nZXREYXRhTGlzdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpczEwLnN1Ym1pdExvYWRpbmcgPSB0cnVlOwogICAgICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICAgICAgaWQ6IF90aGlzMTAuZm9ybS5pZCwKICAgICAgICAgICAgbmV3S2V5OiBfdGhpczEwLmZvcm0uZmtleSwKICAgICAgICAgICAgbmV3VGl0bGU6IF90aGlzMTAuZm9ybS50aXRsZQogICAgICAgICAgfTsKICAgICAgICAgIHJlbmFtZVVzZXJGaWxlKHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzMTAuc3VibWl0TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgX3RoaXMxMC4kTWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip8iKTsKCiAgICAgICAgICAgICAgX3RoaXMxMC5nZXREYXRhTGlzdCgpOwoKICAgICAgICAgICAgICBfdGhpczEwLm1vZGFsVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlbmFtZTogZnVuY3Rpb24gcmVuYW1lKHYpIHsKICAgICAgdGhpcy5tb2RhbFRpdGxlID0gIue8lui+keaWh+S7tuWQjSI7IC8vIOi9rOaNom51bGzkuLoiIgoKICAgICAgZm9yICh2YXIgYXR0ciBpbiB2KSB7CiAgICAgICAgaWYgKHZbYXR0cl0gPT0gbnVsbCkgewogICAgICAgICAgdlthdHRyXSA9ICIiOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOwogICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2Uoc3RyKTsKICAgICAgdGhpcy5mb3JtID0gZGF0YTsKICAgICAgdGhpcy5tb2RhbFZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGNsZWFyU2VsZWN0QWxsOiBmdW5jdGlvbiBjbGVhclNlbGVjdEFsbCgpIHsKICAgICAgdGhpcy4kcmVmcy50YWJsZS5zZWxlY3RBbGwoZmFsc2UpOwogICAgICB0aGlzLnRvdGFsU2l6ZSA9ICIiOwogICAgfSwKICAgIGNoYW5nZVNlbGVjdDogZnVuY3Rpb24gY2hhbmdlU2VsZWN0KGUpIHsKICAgICAgdGhpcy5zZWxlY3RMaXN0ID0gZTsKICAgICAgdmFyIHNpemUgPSAwOwogICAgICBlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBzaXplICs9IGl0ZW0uc2l6ZSAqIDEuMDsKICAgICAgfSk7CiAgICAgIHRoaXMudG90YWxTaXplID0gdGhpcy51dGlsLmdldEZpbGVTaXplKHNpemUpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0KfTs="},{"version":3,"mappings":"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MACA;QACAC;UACAC;QACA;MAHA;MAKAA;IACA,CA1EA;IA2EAC,SA3EA,qBA2EAN,CA3EA,EA2EA;MACA;QACAO,6CADA;QAEAC,gBAFA;QAGAC;UACAC;QADA;MAHA;MAOA;MACA;MACA;MACA;IACA,CAvFA;IAwFAC,UAxFA,wBAwFA;MACA;QACA;MACA;IACA,CA5FA;IA6FAC,UA7FA,sBA6FAZ,CA7FA,EA6FA;MACA;MACA;MACA;IACA,CAjGA;IAkGAa,cAlGA,0BAkGAb,CAlGA,EAkGA;MACA;MACA;IACA,CArGA;IAsGAc,UAtGA,sBAsGAC,CAtGA,EAsGA;MACA;MACA;;MACA;QACA;MACA;;MACA;IACA,CA7GA;IA8GAC,eA9GA,2BA8GAhB,CA9GA,EA8GA;MACA;QACA;QACA;MACA;IACA,CAnHA;IAoHAiB,cApHA,4BAoHA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;IACA,CA5HA;IA6HAC,WA7HA,yBA6HA;MAAA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;MACAjH;QACA;;QACA;UACA;UACA;;UACA;YACA;;YACA;UACA;QACA;MACA,CAVA;IAWA,CA/IA;IAgJAkH,YAhJA,0BAgJA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;IACA,CAxJA;IAyJAC,cAzJA,4BAyJA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;IACA,CAnLA;IAoLAC,WApLA,yBAoLA;MACA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;MACA;MACA,6BAVA,CAWA;;MACA;IACA,CAjMA;IAkMAC,YAlMA,0BAkMA;MACA;IACA,CApMA;IAqMAC,aArMA,yBAqMAnE,IArMA,EAqMA;MA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","names":["uploadFile","checkOssSet","getUserFileListData","copyUserFile","moveFile","renameUserFile","trashFile","collectFile","name","components","fileCategory","trash","data","showTrash","uploadData","currCate","expand","span","expandIcon","dp","uploadFileUrl","openSearch","openTip","accessToken","loading","fileType","showType","modalVisible","moveVisible","uploadVisible","videoVisible","picVisible","picTitle","videoTitle","modalTitle","moveCategoryId","moveFileIds","searchForm","title","type","pageNumber","pageSize","sort","order","startDate","endDate","categoryId","isCollect","selectDate","options","shortcuts","form","fkey","file","formValidate","required","message","trigger","submitLoading","selectList","totalSize","columns","width","align","key","minWidth","sortable","render","h","style","marginLeft","props","color","size","attrs","src","cursor","height","margin","on","click","preload","params","tooltip","sortType","fixed","transfer","slot","total","pageSizeOpts","methods","handleDropdown","init","content","onOk","query","selectCategory","v","changeExpand","showPic","image","hidden","viewer","showVideo","container","screenshot","video","url","closeVideo","changePage","changePageSize","changeSort","e","selectDateRange","changeShowType","getDataList","handleSearch","changeFileType","handleReset","beforeUpload","handleMaxSize","desc","handleSuccess","res","fileList","handleError","error","clearFiles","handleCancel","download","window","showOffice","showFile","previewFile","changeDropDown","row","share","selectMoveCategory","moveAll","ids","move","handleSubmitMove","copy","id","collect","removeAll","remove","handleSubmit","newKey","newTitle","rename","clearSelectAll","changeSelect","mounted"],"sourceRoot":"src/views/app-toB/file","sources":["file.vue"],"sourcesContent":["<style lang=\"less\">\r\n@import \"@/styles/tree&table-common.less\";\r\n@import \"@/styles/table-common.less\";\r\n@import \"./file.less\";\r\n</style>\r\n<template>\r\n  <div class=\"search\">\r\n    <trash v-if=\"showTrash\" @close=\"showTrash = false\" />\r\n    <Card v-show=\"!showTrash\">\r\n      <Row type=\"flex\" justify=\"space-between\">\r\n        <Col v-show=\"expand\" span=\"5\">\r\n          <fileCategory @on-select=\"selectCategory\" />\r\n        </Col>\r\n        <div class=\"expand\">\r\n          <Icon\r\n            :type=\"expandIcon\"\r\n            size=\"16\"\r\n            class=\"icon\"\r\n            @click=\"changeExpand\"\r\n          />\r\n        </div>\r\n        <Col :span=\"span\">\r\n          <Row v-show=\"openSearch\" @keydown.enter.native=\"handleSearch\">\r\n            <Form ref=\"searchForm\" :model=\"searchForm\" inline :label-width=\"70\">\r\n              <FormItem label=\"文件名\" prop=\"title\">\r\n                <Input\r\n                  type=\"text\"\r\n                  v-model=\"searchForm.title\"\r\n                  placeholder=\"请输入文件名\"\r\n                  clearable\r\n                  style=\"width: 200px\"\r\n                />\r\n              </FormItem>\r\n              <FormItem label=\"创建时间\">\r\n                <DatePicker\r\n                  :options=\"options\"\r\n                  v-model=\"selectDate\"\r\n                  type=\"daterange\"\r\n                  format=\"yyyy-MM-dd\"\r\n                  clearable\r\n                  @on-change=\"selectDateRange\"\r\n                  placeholder=\"选择起始时间\"\r\n                  style=\"width: 200px\"\r\n                ></DatePicker>\r\n              </FormItem>\r\n              <FormItem style=\"margin-left: -35px\" class=\"br\">\r\n                <Button @click=\"handleSearch\" type=\"primary\" icon=\"ios-search\"\r\n                  >搜索</Button\r\n                >\r\n                <Button @click=\"handleReset\">重置</Button>\r\n              </FormItem>\r\n            </Form>\r\n          </Row>\r\n          <Row class=\"operation\" align=\"middle\" justify=\"space-between\">\r\n            <div class=\"br\">\r\n              <Button\r\n                :disabled=\"!searchForm.categoryId\"\r\n                @click=\"uploadVisible = true\"\r\n                type=\"primary\"\r\n                icon=\"md-cloud-upload\"\r\n                >上传文件</Button\r\n              >\r\n              <Dropdown @on-click=\"handleDropdown\">\r\n                <Button>\r\n                  更多操作\r\n                  <Icon type=\"md-arrow-dropdown\" />\r\n                </Button>\r\n                <DropdownMenu slot=\"list\">\r\n                  <DropdownItem v-show=\"showType == 'list'\" name=\"moveAll\"\r\n                    >移动</DropdownItem\r\n                  >\r\n                  <DropdownItem v-show=\"showType == 'list'\" name=\"removeAll\"\r\n                    >批量删除</DropdownItem\r\n                  >\r\n                  <DropdownItem v-show=\"showType == 'thumb'\" name=\"title\"\r\n                    >原名称排序</DropdownItem\r\n                  >\r\n                  <DropdownItem v-show=\"showType == 'thumb'\" name=\"size\"\r\n                    >文件大小排序</DropdownItem\r\n                  >\r\n                  <DropdownItem v-show=\"showType == 'thumb'\" name=\"type\"\r\n                    >文件类型排序</DropdownItem\r\n                  >\r\n                  <DropdownItem v-show=\"showType == 'thumb'\" name=\"time\"\r\n                    >创建时间排序</DropdownItem\r\n                  >\r\n                </DropdownMenu>\r\n              </Dropdown>\r\n              <Button @click=\"showTrash = true\" type=\"dashed\" icon=\"md-trash\"\r\n                >回收站</Button\r\n              >\r\n            </div>\r\n\r\n            <div class=\"icons\">\r\n              <Tooltip content=\"刷新\" placement=\"top\" transfer>\r\n                <Icon\r\n                  type=\"md-refresh\"\r\n                  size=\"18\"\r\n                  class=\"item\"\r\n                  @click=\"getDataList\"\r\n                />\r\n              </Tooltip>\r\n              <Tooltip\r\n                :content=\"openSearch ? '关闭搜索' : '开启搜索'\"\r\n                placement=\"top\"\r\n                transfer\r\n              >\r\n                <Icon\r\n                  type=\"ios-search\"\r\n                  size=\"18\"\r\n                  class=\"item tip\"\r\n                  @click=\"openSearch = !openSearch\"\r\n                />\r\n              </Tooltip>\r\n              <Tooltip\r\n                :content=\"openTip ? '关闭提示' : '开启提示'\"\r\n                placement=\"top\"\r\n                transfer\r\n              >\r\n                <Icon\r\n                  type=\"md-bulb\"\r\n                  size=\"18\"\r\n                  class=\"item tip\"\r\n                  @click=\"openTip = !openTip\"\r\n                />\r\n              </Tooltip>\r\n              <Select\r\n                v-model=\"fileType\"\r\n                style=\"width: 150px; margin: 0 25px 0 15px\"\r\n                @on-change=\"changeFileType\"\r\n              >\r\n                <Option value=\"all\">所有文件</Option>\r\n                <Option value=\"word\">Word</Option>\r\n                <Option value=\"excel\">Excel</Option>\r\n                <Option value=\"pdf\">PDF</Option>\r\n                <Option value=\"pic\">图片</Option>\r\n                <Option value=\"video\">视频</Option>\r\n                <Option value=\"audio\">音频</Option>\r\n                <Option value=\"text\">文本</Option>\r\n                <Option value=\"ppt\">PPT</Option>\r\n                <Option value=\"zip\">ZIP</Option>\r\n                <Option value=\"rar\">RAR</Option>\r\n              </Select>\r\n              <RadioGroup\r\n                v-model=\"showType\"\r\n                type=\"button\"\r\n                @on-change=\"changeShowType\"\r\n              >\r\n                <Radio title=\"列表\" label=\"list\">\r\n                  <Icon type=\"md-list\"></Icon>\r\n                </Radio>\r\n                <Radio title=\"缩略图\" label=\"thumb\">\r\n                  <Icon type=\"ios-apps\"></Icon>\r\n                </Radio>\r\n              </RadioGroup>\r\n            </div>\r\n          </Row>\r\n\r\n          <div v-show=\"showType == 'list'\">\r\n            <Alert show-icon v-show=\"openTip\">\r\n              已选择\r\n              <span class=\"select-count\">{{ selectList.length }}</span> 项\r\n              <a class=\"select-clear\" @click=\"clearSelectAll\">清空</a>\r\n              <span v-if=\"selectList.length > 0\" style=\"margin-left: 15px\"\r\n                >共计 {{ totalSize }} 存储量</span\r\n              >\r\n            </Alert>\r\n            <Table\r\n              :loading=\"loading\"\r\n              border\r\n              :columns=\"columns\"\r\n              :data=\"data\"\r\n              ref=\"table\"\r\n              sortable=\"custom\"\r\n              @on-sort-change=\"changeSort\"\r\n              @on-selection-change=\"changeSelect\"\r\n            ></Table>\r\n          </div>\r\n          <Row type=\"flex\" :gutter=\"30\" v-show=\"showType == 'thumb'\">\r\n            <Col :lg=\"6\" :md=\"12\" :xs=\"12\" v-for=\"(item, i) in data\" :key=\"i\">\r\n              <Card class=\"oss-card\">\r\n                <div class=\"content\">\r\n                  <div class=\"collect-icon\" v-if=\"item.isCollect\">\r\n                    <Icon type=\"md-star\" color=\"#ffc60a\" size=\"18\"/>\r\n                  </div>\r\n                  <img\r\n                    @click=\"showPic(item)\"\r\n                    v-if=\"item.type.indexOf('image') >= 0\"\r\n                    class=\"img\"\r\n                    :src=\"item.url\"\r\n                  />\r\n                  <div\r\n                    v-else-if=\"item.type.indexOf('video') >= 0\"\r\n                    class=\"video\"\r\n                    @click=\"showVideo(item)\"\r\n                  >\r\n                    <video class=\"cover\">\r\n                      <source :src=\"item.url + '#t=1'\" preload=\"metadata\" />\r\n                    </video>\r\n                    <img class=\"play\" src=\"@/assets/icon/play.png\" />\r\n                  </div>\r\n                  <div v-else class=\"other\" @click=\"previewFile(item)\">\r\n                    <div class=\"name\">{{ item.title }}</div>\r\n                    <div class=\"key\">{{ item.fkey }}</div>\r\n                    <div class=\"info\">\r\n                      文件类型：{{ util.ellipsis(item.type, 30) }} 文件大小：{{\r\n                        util.getFileSize(item.size)\r\n                      }}\r\n                      创建时间：{{ item.createTime }}\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"actions\">\r\n                    <div class=\"btn\">\r\n                      <Tooltip content=\"下载\" placement=\"top\">\r\n                        <Icon\r\n                          @click=\"download(item)\"\r\n                          type=\"md-download\"\r\n                          size=\"16\"\r\n                        />\r\n                      </Tooltip>\r\n                    </div>\r\n                    <div class=\"btn\">\r\n                      <Tooltip content=\"分享\" placement=\"top\">\r\n                        <Icon @click=\"share(item)\" type=\"md-share\" size=\"16\" />\r\n                      </Tooltip>\r\n                    </div>\r\n                    <div class=\"btn\">\r\n                      <Tooltip content=\"重命名\" placement=\"top\">\r\n                        <Icon\r\n                          @click=\"rename(item)\"\r\n                          type=\"md-create\"\r\n                          size=\"16\"\r\n                        />\r\n                      </Tooltip>\r\n                    </div>\r\n                    <div class=\"btn-no\">\r\n                      <Dropdown @on-click=\"changeDropDown(item, $event)\">\r\n                        <Icon type=\"ios-more\" size=\"24\" />\r\n                        <DropdownMenu slot=\"list\">\r\n                          <DropdownItem name=\"collect\">{{\r\n                            item.isCollect ? \"取消收藏\" : \"收藏\"\r\n                          }}</DropdownItem>\r\n                          <DropdownItem name=\"copy\">复制</DropdownItem>\r\n                          <DropdownItem name=\"remove\">删除</DropdownItem>\r\n                        </DropdownMenu>\r\n                      </Dropdown>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n          <Row type=\"flex\" justify=\"end\" class=\"page\">\r\n            <Page\r\n              :current=\"searchForm.pageNumber\"\r\n              :total=\"total\"\r\n              :page-size=\"searchForm.pageSize\"\r\n              @on-change=\"changePage\"\r\n              @on-page-size-change=\"changePageSize\"\r\n              :page-size-opts=\"pageSizeOpts\"\r\n              size=\"small\"\r\n              show-total\r\n              show-elevator\r\n              show-sizer\r\n            ></Page>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n\r\n    <Drawer\r\n      :title=\"`上传文件至：${currCate}`\"\r\n      closable\r\n      v-model=\"uploadVisible\"\r\n      width=\"500\"\r\n    >\r\n      <Upload\r\n        :action=\"uploadFileUrl\"\r\n        :headers=\"accessToken\"\r\n        :data=\"uploadData\"\r\n        :on-success=\"handleSuccess\"\r\n        :on-error=\"handleError\"\r\n        :max-size=\"5120\"\r\n        :on-exceeded-size=\"handleMaxSize\"\r\n        :before-upload=\"beforeUpload\"\r\n        multiple\r\n        type=\"drag\"\r\n        ref=\"up\"\r\n      >\r\n        <div style=\"padding: 20px 0\">\r\n          <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\r\n          <p>点击这里或将文件拖拽到这里上传</p>\r\n        </div>\r\n      </Upload>\r\n      <div class=\"drawer-footer\">\r\n        <Button @click=\"clearFiles\">清空上传列表</Button>\r\n      </div>\r\n    </Drawer>\r\n\r\n    <Modal\r\n      :title=\"modalTitle\"\r\n      v-model=\"modalVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"500\"\r\n    >\r\n      <Form ref=\"form\" :model=\"form\" inline :rules=\"formValidate\">\r\n        <FormItem label=\"文件名\" prop=\"title\" style=\"width: 100%\">\r\n          <Input v-model=\"form.title\" />\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"handleCancel\">取消</Button>\r\n        <Button type=\"primary\" :loading=\"submitLoading\" @click=\"handleSubmit\"\r\n          >提交</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal\r\n      title=\"移动至\"\r\n      v-model=\"moveVisible\"\r\n      :mask-closable=\"false\"\r\n      :width=\"500\"\r\n    >\r\n      <fileCategory\r\n        showOnly\r\n        @on-select=\"selectMoveCategory\"\r\n        class=\"fileMoveModal\"\r\n      />\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"moveVisible = false\">取消</Button>\r\n        <Button\r\n          type=\"primary\"\r\n          :loading=\"submitLoading\"\r\n          @click=\"handleSubmitMove\"\r\n          >移动至此</Button\r\n        >\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal\r\n      v-model=\"videoVisible\"\r\n      :title=\"videoTitle\"\r\n      :width=\"800\"\r\n      @on-cancel=\"closeVideo\"\r\n      draggable\r\n    >\r\n      <div id=\"dplayer\" style=\"height: 500px\"></div>\r\n      <div slot=\"footer\">\r\n        <span\r\n          >文件类型：{{ util.ellipsis(file.type, 30) }} 文件大小：{{\r\n            file.msize\r\n          }}\r\n          创建时间：{{ file.createTime }}</span\r\n        >\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  uploadFile,\r\n  checkOssSet,\r\n  getUserFileListData,\r\n  copyUserFile,\r\n  moveFile,\r\n  renameUserFile,\r\n  trashFile,\r\n  collectFile,\r\n} from \"@/api/index\";\r\nimport fileCategory from \"@/views/app-toB/file/fileCategory\";\r\nimport trash from \"./trash.vue\";\r\nimport DPlayer from \"dplayer\";\r\nimport \"viewerjs/dist/viewer.css\";\r\nimport Viewer from \"viewerjs\";\r\nimport { shortcuts } from \"@/libs/shortcuts\";\r\nexport default {\r\n  name: \"file\",\r\n  components: {\r\n    fileCategory,\r\n    trash,\r\n  },\r\n  data() {\r\n    return {\r\n      showTrash: false,\r\n      uploadData: {},\r\n      currCate: \"\",\r\n      expand: true,\r\n      span: 18,\r\n      expandIcon: \"ios-arrow-back\",\r\n      dp: null,\r\n      uploadFileUrl: uploadFile,\r\n      openSearch: true,\r\n      openTip: true,\r\n      accessToken: {}, // 上传token鉴权\r\n      loading: false, // 表单加载状态\r\n      fileType: \"all\",\r\n      showType: \"list\",\r\n      modalVisible: false, // 添加或编辑显示\r\n      moveVisible: false,\r\n      uploadVisible: false,\r\n      videoVisible: false,\r\n      picVisible: false,\r\n      picTitle: \"\",\r\n      videoTitle: \"\",\r\n      modalTitle: \"\", // 添加或编辑标题\r\n      moveCategoryId: \"\",\r\n      moveFileIds: [],\r\n      searchForm: {\r\n        // 搜索框对应data对象\r\n        title: \"\",\r\n        type: \"\",\r\n        pageNumber: 1, // 当前页数\r\n        pageSize: 5, // 页面大小\r\n        sort: \"createTime\", // 默认排序字段\r\n        order: \"desc\", // 默认排序方式\r\n        startDate: \"\", // 起始时间\r\n        endDate: \"\", // 终止时间\r\n        categoryId: \"0\",\r\n        isCollect: null,\r\n      },\r\n      selectDate: null, // 选择日期绑定modal\r\n      options: {\r\n        shortcuts: shortcuts,\r\n      },\r\n      form: {\r\n        title: \"\",\r\n        fkey: \"\",\r\n      },\r\n      file: {},\r\n      // 表单验证规则\r\n      formValidate: {\r\n        title: [{ required: true, message: \"不能为空\", trigger: \"blur\" }],\r\n        fkey: [{ required: true, message: \"不能为空\", trigger: \"blur\" }],\r\n      },\r\n      submitLoading: false, // 添加或编辑提交状态\r\n      selectList: [], // 多选数据\r\n      totalSize: \"\", // 文件大小统计\r\n      columns: [\r\n        // 表头\r\n        {\r\n          type: \"selection\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          type: \"index\",\r\n          width: 60,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"文件名\",\r\n          key: \"title\",\r\n          minWidth: 150,\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            if (params.row.isCollect) {\r\n              return h(\"div\", [\r\n                h(\"span\", params.row.title),\r\n                h(\"Icon\", {\r\n                  style: {\r\n                    marginLeft: \"5px\",\r\n                  },\r\n                  props: {\r\n                    type: \"md-star\",\r\n                    color: \"#ffc60a\",\r\n                    size: \"18\",\r\n                  },\r\n                }),\r\n              ]);\r\n            }\r\n            return h(\"span\", params.row.title);\r\n          },\r\n        },\r\n        {\r\n          title: \"缩略图(点击预览)\",\r\n          key: \"url\",\r\n          width: 150,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            if (params.row.type.includes(\"image\") > 0) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: params.row.url,\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"80px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showPic(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (params.row.type.includes(\"video\") > 0) {\r\n              return h(\r\n                \"video\",\r\n                {\r\n                  style: {\r\n                    cursor: \"pointer\",\r\n                    width: \"80px\",\r\n                    height: \"60px\",\r\n                    margin: \"10px 0\",\r\n                    \"object-fit\": \"contain\",\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.showVideo(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                [\r\n                  h(\"source\", {\r\n                    attrs: {\r\n                      src: params.row.url + \"#t=1\",\r\n                      preload: \"metadata\",\r\n                    },\r\n                  }),\r\n                ]\r\n              );\r\n            } else if (params.row.type.includes(\"word\") > 0) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/word.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"80px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showOffice(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (\r\n              params.row.fkey.includes(\".xlsx\") > 0 ||\r\n              params.row.fkey.includes(\".xls\") > 0 ||\r\n              params.row.type.includes(\"sheet\") > 0\r\n            ) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/xls.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"80px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showOffice(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (params.row.type.includes(\"presentation\") > 0) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/ppt.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"80px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showOffice(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (params.row.type.includes(\"pdf\") > 0) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/pdf.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showFile(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (params.row.type.includes(\"audio\") > 0) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/mp3.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showVideo(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else if (\r\n              params.row.type.includes(\"zip\") > 0 ||\r\n              params.row.type.includes(\"rar\") > 0 ||\r\n              params.row.type.includes(\"7z\") > 0\r\n            ) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/zip.png\"),\r\n                },\r\n                style: {\r\n                  width: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.$Message.warning(\"暂不支持预览\");\r\n                  },\r\n                },\r\n              });\r\n            } else if (\r\n              params.row.type.includes(\"text\") > 0 ||\r\n              params.row.type.includes(\"octet\") > 0\r\n            ) {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/file.png\"),\r\n                },\r\n                style: {\r\n                  cursor: \"zoom-in\",\r\n                  width: \"55px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.showFile(params.row);\r\n                  },\r\n                },\r\n              });\r\n            } else {\r\n              return h(\"img\", {\r\n                attrs: {\r\n                  src: require(\"@/assets/icon/file.png\"),\r\n                },\r\n                style: {\r\n                  width: \"55px\",\r\n                  height: \"60px\",\r\n                  margin: \"10px 0\",\r\n                  \"object-fit\": \"contain\",\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.$Message.warning(\"暂不支持预览\");\r\n                  },\r\n                },\r\n              });\r\n            }\r\n          },\r\n        },\r\n        {\r\n          title: \"文件类型\",\r\n          key: \"type\",\r\n          width: 120,\r\n          sortable: true,\r\n          tooltip: true,\r\n        },\r\n        {\r\n          title: \"文件大小\",\r\n          key: \"size\",\r\n          width: 120,\r\n          align: \"center\",\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            let m = this.util.getFileSize(params.row.size);\r\n            return h(\"span\", m);\r\n          },\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          key: \"createTime\",\r\n          width: 180,\r\n          sortable: true,\r\n          sortType: \"desc\",\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"action\",\r\n          align: \"center\",\r\n          fixed: \"right\",\r\n          width: 170,\r\n          render: (h, params) => {\r\n            return h(\"div\", [\r\n              h(\r\n                \"a\",\r\n                {\r\n                  on: {\r\n                    click: () => {\r\n                      this.download(params.row);\r\n                    },\r\n                  },\r\n                },\r\n                \"下载\"\r\n              ),\r\n              h(\"Divider\", {\r\n                props: {\r\n                  type: \"vertical\",\r\n                },\r\n              }),\r\n              h(\r\n                \"Dropdown\",\r\n                {\r\n                  props: { transfer: true },\r\n                  on: {\r\n                    \"on-click\": (v) => {\r\n                      this.changeDropDown(params.row, v);\r\n                    },\r\n                  },\r\n                },\r\n                [\r\n                  h(\"a\", [\r\n                    \"更多操作\",\r\n                    h(\"Icon\", {\r\n                      props: {\r\n                        type: \"ios-arrow-down\",\r\n                      },\r\n                    }),\r\n                  ]),\r\n                  h(\"DropdownMenu\", { slot: \"list\" }, [\r\n                    h(\"DropdownItem\", { props: { name: \"share\" } }, \"分享\"),\r\n                    h(\r\n                      \"DropdownItem\",\r\n                      { props: { name: \"collect\" } },\r\n                      params.row.isCollect ? \"取消收藏\" : \"收藏\"\r\n                    ),\r\n                    h(\"DropdownItem\", { props: { name: \"rename\" } }, \"重命名\"),\r\n                    h(\"DropdownItem\", { props: { name: \"move\" } }, \"移动\"),\r\n                    h(\"DropdownItem\", { props: { name: \"copy\" } }, \"复制\"),\r\n                    h(\"DropdownItem\", { props: { name: \"remove\" } }, \"删除\"),\r\n                  ]),\r\n                ]\r\n              ),\r\n            ]);\r\n          },\r\n        },\r\n      ],\r\n      data: [], // 表单数据\r\n      total: 0, // 表单数据总数\r\n      pageSizeOpts: [5, 10, 20],\r\n    };\r\n  },\r\n  methods: {\r\n    handleDropdown(name) {\r\n      if (name == \"moveAll\") {\r\n        this.moveAll();\r\n      } else if (name == \"removeAll\") {\r\n        this.removeAll();\r\n      } else if (name == \"title\") {\r\n        this.searchForm.sort = \"title\";\r\n        this.getDataList();\r\n      } else if (name == \"size\") {\r\n        this.searchForm.sort = \"size\";\r\n        this.getDataList();\r\n      } else if (name == \"type\") {\r\n        this.searchForm.sort = \"type\";\r\n        this.getDataList();\r\n      } else if (name == \"time\") {\r\n        this.searchForm.sort = \"createTime\";\r\n        this.getDataList();\r\n      }\r\n    },\r\n    init() {\r\n      this.accessToken = {\r\n        accessToken: this.getStore(\"accessToken\"),\r\n      };\r\n      checkOssSet().then((res) => {\r\n        if (!res.success) {\r\n          this.$Modal.confirm({\r\n            title: \"系统还未配置OSS\",\r\n            content: \"管理员还未配置第三方OSS服务，是否现在立即去配置?\",\r\n            onOk: () => {\r\n              this.$router.push({\r\n                name: \"setting\",\r\n                query: { name: \"oss\" },\r\n              });\r\n            },\r\n          });\r\n        }\r\n      });\r\n    },\r\n    selectCategory(v) {\r\n      if (v.id == \"-1\") {\r\n        // 收藏夹\r\n        this.searchForm.categoryId = \"\";\r\n        this.searchForm.isCollect = true;\r\n        this.getDataList();\r\n      } else {\r\n        this.searchForm.isCollect = null;\r\n        this.searchForm.categoryId = v.id;\r\n        this.uploadData = {\r\n          categoryId: v.id,\r\n        };\r\n        this.currCate = v.title;\r\n        this.getDataList();\r\n      }\r\n    },\r\n    changeExpand() {\r\n      this.expand = !this.expand;\r\n      if (this.expand) {\r\n        this.expandIcon = \"ios-arrow-back\";\r\n        this.span = 18;\r\n      } else {\r\n        this.expandIcon = \"ios-arrow-forward\";\r\n        this.span = 23;\r\n      }\r\n    },\r\n    showPic(v) {\r\n      let image = new Image();\r\n      image.src = v.url;\r\n      let viewer = new Viewer(image, {\r\n        hidden: function () {\r\n          viewer.destroy();\r\n        },\r\n      });\r\n      viewer.show();\r\n    },\r\n    showVideo(v) {\r\n      this.dp = new DPlayer({\r\n        container: document.getElementById(\"dplayer\"),\r\n        screenshot: true,\r\n        video: {\r\n          url: v.url,\r\n        },\r\n      });\r\n      this.file = v;\r\n      this.file.msize = this.util.getFileSize(v.size);\r\n      this.videoTitle = v.title + \"(\" + v.fkey + \")\";\r\n      this.videoVisible = true;\r\n    },\r\n    closeVideo() {\r\n      if (this.dp) {\r\n        this.dp.destroy();\r\n      }\r\n    },\r\n    changePage(v) {\r\n      this.searchForm.pageNumber = v;\r\n      this.getDataList();\r\n      this.clearSelectAll();\r\n    },\r\n    changePageSize(v) {\r\n      this.searchForm.pageSize = v;\r\n      this.getDataList();\r\n    },\r\n    changeSort(e) {\r\n      this.searchForm.sort = e.key;\r\n      this.searchForm.order = e.order;\r\n      if (e.order == \"normal\") {\r\n        this.searchForm.order = \"\";\r\n      }\r\n      this.getDataList();\r\n    },\r\n    selectDateRange(v) {\r\n      if (v) {\r\n        this.searchForm.startDate = v[0];\r\n        this.searchForm.endDate = v[1];\r\n      }\r\n    },\r\n    changeShowType() {\r\n      this.searchForm.pageNumber = 1;\r\n      if (this.showType == \"list\") {\r\n        this.searchForm.pageSize = 5;\r\n      } else {\r\n        this.searchForm.pageSize = 12;\r\n      }\r\n      this.getDataList();\r\n    },\r\n    getDataList() {\r\n      if (this.showType == \"list\") {\r\n        this.pageSizeOpts = [5, 10, 20];\r\n      } else {\r\n        this.pageSizeOpts = [12, 24];\r\n      }\r\n      this.loading = true;\r\n      getUserFileListData(this.searchForm).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          this.data = res.result.content;\r\n          this.total = res.result.totalElements;\r\n          if (this.data.length == 0 && this.searchForm.pageNumber > 1) {\r\n            this.searchForm.pageNumber -= 1;\r\n            this.getDataList();\r\n          }\r\n        }\r\n      });\r\n    },\r\n    handleSearch() {\r\n      this.searchForm.pageNumber = 1;\r\n      if (this.showType == \"list\") {\r\n        this.searchForm.pageSize = 5;\r\n      } else {\r\n        this.searchForm.pageSize = 12;\r\n      }\r\n      this.getDataList();\r\n    },\r\n    changeFileType() {\r\n      let name = this.fileType;\r\n      if (name == \"all\") {\r\n        this.searchForm.type = \"\";\r\n      } else if (name == \"pic\") {\r\n        this.searchForm.type = \"image\";\r\n      } else if (name == \"video\") {\r\n        this.searchForm.type = \"video\";\r\n      } else if (name == \"word\") {\r\n        this.searchForm.type = \"word\";\r\n      } else if (name == \"excel\") {\r\n        this.searchForm.type = \"sheet\";\r\n      } else if (name == \"ppt\") {\r\n        this.searchForm.type = \"presentation\";\r\n      } else if (name == \"pdf\") {\r\n        this.searchForm.type = \"pdf\";\r\n      } else if (name == \"audio\") {\r\n        this.searchForm.type = \"audio\";\r\n      } else if (name == \"text\") {\r\n        this.searchForm.type = \"text\";\r\n      } else if (name == \"zip\") {\r\n        this.searchForm.type = \"zip\";\r\n      } else if (name == \"rar\") {\r\n        this.searchForm.type = \"rar\";\r\n      }\r\n      this.handleSearch();\r\n    },\r\n    handleReset() {\r\n      this.$refs.searchForm.resetFields();\r\n      this.searchForm.pageNumber = 1;\r\n      if (this.showType == \"list\") {\r\n        this.searchForm.pageSize = 5;\r\n      } else {\r\n        this.searchForm.pageSize = 12;\r\n      }\r\n      this.selectDate = null;\r\n      this.searchForm.startDate = \"\";\r\n      this.searchForm.endDate = \"\";\r\n      // 重新加载数据\r\n      this.getDataList();\r\n    },\r\n    beforeUpload() {\r\n      return true;\r\n    },\r\n    handleMaxSize(file) {\r\n      this.$Notice.warning({\r\n        title: \"文件大小过大\",\r\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\",\r\n      });\r\n    },\r\n    handleSuccess(res, file, fileList) {\r\n      if (res.success) {\r\n        this.$Message.success(\"上传文件 \" + file.name + \" 成功\");\r\n        this.getDataList();\r\n      } else {\r\n        file.percentage = 0;\r\n        file.status = \"fail\";\r\n        file.name += \"（上传失败）\";\r\n        this.$Message.error(res.message);\r\n      }\r\n    },\r\n    handleError(error, file, fileList) {\r\n      this.$Message.error(error.toString());\r\n    },\r\n    clearFiles() {\r\n      this.$refs.up.clearFiles();\r\n    },\r\n    handleCancel() {\r\n      this.modalVisible = false;\r\n    },\r\n    download(v) {\r\n      window.open(\r\n        v.url +\r\n          \"?attname=&response-content-type=application/octet-stream&filename=\" +\r\n          v.title\r\n      );\r\n    },\r\n    showOffice(v) {\r\n      window.open(\"https://view.officeapps.live.com/op/view.aspx?src=\" + v.url);\r\n    },\r\n    showFile(v) {\r\n      window.open(v.url + \"?preview=true\");\r\n    },\r\n    previewFile(v) {\r\n      if (v.type.indexOf(\"audio\") >= 0) {\r\n        this.showVideo(v);\r\n      } else if (v.type.indexOf(\"office\") >= 0 || v.type.indexOf(\"word\") >= 0) {\r\n        this.showOffice(v);\r\n      } else if (\r\n        v.type.indexOf(\"pdf\") >= 0 ||\r\n        v.type.indexOf(\"text\") >= 0 ||\r\n        v.type.indexOf(\"octet\") >= 0\r\n      ) {\r\n        this.showFile(v);\r\n      }\r\n    },\r\n    changeDropDown(row, v) {\r\n      if (v == \"rename\") {\r\n        this.rename(row);\r\n      } else if (v == \"copy\") {\r\n        this.copy(row);\r\n      } else if (v == \"remove\") {\r\n        this.remove(row);\r\n      } else if (v == \"move\") {\r\n        this.move(row);\r\n      } else if (v == \"share\") {\r\n        this.share(row);\r\n      } else if (v == \"collect\") {\r\n        this.collect(row);\r\n      }\r\n    },\r\n    share(v) {\r\n      this.$copyText(v.url).then((e) => {\r\n        this.$Message.success(\"复制链接成功\");\r\n      });\r\n    },\r\n    selectMoveCategory(v) {\r\n      this.moveCategoryId = v.id;\r\n    },\r\n    moveAll() {\r\n      if (this.selectList.length <= 0) {\r\n        this.$Message.warning(\"您还未选择要移动的文件\");\r\n        return;\r\n      }\r\n      let ids = \"\";\r\n      this.selectList.forEach(function (e) {\r\n        ids += e.id + \",\";\r\n      });\r\n      ids = ids.substring(0, ids.length - 1);\r\n      this.moveFileIds = ids;\r\n      this.moveVisible = true;\r\n    },\r\n    move(v) {\r\n      this.moveFileIds = [v.id];\r\n      this.moveVisible = true;\r\n    },\r\n    handleSubmitMove() {\r\n      this.submitLoading = true;\r\n      moveFile({ ids: this.moveFileIds, categoryId: this.moveCategoryId }).then(\r\n        (res) => {\r\n          this.submitLoading = false;\r\n          if (res.success) {\r\n            this.$Message.success(\"操作成功\");\r\n            this.moveVisible = false;\r\n            this.clearSelectAll();\r\n            this.getDataList();\r\n          }\r\n        }\r\n      );\r\n    },\r\n    copy(v) {\r\n      this.$Modal.confirm({\r\n        title: \"确认复制\",\r\n        content: \"您确认要复制文件 \" + v.title + \" ?\",\r\n        loading: true,\r\n        onOk: () => {\r\n          copyUserFile({ id: v.id, key: v.fkey }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"复制文件成功，新文件名为 副本_\" + v.title);\r\n              this.getDataList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    collect(v) {\r\n      collectFile({ id: v.id }).then((res) => {\r\n        this.$Modal.remove();\r\n        if (res.success) {\r\n          this.$Message.success(v.isCollect ? \"取消收藏成功\" : \"收藏成功\");\r\n          this.getDataList();\r\n        }\r\n      });\r\n    },\r\n    removeAll() {\r\n      if (this.selectList.length <= 0) {\r\n        this.$Message.warning(\"您还未选择要删除的文件\");\r\n        return;\r\n      }\r\n      this.$Modal.confirm({\r\n        title: \"确认删除\",\r\n        content:\r\n          \"您确认要将所选的 \" +\r\n          this.selectList.length +\r\n          \" 个文件移入回收站， 7天内后自动彻底删除\",\r\n        loading: true,\r\n        onOk: () => {\r\n          let ids = \"\";\r\n          this.selectList.forEach(function (e) {\r\n            ids += e.id + \",\";\r\n          });\r\n          ids = ids.substring(0, ids.length - 1);\r\n          trashFile({ ids: ids }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.$Message.success(\"批量删除文件成功\");\r\n              this.clearSelectAll();\r\n              this.getDataList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    remove(v) {\r\n      this.$Modal.confirm({\r\n        title: \"确认删除\",\r\n        content:\r\n          \"您确认要将文件 \" + v.title + \" 移入回收站， 7天内后自动彻底删除\",\r\n        loading: true,\r\n        onOk: () => {\r\n          trashFile({ ids: v.id }).then((res) => {\r\n            this.$Modal.remove();\r\n            if (res.success) {\r\n              this.clearSelectAll();\r\n              this.$Message.success(\"删除文件 \" + v.title + \" 成功\");\r\n              this.getDataList();\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    handleSubmit() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          this.submitLoading = true;\r\n          let params = {\r\n            id: this.form.id,\r\n            newKey: this.form.fkey,\r\n            newTitle: this.form.title,\r\n          };\r\n          renameUserFile(params).then((res) => {\r\n            this.submitLoading = false;\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.getDataList();\r\n              this.modalVisible = false;\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    rename(v) {\r\n      this.modalTitle = \"编辑文件名\";\r\n      // 转换null为\"\"\r\n      for (let attr in v) {\r\n        if (v[attr] == null) {\r\n          v[attr] = \"\";\r\n        }\r\n      }\r\n      let str = JSON.stringify(v);\r\n      let data = JSON.parse(str);\r\n      this.form = data;\r\n      this.modalVisible = true;\r\n    },\r\n    clearSelectAll() {\r\n      this.$refs.table.selectAll(false);\r\n      this.totalSize = \"\";\r\n    },\r\n    changeSelect(e) {\r\n      this.selectList = e;\r\n      let size = 0;\r\n      e.forEach((item) => {\r\n        size += item.size * 1.0;\r\n      });\r\n      this.totalSize = this.util.getFileSize(size);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>"]}]}