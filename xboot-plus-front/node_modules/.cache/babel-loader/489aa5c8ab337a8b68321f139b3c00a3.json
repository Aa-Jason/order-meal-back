{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\sys\\user-manage\\addEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\sys\\user-manage\\addEdit.vue","mtime":1651629755233},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgcmV0dXJuIF90eXBlb2YgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfSwgX3R5cGVvZihvYmopOyB9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRBbGxSb2xlTGlzdCwgYWRkVXNlciwgZWRpdFVzZXIgfSBmcm9tICJAL2FwaS9pbmRleCI7CmltcG9ydCB7IHZhbGlkYXRlVXNlcm5hbWUsIHZhbGlkYXRlTW9iaWxlLCB2YWxpZGF0ZVBhc3N3b3JkIH0gZnJvbSAiQC9saWJzL3ZhbGlkYXRlIjsKaW1wb3J0IGRlcGFydG1lbnRUcmVlQ2hvb3NlIGZyb20gIkAvdmlld3MvbXktY29tcG9uZW50cy94Ym9vdC9kZXBhcnRtZW50LXRyZWUtY2hvb3NlIjsKaW1wb3J0IHVwbG9hZFBpY0lucHV0IGZyb20gIkAvdmlld3MvbXktY29tcG9uZW50cy94Ym9vdC91cGxvYWQtcGljLWlucHV0IjsKaW1wb3J0IFNldFBhc3N3b3JkIGZyb20gIkAvdmlld3MvbXktY29tcG9uZW50cy94Ym9vdC9zZXQtcGFzc3dvcmQiOwppbXBvcnQgZGljdCBmcm9tICJAL3ZpZXdzL215LWNvbXBvbmVudHMveGJvb3QvZGljdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWRkRWRpdCIsCiAgY29tcG9uZW50czogewogICAgZGVwYXJ0bWVudFRyZWVDaG9vc2U6IGRlcGFydG1lbnRUcmVlQ2hvb3NlLAogICAgdXBsb2FkUGljSW5wdXQ6IHVwbG9hZFBpY0lucHV0LAogICAgU2V0UGFzc3dvcmQ6IFNldFBhc3N3b3JkLAogICAgZGljdDogZGljdAogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgZGF0YTogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIjAiCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm9sZUxpc3Q6IFtdLAogICAgICB2aXNpYmxlOiB0aGlzLnZhbHVlLAogICAgICB0aXRsZTogIiIsCiAgICAgIHBhc3NDb2xvcjogIiIsCiAgICAgIHN1Ym1pdExvYWRpbmc6IGZhbHNlLAogICAgICBtYXhIZWlnaHQ6IDUxMCwKICAgICAgZm9ybTogewogICAgICAgIGFkZHJlc3M6IFtdCiAgICAgIH0sCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIC8vIOihqOWNlemqjOivgeinhOWImQogICAgICAgIHVzZXJuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl55m75b2V6LSm5Y+3IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVVc2VybmFtZSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIG5pY2tuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl55So5oi35ZCNIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIG1vYmlsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeaJi+acuuWPtyIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlTW9iaWxlLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgcGFzc3dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXlr4bnoIEiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3N3b3JkLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgZW1haWw6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXpgq7nrrHlnLDlnYAiCiAgICAgICAgfSwgewogICAgICAgICAgdHlwZTogImVtYWlsIiwKICAgICAgICAgIG1lc3NhZ2U6ICLpgq7nrrHmoLzlvI/kuI3mraPnoa4iCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHRoaXMuZ2V0Um9sZUxpc3QoKTsKICAgIH0sCiAgICBnZXRSb2xlTGlzdDogZnVuY3Rpb24gZ2V0Um9sZUxpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBnZXRBbGxSb2xlTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMucm9sZUxpc3QgPSByZXMucmVzdWx0OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VsZWN0RGVwVHJlZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0RGVwVHJlZSh2KSB7CiAgICAgIHRoaXMuZm9ybS5kZXBhcnRtZW50SWQgPSB2OwogICAgfSwKICAgIGNoYW5nZVBhc3M6IGZ1bmN0aW9uIGNoYW5nZVBhc3ModiwgZ3JhZGUsIHN0cmVuZ3RoKSB7CiAgICAgIHRoaXMuZm9ybS5wYXNzU3RyZW5ndGggPSBzdHJlbmd0aDsKICAgIH0sCiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoX3R5cGVvZihfdGhpczIuZm9ybS5iaXJ0aCkgPT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgX3RoaXMyLmZvcm0uYmlydGggPSBfdGhpczIuZm9ybWF0KF90aGlzMi5mb3JtLmJpcnRoLCAieXl5eS1NTS1kZCIpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChfdGhpczIudHlwZSA9PSAiMSIpIHsKICAgICAgICAgICAgLy8g57yW6L6RCiAgICAgICAgICAgIF90aGlzMi5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgZWRpdFVzZXIoX3RoaXMyLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzMi5zdWJtaXRMb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgX3RoaXMyLiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwoKICAgICAgICAgICAgICAgIF90aGlzMi4kZW1pdCgib24tc3VibWl0IiwgdHJ1ZSk7CgogICAgICAgICAgICAgICAgX3RoaXMyLnZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5re75YqgCiAgICAgICAgICAgIF90aGlzMi5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgYWRkVXNlcihfdGhpczIuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgX3RoaXMyLnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICBfdGhpczIuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CgogICAgICAgICAgICAgICAgX3RoaXMyLiRlbWl0KCJvbi1zdWJtaXQiLCB0cnVlKTsKCiAgICAgICAgICAgICAgICBfdGhpczIudmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZXRDdXJyZW50VmFsdWU6IGZ1bmN0aW9uIHNldEN1cnJlbnRWYWx1ZSh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHRoaXMudmlzaWJsZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSA9PSAiMSIpIHsKICAgICAgICB0aGlzLnRpdGxlID0gIue8lui+keeUqOaItyI7CiAgICAgICAgdGhpcy5tYXhIZWlnaHQgPSBOdW1iZXIoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAtIDEyMSkgKyAicHgiOwogICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PSAiMiIpIHsKICAgICAgICB0aGlzLnRpdGxlID0gIua3u+WKoOeUqOaItyI7CiAgICAgICAgdGhpcy5tYXhIZWlnaHQgPSBOdW1iZXIoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAtIDEyMSkgKyAicHgiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGl0bGUgPSAi55So5oi36K+m5oOFIjsKICAgICAgICB0aGlzLm1heEhlaWdodCA9ICIxMDAlIjsKICAgICAgfSAvLyDmuIXnqbrmlbDmja4KCgogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKTsKCiAgICAgIGlmICh0aGlzLnR5cGUgPT0gIjAiIHx8IHRoaXMudHlwZSA9PSAiMSIpIHsKICAgICAgICAvLyDlm57mmL7mlbDmja4KICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTsgLy8g5Zyw5Z2ACgogICAgICAgIGlmIChkYXRhLmFkZHJlc3MpIHsKICAgICAgICAgIGRhdGEuYWRkcmVzcyA9IGRhdGEuYWRkcmVzcy5zcGxpdCgiLCIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRhLmFkZHJlc3MgPSBbXTsKICAgICAgICB9IC8vIOmDqOmXqAoKCiAgICAgICAgdGhpcy4kcmVmcy5kZXBUcmVlLnNldERhdGEoZGF0YS5kZXBhcnRtZW50SWQsIGRhdGEuZGVwYXJ0bWVudFRpdGxlKTsgLy8g6KeS6ImyCgogICAgICAgIHZhciBzZWxlY3RSb2xlc0lkID0gW107CiAgICAgICAgZGF0YS5yb2xlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBzZWxlY3RSb2xlc0lkLnB1c2goZS5pZCk7CiAgICAgICAgfSk7CiAgICAgICAgZGF0YS5yb2xlSWRzID0gc2VsZWN0Um9sZXNJZDsKICAgICAgICBkZWxldGUgZGF0YS5yb2xlczsKICAgICAgICBkZWxldGUgZGF0YS5wZXJtaXNzaW9uczsgLy8g5a+G56CB5by65bqmCgogICAgICAgIGlmIChkYXRhLnBhc3NTdHJlbmd0aCA9PSAi5byxIikgewogICAgICAgICAgdGhpcy5wYXNzQ29sb3IgPSAiI2VkM2YxNCI7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnBhc3NTdHJlbmd0aCA9PSAi5LitIikgewogICAgICAgICAgdGhpcy5wYXNzQ29sb3IgPSAiI2ZhYWQxNCI7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLnBhc3NTdHJlbmd0aCA9PSAi5by6IikgewogICAgICAgICAgdGhpcy5wYXNzQ29sb3IgPSAiIzUyYzQxYSI7CiAgICAgICAgfSAvLyDlm57mmL4KCgogICAgICAgIHRoaXMuZm9ybSA9IGRhdGE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5re75YqgCiAgICAgICAgdGhpcy4kcmVmcy5kZXBUcmVlLnNldERhdGEoIiIsICIiKTsKICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICB0eXBlOiAwLAogICAgICAgICAgc2V4OiAiIiwKICAgICAgICAgIGFkZHJlc3M6IFtdCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdGhpcy52aXNpYmxlID0gdmFsdWU7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHZhbCkgewogICAgICB0aGlzLnNldEN1cnJlbnRWYWx1ZSh2YWwpOwogICAgfSwKICAgIHZpc2libGU6IGZ1bmN0aW9uIHZpc2libGUodmFsdWUpIHsKICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCB2YWx1ZSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyLA;AACA,SACAA,gBADA,EAEAC,cAFA,EAGAC,gBAHA,QAIA,iBAJA;AAKA;AACA;AACA;AACA;AACA;EACAC,eADA;EAEAC;IACAC,0CADA;IAEAC,8BAFA;IAGAC,wBAHA;IAIAC;EAJA,CAFA;EAQAC;IACAC;MACAC,aADA;MAEAC;IAFA,CADA;IAKAC;MACAF;IADA,CALA;IAQAA;MACAA,YADA;MAEAC;IAFA;EARA,CARA;EAqBAC,IArBA,kBAqBA;IACA;MACAC,YADA;MAEAC,mBAFA;MAGAC,SAHA;MAIAC,aAJA;MAKAC,oBALA;MAMAC,cANA;MAOAC;QACAC;MADA,CAPA;MAUAC;QACA;QACAC,WACA;UAAAC;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAD;QAAA,CAFA,CAFA;QAMAE,WACA;UAAAJ;UAAAC;UAAAC;QAAA,CADA,CANA;QASAG,SACA;UAAAL;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAD;QAAA,CAFA,CATA;QAaAI,WACA;UAAAN;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAD;QAAA,CAFA,CAbA;QAiBAK,QACA;UAAAP;UAAAC;QAAA,CADA,EAEA;UAAAd;UAAAc;QAAA,CAFA;MAjBA;IAVA;EAiCA,CAvDA;EAwDAO;IACAC,IADA,kBACA;MACA;IACA,CAHA;IAIAC,WAJA,yBAIA;MAAA;;MACAC;QACA;UACA;QACA;MACA,CAJA;IAKA,CAVA;IAWAC,mBAXA,+BAWAC,CAXA,EAWA;MACA;IACA,CAbA;IAcAC,UAdA,sBAcAD,CAdA,EAcAE,KAdA,EAcAC,QAdA,EAcA;MACA;IACA,CAhBA;IAiBAC,MAjBA,oBAiBA;MAAA;;MACA;QACA;UACA;YACA;UACA;;UACA;YACA;YACA;YACAC;cACA;;cACA;gBACA;;gBACA;;gBACA;cACA;YACA,CAPA;UAQA,CAXA,MAWA;YACA;YACA;YACAC;cACA;;cACA;gBACA;;gBACA;;gBACA;cACA;YACA,CAPA;UAQA;QACA;MACA,CA7BA;IA8BA,CAhDA;IAiDAC,eAjDA,2BAiDAlC,KAjDA,EAiDA;MACA;QACA;MACA;;MACA;QACA;QACA,iBACAmC,0DADA;MAEA,CAJA,MAIA;QACA;QACA,iBACAA,0DADA;MAEA,CAJA,MAIA;QACA;QACA;MACA,CAfA,CAgBA;;;MACA;;MACA;QACA;QACA,qBAFA,CAGA;;QACA;UACAhC;QACA,CAFA,MAEA;UACAA;QACA,CARA,CASA;;;QACA,oEAVA,CAWA;;QACA;QACAA;UACAiC;QACA,CAFA;QAGAjC;QACA;QACA,wBAlBA,CAmBA;;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA,CAFA,MAEA;UACA;QACA,CA1BA,CA2BA;;;QACA;MACA,CA7BA,MA6BA;QACA;QACA;QACA;UACAF,OADA;UAEAoC,OAFA;UAGA1B;QAHA;MAKA;;MACA;IACA;EA1GA,CAxDA;EAoKA2B;IACAtC,KADA,iBACAuC,GADA,EACA;MACA;IACA,CAHA;IAIAlC,OAJA,mBAIAL,KAJA,EAIA;MACA;IACA;EANA,CApKA;EA4KAwC,OA5KA,qBA4KA;IACA;EACA;AA9KA","names":["validateUsername","validateMobile","validatePassword","name","components","departmentTreeChoose","uploadPicInput","SetPassword","dict","props","value","type","default","data","roleList","visible","title","passColor","submitLoading","maxHeight","form","address","formValidate","username","required","message","trigger","validator","nickname","mobile","password","email","methods","init","getRoleList","getAllRoleList","handleSelectDepTree","v","changePass","grade","strength","submit","editUser","addUser","setCurrentValue","Number","selectRolesId","sex","watch","val","mounted"],"sourceRoot":"src/views/sys/user-manage","sources":["addEdit.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-edit\">\r\n    <!-- Drawer抽屉 -->\r\n    <Drawer\r\n      :title=\"title\"\r\n      v-model=\"visible\"\r\n      width=\"720\"\r\n      draggable\r\n      :mask-closable=\"type == '0'\"\r\n    >\r\n      <div :style=\"{ maxHeight: maxHeight }\" class=\"drawer-content\">\r\n        <div class=\"drawer-header\">\r\n          <div style=\"margin-right: 16px\">基本信息</div>\r\n          <Avatar :src=\"form.avatar\" size=\"large\" v-show=\"type != '2'\" />\r\n        </div>\r\n        <Form label-colon v-show=\"type != '2'\">\r\n          <Row :gutter=\"32\">\r\n            <Col span=\"12\">\r\n              <FormItem label=\"用户ID\">\r\n                {{ form.id }}\r\n                <Tooltip trigger=\"hover\" placement=\"right\" content=\"账户已禁用\">\r\n                  <Icon\r\n                    v-show=\"form.status == -1\"\r\n                    type=\"md-lock\"\r\n                    size=\"18\"\r\n                    style=\"margin-left: 10px; cursor: pointer\"\r\n                  />\r\n                </Tooltip>\r\n              </FormItem>\r\n            </Col>\r\n            <Col span=\"12\">\r\n              <FormItem label=\"登录账号\">\r\n                {{ form.username }}\r\n                <Tooltip\r\n                  trigger=\"hover\"\r\n                  placement=\"right\"\r\n                  :content=\"`密码强度：${form.passStrength}`\"\r\n                >\r\n                  <Icon\r\n                    v-show=\"form.passStrength\"\r\n                    type=\"md-key\"\r\n                    :color=\"passColor\"\r\n                    size=\"18\"\r\n                    style=\"margin-left: 10px; cursor: pointer\"\r\n                  />\r\n                </Tooltip>\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n        </Form>\r\n        <Form\r\n          ref=\"form\"\r\n          :model=\"form\"\r\n          :rules=\"formValidate\"\r\n          label-position=\"top\"\r\n        >\r\n          <Row :gutter=\"32\" v-if=\"type == '2'\">\r\n            <Col span=\"12\">\r\n              <FormItem label=\"登录账号\" prop=\"username\">\r\n                <Input\r\n                  v-model=\"form.username\"\r\n                  autocomplete=\"off\"\r\n                  :maxlength=\"16\"\r\n                />\r\n              </FormItem>\r\n            </Col>\r\n            <Col span=\"12\">\r\n              <FormItem label=\"密码\" prop=\"password\">\r\n                <SetPassword v-model=\"form.password\" @on-change=\"changePass\" />\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n          <Row :gutter=\"32\">\r\n            <Col span=\"12\">\r\n              <FormItem label=\"用户名\" prop=\"nickname\">\r\n                <Input v-model=\"form.nickname\" />\r\n              </FormItem>\r\n            </Col>\r\n            <Col span=\"12\">\r\n              <FormItem label=\"邮箱\" prop=\"email\">\r\n                <Input v-model=\"form.email\" />\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n          <Row :gutter=\"32\">\r\n            <Col span=\"12\">\r\n              <FormItem label=\"手机号\" prop=\"mobile\">\r\n                <Input v-model=\"form.mobile\" />\r\n              </FormItem>\r\n            </Col>\r\n            <Col span=\"12\">\r\n              <FormItem label=\"性别\">\r\n                <dict dict=\"sex\" v-model=\"form.sex\" transfer />\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n          <Row :gutter=\"32\">\r\n            <Col span=\"12\">\r\n              <FormItem label=\"所属部门\" class=\"form-noheight\">\r\n                <department-tree-choose\r\n                  @on-change=\"handleSelectDepTree\"\r\n                  ref=\"depTree\"\r\n                ></department-tree-choose>\r\n              </FormItem>\r\n            </Col>\r\n            <Col span=\"12\">\r\n              <FormItem label=\"用户类型\">\r\n                <Select v-model=\"form.type\" transfer placeholder=\"请选择\">\r\n                  <Option :value=\"0\">普通用户</Option>\r\n                  <Option :value=\"1\">管理员</Option>\r\n                </Select>\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n          <Row :gutter=\"32\">\r\n            <Col span=\"12\">\r\n              <FormItem label=\"头像\" class=\"form-noheight\">\r\n                <upload-pic-input v-model=\"form.avatar\"></upload-pic-input>\r\n              </FormItem>\r\n            </Col>\r\n            <Col span=\"12\">\r\n              <FormItem label=\"角色分配\" prop=\"roleIds\">\r\n                <Select v-model=\"form.roleIds\" multiple transfer>\r\n                  <Option\r\n                    v-for=\"item in roleList\"\r\n                    :value=\"item.id\"\r\n                    :key=\"item.id\"\r\n                    :label=\"item.name\"\r\n                  >\r\n                    <span style=\"margin-right: 10px\">{{ item.name }}</span>\r\n                    <span style=\"color: #ccc\">{{ item.description }}</span>\r\n                  </Option>\r\n                </Select>\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n          <Divider />\r\n          <p class=\"drawer-title\">个人资料</p>\r\n          <Row :gutter=\"32\">\r\n            <Col span=\"12\">\r\n              <FormItem label=\"所在地区\" prop=\"address\">\r\n                <al-cascader\r\n                  v-model=\"form.address\"\r\n                  data-type=\"code\"\r\n                  level=\"2\"\r\n                  transfer\r\n                />\r\n              </FormItem>\r\n            </Col>\r\n            <Col span=\"12\">\r\n              <FormItem label=\"街道地址\">\r\n                <Input v-model=\"form.street\" />\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n          <Row :gutter=\"32\">\r\n            <Col span=\"12\">\r\n              <FormItem label=\"生日\" prop=\"birth\">\r\n                <DatePicker\r\n                  v-model=\"form.birth\"\r\n                  style=\"display: block\"\r\n                  type=\"date\"\r\n                  transfer\r\n                ></DatePicker>\r\n              </FormItem>\r\n            </Col>\r\n            <Col span=\"24\">\r\n              <FormItem label=\"简介\">\r\n                <Input type=\"textarea\" v-model=\"form.description\" :rows=\"4\" />\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n        </Form>\r\n      </div>\r\n      <div class=\"drawer-footer br\" v-show=\"type != '0'\">\r\n        <Button type=\"primary\" :loading=\"submitLoading\" @click=\"submit\"\r\n          >提交</Button\r\n        >\r\n        <Button @click=\"visible = false\">取消</Button>\r\n      </div>\r\n    </Drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAllRoleList, addUser, editUser } from \"@/api/index\";\r\nimport {\r\n  validateUsername,\r\n  validateMobile,\r\n  validatePassword,\r\n} from \"@/libs/validate\";\r\nimport departmentTreeChoose from \"@/views/my-components/xboot/department-tree-choose\";\r\nimport uploadPicInput from \"@/views/my-components/xboot/upload-pic-input\";\r\nimport SetPassword from \"@/views/my-components/xboot/set-password\";\r\nimport dict from \"@/views/my-components/xboot/dict\";\r\nexport default {\r\n  name: \"addEdit\",\r\n  components: {\r\n    departmentTreeChoose,\r\n    uploadPicInput,\r\n    SetPassword,\r\n    dict,\r\n  },\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    data: {\r\n      type: Object,\r\n    },\r\n    type: {\r\n      type: String,\r\n      default: \"0\",\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      roleList: [],\r\n      visible: this.value,\r\n      title: \"\",\r\n      passColor: \"\",\r\n      submitLoading: false,\r\n      maxHeight: 510,\r\n      form: {\r\n        address: [],\r\n      },\r\n      formValidate: {\r\n        // 表单验证规则\r\n        username: [\r\n          { required: true, message: \"请输入登录账号\", trigger: \"blur\" },\r\n          { validator: validateUsername, trigger: \"blur\" },\r\n        ],\r\n        nickname: [\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n        ],\r\n        mobile: [\r\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\r\n          { validator: validateMobile, trigger: \"blur\" },\r\n        ],\r\n        password: [\r\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n          { validator: validatePassword, trigger: \"blur\" },\r\n        ],\r\n        email: [\r\n          { required: true, message: \"请输入邮箱地址\" },\r\n          { type: \"email\", message: \"邮箱格式不正确\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getRoleList();\r\n    },\r\n    getRoleList() {\r\n      getAllRoleList().then((res) => {\r\n        if (res.success) {\r\n          this.roleList = res.result;\r\n        }\r\n      });\r\n    },\r\n    handleSelectDepTree(v) {\r\n      this.form.departmentId = v;\r\n    },\r\n    changePass(v, grade, strength) {\r\n      this.form.passStrength = strength;\r\n    },\r\n    submit() {\r\n      this.$refs.form.validate((valid) => {\r\n        if (valid) {\r\n          if (typeof this.form.birth == \"object\") {\r\n            this.form.birth = this.format(this.form.birth, \"yyyy-MM-dd\");\r\n          }\r\n          if (this.type == \"1\") {\r\n            // 编辑\r\n            this.submitLoading = true;\r\n            editUser(this.form).then((res) => {\r\n              this.submitLoading = false;\r\n              if (res.success) {\r\n                this.$Message.success(\"操作成功\");\r\n                this.$emit(\"on-submit\", true);\r\n                this.visible = false;\r\n              }\r\n            });\r\n          } else {\r\n            // 添加\r\n            this.submitLoading = true;\r\n            addUser(this.form).then((res) => {\r\n              this.submitLoading = false;\r\n              if (res.success) {\r\n                this.$Message.success(\"操作成功\");\r\n                this.$emit(\"on-submit\", true);\r\n                this.visible = false;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    setCurrentValue(value) {\r\n      if (value === this.visible) {\r\n        return;\r\n      }\r\n      if (this.type == \"1\") {\r\n        this.title = \"编辑用户\";\r\n        this.maxHeight =\r\n          Number(document.documentElement.clientHeight - 121) + \"px\";\r\n      } else if (this.type == \"2\") {\r\n        this.title = \"添加用户\";\r\n        this.maxHeight =\r\n          Number(document.documentElement.clientHeight - 121) + \"px\";\r\n      } else {\r\n        this.title = \"用户详情\";\r\n        this.maxHeight = \"100%\";\r\n      }\r\n      // 清空数据\r\n      this.$refs.form.resetFields();\r\n      if (this.type == \"0\" || this.type == \"1\") {\r\n        // 回显数据\r\n        let data = this.data;\r\n        // 地址\r\n        if (data.address) {\r\n          data.address = data.address.split(\",\");\r\n        } else {\r\n          data.address = [];\r\n        }\r\n        // 部门\r\n        this.$refs.depTree.setData(data.departmentId, data.departmentTitle);\r\n        // 角色\r\n        let selectRolesId = [];\r\n        data.roles.forEach(function (e) {\r\n          selectRolesId.push(e.id);\r\n        });\r\n        data.roleIds = selectRolesId;\r\n        delete data.roles;\r\n        delete data.permissions;\r\n        // 密码强度\r\n        if (data.passStrength == \"弱\") {\r\n          this.passColor = \"#ed3f14\";\r\n        } else if (data.passStrength == \"中\") {\r\n          this.passColor = \"#faad14\";\r\n        } else if (data.passStrength == \"强\") {\r\n          this.passColor = \"#52c41a\";\r\n        }\r\n        // 回显\r\n        this.form = data;\r\n      } else {\r\n        // 添加\r\n        this.$refs.depTree.setData(\"\", \"\");\r\n        this.form = {\r\n          type: 0,\r\n          sex: \"\",\r\n          address: [],\r\n        };\r\n      }\r\n      this.visible = value;\r\n    },\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.setCurrentValue(val);\r\n    },\r\n    visible(value) {\r\n      this.$emit(\"input\", value);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"@/styles/drawer-common.less\";\r\n</style>\r\n\r\n"]}]}