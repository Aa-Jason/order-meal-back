{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\main-components\\user.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\main-components\\user.vue","mtime":1651629755174},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0T3RoZXJTZXQgfSBmcm9tICJAL2FwaS9pbmRleCI7CmltcG9ydCB1dGlsIGZyb20gIkAvbGlicy91dGlsLmpzIjsKaW1wb3J0IGNoYW5nZVBhc3MgZnJvbSAiQC92aWV3cy9jaGFuZ2UtcGFzcy9jaGFuZ2UtcGFzcyI7CmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidXNlciIsCiAgY29tcG9uZW50czogewogICAgY2hhbmdlUGFzczogY2hhbmdlUGFzcwogIH0sCiAgcHJvcHM6IHt9LAogIGNvbXB1dGVkOiB7CiAgICBuaWNrbmFtZTogZnVuY3Rpb24gbmlja25hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLm5pY2tuYW1lOwogICAgfSwKICAgIGF2YXRhcjogZnVuY3Rpb24gYXZhdGFyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5hdmF0YXI7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0NoYW5nZVBhc3M6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHt9LAogICAgaGFuZGxlQ2xpY2tVc2VyRHJvcGRvd246IGZ1bmN0aW9uIGhhbmRsZUNsaWNrVXNlckRyb3Bkb3duKG5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChuYW1lID09ICJvd25TcGFjZSIpIHsKICAgICAgICB1dGlsLm9wZW5OZXdQYWdlKHRoaXMsICJvd25zcGFjZV9pbmRleCIpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJvd25zcGFjZV9pbmRleCIKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJjaGFuZ2VQYXNzIikgewogICAgICAgIHRoaXMuc2hvd0NoYW5nZVBhc3MgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gImxvZ2lub3V0IikgewogICAgICAgIC8vIOmAgOWHuueZu+W9lQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0TG9hZGluZyIsIHRydWUpOwogICAgICAgIGdldE90aGVyU2V0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRMb2FkaW5nIiwgZmFsc2UpOwoKICAgICAgICAgIGlmIChyZXMucmVzdWx0KSB7CiAgICAgICAgICAgIHZhciBkb21haW4gPSByZXMucmVzdWx0LnNzb0RvbWFpbjsKICAgICAgICAgICAgQ29va2llcy5zZXQoImFjY2Vzc1Rva2VuIiwgIiIsIHsKICAgICAgICAgICAgICBkb21haW46IGRvbWFpbiwKICAgICAgICAgICAgICBleHBpcmVzOiA3CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoImxvZ291dCIsIF90aGlzKTsKCiAgICAgICAgICBfdGhpcy5zZXRTdG9yZSgiYWNjZXNzVG9rZW4iLCAiIik7IC8vIOW8uuWItuWIt+aWsOmhtemdoiDph43mlrDliqDovb1yb3V0ZXIKCgogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;EACAA,YADA;EAEAC;IACAC;EADA,CAFA;EAKAC,SALA;EAMAC;IACAC,QADA,sBACA;MACA;IACA,CAHA;IAIAC,MAJA,oBAIA;MACA;IACA;EANA,CANA;EAcAC,IAdA,kBAcA;IACA;MACAC;IADA;EAGA,CAlBA;EAmBAC;IACAC,IADA,kBACA,EADA;IAEAC,uBAFA,mCAEAX,IAFA,EAEA;MAAA;;MACA;QACAY;QACA;UACAZ;QADA;MAGA,CALA,MAKA;QACA;MACA,CAFA,MAEA;QACA;QACA;QACAa;UACA;;UACA;YACA;YACAC;cACAC,cADA;cAEAC;YAFA;UAIA;;UACA;;UACA,kCAVA,CAWA;;;UACAC;QACA,CAbA;MAcA;IACA;EA5BA,CAnBA;EAiDAC,OAjDA,qBAiDA;IACA;EACA;AAnDA","names":["name","components","changePass","props","computed","nickname","avatar","data","showChangePass","methods","init","handleClickUserDropdown","util","getOtherSet","Cookies","domain","expires","location","mounted"],"sourceRoot":"src/views/main-components","sources":["user.vue"],"sourcesContent":["<template>\r\n  <div style=\"display: inline-block\">\r\n    <Dropdown transfer trigger=\"hover\" @on-click=\"handleClickUserDropdown\">\r\n      <div style=\"display: inline-block\">\r\n        <div class=\"header-right-icon header-user header-action\">\r\n          <Avatar v-if=\"avatar\" :src=\"avatar\" size=\"small\"></Avatar>\r\n          <Avatar v-else icon=\"md-person\" size=\"small\"></Avatar>\r\n          <span class=\"header-username\">{{ nickname }}</span>\r\n        </div>\r\n      </div>\r\n      <DropdownMenu slot=\"list\">\r\n        <DropdownItem name=\"ownSpace\">\r\n          <Icon type=\"md-person\" style=\"margin: 0 10px 0 0\" />{{\r\n            $t(\"userCenter\")\r\n          }}</DropdownItem\r\n        >\r\n        <DropdownItem name=\"changePass\">\r\n          <Icon type=\"md-unlock\" style=\"margin: 0 10px 0 0\" />{{\r\n            $t(\"changePass\")\r\n          }}</DropdownItem\r\n        >\r\n        <DropdownItem name=\"loginout\" divided>\r\n          <Icon type=\"md-log-out\" style=\"margin: 0 10px 0 0\" />{{\r\n            $t(\"logout\")\r\n          }}</DropdownItem\r\n        >\r\n      </DropdownMenu>\r\n    </Dropdown>\r\n\r\n    <!-- 修改密码 -->\r\n    <changePass v-model=\"showChangePass\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getOtherSet } from \"@/api/index\";\r\nimport util from \"@/libs/util.js\";\r\nimport changePass from \"@/views/change-pass/change-pass\";\r\nimport Cookies from 'js-cookie';\r\nexport default {\r\n  name: \"user\",\r\n  components: {\r\n    changePass,\r\n  },\r\n  props: {},\r\n  computed: {\r\n    nickname() {\r\n      return this.$store.state.user.nickname;\r\n    },\r\n    avatar() {\r\n      return this.$store.state.user.avatar;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      showChangePass: false,\r\n    };\r\n  },\r\n  methods: {\r\n    init() {},\r\n    handleClickUserDropdown(name) {\r\n      if (name == \"ownSpace\") {\r\n        util.openNewPage(this, \"ownspace_index\");\r\n        this.$router.push({\r\n          name: \"ownspace_index\",\r\n        });\r\n      } else if (name == \"changePass\") {\r\n        this.showChangePass = true;\r\n      } else if (name == \"loginout\") {\r\n        // 退出登录\r\n        this.$store.commit(\"setLoading\", true);\r\n        getOtherSet().then((res) => {\r\n          this.$store.commit(\"setLoading\", false);\r\n          if (res.result) {\r\n            let domain = res.result.ssoDomain;\r\n            Cookies.set(\"accessToken\", \"\", {\r\n              domain: domain,\r\n              expires: 7,\r\n            });\r\n          }\r\n          this.$store.commit(\"logout\", this);\r\n          this.setStore(\"accessToken\", \"\");\r\n          // 强制刷新页面 重新加载router\r\n          location.reload();\r\n        });\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>"]}]}