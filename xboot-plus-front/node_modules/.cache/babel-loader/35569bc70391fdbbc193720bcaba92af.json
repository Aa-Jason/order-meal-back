{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\department-choose.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\my-components\\xboot\\department-choose.vue","mtime":1651629755188},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgaW5pdERlcGFydG1lbnQsIGxvYWREZXBhcnRtZW50IH0gZnJvbSAiQC9hcGkvaW5kZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImRlcGFydG1lbnRDaG9vc2UiLAogIHByb3BzOiB7CiAgICBzaXplOiBTdHJpbmcsCiAgICB0cmFuc2ZlcjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgZmlsdGVyYWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgY2xlYXJhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBwbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICLor7fpgInmi6nmiJbovpPlhaXmkJzntKLpg6jpl6giCiAgICB9LAogICAgdHJhbnNmZXJDbGFzc05hbWU6IFN0cmluZwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdERlcDogW10sCiAgICAgIGRlcGFydG1lbnQ6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdERlcGFydG1lbnREYXRhOiBmdW5jdGlvbiBpbml0RGVwYXJ0bWVudERhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpbml0RGVwYXJ0bWVudCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgcmVzLnJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLmlzUGFyZW50KSB7CiAgICAgICAgICAgICAgZS52YWx1ZSA9IGUuaWQ7CiAgICAgICAgICAgICAgZS5sYWJlbCA9IGUudGl0bGU7CiAgICAgICAgICAgICAgZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgZS5jaGlsZHJlbiA9IFtdOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGUudmFsdWUgPSBlLmlkOwogICAgICAgICAgICAgIGUubGFiZWwgPSBlLnRpdGxlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZS5zdGF0dXMgPT0gLTEpIHsKICAgICAgICAgICAgICBlLmxhYmVsID0gIlvlt7LnpoHnlKhdICIgKyBlLmxhYmVsOwogICAgICAgICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzLmRlcGFydG1lbnQgPSByZXMucmVzdWx0OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbG9hZERhdGE6IGZ1bmN0aW9uIGxvYWREYXRhKGl0ZW0sIGNhbGxiYWNrKSB7CiAgICAgIGl0ZW0ubG9hZGluZyA9IHRydWU7CiAgICAgIGxvYWREZXBhcnRtZW50KGl0ZW0udmFsdWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGl0ZW0ubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoZS5pc1BhcmVudCkgewogICAgICAgICAgICAgIGUudmFsdWUgPSBlLmlkOwogICAgICAgICAgICAgIGUubGFiZWwgPSBlLnRpdGxlOwogICAgICAgICAgICAgIGUubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIGUuY2hpbGRyZW4gPSBbXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBlLnZhbHVlID0gZS5pZDsKICAgICAgICAgICAgICBlLmxhYmVsID0gZS50aXRsZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGUuc3RhdHVzID09IC0xKSB7CiAgICAgICAgICAgICAgZS5sYWJlbCA9ICJb5bey56aB55SoXSAiICsgZS5sYWJlbDsKICAgICAgICAgICAgICBlLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBpdGVtLmNoaWxkcmVuID0gcmVzLnJlc3VsdDsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2VEZXA6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZURlcCh2YWx1ZSwgc2VsZWN0ZWREYXRhKSB7CiAgICAgIHZhciBkZXBhcnRtZW50SWQgPSAiIjsgLy8g6I635Y+W5pyA5ZCO5LiA5Liq5YC8CgogICAgICBpZiAodmFsdWUgJiYgdmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgIGRlcGFydG1lbnRJZCA9IHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCJvbi1jaGFuZ2UiLCBkZXBhcnRtZW50SWQpOwogICAgfSwKICAgIGhhbmRsZVZpc2libGVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVZpc2libGVDaGFuZ2Uoc3RhdHVzKSB7CiAgICAgIHRoaXMuJGVtaXQoIm9uLXZpc2libGUtY2hhbmdlIiwgc3RhdHVzKTsKICAgIH0sCiAgICBjbGVhclNlbGVjdDogZnVuY3Rpb24gY2xlYXJTZWxlY3QoKSB7CiAgICAgIHRoaXMuc2VsZWN0RGVwID0gW107CiAgICAgIHRoaXMuJGVtaXQoIm9uLWNoYW5nZSIsICIiKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXREZXBhcnRtZW50RGF0YSgpOwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;AAqBA;AACA;EACAA,wBADA;EAEAC;IACAC,YADA;IAEAC;MACAC,aADA;MAEAC;IAFA,CAFA;IAMAC;MACAF,aADA;MAEAC;IAFA,CANA;IAUAE;MACAH,aADA;MAEAC;IAFA,CAVA;IAcAG;MACAJ,aADA;MAEAC;IAFA,CAdA;IAkBAI;MACAL,YADA;MAEAC;IAFA,CAlBA;IAsBAK;EAtBA,CAFA;EA0BAC,IA1BA,kBA0BA;IACA;MACAC,aADA;MAEAC;IAFA;EAIA,CA/BA;EAgCAC;IACAC,kBADA,gCACA;MAAA;;MACAC;QACA;UACAC;YACA;cACAC;cACAA;cACAA;cACAA;YACA,CALA,MAKA;cACAA;cACAA;YACA;;YACA;cACAA;cACAA;YACA;UACA,CAdA;UAeA;QACA;MACA,CAnBA;IAoBA,CAtBA;IAuBAC,QAvBA,oBAuBAC,IAvBA,EAuBAC,QAvBA,EAuBA;MACAD;MACAE;QACAF;;QACA;UACAH;YACA;cACAC;cACAA;cACAA;cACAA;YACA,CALA,MAKA;cACAA;cACAA;YACA;;YACA;cACAA;cACAA;YACA;UACA,CAdA;UAeAE;UACAC;QACA;MACA,CArBA;IAsBA,CA/CA;IAgDAE,eAhDA,2BAgDAC,KAhDA,EAgDAC,YAhDA,EAgDA;MACA,sBADA,CAEA;;MACA;QACAC;MACA;;MACA;IACA,CAvDA;IAwDAC,mBAxDA,+BAwDAC,MAxDA,EAwDA;MACA;IACA,CA1DA;IA2DAC,WA3DA,yBA2DA;MACA;MACA;IACA;EA9DA,CAhCA;EAgGAC,OAhGA,qBAgGA;IACA;EACA;AAlGA","names":["name","props","size","transfer","type","default","disabled","filterable","clearable","placeholder","transferClassName","data","selectDep","department","methods","initDepartmentData","initDepartment","res","e","loadData","item","callback","loadDepartment","handleChangeDep","value","selectedData","departmentId","handleVisibleChange","status","clearSelect","mounted"],"sourceRoot":"src/views/my-components/xboot","sources":["department-choose.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <Cascader\r\n      v-model=\"selectDep\"\r\n      :data=\"department\"\r\n      :load-data=\"loadData\"\r\n      @on-change=\"handleChangeDep\"\r\n      @on-visible-change=\"handleVisibleChange\"\r\n      change-on-select\r\n      :size=\"size\"\r\n      :transfer=\"transfer\"\r\n      :transfer-class-name=\"transferClassName\"\r\n      :disabled=\"disabled\"\r\n      :filterable=\"filterable\"\r\n      :clearable=\"clearable\"\r\n      :placeholder=\"placeholder\"\r\n    ></Cascader>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { initDepartment, loadDepartment } from \"@/api/index\";\r\nexport default {\r\n  name: \"departmentChoose\",\r\n  props: {\r\n    size: String,\r\n    transfer: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    filterable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    clearable: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: \"请选择或输入搜索部门\",\r\n    },\r\n    transferClassName: String,\r\n  },\r\n  data() {\r\n    return {\r\n      selectDep: [],\r\n      department: [],\r\n    };\r\n  },\r\n  methods: {\r\n    initDepartmentData() {\r\n      initDepartment().then((res) => {\r\n        if (res.success) {\r\n          res.result.forEach(function (e) {\r\n            if (e.isParent) {\r\n              e.value = e.id;\r\n              e.label = e.title;\r\n              e.loading = false;\r\n              e.children = [];\r\n            } else {\r\n              e.value = e.id;\r\n              e.label = e.title;\r\n            }\r\n            if (e.status == -1) {\r\n              e.label = \"[已禁用] \" + e.label;\r\n              e.disabled = true;\r\n            }\r\n          });\r\n          this.department = res.result;\r\n        }\r\n      });\r\n    },\r\n    loadData(item, callback) {\r\n      item.loading = true;\r\n      loadDepartment(item.value).then((res) => {\r\n        item.loading = false;\r\n        if (res.success) {\r\n          res.result.forEach(function (e) {\r\n            if (e.isParent) {\r\n              e.value = e.id;\r\n              e.label = e.title;\r\n              e.loading = false;\r\n              e.children = [];\r\n            } else {\r\n              e.value = e.id;\r\n              e.label = e.title;\r\n            }\r\n            if (e.status == -1) {\r\n              e.label = \"[已禁用] \" + e.label;\r\n              e.disabled = true;\r\n            }\r\n          });\r\n          item.children = res.result;\r\n          callback();\r\n        }\r\n      });\r\n    },\r\n    handleChangeDep(value, selectedData) {\r\n      let departmentId = \"\";\r\n      // 获取最后一个值\r\n      if (value && value.length > 0) {\r\n        departmentId = value[value.length - 1];\r\n      }\r\n      this.$emit(\"on-change\", departmentId);\r\n    },\r\n    handleVisibleChange(status) {\r\n      this.$emit(\"on-visible-change\", status);\r\n    },\r\n    clearSelect() {\r\n      this.selectDep = [];\r\n      this.$emit(\"on-change\", \"\");\r\n    },\r\n  },\r\n  mounted() {\r\n    this.initDepartmentData();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n</style>\r\n\r\n"]}]}