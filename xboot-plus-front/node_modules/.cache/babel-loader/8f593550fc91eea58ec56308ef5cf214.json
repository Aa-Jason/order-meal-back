{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\sys\\setting-manage\\sms.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\sys\\setting-manage\\sms.vue","mtime":1651629755231},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgY2hlY2tTbXNTZXQsIHNlZVNlY3JldFNldCwgZ2V0U21zU2V0LCBlZGl0U21zU2V0LCBnZXRTbXNUZW1wbGF0ZUNvZGUgfSBmcm9tICJAL2FwaS9pbmRleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAic21zIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIC8vIOihqOWNleWKoOi9veeKtuaAgQogICAgICBjaGFuZ2VMb2FkaW5nOiBmYWxzZSwKICAgICAgc2F2ZUxvYWRpbmc6IGZhbHNlLAogICAgICBzbXM6IHsKICAgICAgICBzZXJ2aWNlTmFtZTogIkFMSV9TTVMiLAogICAgICAgIGFjY2Vzc0tleTogIiIsCiAgICAgICAgc2VjcmV0S2V5OiAiIiwKICAgICAgICBhcHBJZDogIiIsCiAgICAgICAgc2lnbk5hbWU6ICIiLAogICAgICAgIHR5cGU6ICIiLAogICAgICAgIHRlbXBsYXRlQ29kZTogIiIKICAgICAgfSwKICAgICAgY2hhbmdlZFNtc1NLOiBmYWxzZSwKICAgICAgLy8g5piv5ZCm5L+u5pS555+t5L+h55qEc2VjcmVjdEtleQogICAgICBzbXNWYWxpZGF0ZTogewogICAgICAgIC8vIOihqOWNlemqjOivgeinhOWImQogICAgICAgIHNlcnZpY2VOYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36YCJ5oupIiwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfV0sCiAgICAgICAgYWNjZXNzS2V5OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHNlY3JldEtleTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBhcHBJZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBzaWduTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICB0eXBlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHRlbXBsYXRlQ29kZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdGhpcy5pbml0U21zU2V0KCk7CiAgICB9LAogICAgaW5pdFNtc1NldDogZnVuY3Rpb24gaW5pdFNtc1NldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGNoZWNrU21zU2V0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzICYmIHJlcy5yZXN1bHQpIHsKICAgICAgICAgIHZhciBzbXMgPSByZXMucmVzdWx0OwogICAgICAgICAgZ2V0U21zU2V0KHNtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgIGlmIChyZXMucmVzdWx0KSB7CiAgICAgICAgICAgICAgLy8g6L2s5o2ibnVsbOS4uiIiCiAgICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiByZXMucmVzdWx0KSB7CiAgICAgICAgICAgICAgICBpZiAocmVzLnJlc3VsdFthdHRyXSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIHJlcy5yZXN1bHRbYXR0cl0gPSAiIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzLnNtcyA9IHJlcy5yZXN1bHQ7CiAgICAgICAgICAgICAgX3RoaXMuc21zLnR5cGUgPSAiMCI7CgogICAgICAgICAgICAgIF90aGlzLmNoYW5nZVNtc1R5cGUoX3RoaXMuc21zLnR5cGUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzLmNoYW5nZWRTbXNTSyA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBfdGhpcy5jaGFuZ2VkU21zU0sgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlU21zOiBmdW5jdGlvbiBjaGFuZ2VTbXModikgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnMuc21zRm9ybS5yZXNldEZpZWxkcygpOwogICAgICB0aGlzLmNoYW5nZUxvYWRpbmcgPSB0cnVlOwogICAgICBnZXRTbXNTZXQodikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLmNoYW5nZUxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKHJlcy5yZXN1bHQpIHsKICAgICAgICAgIC8vIOi9rOaNom51bGzkuLoiIgogICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiByZXMucmVzdWx0KSB7CiAgICAgICAgICAgIGlmIChyZXMucmVzdWx0W2F0dHJdID09IG51bGwpIHsKICAgICAgICAgICAgICByZXMucmVzdWx0W2F0dHJdID0gIiI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczIuc21zID0gcmVzLnJlc3VsdDsKICAgICAgICAgIF90aGlzMi5jaGFuZ2VkU21zU0sgPSBmYWxzZTsKICAgICAgICAgIF90aGlzMi5zbXMudHlwZSA9ICIwIjsKCiAgICAgICAgICBfdGhpczIuY2hhbmdlU21zVHlwZShfdGhpczIuc21zLnR5cGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuc21zID0gewogICAgICAgICAgICBzZXJ2aWNlTmFtZTogdgogICAgICAgICAgfTsKICAgICAgICAgIF90aGlzMi5zbXMudHlwZSA9ICIwIjsKICAgICAgICAgIF90aGlzMi5jaGFuZ2VkU21zU0sgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2VlU2VjcmV0OiBmdW5jdGlvbiBzZWVTZWNyZXQobmFtZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICghbmFtZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc2VlU2VjcmV0U2V0KG5hbWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMzLnNtcy5zZWNyZXRLZXkgPSByZXMucmVzdWx0OwogICAgICAgICAgX3RoaXMzLmNoYW5nZWRTbXNTSyA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VTbXNUeXBlOiBmdW5jdGlvbiBjaGFuZ2VTbXNUeXBlKHYpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICBpZiAodiA9PSAiIiB8fCB2ID09IG51bGwgfHwgdiA9PSAidW5kZWZpbmVkIikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZ2V0U21zVGVtcGxhdGVDb2RlKHRoaXMuc21zLnNlcnZpY2VOYW1lLCB2KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzNC5zbXMudGVtcGxhdGVDb2RlID0gcmVzLnJlc3VsdDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVFZGl0U21zOiBmdW5jdGlvbiBzYXZlRWRpdFNtcygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLnNtc0Zvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpczUuc2F2ZUxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgX3RoaXM1LnNtcy5jaGFuZ2VkID0gX3RoaXM1LmNoYW5nZWRTbXNTSzsKICAgICAgICAgIGVkaXRTbXNTZXQoX3RoaXM1LnNtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzNS5zYXZlTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgX3RoaXM1LiRNZXNzYWdlLnN1Y2Nlc3MoIuS/neWtmOaIkOWKnyIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA,SACAA,WADA,EAEAC,YAFA,EAGAC,SAHA,EAIAC,UAJA,EAKAC,kBALA,QAMA,aANA;AAOA;EACAC,WADA;EAEAC,IAFA,kBAEA;IACA;MACAC,cADA;MACA;MACAC,oBAFA;MAGAC,kBAHA;MAIAC;QACAC,sBADA;QAEAC,aAFA;QAGAC,aAHA;QAIAC,SAJA;QAKAC,YALA;QAMAC,QANA;QAOAC;MAPA,CAJA;MAaAC,mBAbA;MAaA;MACAC;QACA;QACAR;UAAAS;UAAAC;UAAAC;QAAA,EAFA;QAGAV;UAAAQ;UAAAC;UAAAC;QAAA,EAHA;QAIAT;UAAAO;UAAAC;UAAAC;QAAA,EAJA;QAKAR;UAAAM;UAAAC;UAAAC;QAAA,EALA;QAMAP;UAAAK;UAAAC;UAAAC;QAAA,EANA;QAOAN;UAAAI;UAAAC;UAAAC;QAAA,EAPA;QAQAL,eACA;UAAAG;UAAAC;UAAAC;QAAA,CADA;MARA;IAdA;EA2BA,CA9BA;EA+BAC;IACAC,IADA,kBACA;MACA;IACA,CAHA;IAIAC,UAJA,wBAIA;MAAA;;MACA;MACAzB;QACA;UACA;UACAE;YACA;;YACA;cACA;cACA;gBACA;kBACAwB;gBACA;cACA;;cACA;cACA;;cACA;YACA,CAVA,MAUA;cACA;YACA;UACA,CAfA;QAgBA,CAlBA,MAkBA;UACA;UACA;QACA;MACA,CAvBA;IAwBA,CA9BA;IA+BAC,SA/BA,qBA+BAC,CA/BA,EA+BA;MAAA;;MACA;MACA;MACA1B;QACA;;QACA;UACA;UACA;YACA;cACAwB;YACA;UACA;;UACA;UACA;UACA;;UACA;QACA,CAXA,MAWA;UACA;YAAAf;UAAA;UACA;UACA;QACA;MACA,CAlBA;IAmBA,CArDA;IAsDAkB,SAtDA,qBAsDAxB,IAtDA,EAsDA;MAAA;;MACA;QACA;MACA;;MACAJ;QACA;UACA;UACA;QACA;MACA,CALA;IAMA,CAhEA;IAiEA6B,aAjEA,yBAiEAF,CAjEA,EAiEA;MAAA;;MACA;QACA;MACA;;MACAxB;QACA;UACA;QACA;MACA,CAJA;IAKA,CA1EA;IA2EA2B,WA3EA,yBA2EA;MAAA;;MACA;QACA;UACA;UACA;UACA5B;YACA;;YACA;cACA;YACA;UACA,CALA;QAMA;MACA,CAXA;IAYA;EAxFA,CA/BA;EAyHA6B,OAzHA,qBAyHA;IACA;EACA;AA3HA","names":["checkSmsSet","seeSecretSet","getSmsSet","editSmsSet","getSmsTemplateCode","name","data","loading","changeLoading","saveLoading","sms","serviceName","accessKey","secretKey","appId","signName","type","templateCode","changedSmsSK","smsValidate","required","message","trigger","methods","init","initSmsSet","res","changeSms","v","seeSecret","changeSmsType","saveEditSms","mounted"],"sourceRoot":"src/views/sys/setting-manage","sources":["sms.vue"],"sourcesContent":["<style lang=\"less\">\r\n</style>\r\n<template>\r\n  <div style=\"display: flex; position: relative\">\r\n    <Form\r\n      ref=\"smsForm\"\r\n      :model=\"sms\"\r\n      :label-width=\"110\"\r\n      label-position=\"left\"\r\n      :rules=\"smsValidate\"\r\n    >\r\n      <FormItem label=\"服务提供商\" prop=\"serviceName\">\r\n        <Select\r\n          v-model=\"sms.serviceName\"\r\n          @on-change=\"changeSms\"\r\n          placeholder=\"请选择\"\r\n          style=\"width: 230px\"\r\n        >\r\n          <Option value=\"ALI_SMS\">阿里云</Option>\r\n          <Option value=\"TENCENT_SMS\">腾讯云</Option>\r\n        </Select>\r\n      </FormItem>\r\n      <FormItem label=\"accessKey\" prop=\"accessKey\">\r\n        <Input\r\n          type=\"text\"\r\n          v-model=\"sms.accessKey\"\r\n          placeholder=\"请输入accessKey/secretId\"\r\n          :disabled=\"changeLoading\"\r\n          style=\"width: 380px\"\r\n        />\r\n      </FormItem>\r\n      <FormItem label=\"secretKey\" prop=\"secretKey\">\r\n        <Tooltip placement=\"right\" content=\"无法编辑时请先点击查看图标\">\r\n          <Input\r\n            class=\"input-see\"\r\n            type=\"text\"\r\n            v-model=\"sms.secretKey\"\r\n            :readonly=\"!changedSmsSK\"\r\n            @on-click=\"seeSecret(sms.serviceName)\"\r\n            :disabled=\"changeLoading\"\r\n            icon=\"ios-eye\"\r\n            placeholder=\"请输入secretKey\"\r\n            style=\"width: 380px\"\r\n          />\r\n        </Tooltip>\r\n      </FormItem>\r\n      <FormItem\r\n        v-if=\"sms.serviceName == 'TENCENT_SMS'\"\r\n        label=\"应用ID\"\r\n        prop=\"appId\"\r\n      >\r\n        <Input\r\n          type=\"text\"\r\n          v-model=\"sms.appId\"\r\n          :disabled=\"changeLoading\"\r\n          placeholder=\"请输入应用ID（短信控制台-应用管理）\"\r\n          style=\"width: 380px\"\r\n        />\r\n      </FormItem>\r\n      <FormItem label=\"短信签名\" prop=\"signName\">\r\n        <Input\r\n          type=\"text\"\r\n          v-model=\"sms.signName\"\r\n          :disabled=\"changeLoading\"\r\n          placeholder=\"请输入短信签名，例如XBoot\"\r\n          style=\"width: 380px\"\r\n        />\r\n      </FormItem>\r\n      <FormItem label=\"使用场景\" prop=\"type\">\r\n        <Select\r\n          v-model=\"sms.type\"\r\n          @on-change=\"changeSmsType\"\r\n          :disabled=\"changeLoading\"\r\n          placeholder=\"请选择\"\r\n          style=\"width: 380px\"\r\n          transfer\r\n        >\r\n          <Option value=\"0\">通用验证码</Option>\r\n          <Option value=\"1\">注册</Option>\r\n          <Option value=\"2\">登录</Option>\r\n          <Option value=\"3\">修改绑定手机号</Option>\r\n          <Option value=\"4\">修改密码</Option>\r\n          <Option value=\"5\">重置密码</Option>\r\n          <Option value=\"6\">工作流消息</Option>\r\n        </Select>\r\n      </FormItem>\r\n      <FormItem label=\"模版CODE/ID\" prop=\"templateCode\">\r\n        <Input\r\n          type=\"text\"\r\n          v-model=\"sms.templateCode\"\r\n          :disabled=\"changeLoading\"\r\n          placeholder=\"请输入场景对应短信模版CODE/ID，如SMS_123456789\"\r\n          style=\"width: 380px\"\r\n        />\r\n      </FormItem>\r\n      <FormItem>\r\n        <Button\r\n          type=\"primary\"\r\n          style=\"width: 100px\"\r\n          :disabled=\"changeLoading\"\r\n          :loading=\"saveLoading\"\r\n          @click=\"saveEditSms\"\r\n          >保存更改</Button\r\n        >\r\n      </FormItem>\r\n    </Form>\r\n    <Spin fix v-if=\"loading\"></Spin>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  checkSmsSet,\r\n  seeSecretSet,\r\n  getSmsSet,\r\n  editSmsSet,\r\n  getSmsTemplateCode,\r\n} from \"@/api/index\";\r\nexport default {\r\n  name: \"sms\",\r\n  data() {\r\n    return {\r\n      loading: false, // 表单加载状态\r\n      changeLoading: false,\r\n      saveLoading: false,\r\n      sms: {\r\n        serviceName: \"ALI_SMS\",\r\n        accessKey: \"\",\r\n        secretKey: \"\",\r\n        appId: \"\",\r\n        signName: \"\",\r\n        type: \"\",\r\n        templateCode: \"\",\r\n      },\r\n      changedSmsSK: false, // 是否修改短信的secrectKey\r\n      smsValidate: {\r\n        // 表单验证规则\r\n        serviceName: [{ required: true, message: \"请选择\", trigger: \"change\" }],\r\n        accessKey: [{ required: true, message: \"不能为空\", trigger: \"blur\" }],\r\n        secretKey: [{ required: true, message: \"不能为空\", trigger: \"blur\" }],\r\n        appId: [{ required: true, message: \"不能为空\", trigger: \"blur\" }],\r\n        signName: [{ required: true, message: \"不能为空\", trigger: \"blur\" }],\r\n        type: [{ required: true, message: \"不能为空\", trigger: \"blur\" }],\r\n        templateCode: [\r\n          { required: true, message: \"不能为空\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.initSmsSet();\r\n    },\r\n    initSmsSet() {\r\n      this.loading = true;\r\n      checkSmsSet().then((res) => {\r\n        if (res.success && res.result) {\r\n          let sms = res.result;\r\n          getSmsSet(sms).then((res) => {\r\n            this.loading = false;\r\n            if (res.result) {\r\n              // 转换null为\"\"\r\n              for (let attr in res.result) {\r\n                if (res.result[attr] == null) {\r\n                  res.result[attr] = \"\";\r\n                }\r\n              }\r\n              this.sms = res.result;\r\n              this.sms.type = \"0\";\r\n              this.changeSmsType(this.sms.type);\r\n            } else {\r\n              this.changedSmsSK = true;\r\n            }\r\n          });\r\n        } else {\r\n          this.loading = false;\r\n          this.changedSmsSK = true;\r\n        }\r\n      });\r\n    },\r\n    changeSms(v) {\r\n      this.$refs.smsForm.resetFields();\r\n      this.changeLoading = true;\r\n      getSmsSet(v).then((res) => {\r\n        this.changeLoading = false;\r\n        if (res.result) {\r\n          // 转换null为\"\"\r\n          for (let attr in res.result) {\r\n            if (res.result[attr] == null) {\r\n              res.result[attr] = \"\";\r\n            }\r\n          }\r\n          this.sms = res.result;\r\n          this.changedSmsSK = false;\r\n          this.sms.type = \"0\";\r\n          this.changeSmsType(this.sms.type);\r\n        } else {\r\n          this.sms = { serviceName: v };\r\n          this.sms.type = \"0\";\r\n          this.changedSmsSK = true;\r\n        }\r\n      });\r\n    },\r\n    seeSecret(name) {\r\n      if (!name) {\r\n        return;\r\n      }\r\n      seeSecretSet(name).then((res) => {\r\n        if (res.success) {\r\n          this.sms.secretKey = res.result;\r\n          this.changedSmsSK = true;\r\n        }\r\n      });\r\n    },\r\n    changeSmsType(v) {\r\n      if (v == \"\" || v == null || v == \"undefined\") {\r\n        return;\r\n      }\r\n      getSmsTemplateCode(this.sms.serviceName, v).then((res) => {\r\n        if (res.success) {\r\n          this.sms.templateCode = res.result;\r\n        }\r\n      });\r\n    },\r\n    saveEditSms() {\r\n      this.$refs.smsForm.validate((valid) => {\r\n        if (valid) {\r\n          this.saveLoading = true;\r\n          this.sms.changed = this.changedSmsSK;\r\n          editSmsSet(this.sms).then((res) => {\r\n            this.saveLoading = false;\r\n            if (res.success) {\r\n              this.$Message.success(\"保存成功\");\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>"]}]}