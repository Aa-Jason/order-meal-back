{"remainingRequest":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\activiti\\process-manage\\processNodeEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\src\\views\\activiti\\process-manage\\processNodeEdit.vue","mtime":1651629755143},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\babel.config.js","mtime":1651629754991},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1651770037115},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1651770036753},{"path":"D:\\work\\workspace\\order\\xboot-plus-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1651770027133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0UHJvY2Vzc05vZGUsIGVkaXRTdGFydFVzZXIsIGVkaXROb2RlVXNlciwgdXBkYXRlSW5mbywgaW5pdEFjdENhdGVnb3J5LCBsb2FkQWN0Q2F0ZWdvcnksIHNlYXJjaEFjdENhdGVnb3J5IH0gZnJvbSAiQC9hcGkvYWN0aXZpdGkiOwppbXBvcnQgeyBnZXRBbGxSb2xlTGlzdCwgZ2V0RGljdERhdGFCeVR5cGUgfSBmcm9tICJAL2FwaS9pbmRleCI7CmltcG9ydCB1c2VyQ2hvb3NlIGZyb20gIkAvdmlld3MvbXktY29tcG9uZW50cy94Ym9vdC91c2VyLWNob29zZSI7CmltcG9ydCBkZXBhcnRtZW50VHJlZUNob29zZSBmcm9tICJAL3ZpZXdzL215LWNvbXBvbmVudHMveGJvb3QvZGVwYXJ0bWVudC10cmVlLWNob29zZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAicHJvY2Vzc19ub2RlX2VkaXQiLAogIGNvbXBvbmVudHM6IHsKICAgIHVzZXJDaG9vc2U6IHVzZXJDaG9vc2UsCiAgICBkZXBhcnRtZW50VHJlZUNob29zZTogZGVwYXJ0bWVudFRyZWVDaG9vc2UKICB9LAogIHByb3BzOiB7CiAgICBub2RlRWRpdERhdGE6IE9iamVjdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDooajljZXliqDovb3nirbmgIEKICAgICAgbm9kZUxvYWRpbmc6IGZhbHNlLAogICAgICBkYXRhOiBbXSwKICAgICAgZWRpdFRpdGxlOiAiIiwKICAgICAgc2VsZWN0VXNlcnM6IFtdLAogICAgICBkYXRhQ2F0OiBbXSwKICAgICAgY2F0TG9hZGluZzogZmFsc2UsCiAgICAgIHNlYXJjaEtleTogIiIsCiAgICAgIGJhc2ljRm9ybTogewogICAgICAgIHJvdXRlTmFtZTogIiIsCiAgICAgICAgYnVzaW5lc3NUYWJsZTogIiIsCiAgICAgICAgZGVzY3JpcHRpb246ICIiCiAgICAgIH0sCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIHJvdXRlTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIgogICAgICAgIH1dLAogICAgICAgIGJ1c2luZXNzVGFibGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgICB9XQogICAgICB9LAogICAgICBjYXRlZ29yeVRpdGxlOiAiIiwKICAgICAgZGljdFRhYmxlOiBbXSwKICAgICAgZGljdEZvcm06IFtdLAogICAgICBmb3JtOiB7CiAgICAgICAgLy8g5re75Yqg5oiW57yW6L6R6KGo5Y2V5a+56LGh5Yid5aeL5YyW5pWw5o2uCiAgICAgICAgdGl0bGU6ICIiLAogICAgICAgIGNvbnRlbnQ6ICIiLAogICAgICAgIHR5cGU6IG51bGwsCiAgICAgICAgcm9sZXM6IFtdLAogICAgICAgIGRlcGFydG1lbnRJZHM6IFtdLAogICAgICAgIGNob29zZURlcEhlYWRlcjogZmFsc2UsCiAgICAgICAgY3VzdG9tVXNlcjogZmFsc2UKICAgICAgfSwKICAgICAgcm9sZUxpc3Q6IFtdLAogICAgICBzdWJtaXRMb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g5re75Yqg5oiW57yW6L6R5o+Q5Lqk54q25oCBCiAgICAgIGNob29zZVJvbGU6IGZhbHNlLAogICAgICBjaG9vc2VVc2VyOiBmYWxzZSwKICAgICAgY2hvb3NlRGVwYXJ0bWVudDogZmFsc2UsCiAgICAgIGFsbFVzZXI6IHRydWUsCiAgICAgIGN1cnJlbnQ6IDAsCiAgICAgIGRpY3ROb2RlVHlwZTogW10sCiAgICAgIHByb2Nlc3NOYW1lOiAiIiwKICAgICAgcHJvY2Vzc0lkOiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHRoaXMuZ2V0RGljdERhdGFUeXBlKCk7CiAgICAgIHRoaXMuZ2V0Um9sZUxpc3QoKTsKICAgICAgdGhpcy5pbml0Q2F0ZWdvcnlUcmVlRGF0YSgpOwogICAgICB0aGlzLnByb2Nlc3NJZCA9IHRoaXMubm9kZUVkaXREYXRhLmlkOwogICAgICB0aGlzLnByb2Nlc3NOYW1lID0gdGhpcy5ub2RlRWRpdERhdGEubmFtZTsKICAgICAgdGhpcy5iYXNpY0Zvcm0uaWQgPSB0aGlzLm5vZGVFZGl0RGF0YS5pZDsKICAgICAgdGhpcy5iYXNpY0Zvcm0ucm91dGVOYW1lID0gdGhpcy5ub2RlRWRpdERhdGEucm91dGVOYW1lOwogICAgICB0aGlzLmJhc2ljRm9ybS5idXNpbmVzc1RhYmxlID0gdGhpcy5ub2RlRWRpdERhdGEuYnVzaW5lc3NUYWJsZTsKICAgICAgdGhpcy5iYXNpY0Zvcm0uZGVzY3JpcHRpb24gPSB0aGlzLm5vZGVFZGl0RGF0YS5kZXNjcmlwdGlvbjsKICAgICAgdGhpcy5iYXNpY0Zvcm0uY2F0ZWdvcnlJZCA9IHRoaXMubm9kZUVkaXREYXRhLmNhdGVnb3J5SWQ7CiAgICAgIHRoaXMuY2F0ZWdvcnlUaXRsZSA9IHRoaXMubm9kZUVkaXREYXRhLmNhdGVnb3J5VGl0bGU7CiAgICAgIHZhciBhbGxVc2VyID0gdGhpcy5ub2RlRWRpdERhdGEuYWxsVXNlciArICIiOwoKICAgICAgaWYgKGFsbFVzZXIgPT0gImZhbHNlIikgewogICAgICAgIHRoaXMuYWxsVXNlciA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWxsVXNlciA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBnZXREaWN0RGF0YVR5cGU6IGZ1bmN0aW9uIGdldERpY3REYXRhVHlwZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGdldERpY3REYXRhQnlUeXBlKCJwcm9jZXNzX25vZGVfdHlwZSIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXMuZGljdE5vZGVUeXBlID0gcmVzLnJlc3VsdDsKCiAgICAgICAgICBfdGhpcy5nZXREYXRhKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgZ2V0RGljdERhdGFCeVR5cGUoImJ1c2luZXNzX3RhYmxlIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpcy5kaWN0VGFibGUgPSByZXMucmVzdWx0OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGdldERpY3REYXRhQnlUeXBlKCJidXNpbmVzc19mb3JtIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpcy5kaWN0Rm9ybSA9IHJlcy5yZXN1bHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZW5kZXJDYXRDb250ZW50OiBmdW5jdGlvbiByZW5kZXJDYXRDb250ZW50KGgsIF9yZWYpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcm9vdCA9IF9yZWYucm9vdCwKICAgICAgICAgIG5vZGUgPSBfcmVmLm5vZGUsCiAgICAgICAgICBkYXRhID0gX3JlZi5kYXRhOwogICAgICB2YXIgaWNvbiA9ICIiOwoKICAgICAgaWYgKGRhdGEudHlwZSA9PSAiMCIpIHsKICAgICAgICBpY29uID0gIm1kLWZvbGRlci1vcGVuIjsKICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT0gIjEiKSB7CiAgICAgICAgaWNvbiA9ICJpb3MtYm9va21hcmstb3V0bGluZSI7CiAgICAgIH0KCiAgICAgIHJldHVybiBoKCJzcGFuIiwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBkaXNwbGF5OiAiaW5saW5lLWJsb2NrIiwKICAgICAgICAgIGN1cnNvcjogInBvaW50ZXIiCiAgICAgICAgfSwKICAgICAgICBvbjogewogICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICBfdGhpczIuc2VsZWN0Q2F0VHJlZShkYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIFtoKCJzcGFuIiwgW2goIkljb24iLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHR5cGU6IGljb24sCiAgICAgICAgICBzaXplOiAiMTYiCiAgICAgICAgfSwKICAgICAgICBzdHlsZTogewogICAgICAgICAgIm1hcmdpbi1yaWdodCI6ICI4cHgiLAogICAgICAgICAgIm1hcmdpbi1ib3R0b20iOiAiM3B4IgogICAgICAgIH0KICAgICAgfSksIGgoInNwYW4iLCBkYXRhLnRpdGxlKV0pXSk7CiAgICB9LAogICAgaW5pdENhdGVnb3J5VHJlZURhdGE6IGZ1bmN0aW9uIGluaXRDYXRlZ29yeVRyZWVEYXRhKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGluaXRBY3RDYXRlZ29yeSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgcmVzLnJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLmlzUGFyZW50KSB7CiAgICAgICAgICAgICAgZS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgZS5jaGlsZHJlbiA9IFtdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZS5zdGF0dXMgPT0gLTEpIHsKICAgICAgICAgICAgICBlLnRpdGxlID0gIlvlt7LnpoHnlKhdICIgKyBlLnRpdGxlOwogICAgICAgICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMy5kYXRhQ2F0ID0gcmVzLnJlc3VsdDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWREYXRhVHJlZTogZnVuY3Rpb24gbG9hZERhdGFUcmVlKGl0ZW0sIGNhbGxiYWNrKSB7CiAgICAgIGxvYWRBY3RDYXRlZ29yeShpdGVtLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHJlcy5yZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoZS5pc1BhcmVudCkgewogICAgICAgICAgICAgIGUubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIGUuY2hpbGRyZW4gPSBbXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGUuc3RhdHVzID09IC0xKSB7CiAgICAgICAgICAgICAgZS50aXRsZSA9ICJb5bey56aB55SoXSAiICsgZS50aXRsZTsKICAgICAgICAgICAgICBlLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBjYWxsYmFjayhyZXMucmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaENhdDogZnVuY3Rpb24gc2VhcmNoQ2F0KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIC8vIOaQnOe0oumDqOmXqAogICAgICBpZiAodGhpcy5zZWFyY2hLZXkpIHsKICAgICAgICB0aGlzLmNhdExvYWRpbmcgPSB0cnVlOwogICAgICAgIHNlYXJjaEFjdENhdGVnb3J5KHsKICAgICAgICAgIHRpdGxlOiB0aGlzLnNlYXJjaEtleQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXM0LmNhdExvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgcmVzLnJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgaWYgKGUuc3RhdHVzID09IC0xKSB7CiAgICAgICAgICAgICAgICBlLnRpdGxlID0gIlvlt7LnpoHnlKhdICIgKyBlLnRpdGxlOwogICAgICAgICAgICAgICAgZS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3RoaXM0LmRhdGFDYXQgPSByZXMucmVzdWx0OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW5pdENhdGVnb3J5VHJlZURhdGEoKTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdENhdFRyZWU6IGZ1bmN0aW9uIHNlbGVjdENhdFRyZWUodikgewogICAgICBpZiAodikgewogICAgICAgIC8vIOi9rOaNom51bGzkuLoiIgogICAgICAgIGZvciAodmFyIGF0dHIgaW4gdikgewogICAgICAgICAgaWYgKHZbYXR0cl0gPT0gbnVsbCkgewogICAgICAgICAgICB2W2F0dHJdID0gIiI7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgc3RyID0gSlNPTi5zdHJpbmdpZnkodik7CiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHN0cik7CgogICAgICAgIGlmIChkYXRhLnR5cGUgPT0gMCkgewogICAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCLor7fpgInmi6nkuIDkuKrnsbvliKsiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRoaXMuYmFzaWNGb3JtLmNhdGVnb3J5SWQgPSBkYXRhLmlkOwogICAgICAgIHRoaXMuY2F0ZWdvcnlUaXRsZSA9IGRhdGEudGl0bGU7CiAgICAgICAgdGhpcy5oYW5kZWxTdWJtaXRFZGl0KCk7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhclNlbGVjdENhdDogZnVuY3Rpb24gY2xlYXJTZWxlY3RDYXQoKSB7CiAgICAgIHRoaXMuYmFzaWNGb3JtLmNhdGVnb3J5SWQgPSAiIjsKICAgICAgdGhpcy5jYXRlZ29yeVRpdGxlID0gIiI7CiAgICAgIHRoaXMuaGFuZGVsU3VibWl0RWRpdCgpOwogICAgfSwKICAgIGhhbmRlbFN1Ym1pdEVkaXQ6IGZ1bmN0aW9uIGhhbmRlbFN1Ym1pdEVkaXQoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmcy5iYXNpY0Zvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB1cGRhdGVJbmZvKF90aGlzNS5iYXNpY0Zvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICBfdGhpczUuJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CgogICAgICAgICAgICAgIF90aGlzNS4kZW1pdCgic3VibWl0ZWQiLCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXRSb2xlTGlzdDogZnVuY3Rpb24gZ2V0Um9sZUxpc3QoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgZ2V0QWxsUm9sZUxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzNi5yb2xlTGlzdCA9IHJlcy5yZXN1bHQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXREYXRhOiBmdW5jdGlvbiBnZXREYXRhKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGdldFByb2Nlc3NOb2RlKHRoaXMucHJvY2Vzc0lkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczcubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIC8vIOi9rOaNom51bGzkuLoiIgogICAgICAgICAgdmFyIHYgPSByZXMucmVzdWx0OwoKICAgICAgICAgIGZvciAodmFyIGF0dHIgaW4gdikgewogICAgICAgICAgICBpZiAodlthdHRyXSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgdlthdHRyXSA9ICIiOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHN0ciA9IEpTT04uc3RyaW5naWZ5KHYpOwogICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHN0cik7CiAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXM3LmRpY3ROb2RlVHlwZS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgdC52YWx1ZSA9IE51bWJlcih0LnZhbHVlKTsKCiAgICAgICAgICAgICAgaWYgKCFlLnRpdGxlICYmIGUudHlwZSA9PSB0LnZhbHVlKSB7CiAgICAgICAgICAgICAgICBlLnRpdGxlID0gdC50aXRsZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpczcuZGF0YSA9IGRhdGE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZW5kZXJDb250ZW50OiBmdW5jdGlvbiByZW5kZXJDb250ZW50KGgsIF9yZWYyKSB7CiAgICAgIHZhciByb290ID0gX3JlZjIucm9vdCwKICAgICAgICAgIG5vZGUgPSBfcmVmMi5ub2RlLAogICAgICAgICAgZGF0YSA9IF9yZWYyLmRhdGE7CiAgICAgIHZhciBjb2xvciA9ICIiLAogICAgICAgICAgd29yZCA9ICIiLAogICAgICAgICAgdGl0bGUgPSBkYXRhLnRpdGxlOwoKICAgICAgaWYgKGRhdGEudHlwZSA9PSAwKSB7CiAgICAgICAgY29sb3IgPSAiIzQ3Y2I4OSI7CiAgICAgICAgd29yZCA9ICLlvIAiOwogICAgICAgIHRpdGxlID0gdGl0bGUgKyAi44CQ6LCB5Y+v5Lul5Y+R6LW344CRIjsKICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT0gMSkgewogICAgICAgIGNvbG9yID0gIiMyZGI3ZjUiOwogICAgICAgIHdvcmQgPSAi5a6hIjsKICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT0gMikgewogICAgICAgIHdvcmQgPSAi57uTIjsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb2xvciA9ICIjZjkwIjsKICAgICAgICB3b3JkID0gIuWFtuS7liI7CiAgICAgIH0KCiAgICAgIHJldHVybiBoKCJzcGFuIiwgW2goInNwYW4iLCBbaCgiQXZhdGFyIiwgewogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBzaXplOiAic21hbGwiCiAgICAgICAgfSwKICAgICAgICBzdHlsZTogewogICAgICAgICAgYmFja2dyb3VuZDogY29sb3IsCiAgICAgICAgICAibWFyZ2luLXJpZ2h0IjogIjVweCIKICAgICAgICB9CiAgICAgIH0sIHdvcmQpLCBoKCJzcGFuIiwgdGl0bGUpXSldKTsKICAgIH0sCiAgICBzZWxlY3RUcmVlOiBmdW5jdGlvbiBzZWxlY3RUcmVlKHYpIHsKICAgICAgaWYgKHYubGVuZ3RoID4gMCkgewogICAgICAgIC8vIOi9rOaNom51bGzkuLoiIgogICAgICAgIGZvciAodmFyIGF0dHIgaW4gdlswXSkgewogICAgICAgICAgaWYgKHZbMF1bYXR0cl0gPT0gbnVsbCkgewogICAgICAgICAgICB2WzBdW2F0dHJdID0gIiI7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgc3RyID0gSlNPTi5zdHJpbmdpZnkodlswXSk7CiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHN0cik7CiAgICAgICAgdGhpcy5lZGl0VGl0bGUgPSBkYXRhLnRpdGxlOyAvLyDlm57mmL7nlKjmiLcKCiAgICAgICAgaWYgKGRhdGEudXNlcnMgJiYgZGF0YS51c2Vycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmNob29zZVVzZXIgPSB0cnVlOwogICAgICAgICAgdGhpcy5zZWxlY3RVc2VycyA9IGRhdGEudXNlcnM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY2hvb3NlVXNlciA9IGZhbHNlOwogICAgICAgICAgdGhpcy5zZWxlY3RVc2VycyA9IFtdOwogICAgICAgIH0gLy8g5Zue5pi+6KeS6ImyCgoKICAgICAgICBpZiAoZGF0YS5yb2xlcyAmJiBkYXRhLnJvbGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMuY2hvb3NlUm9sZSA9IHRydWU7CiAgICAgICAgICB2YXIgcm9sZUlkcyA9IFtdOwogICAgICAgICAgZGF0YS5yb2xlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJvbGVJZHMucHVzaChlLmlkKTsKICAgICAgICAgIH0pOwogICAgICAgICAgZGF0YS5yb2xlcyA9IHJvbGVJZHM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY2hvb3NlUm9sZSA9IGZhbHNlOwogICAgICAgIH0gLy8g5Zue5pi+6YOo6ZeoCgoKICAgICAgICBpZiAoZGF0YS5kZXBhcnRtZW50cyAmJiBkYXRhLmRlcGFydG1lbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMuY2hvb3NlRGVwYXJ0bWVudCA9IHRydWU7CiAgICAgICAgICB2YXIgZGVwYXJ0bWVudElkcyA9IFtdLAogICAgICAgICAgICAgIHRpdGxlID0gIiI7CiAgICAgICAgICBkYXRhLmRlcGFydG1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZGVwYXJ0bWVudElkcy5wdXNoKGUuaWQpOwoKICAgICAgICAgICAgaWYgKHRpdGxlID09ICIiKSB7CiAgICAgICAgICAgICAgdGl0bGUgPSBlLnRpdGxlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRpdGxlID0gdGl0bGUgKyAi44CBIiArIGUudGl0bGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy4kcmVmcy5kZXBUcmVlLnNldERhdGEoZGVwYXJ0bWVudElkcywgdGl0bGUpOwogICAgICAgICAgZGF0YS5kZXBhcnRtZW50SWRzID0gZGVwYXJ0bWVudElkczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jaG9vc2VEZXBhcnRtZW50ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRyZWZzLmRlcFRyZWUuc2V0RGF0YShbXSwgIiIpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5mb3JtID0gZGF0YTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNhbmNlbEVkaXQoKTsKICAgICAgfQogICAgfSwKICAgIGNhbmNlbEVkaXQ6IGZ1bmN0aW9uIGNhbmNlbEVkaXQoKSB7CiAgICAgIHZhciBkYXRhID0gdGhpcy4kcmVmcy50cmVlLmdldFNlbGVjdGVkTm9kZXMoKVswXTsKCiAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgZGF0YS5zZWxlY3RlZCA9IGZhbHNlOwogICAgICB9CgogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgdGhpcy5mb3JtLmlkID0gIiI7CiAgICAgIGRlbGV0ZSB0aGlzLmZvcm0uaWQ7CiAgICAgIHRoaXMuZWRpdFRpdGxlID0gIiI7CiAgICB9LAogICAgaGFuZGVsU3VibWl0OiBmdW5jdGlvbiBoYW5kZWxTdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gdHJ1ZTsgLy8g55So5oi3aWTmlbDmja4KCiAgICAgIHZhciBpZHMgPSBbXTsKICAgICAgdGhpcy5zZWxlY3RVc2Vycy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWRzICs9IGUuaWQgKyAiLCI7CiAgICAgIH0pOwoKICAgICAgaWYgKGlkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgaWRzID0gaWRzLnN1YnN0cmluZygwLCBpZHMubGVuZ3RoIC0gMSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZm9ybS5ub2RlSWQgPSB0aGlzLmZvcm0uaWQ7CgogICAgICBpZiAodGhpcy5jaG9vc2VVc2VyKSB7CiAgICAgICAgaWYgKGlkcyAmJiBpZHMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5mb3JtLnVzZXJJZHMgPSBpZHM7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5jaG9vc2VSb2xlKSB7CiAgICAgICAgaWYgKHRoaXMuZm9ybS5yb2xlcyAmJiB0aGlzLmZvcm0ucm9sZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5mb3JtLnJvbGVJZHMgPSB0aGlzLmZvcm0ucm9sZXM7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5mb3JtLnR5cGUgPT0gMCkgewogICAgICAgIHRoaXMuZm9ybS5ub2RlSWQgPSB0aGlzLnByb2Nlc3NJZDsKICAgICAgICB0aGlzLmZvcm0uYWxsVXNlciA9IHRoaXMuYWxsVXNlcjsKICAgICAgICBlZGl0U3RhcnRVc2VyKHRoaXMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczguc3VibWl0TG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICBfdGhpczguJE1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5YqfIik7CgogICAgICAgICAgICBfdGhpczguZ2V0RGF0YSgpOwoKICAgICAgICAgICAgX3RoaXM4LiRlbWl0KCJzdWJtaXRlZCIsIHRydWUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGVkaXROb2RlVXNlcih0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgX3RoaXM4LnN1Ym1pdExvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgX3RoaXM4LiRNZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKnyIpOwoKICAgICAgICAgICAgX3RoaXM4LmdldERhdGEoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNsaWNrUm9sZTogZnVuY3Rpb24gY2xpY2tSb2xlKHYpIHsKICAgICAgdGhpcy5jaG9vc2VSb2xlID0gdjsKICAgIH0sCiAgICBjbGlja1VzZXI6IGZ1bmN0aW9uIGNsaWNrVXNlcih2KSB7CiAgICAgIHRoaXMuY2hvb3NlVXNlciA9IHY7CiAgICB9LAogICAgY2xpY2tEZXBhcnRtZW50OiBmdW5jdGlvbiBjbGlja0RlcGFydG1lbnQodikgewogICAgICB0aGlzLmNob29zZURlcGFydG1lbnQgPSB2OwogICAgfSwKICAgIGhhbmRsZVNlbGVjdERlcFRyZWU6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdERlcFRyZWUodikgewogICAgICB0aGlzLmZvcm0uZGVwYXJ0bWVudElkcyA9IHY7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCJjbG9zZSIsIHRydWUpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwWA,SACAA,cADA,EAEAC,aAFA,EAGAC,YAHA,EAIAC,UAJA,EAKAC,eALA,EAMAC,eANA,EAOAC,iBAPA,QAQA,gBARA;AASA;AACA;AACA;AACA;EACAC,yBADA;EAEAC;IACAC,sBADA;IAEAC;EAFA,CAFA;EAMAC;IACAC;EADA,CANA;EASAC,IATA,kBASA;IACA;MACAC,cADA;MACA;MACAC,kBAFA;MAGAF,QAHA;MAIAG,aAJA;MAKAC,eALA;MAMAC,WANA;MAOAC,iBAPA;MAQAC,aARA;MASAC;QACAC,aADA;QAEAC,iBAFA;QAGAC;MAHA,CATA;MAcAC;QACAH;UAAAI;UAAAC;UAAAC;QAAA,EADA;QAEAL,gBACA;UAAAG;UAAAC;UAAAC;QAAA,CADA;MAFA,CAdA;MAoBAC,iBApBA;MAqBAC,aArBA;MAsBAC,YAtBA;MAuBAC;QACA;QACAC,SAFA;QAGAC,WAHA;QAIAC,UAJA;QAKAC,SALA;QAMAC,iBANA;QAOAC,sBAPA;QAQAC;MARA,CAvBA;MAiCAC,YAjCA;MAkCAC,oBAlCA;MAkCA;MACAC,iBAnCA;MAoCAC,iBApCA;MAqCAC,uBArCA;MAsCAC,aAtCA;MAuCAC,UAvCA;MAwCAC,gBAxCA;MAyCAC,eAzCA;MA0CAC;IA1CA;EA4CA,CAtDA;EAuDAC;IACAC,IADA,kBACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAnBA;IAoBAC,eApBA,6BAoBA;MAAA;;MACAC;QACA;UACA;;UACA;QACA;MACA,CALA;MAMAA;QACA;UACA;QACA;MACA,CAJA;MAKAA;QACA;UACA;QACA;MACA,CAJA;IAKA,CArCA;IAsCAC,gBAtCA,4BAsCAC,CAtCA,QAsCA;MAAA;;MAAA;MAAA;MAAA;MACA;;MACA;QACAC;MACA,CAFA,MAEA;QACAA;MACA;;MACA,SACA,MADA,EAEA;QACAC;UACAC,uBADA;UAEAC;QAFA,CADA;QAKAC;UACAC;YACA;UACA;QAHA;MALA,CAFA,EAaA,CACAN,WACAA;QACA5C;UACAwB,UADA;UAEA2B;QAFA,CADA;QAKAL;UACA,qBADA;UAEA;QAFA;MALA,EADA,EAWAF,qBAXA,EADA,CAbA;IA6BA,CA1EA;IA2EAQ,oBA3EA,kCA2EA;MAAA;;MACA3D;QACA;UACA4D;YACA;cACAC;cACAA;YACA;;YACA;cACAA;cACAA;YACA;UACA,CATA;UAUA;QACA;MACA,CAdA;IAeA,CA3FA;IA4FAC,YA5FA,wBA4FAC,IA5FA,EA4FAC,QA5FA,EA4FA;MACA/D;QACA;UACA2D;YACA;cACAC;cACAA;YACA;;YACA;cACAA;cACAA;YACA;UACA,CATA;UAUAG;QACA;MACA,CAdA;IAeA,CA5GA;IA6GAC,SA7GA,uBA6GA;MAAA;;MACA;MACA;QACA;QACA/D;UAAA2B;QAAA;UACA;;UACA;YACA+B;cACA;gBACAC;gBACAA;cACA;YACA,CALA;YAMA;UACA;QACA,CAXA;MAYA,CAdA,MAcA;QACA;MACA;IACA,CAhIA;IAiIAK,aAjIA,yBAiIAC,CAjIA,EAiIA;MACA;QACA;QACA;UACA;YACAA;UACA;QACA;;QACA;QACA;;QACA;UACA;UACA;QACA;;QACA;QACA;QACA;MACA;IACA,CAnJA;IAoJAC,cApJA,4BAoJA;MACA;MACA;MACA;IACA,CAxJA;IAyJAC,gBAzJA,8BAyJA;MAAA;;MACA;QACA;UACAtE;YACA;cACA;;cACA;YACA;UACA,CALA;QAMA;MACA,CATA;IAUA,CApKA;IAqKAuE,WArKA,yBAqKA;MAAA;;MACAC;QACA;UACA;QACA;MACA,CAJA;IAKA,CA3KA;IA4KAC,OA5KA,qBA4KA;MAAA;;MACA;MACA5E;QACA;;QACA;UACA;UACA;;UACA;YACA;cACAuE;YACA;UACA;;UACA;UACA;UACA1D;YACA;cACAgE;;cACA;gBACAZ;cACA;YACA,CALA;UAMA,CAPA;UAQA;QACA;MACA,CAtBA;IAuBA,CArMA;IAsMAa,aAtMA,yBAsMAvB,CAtMA,SAsMA;MAAA;MAAA;MAAA;MACA;MAAA,IACAwB,SADA;MAAA,IAEA9C,kBAFA;;MAGA;QACA+C;QACAD;QACA9C;MACA,CAJA,MAIA;QACA+C;QACAD;MACA,CAHA,MAGA;QACAA;MACA,CAFA,MAEA;QACAC;QACAD;MACA;;MACA,kBACAxB,WACAA,EACA,QADA,EAEA;QACA5C;UACAmD;QADA,CADA;QAIAL;UACAwB,iBADA;UAEA;QAFA;MAJA,CAFA,EAWAF,IAXA,CADA,EAcAxB,gBAdA,EADA;IAkBA,CAzOA;IA0OA2B,UA1OA,sBA0OAX,CA1OA,EA0OA;MACA;QACA;QACA;UACA;YACAA;UACA;QACA;;QACA;QACA;QACA,4BATA,CAUA;;QACA;UACA;UACA;QACA,CAHA,MAGA;UACA;UACA;QACA,CAjBA,CAkBA;;;QACA;UACA;UACA;UACA1D;YACAsE;UACA,CAFA;UAGAtE;QACA,CAPA,MAOA;UACA;QACA,CA5BA,CA6BA;;;QACA;UACA;UACA;UAAA,IACAoB,UADA;UAEApB;YACAwB;;YACA;cACAJ;YACA,CAFA,MAEA;cACAA;YACA;UACA,CAPA;UAQA;UACApB;QACA,CAdA,MAcA;UACA;UACA;QACA;;QACA;MACA,CAjDA,MAiDA;QACA;MACA;IACA,CA/RA;IAgSAuE,UAhSA,wBAgSA;MACA;;MACA;QACAvE;MACA;;MACA;MACA;MACA;MACA;IACA,CAzSA;IA0SAwE,YA1SA,0BA0SA;MAAA;;MACA,0BADA,CAEA;;MACA;MACA;QACAC;MACA,CAFA;;MAGA;QACAA;MACA;;MACA;;MACA;QACA;UACA;QACA;MACA;;MACA;QACA;UACA;QACA;MACA;;MACA;QACA;QACA;QACArF;UACA;;UACA;YACA;;YACA;;YACA;UACA;QACA,CAPA;MAQA,CAXA,MAWA;QACAC;UACA;;UACA;YACA;;YACA;UACA;QACA,CANA;MAOA;IACA,CAnVA;IAoVAqF,SApVA,qBAoVAhB,CApVA,EAoVA;MACA;IACA,CAtVA;IAuVAiB,SAvVA,qBAuVAjB,CAvVA,EAuVA;MACA;IACA,CAzVA;IA0VAkB,eA1VA,2BA0VAlB,CA1VA,EA0VA;MACA;IACA,CA5VA;IA6VAmB,mBA7VA,+BA6VAnB,CA7VA,EA6VA;MACA;IACA,CA/VA;IAgWAoB,KAhWA,mBAgWA;MACA;IACA;EAlWA,CAvDA;EA2ZAC,OA3ZA,qBA2ZA;IACA;EACA;AA7ZA","names":["getProcessNode","editStartUser","editNodeUser","updateInfo","initActCategory","loadActCategory","searchActCategory","name","components","userChoose","departmentTreeChoose","props","nodeEditData","data","loading","nodeLoading","editTitle","selectUsers","dataCat","catLoading","searchKey","basicForm","routeName","businessTable","description","formValidate","required","message","trigger","categoryTitle","dictTable","dictForm","form","title","content","type","roles","departmentIds","chooseDepHeader","customUser","roleList","submitLoading","chooseRole","chooseUser","chooseDepartment","allUser","current","dictNodeType","processName","processId","methods","init","getDictDataType","getDictDataByType","renderCatContent","h","icon","style","display","cursor","on","click","size","initCategoryTreeData","res","e","loadDataTree","item","callback","searchCat","selectCatTree","v","clearSelectCat","handelSubmitEdit","getRoleList","getAllRoleList","getData","t","renderContent","word","color","background","selectTree","roleIds","cancelEdit","handelSubmit","ids","clickRole","clickUser","clickDepartment","handleSelectDepTree","close","mounted"],"sourceRoot":"src/views/activiti/process-manage","sources":["processNodeEdit.vue"],"sourcesContent":["<style lang=\"less\">\r\n@import \"@/styles/tree-common.less\";\r\n@import \"@/styles/single-common.less\";\r\n@import \"./processManage.less\";\r\n</style>\r\n<template>\r\n  <div class=\"search\">\r\n    <Card style=\"min-height: 600px\">\r\n      <div slot=\"title\">\r\n        <div class=\"edit-head\">\r\n          <a @click=\"close\" class=\"back-title\">\r\n            <Icon type=\"ios-arrow-back\" />返回\r\n          </a>\r\n          <div class=\"head-name\">{{ processName }} 流程配置</div>\r\n          <span></span>\r\n          <a @click=\"close\" class=\"window-close\">\r\n            <Icon type=\"ios-close\" size=\"31\" class=\"ivu-icon-ios-close\" />\r\n          </a>\r\n        </div>\r\n      </div>\r\n      <div\r\n        style=\"display: flex; justify-content: center; margin: 10px 0 30px 0\"\r\n      >\r\n        <Steps :current=\"current\" style=\"width: 400px\">\r\n          <Step title=\"基本配置\"></Step>\r\n          <Step title=\"节点审批人配置\"></Step>\r\n        </Steps>\r\n      </div>\r\n      <Row type=\"flex\" justify=\"center\" v-show=\"current == 0\">\r\n        <Col :xs=\"24\" :md=\"24\" :lg=\"16\" :xl=\"9\">\r\n          <Form\r\n            ref=\"basicForm\"\r\n            :model=\"basicForm\"\r\n            label-position=\"left\"\r\n            :label-width=\"110\"\r\n            :rules=\"formValidate\"\r\n          >\r\n            <FormItem label=\"关联表单路由\" prop=\"routeName\">\r\n              <Select\r\n                v-model=\"basicForm.routeName\"\r\n                placeholder=\"请选择关联业务表单前端路由名\"\r\n                clearable\r\n                @on-change=\"handelSubmitEdit\"\r\n              >\r\n                <Option\r\n                  v-for=\"(item, i) in dictForm\"\r\n                  :key=\"i\"\r\n                  :value=\"item.value\"\r\n                  :label=\"item.title\"\r\n                >\r\n                  <span style=\"margin-right: 10px\">{{ item.title }}</span>\r\n                  <span style=\"color: #ccc\">{{ item.value }}</span>\r\n                </Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem label=\"关联业务表\" prop=\"businessTable\">\r\n              <Select\r\n                v-model=\"basicForm.businessTable\"\r\n                placeholder=\"请选择关联数据库业务表\"\r\n                clearable\r\n                @on-change=\"handelSubmitEdit\"\r\n              >\r\n                <Option\r\n                  v-for=\"(item, i) in dictTable\"\r\n                  :key=\"i\"\r\n                  :value=\"item.value\"\r\n                  :label=\"item.title\"\r\n                >\r\n                  <span style=\"margin-right: 10px\">{{ item.title }}</span>\r\n                  <span style=\"color: #ccc\">{{ item.value }}</span>\r\n                </Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem label=\"流程分类\" class=\"form-noheight\">\r\n              <div style=\"display: flex\">\r\n                <Input\r\n                  v-model=\"categoryTitle\"\r\n                  readonly\r\n                  clearable\r\n                  @on-clear=\"clearSelectCat\"\r\n                  style=\"margin-right: 10px\"\r\n                />\r\n                <Poptip\r\n                  trigger=\"click\"\r\n                  placement=\"right\"\r\n                  title=\"选择类别\"\r\n                  width=\"250\"\r\n                >\r\n                  <Button icon=\"md-list\">选择分类</Button>\r\n                  <div slot=\"content\">\r\n                    <Input\r\n                      v-model=\"searchKey\"\r\n                      suffix=\"ios-search\"\r\n                      @on-change=\"searchCat\"\r\n                      placeholder=\"输入分类名搜索\"\r\n                      clearable\r\n                    />\r\n                    <div class=\"tree-list\">\r\n                      <Tree\r\n                        :data=\"dataCat\"\r\n                        :load-data=\"loadDataTree\"\r\n                        :render=\"renderCatContent\"\r\n                      ></Tree>\r\n                      <Spin size=\"large\" fix v-if=\"catLoading\"></Spin>\r\n                    </div>\r\n                  </div>\r\n                </Poptip>\r\n              </div>\r\n            </FormItem>\r\n            <FormItem label=\"备注描述\" prop=\"description\">\r\n              <Input\r\n                v-model=\"basicForm.description\"\r\n                type=\"textarea\"\r\n                :rows=\"4\"\r\n                @on-blur=\"handelSubmitEdit\"\r\n              />\r\n            </FormItem>\r\n            <FormItem class=\"br\">\r\n              <Button type=\"warning\" @click=\"current = 1\">\r\n                下一步\r\n                <Icon type=\"ios-arrow-forward\" />\r\n              </Button>\r\n              <Button @click=\"close\">关闭</Button>\r\n            </FormItem>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n      <Row type=\"flex\" justify=\"start\" v-if=\"current == 1\">\r\n        <Col :md=\"8\" :lg=\"8\" :xl=\"6\">\r\n          <Alert show-icon>\r\n            当前选择编辑：\r\n            <span class=\"select-title\">{{ editTitle }}</span>\r\n            <a class=\"select-clear\" v-if=\"form.id\" @click=\"cancelEdit\"\r\n              >取消选择</a\r\n            >\r\n          </Alert>\r\n          <div class=\"tree-bar\">\r\n            <Tree\r\n              ref=\"tree\"\r\n              :data=\"data\"\r\n              :render=\"renderContent\"\r\n              @on-select-change=\"selectTree\"\r\n            ></Tree>\r\n            <Spin size=\"large\" fix v-if=\"loading\"></Spin>\r\n          </div>\r\n        </Col>\r\n        <Col :md=\"15\" :lg=\"13\" :xl=\"10\" style=\"margin-left: 10px\">\r\n          <Alert type=\"warning\" show-icon style=\"margin-left: 1vw\"\r\n            >温馨提示：若流程运行至未分配审批人员的审批节点时，流程将自动提前结束</Alert\r\n          >\r\n          <Form\r\n            ref=\"form\"\r\n            :model=\"form\"\r\n            :label-width=\"90\"\r\n            style=\"position: relative\"\r\n          >\r\n            <FormItem label=\"节点名称\" prop=\"title\">\r\n              {{ form.title }}\r\n              <Tooltip\r\n                content=\"配置可看到该流程的所属用户，默认所有人可发起\"\r\n                placement=\"right\"\r\n                transfer\r\n                max-width=\"280\"\r\n                style=\"display: inline-block !important\"\r\n              >\r\n                <Icon\r\n                  type=\"md-help-circle\"\r\n                  size=\"20\"\r\n                  color=\"#c5c5c5\"\r\n                  style=\"margin-left: 5px; cursor: pointer\"\r\n                  v-show=\"form.type == 0\"\r\n                />\r\n              </Tooltip>\r\n            </FormItem>\r\n            <FormItem label=\"节点类型\" prop=\"type\">\r\n              <Select v-model=\"form.type\" disabled style=\"width: 300px\">\r\n                <Option\r\n                  v-for=\"(item, i) in dictNodeType\"\r\n                  :key=\"i\"\r\n                  :value=\"item.value\"\r\n                  >{{ item.title }}</Option\r\n                >\r\n              </Select>\r\n            </FormItem>\r\n            <div v-show=\"form.type == 0\">\r\n              <FormItem label=\"可发起人员\">\r\n                <Checkbox v-model=\"allUser\">\r\n                  <Icon type=\"md-contacts\" style=\"margin: 0 2px 0 0\"></Icon>\r\n                  <span>所有人</span>\r\n                </Checkbox>\r\n                <Checkbox\r\n                  v-model=\"chooseRole\"\r\n                  @on-change=\"clickRole\"\r\n                  :disabled=\"allUser\"\r\n                >\r\n                  <Icon\r\n                    type=\"md-people\"\r\n                    size=\"14\"\r\n                    style=\"margin: 0 2px 0 0\"\r\n                  ></Icon>\r\n                  <span>指定角色</span>\r\n                </Checkbox>\r\n                <Checkbox\r\n                  v-model=\"chooseDepartment\"\r\n                  @on-change=\"clickDepartment\"\r\n                  :disabled=\"allUser\"\r\n                >\r\n                  <Icon type=\"ios-people\" style=\"margin: 0 2px 0 0\"></Icon>\r\n                  <span>指定部门</span>\r\n                </Checkbox>\r\n                <Checkbox\r\n                  v-model=\"chooseUser\"\r\n                  @on-change=\"clickUser\"\r\n                  :disabled=\"allUser\"\r\n                >\r\n                  <Icon type=\"md-person\" style=\"margin: 0 2px 0 0\"></Icon>\r\n                  <span>指定人员</span>\r\n                </Checkbox>\r\n              </FormItem>\r\n            </div>\r\n            <div v-show=\"form.type == 1\">\r\n              <FormItem label=\"可审批人员\">\r\n                <Checkbox\r\n                  v-model=\"chooseRole\"\r\n                  @on-change=\"clickRole\"\r\n                  :disabled=\"form.customUser\"\r\n                >\r\n                  <Icon\r\n                    type=\"md-people\"\r\n                    size=\"14\"\r\n                    style=\"margin: 0 2px 0 0\"\r\n                  ></Icon>\r\n                  <span>指定角色</span>\r\n                </Checkbox>\r\n                <Checkbox\r\n                  v-model=\"chooseDepartment\"\r\n                  @on-change=\"clickDepartment\"\r\n                  :disabled=\"form.customUser\"\r\n                >\r\n                  <Icon type=\"ios-people\" style=\"margin: 0 2px 0 0\"></Icon>\r\n                  <span>指定部门负责人</span>\r\n                </Checkbox>\r\n                <Checkbox\r\n                  v-model=\"chooseUser\"\r\n                  @on-change=\"clickUser\"\r\n                  :disabled=\"form.customUser\"\r\n                >\r\n                  <Icon type=\"md-person\" style=\"margin: 0 2px 0 0\"></Icon>\r\n                  <span>指定人员</span>\r\n                </Checkbox>\r\n                <Checkbox v-model=\"form.customUser\">\r\n                  <Icon type=\"md-contacts\" style=\"margin: 0 2px 0 0\"></Icon>\r\n                  <span>审批人自选</span>\r\n                  <Tooltip\r\n                    content=\"审批人任意自选用户，请勿在网关后设置\"\r\n                    placement=\"right\"\r\n                    transfer\r\n                    max-width=\"280\"\r\n                    style=\"display: inline-block !important\"\r\n                  >\r\n                    <Icon\r\n                      type=\"md-help-circle\"\r\n                      size=\"20\"\r\n                      color=\"#c5c5c5\"\r\n                      style=\"margin-left: 10px; cursor: pointer\"\r\n                    />\r\n                  </Tooltip>\r\n                </Checkbox>\r\n                <Checkbox\r\n                  v-model=\"form.chooseDepHeader\"\r\n                  :disabled=\"form.customUser\"\r\n                >\r\n                  <Icon type=\"md-person\" style=\"margin: 0 2px 0 0\"></Icon>\r\n                  <span>连续多级部门负责人</span>\r\n                  <Tooltip\r\n                    content=\"自动获取发起人向上的各级负责人依次审批\"\r\n                    placement=\"right\"\r\n                    transfer\r\n                    max-width=\"280\"\r\n                    style=\"display: inline-block !important\"\r\n                  >\r\n                    <Icon\r\n                      type=\"md-help-circle\"\r\n                      size=\"20\"\r\n                      color=\"#c5c5c5\"\r\n                      style=\"margin-left: 10px; cursor: pointer\"\r\n                    />\r\n                  </Tooltip>\r\n                </Checkbox>\r\n              </FormItem>\r\n            </div>\r\n            <FormItem\r\n              label=\"选择角色\"\r\n              v-show=\"\r\n                chooseRole &&\r\n                ((form.type == 0 && !allUser) ||\r\n                  (form.type == 1 && !form.customUser))\r\n              \"\r\n            >\r\n              <Select v-model=\"form.roles\" multiple>\r\n                <Option\r\n                  v-for=\"item in roleList\"\r\n                  :value=\"item.id\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                >\r\n                  <span style=\"margin-right: 10px\">{{ item.name }}</span>\r\n                  <span style=\"color: #ccc\">{{ item.description }}</span>\r\n                </Option>\r\n              </Select>\r\n            </FormItem>\r\n            <div\r\n              v-show=\"\r\n                chooseDepartment &&\r\n                ((form.type == 0 && !allUser) ||\r\n                  (form.type == 1 && !form.customUser))\r\n              \"\r\n            >\r\n              <FormItem label=\"选择部门\" class=\"form-noheight\">\r\n                <department-tree-choose\r\n                  multiple\r\n                  width=\"250px\"\r\n                  @on-change=\"handleSelectDepTree\"\r\n                  ref=\"depTree\"\r\n                ></department-tree-choose>\r\n              </FormItem>\r\n            </div>\r\n            <div\r\n              v-show=\"\r\n                chooseUser &&\r\n                ((form.type == 0 && !allUser) ||\r\n                  (form.type == 1 && !form.customUser))\r\n              \"\r\n            >\r\n              <FormItem label=\"选择用户\">\r\n                <user-choose v-model=\"selectUsers\"></user-choose>\r\n              </FormItem>\r\n            </div>\r\n            <FormItem class=\"br\">\r\n              <Button\r\n                type=\"primary\"\r\n                :loading=\"submitLoading\"\r\n                @click=\"handelSubmit\"\r\n                :disabled=\"form.type != 0 && form.type != 1\"\r\n                >保存并提交</Button\r\n              >\r\n              <Button type=\"warning\" icon=\"ios-arrow-back\" @click=\"current = 0\"\r\n                >上一步</Button\r\n              >\r\n              <Button @click=\"close\">关闭</Button>\r\n            </FormItem>\r\n            <Spin size=\"large\" fix v-if=\"nodeLoading\"></Spin>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getProcessNode,\r\n  editStartUser,\r\n  editNodeUser,\r\n  updateInfo,\r\n  initActCategory,\r\n  loadActCategory,\r\n  searchActCategory,\r\n} from \"@/api/activiti\";\r\nimport { getAllRoleList, getDictDataByType } from \"@/api/index\";\r\nimport userChoose from \"@/views/my-components/xboot/user-choose\";\r\nimport departmentTreeChoose from \"@/views/my-components/xboot/department-tree-choose\";\r\nexport default {\r\n  name: \"process_node_edit\",\r\n  components: {\r\n    userChoose,\r\n    departmentTreeChoose,\r\n  },\r\n  props: {\r\n    nodeEditData: Object,\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false, // 表单加载状态\r\n      nodeLoading: false,\r\n      data: [],\r\n      editTitle: \"\",\r\n      selectUsers: [],\r\n      dataCat: [],\r\n      catLoading: false,\r\n      searchKey: \"\",\r\n      basicForm: {\r\n        routeName: \"\",\r\n        businessTable: \"\",\r\n        description: \"\",\r\n      },\r\n      formValidate: {\r\n        routeName: [{ required: true, message: \"不能为空\", trigger: \"change\" }],\r\n        businessTable: [\r\n          { required: true, message: \"不能为空\", trigger: \"change\" },\r\n        ],\r\n      },\r\n      categoryTitle: \"\",\r\n      dictTable: [],\r\n      dictForm: [],\r\n      form: {\r\n        // 添加或编辑表单对象初始化数据\r\n        title: \"\",\r\n        content: \"\",\r\n        type: null,\r\n        roles: [],\r\n        departmentIds: [],\r\n        chooseDepHeader: false,\r\n        customUser: false,\r\n      },\r\n      roleList: [],\r\n      submitLoading: false, // 添加或编辑提交状态\r\n      chooseRole: false,\r\n      chooseUser: false,\r\n      chooseDepartment: false,\r\n      allUser: true,\r\n      current: 0,\r\n      dictNodeType: [],\r\n      processName: \"\",\r\n      processId: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getDictDataType();\r\n      this.getRoleList();\r\n      this.initCategoryTreeData();\r\n      this.processId = this.nodeEditData.id;\r\n      this.processName = this.nodeEditData.name;\r\n      this.basicForm.id = this.nodeEditData.id;\r\n      this.basicForm.routeName = this.nodeEditData.routeName;\r\n      this.basicForm.businessTable = this.nodeEditData.businessTable;\r\n      this.basicForm.description = this.nodeEditData.description;\r\n      this.basicForm.categoryId = this.nodeEditData.categoryId;\r\n      this.categoryTitle = this.nodeEditData.categoryTitle;\r\n      let allUser = this.nodeEditData.allUser + \"\";\r\n      if (allUser == \"false\") {\r\n        this.allUser = false;\r\n      } else {\r\n        this.allUser = true;\r\n      }\r\n    },\r\n    getDictDataType() {\r\n      getDictDataByType(\"process_node_type\").then((res) => {\r\n        if (res.success) {\r\n          this.dictNodeType = res.result;\r\n          this.getData();\r\n        }\r\n      });\r\n      getDictDataByType(\"business_table\").then((res) => {\r\n        if (res.success) {\r\n          this.dictTable = res.result;\r\n        }\r\n      });\r\n      getDictDataByType(\"business_form\").then((res) => {\r\n        if (res.success) {\r\n          this.dictForm = res.result;\r\n        }\r\n      });\r\n    },\r\n    renderCatContent(h, { root, node, data }) {\r\n      let icon = \"\";\r\n      if (data.type == \"0\") {\r\n        icon = \"md-folder-open\";\r\n      } else if (data.type == \"1\") {\r\n        icon = \"ios-bookmark-outline\";\r\n      }\r\n      return h(\r\n        \"span\",\r\n        {\r\n          style: {\r\n            display: \"inline-block\",\r\n            cursor: \"pointer\",\r\n          },\r\n          on: {\r\n            click: () => {\r\n              this.selectCatTree(data);\r\n            },\r\n          },\r\n        },\r\n        [\r\n          h(\"span\", [\r\n            h(\"Icon\", {\r\n              props: {\r\n                type: icon,\r\n                size: \"16\",\r\n              },\r\n              style: {\r\n                \"margin-right\": \"8px\",\r\n                \"margin-bottom\": \"3px\",\r\n              },\r\n            }),\r\n            h(\"span\", data.title),\r\n          ]),\r\n        ]\r\n      );\r\n    },\r\n    initCategoryTreeData() {\r\n      initActCategory().then((res) => {\r\n        if (res.success) {\r\n          res.result.forEach(function (e) {\r\n            if (e.isParent) {\r\n              e.loading = false;\r\n              e.children = [];\r\n            }\r\n            if (e.status == -1) {\r\n              e.title = \"[已禁用] \" + e.title;\r\n              e.disabled = true;\r\n            }\r\n          });\r\n          this.dataCat = res.result;\r\n        }\r\n      });\r\n    },\r\n    loadDataTree(item, callback) {\r\n      loadActCategory(item.id).then((res) => {\r\n        if (res.success) {\r\n          res.result.forEach(function (e) {\r\n            if (e.isParent) {\r\n              e.loading = false;\r\n              e.children = [];\r\n            }\r\n            if (e.status == -1) {\r\n              e.title = \"[已禁用] \" + e.title;\r\n              e.disabled = true;\r\n            }\r\n          });\r\n          callback(res.result);\r\n        }\r\n      });\r\n    },\r\n    searchCat() {\r\n      // 搜索部门\r\n      if (this.searchKey) {\r\n        this.catLoading = true;\r\n        searchActCategory({ title: this.searchKey }).then((res) => {\r\n          this.catLoading = false;\r\n          if (res.success) {\r\n            res.result.forEach(function (e) {\r\n              if (e.status == -1) {\r\n                e.title = \"[已禁用] \" + e.title;\r\n                e.disabled = true;\r\n              }\r\n            });\r\n            this.dataCat = res.result;\r\n          }\r\n        });\r\n      } else {\r\n        this.initCategoryTreeData();\r\n      }\r\n    },\r\n    selectCatTree(v) {\r\n      if (v) {\r\n        // 转换null为\"\"\r\n        for (let attr in v) {\r\n          if (v[attr] == null) {\r\n            v[attr] = \"\";\r\n          }\r\n        }\r\n        let str = JSON.stringify(v);\r\n        let data = JSON.parse(str);\r\n        if (data.type == 0) {\r\n          this.$Message.warning(\"请选择一个类别\");\r\n          return;\r\n        }\r\n        this.basicForm.categoryId = data.id;\r\n        this.categoryTitle = data.title;\r\n        this.handelSubmitEdit();\r\n      }\r\n    },\r\n    clearSelectCat() {\r\n      this.basicForm.categoryId = \"\";\r\n      this.categoryTitle = \"\";\r\n      this.handelSubmitEdit();\r\n    },\r\n    handelSubmitEdit() {\r\n      this.$refs.basicForm.validate((valid) => {\r\n        if (valid) {\r\n          updateInfo(this.basicForm).then((res) => {\r\n            if (res.success) {\r\n              this.$Message.success(\"操作成功\");\r\n              this.$emit(\"submited\", true);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    getRoleList() {\r\n      getAllRoleList().then((res) => {\r\n        if (res.success) {\r\n          this.roleList = res.result;\r\n        }\r\n      });\r\n    },\r\n    getData() {\r\n      this.loading = true;\r\n      getProcessNode(this.processId).then((res) => {\r\n        this.loading = false;\r\n        if (res.success) {\r\n          // 转换null为\"\"\r\n          let v = res.result;\r\n          for (let attr in v) {\r\n            if (v[attr] == null) {\r\n              v[attr] = \"\";\r\n            }\r\n          }\r\n          let str = JSON.stringify(v);\r\n          let data = JSON.parse(str);\r\n          data.forEach((e) => {\r\n            this.dictNodeType.forEach((t) => {\r\n              t.value = Number(t.value);\r\n              if (!e.title && e.type == t.value) {\r\n                e.title = t.title;\r\n              }\r\n            });\r\n          });\r\n          this.data = data;\r\n        }\r\n      });\r\n    },\r\n    renderContent(h, { root, node, data }) {\r\n      let color = \"\",\r\n        word = \"\",\r\n        title = data.title;\r\n      if (data.type == 0) {\r\n        color = \"#47cb89\";\r\n        word = \"开\";\r\n        title = title + \"【谁可以发起】\";\r\n      } else if (data.type == 1) {\r\n        color = \"#2db7f5\";\r\n        word = \"审\";\r\n      } else if (data.type == 2) {\r\n        word = \"结\";\r\n      } else {\r\n        color = \"#f90\";\r\n        word = \"其他\";\r\n      }\r\n      return h(\"span\", [\r\n        h(\"span\", [\r\n          h(\r\n            \"Avatar\",\r\n            {\r\n              props: {\r\n                size: \"small\",\r\n              },\r\n              style: {\r\n                background: color,\r\n                \"margin-right\": \"5px\",\r\n              },\r\n            },\r\n            word\r\n          ),\r\n          h(\"span\", title),\r\n        ]),\r\n      ]);\r\n    },\r\n    selectTree(v) {\r\n      if (v.length > 0) {\r\n        // 转换null为\"\"\r\n        for (let attr in v[0]) {\r\n          if (v[0][attr] == null) {\r\n            v[0][attr] = \"\";\r\n          }\r\n        }\r\n        let str = JSON.stringify(v[0]);\r\n        let data = JSON.parse(str);\r\n        this.editTitle = data.title;\r\n        // 回显用户\r\n        if (data.users && data.users.length > 0) {\r\n          this.chooseUser = true;\r\n          this.selectUsers = data.users;\r\n        } else {\r\n          this.chooseUser = false;\r\n          this.selectUsers = [];\r\n        }\r\n        // 回显角色\r\n        if (data.roles && data.roles.length > 0) {\r\n          this.chooseRole = true;\r\n          let roleIds = [];\r\n          data.roles.forEach((e) => {\r\n            roleIds.push(e.id);\r\n          });\r\n          data.roles = roleIds;\r\n        } else {\r\n          this.chooseRole = false;\r\n        }\r\n        // 回显部门\r\n        if (data.departments && data.departments.length > 0) {\r\n          this.chooseDepartment = true;\r\n          let departmentIds = [],\r\n            title = \"\";\r\n          data.departments.forEach((e) => {\r\n            departmentIds.push(e.id);\r\n            if (title == \"\") {\r\n              title = e.title;\r\n            } else {\r\n              title = title + \"、\" + e.title;\r\n            }\r\n          });\r\n          this.$refs.depTree.setData(departmentIds, title);\r\n          data.departmentIds = departmentIds;\r\n        } else {\r\n          this.chooseDepartment = false;\r\n          this.$refs.depTree.setData([], \"\");\r\n        }\r\n        this.form = data;\r\n      } else {\r\n        this.cancelEdit();\r\n      }\r\n    },\r\n    cancelEdit() {\r\n      let data = this.$refs.tree.getSelectedNodes()[0];\r\n      if (data) {\r\n        data.selected = false;\r\n      }\r\n      this.$refs.form.resetFields();\r\n      this.form.id = \"\";\r\n      delete this.form.id;\r\n      this.editTitle = \"\";\r\n    },\r\n    handelSubmit() {\r\n      this.submitLoading = true;\r\n      // 用户id数据\r\n      let ids = [];\r\n      this.selectUsers.forEach((e) => {\r\n        ids += e.id + \",\";\r\n      });\r\n      if (ids.length > 0) {\r\n        ids = ids.substring(0, ids.length - 1);\r\n      }\r\n      this.form.nodeId = this.form.id;\r\n      if (this.chooseUser) {\r\n        if (ids && ids.length > 0) {\r\n          this.form.userIds = ids;\r\n        }\r\n      }\r\n      if (this.chooseRole) {\r\n        if (this.form.roles && this.form.roles.length > 0) {\r\n          this.form.roleIds = this.form.roles;\r\n        }\r\n      }\r\n      if (this.form.type == 0) {\r\n        this.form.nodeId = this.processId;\r\n        this.form.allUser = this.allUser;\r\n        editStartUser(this.form).then((res) => {\r\n          this.submitLoading = false;\r\n          if (res.success) {\r\n            this.$Message.success(\"操作成功\");\r\n            this.getData();\r\n            this.$emit(\"submited\", true);\r\n          }\r\n        });\r\n      } else {\r\n        editNodeUser(this.form).then((res) => {\r\n          this.submitLoading = false;\r\n          if (res.success) {\r\n            this.$Message.success(\"操作成功\");\r\n            this.getData();\r\n          }\r\n        });\r\n      }\r\n    },\r\n    clickRole(v) {\r\n      this.chooseRole = v;\r\n    },\r\n    clickUser(v) {\r\n      this.chooseUser = v;\r\n    },\r\n    clickDepartment(v) {\r\n      this.chooseDepartment = v;\r\n    },\r\n    handleSelectDepTree(v) {\r\n      this.form.departmentIds = v;\r\n    },\r\n    close() {\r\n      this.$emit(\"close\", true);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>"]}]}